======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2016-10-19T04:48:23Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-11-05T10:03:25Z</b><br><b>id : 500A000000VX0IfIAL</b><br>======================<br><br><b><font size=15>
제목  : [장애문의]hba Abort command issued
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>서버 3대에서 비슷한 시간대에 아래와 같은 로그가 발생 하였습니다.<br><br>Oct 15 08:59:40 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 15 08:59:40 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-8009:3: DEVICE RESET ISSUED nexus=3:0:0 cmd=ffff8848839f44c0.<br>Oct 15 08:59:40 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-800e:3: DEVICE RESET SUCCEEDED nexus:3:0:0 cmd=ffff8848839f44c0.<br>Oct 15 08:59:50 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 15 08:59:50 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-8009:3: TARGET RESET ISSUED nexus=3:0:0 cmd=ffff8848839f44c0.<br>Oct 15 08:59:50 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-800e:3: TARGET RESET SUCCEEDED nexus:3:0:0 cmd=ffff8848839f44c0.<br>Oct 15 09:00:00 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 15 09:00:00 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-8012:3: BUS RESET ISSUED nexus=3:0:0.<br>Oct 15 09:00:00 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-802b:3: BUS RESET SUCCEEDED nexus=3:0:0.<br><br>Oct 15 08:59:50 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-801c:13: Abort command issued nexus=13:0:0 --  1 2002.<br>Oct 15 08:59:50 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8009:13: DEVICE RESET ISSUED nexus=13:0:0 cmd=ffff8828fbda88c0.<br>Oct 15 08:59:50 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-800e:13: DEVICE RESET SUCCEEDED nexus:13:0:0 cmd=ffff8828fbda88c0.<br>Oct 15 09:00:00 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-801c:13: Abort command issued nexus=13:0:0 --  1 2002.<br>Oct 15 09:00:00 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8009:13: TARGET RESET ISSUED nexus=13:0:0 cmd=ffff8828fbda88c0.<br>Oct 15 09:00:00 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-800e:13: TARGET RESET SUCCEEDED nexus:13:0:0 cmd=ffff8828fbda88c0.<br>Oct 15 09:00:10 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-801c:13: Abort command issued nexus=13:0:0 --  1 2002.<br>Oct 15 09:00:10 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8012:13: BUS RESET ISSUED nexus=13:0:0.<br>Oct 15 09:00:10 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-802b:13: BUS RESET SUCCEEDED nexus=13:0:0.<br>Oct 15 09:00:30 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-801c:13: Abort command issued nexus=13:0:0 --  1 2002.<br>Oct 15 09:00:30 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8018:13: ADAPTER RESET ISSUED nexus=13:0:0.<br>Oct 15 09:00:30 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-00af:13: Performing ISP error recovery - ha=ffff8860375c5000.<br>Oct 15 09:00:33 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-500a:13: LOOP UP detected (8 Gbps).<br>Oct 15 09:00:33 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8017:13: ADAPTER RESET SUCCEEDED nexus=13:0:0.<br><br>동시에 3대 서버에서 같은 에러 메세지가 계속 반복되어서 <br><br>Abort 로그가 하드웨어 관련 메세지기는 한데 다른 문제 가 있는지 <br><br>여부를 검토 부탁 드립니다.<br><br>sosreport 를 첨부 합니다.<br><br>감사합니다.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>=========================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김종휘 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-9580-6587 <br>- 메일주소 : 김종휘 &lt;jjpaper.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com<br>=========================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000Hz01TIAR"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-10-20T01:33:36Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-10-20T01:33:36Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>Oct 15 09:08:49 SLPBDAAL01 kernel: qla2xxx [0000:c4:00.0]-801c:5: Abort command issued nexus=5:1:3 --  1 2002.<br>Oct 15 09:08:49 SLPBDAAL01 kernel: qla2xxx [0000:c4:00.0]-801c:5: Abort command issued nexus=5:1:3 --  1 2002.<br><br><br>올려주신 sosreport 내에 위의 에러 메시지 qla2xxx [0000:04:00.0]-801c:1: Abort command issued nexus=1:0:0 -- 1<br>2002 의 의미는 아래와 같습니다.<br><br>1) qla2xxx 커널모듈 또는 드라이버의 이름입니다.<br>2) [0000:04:00.0] 는 디바이스의 PCI bus 정보입니다.<br>3) 801c 는 메시지가 유래된곳으로 부터 코드의 일부분을 유일하게 식별하는 16진수 id 입니다.<br>4) 1 은 scsi target 의 host number 입니다.<br>5) Abort command issued nexus=1:4:20 는 드라이버가 scsi target 1:4:20 으로 나아간 명령을 abort 한것입니다.<br>6) 마지막 1 (초) 은 드라이버가 응답하는 device 를 기다리는 시간을 소비한것입니다.<br>7) 2002 는 reset 이 성공한것입니다.<br><br>* 위의 메시지와 같이 SAN 이 느려지고, abort 메시지가 나타나는것은 다양한 근원적인 문제가 원인입니다.<br>- 문제 확인을 해야 할 최초 영역은 Switch 또는 Storage target 과 같은 컴포넌트 와 관련된 SAN 입니다.<br>- 명령 abort 는 거의 대개 명령의 timeout 에 의해서 원인이 된것입니다. 동작의 첫번째 과정은 명령으로의 어떤 참조<br>  사항들이 지워지게 된것을 확인하기 위해 명령을 abort 한것입니다. 명령 timeout 은 SAN 의 혼잡 상황, a flaky target,<br>  어딘가 잘못된 하드웨어 또는 명령이 drop 되었을수 있는 target 에서의 과부화와 같은 많은 다양한 것에 의해서 원인이 될 <br>  수 있습니다.<br><br>그래서, 이 문제를 해결하기 위해서는 이 에러들은 SAN 으로부터 반환되어진 에러들을 나타낸것이므로<br><br>1) FC 스위치 , FC 케이블링, zoning, 스토리지 Array 로 부터 현재 어떠한 이슈들이 있는지 검증 시도를 해보시길 바랍니다.<br>2) 이는 또한 FC switch 로그내에 CRC 에러, 어떤 에러 카운터가 있는지 검증하기 위해 스토리지 벤더에게 기술문의 하실것을 권<br>   고드립니다.<br><br>이후, 스토리지 벤더사로부터 기술문의를 받으신 다음 Red Hat 의 지원이 필요하시다면 다시 연락주십시오.<br><br><br>[ 참고문서 ]<br><br>[1] &quot;Abort command Issued&quot; messages appear in /var/log/messages file<br>- https://access.redhat.com/solutions/27624<br><br><br>감사합니다.<br><br><publishedDate>2016-10-20T01:33:36Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HyzUmIAJ"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-10-20T00:12:07Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-10-20T00:12:07Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>현재 올려주신 문의내용을 자세히 확인하고 있는중입니다. 확인이 되는대로 업데이트를 남기도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-10-20T00:12:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>서버 3대에서 비슷한 시간대에 아래와 같은 로그가 발생 하였습니다.<br><br>Oct 15 08:59:40 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 15 08:59:40 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-8009:3: DEVICE RESET ISSUED nexus=3:0:0 cmd=ffff8848839f44c0.<br>Oct 15 08:59:40 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-800e:3: DEVICE RESET SUCCEEDED nexus:3:0:0 cmd=ffff8848839f44c0.<br>Oct 15 08:59:50 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 15 08:59:50 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-8009:3: TARGET RESET ISSUED nexus=3:0:0 cmd=ffff8848839f44c0.<br>Oct 15 08:59:50 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-800e:3: TARGET RESET SUCCEEDED nexus:3:0:0 cmd=ffff8848839f44c0.<br>Oct 15 09:00:00 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 15 09:00:00 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-8012:3: BUS RESET ISSUED nexus=3:0:0.<br>Oct 15 09:00:00 SLPBDAEL01 kernel: qla2xxx [0000:84:00.0]-802b:3: BUS RESET SUCCEEDED nexus=3:0:0.<br><br>Oct 15 08:59:50 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-801c:13: Abort command issued nexus=13:0:0 --  1 2002.<br>Oct 15 08:59:50 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8009:13: DEVICE RESET ISSUED nexus=13:0:0 cmd=ffff8828fbda88c0.<br>Oct 15 08:59:50 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-800e:13: DEVICE RESET SUCCEEDED nexus:13:0:0 cmd=ffff8828fbda88c0.<br>Oct 15 09:00:00 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-801c:13: Abort command issued nexus=13:0:0 --  1 2002.<br>Oct 15 09:00:00 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8009:13: TARGET RESET ISSUED nexus=13:0:0 cmd=ffff8828fbda88c0.<br>Oct 15 09:00:00 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-800e:13: TARGET RESET SUCCEEDED nexus:13:0:0 cmd=ffff8828fbda88c0.<br>Oct 15 09:00:10 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-801c:13: Abort command issued nexus=13:0:0 --  1 2002.<br>Oct 15 09:00:10 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8012:13: BUS RESET ISSUED nexus=13:0:0.<br>Oct 15 09:00:10 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-802b:13: BUS RESET SUCCEEDED nexus=13:0:0.<br>Oct 15 09:00:30 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-801c:13: Abort command issued nexus=13:0:0 --  1 2002.<br>Oct 15 09:00:30 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8018:13: ADAPTER RESET ISSUED nexus=13:0:0.<br>Oct 15 09:00:30 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-00af:13: Performing ISP error recovery - ha=ffff8860375c5000.<br>Oct 15 09:00:33 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-500a:13: LOOP UP detected (8 Gbps).<br>Oct 15 09:00:33 SLPCSSDL01 kernel: qla2xxx [0000:83:00.0]-8017:13: ADAPTER RESET SUCCEEDED nexus=13:0:0.<br><br>동시에 3대 서버에서 같은 에러 메세지가 계속 반복되어서 <br><br>Abort 로그가 하드웨어 관련 메세지기는 한데 다른 문제 가 있는지 <br><br>여부를 검토 부탁 드립니다.<br><br>sosreport 를 첨부 합니다.<br><br>감사합니다.</issue><timeFramesAndUrgency>=========================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김종휘 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-9580-6587 <br>- 메일주소 : 김종휘 &lt;jjpaper.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com<br>=========================================================</timeFramesAndUrgency><cep>false</cep></case>