======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2018-02-08T06:26:53Z</b><br><b>마지막 답변자 : Workflow Integration</b><br><b>마지막 수정 일자 : 2018-02-09T03:14:11Z</b><br><b>id : 500A000000ZgnuGIAR</b><br>======================<br><br><b><font size=15>
제목  : [분석]CRASH 분석 부탁드립니다.
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요.<br>현재 스플렁크로 사용중인 서버입니다.<br>금일 갑작스런 CRASH가 발생하며 DUMP가 생성되었습니다. <br>예상에는 자원사용률이 급격히 높아져 발생한 문제로 판단됩니다.<br><br>dropbox.redhat.com  incoming 에 vmcore_180208_IPSIDAP3 파일명으로 DUMP파일을 업로드 하였으니 분석 부탁드립니다.<br>감사합니다.<br><br>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김경희 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-3049-1440 <br>- 메일주소 : 김경희 &lt;khsds.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 송기호(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01036209917<br>- 메일주소 : kh.song@time-gate.com<br>==============================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>IPSIDAP3</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000LnYJxIAN"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-02-09T03:14:10Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-02-09T03:14:10Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>먼저, 본 기술 문의가 해결되어 다행입니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 재개하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-02-09T03:14:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LnXPhIAN"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-02-09T01:22:50Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-02-09T01:22:50Z</b><br><br>답변감사합니다. 담당자에게 내용을 설명하였습니다.<br>케이스는 클로징 하겠습니다.<br><br><publishedDate>2018-02-09T01:22:50Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LnHs7IAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-02-08T06:56:05Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-02-08T06:56:05Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 문제는 아래 문서에 설명하는 문제에 해당합니다만 문서를 작성한 시점에는 문제의 원인을 확인할 수 없었다고 합니다.<br><br>Kernel panic in kmem_cache_free() while freeing slab cache. <br>https://access.redhat.com/solutions/1370933<br><br>허나, Splunk 애플리케이션을 동작하고 있으며, Transparent Hugepage 가 기본 설정으로 동작중인 점,<br>낮은 버전의 커널을 사용하는 점 등은 아래 커널 버그에 해당할 가능성이 높습니다.<br><br>Resolution for CVE-2015-1805, pipe: iovec overrun leading to memory corruption <br>https://access.redhat.com/solutions/1382833<br><br>      KERNEL: /cores/retrace/repos/kernel/x86_64/usr/lib/debug/lib/modules/2.6.32-358.23.2.el6.x86_64/vmlinux<br>    DUMPFILE: /cores/retrace/tasks/423964605/crash/vmcore  [PARTIAL DUMP]<br>        CPUS: 16<br>        DATE: Wed Feb  7 21:45:15 2018<br>      UPTIME: 262 days, 20:07:14<br>LOAD AVERAGE: 2.17, 2.36, 2.56<br>       TASKS: 782<br>    NODENAME: IPSIDAP3<br>     RELEASE: 2.6.32-358.23.2.el6.x86_64<br>     VERSION: #1 SMP Sat Sep 14 05:32:37 EDT 2013<br>     MACHINE: x86_64  (2593 Mhz)<br>      MEMORY: 32 GB<br>       PANIC: &quot;general protection fault: 0000 [#1] SMP &quot;<br>         PID: 0<br>     COMMAND: &quot;swapper&quot;<br>        TASK: ffffffff81a8d020  (1 of 16)  [THREAD_INFO: ffffffff81a00000]<br>         CPU: 0<br>       STATE: TASK_RUNNING (PANIC)<br><br>crash&gt; sys -i<br>        DMI_BIOS_VENDOR: HP<br>       DMI_BIOS_VERSION: P70<br>          DMI_BIOS_DATE: 07/01/2015<br>         DMI_SYS_VENDOR: HP<br>       DMI_PRODUCT_NAME: ProLiant DL380p Gen8<br>    DMI_PRODUCT_VERSION: <br>     DMI_PRODUCT_SERIAL: SGH247FMDK      <br>       DMI_PRODUCT_UUID: 36353332-3030-5347-4832-3437464D444B<br>     DMI_CHASSIS_VENDOR: HP<br>       DMI_CHASSIS_TYPE: 23<br>    DMI_CHASSIS_VERSION: <br>     DMI_CHASSIS_SERIAL: SGH247FMDK      <br>  DMI_CHASSIS_ASSET_TAG:         <br>     DMI_SMBIOS_VERSION: 2.8<br>crash&gt; ps -S<br>  RU: 16<br>  IN: 766<br>crash&gt; bt<br>PID: 0      TASK: ffffffff81a8d020  CPU: 0   COMMAND: &quot;swapper&quot;<br> #0 [ffff880036603b00] machine_kexec at ffffffff81035d6b<br> #1 [ffff880036603b60] crash_kexec at ffffffff810c0e22<br> #2 [ffff880036603c30] oops_end at ffffffff81511cb0<br> #3 [ffff880036603c60] die at ffffffff8100f19b<br> #4 [ffff880036603c90] do_general_protection at ffffffff815117b2<br> #5 [ffff880036603cc0] general_protection at ffffffff81510f85<br>    [exception RIP: kmem_cache_free+123]<br>    RIP: ffffffff81168dbb  RSP: ffff880036603d70  RFLAGS: 00010007<br>    RAX: 013c985378800000  RBX: ffff88043feb3c00  RCX: ffffffffffffffb0<br>    RDX: ffffea0000000000  RSI: 5a7a7b4700000000  RDI: 5a7a7b4700000000<br>    RBP: ffff880036603dd0   R8: 0000000000000050   R9: 0000000000000000<br>    R10: 0000000000000000  R11: 0000000000000000  R12: 0000000000000282<br>    R13: 5a7a7b4700000000  R14: ffff88083b890180  R15: ffff880036611990<br>    ORIG_RAX: ffffffffffffffff  CS: 0010  SS: 0018<br> #6 [ffff880036603dd8] free_thread_xstate at ffffffff81014489<br> #7 [ffff880036603df8] free_thread_info at ffffffff810144b9<br> #8 [ffff880036603e18] free_task at ffffffff8106bed4<br> #9 [ffff880036603e38] __put_task_struct at ffffffff8106d835<br>#10 [ffff880036603e58] delayed_put_task_struct at ffffffff81071c24<br>#11 [ffff880036603e78] __rcu_process_callbacks at ffffffff810e70b5<br>#12 [ffff880036603ec8] rcu_process_callbacks at ffffffff810e72fb<br>#13 [ffff880036603ed8] __do_softirq at ffffffff810770b1<br>#14 [ffff880036603f48] call_softirq at ffffffff8100c1cc<br>#15 [ffff880036603f60] do_softirq at ffffffff8100de05<br>#16 [ffff880036603f80] irq_exit at ffffffff81076e95<br>#17 [ffff880036603f90] smp_apic_timer_interrupt at ffffffff81517860<br>#18 [ffff880036603fb0] apic_timer_interrupt at ffffffff8100bb93<br>--- &lt;IRQ stack&gt; ---<br>#19 [ffffffff81a01da8] apic_timer_interrupt at ffffffff8100bb93<br>    [exception RIP: intel_idle+222]<br>    RIP: ffffffff812d3cfe  RSP: ffffffff81a01e58  RFLAGS: 00000202<br>    RAX: 0000000000000000  RBX: ffffffff81a01ec8  RCX: 0000000000000000<br>    RDX: 00000000000003e0  RSI: 0000000000000000  RDI: 00000000000f2570<br>    RBP: ffffffff8100bb8e   R8: 0000000000000005   R9: 000000000000006d<br>    R10: 0000000000000002  R11: 0000000000000000  R12: ffffffff8100975d<br>    R13: ffffffff81a01e18  R14: ffff880036616768  R15: ffff88010e30b578<br>    ORIG_RAX: ffffffffffffff10  CS: 0010  SS: 0018<br>#20 [ffffffff81a01ed0] cpuidle_idle_call at ffffffff81415647<br>#21 [ffffffff81a01ef0] cpu_idle at ffffffff81009fc6<br><br>swapper: page allocation failure. order:2, mode:0x20<br>Pid: 0, comm: swapper Tainted: P           ---------------    2.6.32-358.23.2.el6.x86_64 #1<br>Call Trace:<br> &lt;IRQ&gt;  [&lt;ffffffff8112c287&gt;] ? __alloc_pages_nodemask+0x757/0x8d0<br> [&lt;ffffffff81166dc2&gt;] ? kmem_getpages+0x62/0x170<br> [&lt;ffffffff811679da&gt;] ? fallback_alloc+0x1ba/0x270<br> [&lt;ffffffff8116742f&gt;] ? cache_grow+0x2cf/0x320<br> [&lt;ffffffff81167759&gt;] ? ____cache_alloc_node+0x99/0x160<br> [&lt;ffffffff81168920&gt;] ? kmem_cache_alloc_node_trace+0x90/0x200<br> [&lt;ffffffff81168b3d&gt;] ? __kmalloc_node+0x4d/0x60<br> [&lt;ffffffff8143de1d&gt;] ? __alloc_skb+0x6d/0x190<br> [&lt;ffffffff8143ef40&gt;] ? skb_copy+0x40/0xb0<br> [&lt;ffffffffa01cb27c&gt;] ? tg3_start_xmit+0xa8c/0xd50 [tg3]<br> [&lt;ffffffff81449428&gt;] ? dev_hard_start_xmit+0x308/0x530<br> [&lt;ffffffffa01990d5&gt;] ? ipt_do_table+0x295/0x678 [ip_tables]<br> [&lt;ffffffff814677aa&gt;] ? sch_direct_xmit+0x15a/0x1c0<br> [&lt;ffffffff8144d130&gt;] ? dev_queue_xmit+0x3b0/0x550<br> [&lt;ffffffffa0267687&gt;] ? bond_dev_queue_xmit+0x67/0x200 [bonding]<br> [&lt;ffffffffa0267b11&gt;] ? bond_start_xmit+0x2f1/0x5d0 [bonding]<br> [&lt;ffffffff81449428&gt;] ? dev_hard_start_xmit+0x308/0x530<br> [&lt;ffffffff8144cf85&gt;] ? dev_queue_xmit+0x205/0x550<br> [&lt;ffffffff81485868&gt;] ? ip_finish_output+0x148/0x310<br> [&lt;ffffffff81485ae8&gt;] ? ip_output+0xb8/0xc0<br> [&lt;ffffffff81484daf&gt;] ? __ip_local_out+0x9f/0xb0<br> [&lt;ffffffff81484de5&gt;] ? ip_local_out+0x25/0x30<br> [&lt;ffffffff814852c0&gt;] ? ip_queue_xmit+0x190/0x420<br> [&lt;ffffffff8149a0be&gt;] ? tcp_transmit_skb+0x40e/0x7b0<br> [&lt;ffffffff8149c4cb&gt;] ? tcp_write_xmit+0x1fb/0xa20<br> [&lt;ffffffff8149ce80&gt;] ? __tcp_push_pending_frames+0x30/0xe0<br> [&lt;ffffffff81494913&gt;] ? tcp_data_snd_check+0x33/0x100<br> [&lt;ffffffff814984e1&gt;] ? tcp_rcv_established+0x371/0x800<br> [&lt;ffffffff814a0553&gt;] ? tcp_v4_do_rcv+0x2e3/0x430<br> [&lt;ffffffff814a1dde&gt;] ? tcp_v4_rcv+0x4fe/0x8d0<br> [&lt;ffffffff8147f990&gt;] ? ip_local_deliver_finish+0x0/0x2d0<br> [&lt;ffffffff8147f990&gt;] ? ip_local_deliver_finish+0x0/0x2d0<br> [&lt;ffffffff8147fa6d&gt;] ? ip_local_deliver_finish+0xdd/0x2d0<br> [&lt;ffffffff8147fcf8&gt;] ? ip_local_deliver+0x98/0xa0<br> [&lt;ffffffff8147f1bd&gt;] ? ip_rcv_finish+0x12d/0x440<br> [&lt;ffffffff8147f1bd&gt;] ? ip_rcv_finish+0x12d/0x440<br> [&lt;ffffffff8147f745&gt;] ? ip_rcv+0x275/0x350<br> [&lt;ffffffff8144891b&gt;] ? __netif_receive_skb+0x4ab/0x750<br> [&lt;ffffffff8149f0fa&gt;] ? tcp4_gro_receive+0x5a/0xd0<br> [&lt;ffffffff8144acf8&gt;] ? netif_receive_skb+0x58/0x60<br> [&lt;ffffffff8144ae00&gt;] ? napi_skb_finish+0x50/0x70<br> [&lt;ffffffff8144d3a9&gt;] ? napi_gro_receive+0x39/0x50<br> [&lt;ffffffffa01c7c14&gt;] ? tg3_poll_work+0x784/0xe50 [tg3]<br> [&lt;ffffffffa01c832c&gt;] ? tg3_poll_msix+0x4c/0x150 [tg3]<br> [&lt;ffffffff8144d4c3&gt;] ? net_rx_action+0x103/0x2f0<br> [&lt;ffffffff810770b1&gt;] ? __do_softirq+0xc1/0x1e0<br> [&lt;ffffffff810e1760&gt;] ? handle_IRQ_event+0x60/0x170<br> [&lt;ffffffff8107710f&gt;] ? __do_softirq+0x11f/0x1e0<br> [&lt;ffffffff8100c1cc&gt;] ? call_softirq+0x1c/0x30<br> [&lt;ffffffff8100de05&gt;] ? do_softirq+0x65/0xa0<br> [&lt;ffffffff81076e95&gt;] ? irq_exit+0x85/0x90<br> [&lt;ffffffff81517775&gt;] ? do_IRQ+0x75/0xf0<br> [&lt;ffffffff8100b9d3&gt;] ? ret_from_intr+0x0/0x11<br> &lt;EOI&gt;  [&lt;ffffffff812d3cfe&gt;] ? intel_idle+0xde/0x170<br> [&lt;ffffffff812d3ce1&gt;] ? intel_idle+0xc1/0x170<br> [&lt;ffffffff81415647&gt;] ? cpuidle_idle_call+0xa7/0x140<br> [&lt;ffffffff81009fc6&gt;] ? cpu_idle+0xb6/0x110<br> [&lt;ffffffff81507600&gt;] ? start_secondary+0x2ac/0x2ef<br><br>general protection fault: 0000 [#1] SMP <br>last sysfs file: /sys/devices/pci0000:00/0000:00:1c.0/0000:0a:00.3/device<br>CPU 0 <br>Modules linked in: nfs lockd fscache auth_rpcgss nfs_acl RedCastle(P)(U) iptable_filter ip_tables mptctl mptbase autofs4 sunrpc bonding 8021q garp stp llc ipv6 uinput power_meter hpilo hpwdt microcode serio_raw tg3 sg iTCO_wdt iTCO_vendor_support ioatdma dca shpchp ext4 jbd2 mbcache dm_round_robin sd_mod crc_t10dif qla2xxx scsi_transport_fc scsi_tgt sr_mod cdrom hpsa(U) pata_acpi ata_generic ata_piix dm_multipath dm_mirror dm_region_hash dm_log dm_mod [last unloaded: scsi_wait_scan]<br><br>Pid: 0, comm: swapper Tainted: P           ---------------    2.6.32-358.23.2.el6.x86_64 #1 HP ProLiant DL380p Gen8<br>RIP: 0010:[&lt;ffffffff81168dbb&gt;]  [&lt;ffffffff81168dbb&gt;] kmem_cache_free+0x7b/0x2b0<br>RSP: 0018:ffff880036603d70  EFLAGS: 00010007<br>RAX: 013c985378800000 RBX: ffff88043feb3c00 RCX: ffffffffffffffb0<br>RDX: ffffea0000000000 RSI: 5a7a7b4700000000 RDI: 5a7a7b4700000000<br>RBP: ffff880036603dd0 R08: 0000000000000050 R09: 0000000000000000<br>R10: 0000000000000000 R11: 0000000000000000 R12: 0000000000000282<br>R13: 5a7a7b4700000000 R14: ffff88083b890180 R15: ffff880036611990<br>FS:  0000000000000000(0000) GS:ffff880036600000(0000) knlGS:0000000000000000<br>CS:  0010 DS: 0018 ES: 0018 CR0: 000000008005003b<br>CR2: 000000000148b860 CR3: 0000000437f6c000 CR4: 00000000000407f0<br>DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000<br>DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400<br>Process swapper (pid: 0, threadinfo ffffffff81a00000, task ffffffff81a8d020)<br>Stack:<br> ffff88043bf50b40 ffff88083f81cb80 0000000000000001 ffff88083f81cb40<br>&lt;d&gt; ffff880036603dd0 5a7a7b4700000000 ffff880036603e10 ffff8801533320b4<br>&lt;d&gt; ffffffff81aa9100 ffff880116d868c0 ffff8808362da840 ffff880036611990<br>Call Trace:<br> &lt;IRQ&gt; <br> [&lt;ffffffff81014489&gt;] free_thread_xstate+0x29/0x40<br> [&lt;ffffffff810144b9&gt;] free_thread_info+0x19/0x30<br> [&lt;ffffffff8106bed4&gt;] free_task+0x34/0x70<br> [&lt;ffffffff8106d835&gt;] __put_task_struct+0x75/0xc0<br> [&lt;ffffffff81071c24&gt;] delayed_put_task_struct+0x44/0x80<br> [&lt;ffffffff810e70b5&gt;] __rcu_process_callbacks+0x135/0x350<br> [&lt;ffffffff81012c59&gt;] ? read_tsc+0x9/0x20<br> [&lt;ffffffff810e72fb&gt;] rcu_process_callbacks+0x2b/0x50<br> [&lt;ffffffff810770b1&gt;] __do_softirq+0xc1/0x1e0<br> [&lt;ffffffff8109b87b&gt;] ? hrtimer_interrupt+0x14b/0x260<br> [&lt;ffffffff8100c1cc&gt;] call_softirq+0x1c/0x30<br> [&lt;ffffffff8100de05&gt;] do_softirq+0x65/0xa0<br> [&lt;ffffffff81076e95&gt;] irq_exit+0x85/0x90<br> [&lt;ffffffff81517860&gt;] smp_apic_timer_interrupt+0x70/0x9b<br> [&lt;ffffffff8100bb93&gt;] apic_timer_interrupt+0x13/0x20<br> &lt;EOI&gt; <br> [&lt;ffffffff812d3cfe&gt;] ? intel_idle+0xde/0x170<br> [&lt;ffffffff812d3ce1&gt;] ? intel_idle+0xc1/0x170<br> [&lt;ffffffff81415647&gt;] cpuidle_idle_call+0xa7/0x140<br> [&lt;ffffffff81009fc6&gt;] cpu_idle+0xb6/0x110<br> [&lt;ffffffff814f39ea&gt;] rest_init+0x7a/0x80<br> [&lt;ffffffff81c27f7b&gt;] start_kernel+0x424/0x430<br> [&lt;ffffffff81c2733a&gt;] x86_64_start_reservations+0x125/0x129<br> [&lt;ffffffff81c27438&gt;] x86_64_start_kernel+0xfa/0x109<br>Code: 89 f7 48 89 75 c8 e8 a5 2e ee ff 48 c1 e8 0c 48 8d 14 c5 00 00 00 00 48 c1 e0 06 48 29 d0 48 ba 00 00 00 00 00 ea ff ff 48 01 d0 &lt;48&gt; 8b 10 66 85 d2 0f 88 9f 01 00 00 84 d2 0f 89 93 01 00 00 48 <br>RIP  [&lt;ffffffff81168dbb&gt;] kmem_cache_free+0x7b/0x2b0<br> RSP &lt;ffff880036603d70&gt;<br><br>crash&gt; mod -t<br>NAME       TAINTS<br>hpsa       (U)<br>RedCastle  P(U)<br><br>crash&gt; saved_command_line<br>saved_command_line = $1 = 0xffff88002804b8c0 &quot;ro root=UUID=751b4f3d-a252-4598-bc23-0b93152592ad rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=131M@0M  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet nmi_watchdog=0&quot;<br><br>crash&gt; kmem -z | grep HUG<br>NR_ANON_TRANSPARENT_HUGEPAGES: 0<br>NR_ANON_TRANSPARENT_HUGEPAGES: 8<br>NR_ANON_TRANSPARENT_HUGEPAGES: 129<br>NR_ANON_TRANSPARENT_HUGEPAGES: 36<br><br>따라서, 문제를 해결하기 위해, 커널버전을 kernel-2.6.32-504.23.4.el6 이상으로 업그레이드하거나<br>THP 기능을 비활성화해보시기 바랍니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-02-08T06:56:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>