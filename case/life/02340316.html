======================<br><b>생성계정 : JIMIN KIM</b><br><b>생성날짜 : 2019-03-18T08:58:05Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2019-04-09T04:05:48Z</b><br><b>id : 5002K00000dPK1FQAW</b><br>======================<br><br><b><font size=15>
제목  : cpu wait 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 넷백업 관련 프로세스 bpbkar이 구동이 되면 서버의 cpu wait 값이 크게 증가하는 것 같아서<br>혹시 아래 내용 관련해서 해결하려면 어떤 식으로 접근해야하는 문의드리려고 합니다. <br><br>root@SLTCISAL01 /APP # top<br><br>top - 13:37:05 up 355 days, 23:41,  3 users,  load average: 6.86, 10.81, 15.56<br>Tasks: 554 total,   1 running, 553 sleeping,   0 stopped,   0 zombie<br>%Cpu(s):  1.1 us, 10.4 sy,  0.0 ni, 44.5 id, 44.0 wa,  0.0 hi,  0.1 si,  0.0 st<br>KiB Mem : 15892756 total,   603184 free, 14919660 used,   369912 buff/cache<br>KiB Swap:  8388604 total,        0 free,  8388604 used.   680656 avail Mem<br><br>   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND<br> 93987 root      20   0  119660   5468      0 D  27.5  0.0   2:35.83 bpbkar<br> 64889 ftsadm    20   0 2423744  25892      0 S   2.6  0.2   1660:38 java<br> 46308 junadm    20   0 2423488  26840      0 S   2.3  0.2   3223:44 java<br>  7239 secadm    20   0 4028848 758960      0 S   0.7  4.8 230:43.62 java<br> 94938 root      20   0  146556   1308    248 R   0.7  0.0   0:00.10 top<br>107695 ftsadm    20   0 5111196 957184      0 S   0.7  6.0 193:09.27 java<br>108039 secadm    20   0 5131720 1.569g      0 S   0.7 10.4  10:04.30 java<br>     1 root      20   0  188964   1348      0 S   0.3  0.0  32:15.69 systemd<br>  1053 root      20   0   24564    264      0 S   0.3  0.0  16:45.85 systemd-logind<br> 16724 polkitd   20   0  644372    924      0 S   0.3  0.0  13:58.03 polkitd<br> 22321 junadm    20   0 4024948 673784      0 S   0.3  4.2 840:02.72 java<br> 36598 ftsadm    20   0 5114672 2.285g      0 S   0.3 15.1  28:38.36 java<br> 40432 secadm    20   0 5120536 1.043g      0 S   0.3  6.9 261:38.69 java<br> 47751 secadm    20   0 2423972  24080      0 S   0.3  0.2   3221:08 java<br> 65372 root      20   0       0      0      0 S   0.3  0.0   0:21.46 kworker/1:0<br> 94771 root      20   0       0      0      0 S   0.3  0.0   0:00.23 kworker/u256:2<br> 94860 root      20   0       0      0      0 S   0.3  0.0   0:00.19 kworker/0:1<br>110449 junadm    20   0 5139732 1.419g      0 S   0.3  9.4 102:26.98 java<br>110655 junadm    20   0 5121180 1.197g      0 S   0.3  7.9  95:26.21 java<br>     2 root      20   0       0      0      0 S   0.0  0.0   1:31.95 kthreadd<br>     3 root      20   0       0      0      0 S   0.0  0.0   5:53.75 ksoftirqd/0<br><br>root@SLTCISAL01 /APP # ps -ef |grep 93987<br>root      93987      1 26 13:27 ?        00:02:45 bpbkar -r 2678400 -ru root -dt 0 -to 0 -bpstart_time 1552710723 -clnt SLTCISAL01 -class SLI_SLTCISAL01_FS -sched WEEK_FULL_1MONTH -st FULL -bpstart_to 300 -bpend_to 300 -read_to 7200 -ckpt_time 1800 -blks_per_buffer 512 -use_otm -fso -b SLTCISAL01_1552710422 -kl 1 -use_ofb<br>root      94960  92751  0 13:37 pts/3    00:00:00 grep --color=auto 93987<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLTCISAL01</hostname><br><br><br><comment id="a0a2K00000PmtYtQAJ"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-03-24T22:43:14Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-03-24T22:43:14Z</b><br><br>안녕하세요. Red Hat 김마현 차장입니다.<br><br>조치 후 추가 문의 사항 있으시면 업데이트 부탁드립니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-03-24T22:43:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PmruQQAR"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-03-24T06:54:27Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-03-24T06:54:27Z</b><br><br>참고로 Veritas 확인 결과<br>Netbackup 클라이언트에서 최소 권고 메모리 설정은 512MB 이상으로만 되어있어서<br>서버의 어플리케이션 등에서 사용하는 메모리 사용 현황을 보고 증설을 해야할 것 같습니다.<br><br><publishedDate>2019-03-24T06:54:27Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000Pmru1QAB"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-03-24T06:51:46Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-03-24T06:51:46Z</b><br><br>안녕하세요<br><br>SDS 김지민 프로입니다.<br><br>답변 감사드립니다.<br><br>알려주신 방향으로<br>SLTCISAL01 서버의 memory 사용량을 확인해보고<br>증설을 제안해보겠습니다.<br><br>감사합니다.<br><br><publishedDate>2019-03-24T06:51:46Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000PYot3QAD"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-03-19T01:26:01Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-03-19T01:26:01Z</b><br><br>안녕하세요. Red Hat 김마현입니다.<br><br>넷백업 bpbkar 프로세스의 옵션을 봤을 땐 월간 풀백업으로 보입니다.<br><br>풀백업이 진행되면 백업 대상 디스크의 read I/O가 많이 일어날 것이고, 백업 이미지를 전송하기 위해 OS 메모리의 buffer/cache 영역에 채운 후 전송할 것으로 판단됩니다.<br>따라서 buffer/cache 영역에 없는 데이터(디스크의데이터)를 read 하는 경우 CPU I/O Wait이 증가하는 것은 자연스러운 현상입니다.<br>(CPU 입장에서 디스크는 메모리에 비해 상대적으로 매우 느리기 때문에 I/O에 대한 Wait이 늘어나게 됩니다.)<br><br>같은 데이터를 다시 read 할 때 기존에 buffer/cache 영역에 쌓아둔 것을 다시 히팅(read)한다면 CPU I/O Wait은 현저히 줄어들 것입니다.<br>그러기 위해서는 free 메모리 공간이 확보되어 있어야 하며,<br>메모리가 부족하면 최근 read 된 데이터를 buffer/cache 영역에 쌓아두질 못 하게되고 그로인해 메모리가 아닌 디스크를 통해 read I/O를 하게 됩니다.<br><br><br>올려주신 top을 통한 시스템 현황을 봤을 때 swap out(swap을 full로 사용)이 발생한 흔적과 free 메모리가 적은것으로 보아 메모리가 부족한 것으로 판단됩니다.<br><br>%Cpu(s):  1.1 us, 10.4 sy,  0.0 ni, 44.5 id, 44.0 wa,  0.0 hi,  0.1 si,  0.0 st<br>KiB Mem : 15892756 total,   603184 free, 14919660 used,   369912 buff/cache<br>KiB Swap:  8388604 total,        0 free,  8388604 used.   680656 avail Mem<br><br><br>또한 관련해서 bpbkar 프로세스의 벤더(베리타스)를 통해서도 확인해 보시길 권해드립니다.<br><br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-03-19T01:26:01Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PYaX0QAL"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-03-18T09:01:30Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-03-18T09:01:30Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>sosreprt도 dropbox에 업로드 하였습니다.<br>02340316-sosreport-SLTCISAL01-20190316133950.tar.xz<br><br>감사합니다.<br><br><publishedDate>2019-03-18T09:01:30Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000PYaT8QAL"><br>======================<br><b>생성계정 : Abbott, Edmund</b><br><b>생성날짜 : 2019-03-18T08:58:26Z</b><br><b>마지막 답변자 : Abbott, Edmund</b><br><b>마지막 수정 일자 : 2019-03-18T08:58:26Z</b><br><br>This comment has been generated via an automated case assistant and is based upon the information provided at case create time.<br>If you have already uploaded or are in the process of creating and uploading a sosreport to this case, please ignore this request.<br><br>Please provide a sosreport.  The lack of a sosreport often impedes our ability to make progress in fully understanding and <br>resolving the reported issue(s) in these types of cases.  If you cannot provide a sosreport for reasons such as its a secure <br>site or other such restrictions, please let us know if not already noted within the case. If this request is not applicable, <br>we do apologize and welcome any feedback or clarifying information you could provide to help us understand the problem. <br><br><br>If the system is or can be booted: <br>======================================================================================  <br><br>  * Create sosreport: ~]# sosreport <br>    Please see the following documentation for more information on the sosreport and how to gather one from the system.<br><br>        What is sosreport and how do I create one in Red Hat Enterprise Linux 4.6 and later?<br>        https://access.redhat.com/knowledge/solutions/3592<br><br>  * Attach to case  : ~]# redhat-support-tool addattachment -c CASE_NUMBER /path/to/sosreport<br>    If needed, an example on attaching a file to a case via the portal UI is available within the following document in <br>    the section entitled &quot;Attaching the file(s) to the ticket and case management through the Customer Portal&quot;.<br><br>        How do I open and manage a support case on the Customer Portal?<br>        https://access.redhat.com/articles/38363#attach<br><br>  * If the sosreport is large in size such that you are not able to upload it into the case, then you can upload it<br>    into the dropbox. For more information on dropbox, please refer the following document.<br><br>        How can I provide large files (such as a vmcore, big log files, or a large sosreport) to Red Hat Support?<br>        https://access.redhat.com/knowledge/solutions/2112<br><br>Please see the following documentation on how to proceed if the system cannot be booted, fails to boot, hangs on boot,<br>crashed during boot, sosreport hangs or otherwise does not complete:<br>====================================================================================== <br><br>  * Additional and alternative steps for gathering a sosreport for Red Hat Enterprise Linux<br>    https://access.redhat.com/articles/2760521<br><br><br>auto-assistant rule reference #:KSOS0150 https://access.redhat.com/articles/2908901<br><br><publishedDate>2019-03-18T08:58:26Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>