======================<br><b>생성계정 : 타임게이트 (주)</b><br><b>생성날짜 : 2017-03-02T06:41:24Z</b><br><b>마지막 답변자 : Ying Huang</b><br><b>마지막 수정 일자 : 2017-03-30T01:25:04Z</b><br><b>id : 500A000000WVIy2IAH</b><br>======================<br><br><b><font size=15>
제목  : [RHEL7] 번들 http server 사용 간 권장 OS/네트워크 파라미터 값
</font></b><br><br>======================<br><b>사전문의<br></b><br>## 고객정보 ##<br>고객사 : 삼성생명<br>고객명 : 송기용 책임<br>연락처  : 010-9006-9506 <br>####<br><br>## 고객사 환경##<br>OS : RHEL7.2<br>http version : httpd-2.4.6-40.el7.x86_64<br>##<br><br>## 문의 ##<br>기존 HPUX의 hpws 사용 중인 장비를 RHEL7 번들 http server로 마이그레이션 중입니다. <br>기존 HP-UX 설정에 맞춰서 변경해야 되는 OS/네트웍 파라미터가 존재하는지 확인 요청드립니다. <br>현재 HP 장비에서 적용된 옵션과 검색하여 RHEL에 적용할 파라미터를 일부 확인하여 jpg파일로 첨부하였으며 이것 외에 별도의 권장사항이 있는지요?<br><br>확인요청드립니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Usage / Documentation Help</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000JB4LpIAL"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-30T01:25:03Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-30T01:25:03Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>요청대로 본 케이스를 처리완료하도록 하겠습니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.<br><br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발송됩니다. 고객님께서 남기 신 의견은<br>보다 나은 서비스를 위해 지속적으로 반영될 것입니다. 향후 기술 지원 서비스의 품질 향상을 위해,<br>소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-03-30T01:25:03Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JB4C3IAL"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-03-30T01:07:12Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-03-30T01:07:11Z</b><br><br>SR 종료합니다.<br><br><publishedDate>2017-03-30T01:07:11Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J4JQNIA3"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-20T06:54:58Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-20T06:54:58Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>네트워크 관련 파라미터들은 고객님 네트워크 환경 및 사용하는 서비스에 따라 튜닝을 진행해야 하는 부분으로<br>일반적으로 별도로 추천하는 권장값이 존재하지 않습니다.<br>해당 경우 고객님 환경에서 충분한 테스트를 진행하여 현상에 따라 아래의 문서에서 안내된 파라미터들을<br>변경하실수 있으십니다.<br><br>Red Hat Enterprise Linux Network Performance Tuning Guide<br>https://access.redhat.com/articles/1391433<br><br><br>만일 튜닝 이슈에 대한 지원이 필요하시다면 저희 컨설팅 서비스를 사용하실수 있으십니다.<br>컨설팅 서비스에 대한 정보는 저희 영업팀으로 연락하실수 있으십니다.<br><br>영업팀: 080 708 0880<br><br>감사합니다.<br><br><publishedDate>2017-03-20T06:54:58Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000J4IcDIAV"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-03-20T04:53:40Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-03-20T04:53:40Z</b><br><br>답변 감사합니다.<br>혹시<br>웹서버를 구축하는데 있어서<br>RHEL6, RHEL7 에대한 권장 파라메터 값을 알 수 있을까요??<br><br>혹은 관련 문서가 있으면 알려주시길 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-03-20T04:53:40Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J3q3UIAR"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-17T02:40:30Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-17T02:40:29Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>hp-ux to linux 대응 파라미터에 대한 문서가 확인이 되지 않고 있습니다.<br>아래는 앞서 문의하신 파라미터들에 대한 답변입니다. 참고 하시기 바랍니다.<br><br>#TCP socket buffer size 대하여<br><br>TCP socket buffer가 너무 클 경우 컨낵션이 많으면 커널이 제때에 처리하지 못하여<br>socket이 대기하는 시간이 길어져서 delay가 발생될수 있습니다.<br>더 상세한 정보는 아래의 KCS 문서를 참고하시기 바랍니다.<br>What are the implications of changing socket buffer sizes?<br>https://access.redhat.com/solutions/85913<br><br>또한 아래의 문서를 보시면 메모리가 충족할 경우 1GB 혹은 10GB 네트워크 환경에서 <br>최대로 16G까지 설정하시는것을 권장하고 있습니다.<br>How can I tune the TCP Socket Buffers?<br>https://access.redhat.com/solutions/369563<br><br>이는 추천값이며 실제로는 고객님환경에서 충분한 테스트를 진행후 적용하셔야 합니다.<br><br><br># 하기 파라미터에 대하여<br>net.core.netdev_max_backlog = 30000<br>net.core.somaxconn = 1024<br>net.ipv4.tcp_max_syn_backlog = 1024<br>net.ipv4.tcp_max_tw_buckets = 1800000 Default: 65536<br><br>상기 파라미터는 상기 값으로 변경 가능하지만 보다 많은 메모리를 소모함을 알립니다.<br>어떤 경우에 증가해야 되는지에 대한 설명은 아래의 문서를 참고 하실수 있습니다.<br><br>- net.core.netdev_max_backlog 대하여<br>How to tune `net.core.netdev_max_backlog` and `net.core.netdev_budget` sysctl kernel tunables?<br>https://access.redhat.com/solutions/1241943<br><br>- net.core.somaxconn 와 net.ipv4.tcp_max_syn_backlog 대하여<br>&quot;kernel: Possible SYN flooding on port X. Sending cookies&quot; is logged<br>https://access.redhat.com/solutions/30453<br><br>- net.ipv4.tcp_max_tw_buckets 대하여<br>Why am I seeing a &quot;TCP: time wait bucket table overflow&quot; message in my kernel logs?<br>https://access.redhat.com/solutions/1252<br><br><br>추가적으로 네트워크 튜닝에 대한 문서를 안내해 드립니다. 도움이 되시기 바랍니다.<br>Red Hat Enterprise Linux Network Performance Tuning Guide<br>https://access.redhat.com/articles/1391433<br><br>감사합니다.<br><br><publishedDate>2017-03-17T02:40:29Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000J3pTjIAJ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-03-17T01:09:45Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-03-17T01:09:45Z</b><br><br>추가 문의 드립니다.<br><br>아래 문서상에는 solaris to linux 대응 파라미터를 정리해 둔 것인데 hp-ux to linux 대응 문서가 있으면 링크 전달 바랍니다.<br><br>https://access.redhat.com/solutions/286233<br><br>감사합니다.<br><br><publishedDate>2017-03-17T01:09:45Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J3c6PIAR"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-03-16T07:58:07Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-03-16T07:58:07Z</b><br><br>안녕하세요.<br>일단 제가 아는 범위에서 고객사에 커널 파라미터에 대한 참고 값으로 가이드 하였는데<br>이 값들로 인해서 발생할 문제가 있는지 만 검토 바랍니다.<br><br>######TCP 대역폭(bandwidth) 관련 파라미터 ######<br><br>#TCP window scaling<br>net.ipv4.tcp_window_scaling = 1 # Default: 1, 65kB 이상의 큰 윈도우 스케일링 대역폭을 높이기 위해 사용<br><br>#TCP socket buffer size <br># receiver window size의 한계치를 증가하더라도, 실제 커널에 설정된 소켓 버퍼 크기보다 커질 수 없으므로, receiver window size를 증가하기 위해서는, 소켓당 버퍼 크기를 증가시켜야 한다<br># 모든 소켓에 대한 설정<br>net.core.wmem_max = 56777216 # Default: 124928, TCP 전송 버퍼 크기 최대값 <br>net.core.rmem_max = 56777216 # Default: 124928, TCP 수신 버퍼 크기 기본값 <br>net.core.wmem_default = 16777216 # Default: 124928, TCP 전송 버퍼 크기 기본값 <br>net.core.rmem_default = 16777216 # Default: 124928, TCP 수신 버퍼 크기 기본값 <br><br># tcp에 대한 설정 min default max <br>net.ipv4.tcp_rmem = 16777216 16777216 56777216<br>net.ipv4.tcp_wmem = 16777216 16777216 56777216<br><br>######네트워크 패킷 유실 방지를 위한 in-bound queue 관련 파라미터 ######<br>#in-bound queue - 커널의 패킷 backlog<br>net.core.netdev_max_backlog = 30000 # Default:   1000, 커널의 패킷 backlog<br>#Listen backlog - 서버 소켓에서 accept()를 기다리는 소켓 개수<br>net.core.somaxconn = 1024 # Default:   128,  ESTABLISHED 상태의 소켓 queue<br>net.ipv4.tcp_max_syn_backlog = 1024  # Default 512 SYN_RECEIVED 상태의 소켓(즉, connection incompleted)을 위한 queue<br><br>###### 그 외 기타 파라미터 ######<br>#ephemeral port range(커널의 임의포트 개수) <br>net.ipv4.ip_local_port_range = 1024 65000 # Default: 32768 61000, 로컬 포트 범위<br><br># TIME_WAIT socket buckets <br>net.ipv4.tcp_max_tw_buckets = 1800000 Default: 65536<br><br># TCP에서는 sequence number로 패킷의 순서(ordering)을 판별<br>net.ipv4.tcp_timestamps = 1 # Default: 1<br><br><publishedDate>2017-03-16T07:58:07Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J3booIAB"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-16T07:27:11Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-16T07:27:11Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>확인 결과 아래의 문서에 기재된 파라미터들은 RHEL7에서도 동일하게 사용됩니다.<br><br>https://access.redhat.com/solutions/286233<br><br>알려주신 파라미터중 상기 문서에 기재되지 않은 파라미터들은 대응하는 파라미터를 찾기 어려웠습니다.<br>혹시 파라미터가 어떤 작용을 하는지에 대한 설명 가능 하실까요? 무조건 대응하는 파라미터를 찾는다는<br>보장은 없지만 기능을 설명해 주시면 이에 따라 다시 한번 찾아보도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-03-16T07:27:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000J3abLIAR"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-03-16T04:48:42Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-03-16T04:48:42Z</b><br><br>안녕하세요.<br><br>하기의 파라미터에 대응하는 Redhat Linux 7 kernal 파라미터 값을 알려주세요<br>제가 찾은 문서에는 Redhat Linux6에 대응 하는 값은 아래의 링크에서 확인 할 수 있습니다.<br><br>https://access.redhat.com/solutions/286233<br><br>tcp_time_wait_interval<br>tcp_conn_request_max<br>tcp_fin_wait2_timeout <br>tcp_ip_abort_interval<br>tcp_keepalive_interval<br>tcp_rexmit_interval_initial<br>tcp_rexmit_interval_max<br>tcp_rexmit_interval_min<br>tcp_xmit_hiwater_def<br>tcp_recv_hiwater_def<br><br><publishedDate>2017-03-16T04:48:42Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J3ZmZIAV"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-16T03:06:10Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-16T03:06:10Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>문의하신 파라미터들은 저희 리눅스 환경에는 존재하지 않는것으로 보입니다.<br>또한 네트워크 관련 파라미터들은 고객님 네트워크 환경 및 사용하는 서비스에 따라 튜닝을 진행해야 하는 부분으로<br>일반적으로 별도로 추천하는 권장값이 존재하지 않습니다.<br><br>만일 튜닝에 대한 지원을 원하시면 저희 컨설팅 서비스를 사용하실수 있으십니다.<br>컨설팅 서비스에 대한 정보는 저희 영업팀으로 연락하실수 있으십니다.<br><br>영업팀: 080 708 0880<br><br>감사합니다.<br><br><publishedDate>2017-03-16T03:06:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000J3KiHIAV"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-03-15T06:43:14Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-03-15T06:43:14Z</b><br><br>안녕하세요! 고객으로부터 하기의 파라미터에 대한 권장값 문의가 재 요청되어 SR을 오픈합니다. <br><br>해당 값은 타 시스템의 RHEL6에 적용했던 항목이며 RHEL7을 위한 권장값 확인을 요청합니다. <br><br>##<br>tcp_time_wait_interval<br>tcp_conn_request_max<br>tcp_fin_wait2_timeout <br>tcp_ip_abort_interval<br>tcp_keepalive_interval<br>tcp_rexmit_interval_initial<br>tcp_rexmit_interval_max<br>tcp_rexmit_interval_min<br>tcp_xmit_hiwater_def<br>tcp_recv_hiwater_def<br>##<br><br>참고로 설정한 mpm worker 설정은 하기와 같습니다 .<br>## <br>ThreadLimit 384<br>StartServers 4<br>MaxClients 4992<br>MinSpareThreads 64<br>MaxSpareThreads 768<br>ThreadsPerChild 384<br>MaxrequestsPerChild 0<br>##<br><br>확인 요청드립니다.<br><br><publishedDate>2017-03-15T06:43:14Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J1E19IAF"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-06T06:20:19Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-06T06:20:18Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>먼저, 문제가 잘 해결된것으로 보여 참 다행입니다.<br><br>본 케이스를 처리완료하도록 하겠습니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.<br><br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발송됩니다. 고객님께서 남기 신 의견은<br>보다 나은 서비스를 위해 지속적으로 반영될 것입니다. 향후 기술 지원 서비스의 품질 향상을 위해,<br>소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-03-06T06:20:18Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000J1ChqIAF"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-03-06T02:35:51Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-03-06T02:35:51Z</b><br><br>안녕하세요! <br>빠른 답변에 감사드립니다 .<br><br>고객사로 부터 추가 문의가 없어 SR 종료합니다. <br><br>감사합니다.<br><br><publishedDate>2017-03-06T02:35:51Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Iwe8CIAR"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-03T03:41:17Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-03T03:41:17Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>아시다시피 서로 다른 OS마다 다른 파리미터를 사용하기 때문에 무조건 대응하는 파라미터를 확인하기 어렵습니다.<br>따라서 어떤 기능이 필요하신지를 알려주시면 대응하는 설정방법을 안내해 드리도록 하겠습니다.<br><br>참로고 아래는 첨부 파일에 있는 파라미터와 비슷한 기능을 가진 파라미터들이니 참고하시기 바랍니다.<br><br>tcp_time_wait_interval, tcp_fin_wait_2_flush_interval<br>net.ipv4.tcp_fin_timeout : Time to hold socket in state FIN-WAIT-2, if it was closed by our side. ( default 60 seconds)<br>maxuprc                           512      This is equivalent to nproc for a user<br>nkthread                                   kernel.threads-max<br><br>감사합니다.<br><br><publishedDate>2017-03-03T03:41:17Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>