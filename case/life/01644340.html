======================<br><b>생성계정 : 타임게이트 (주)</b><br><b>생성날짜 : 2016-06-01T09:11:04Z</b><br><b>마지막 답변자 : Min Woo Park</b><br><b>마지막 수정 일자 : 2016-06-21T07:26:03Z</b><br><b>id : 500A000000UYu47IAD</b><br>======================<br><br><b><font size=15>
제목  : JBOSS EWS-AS (Tomcat 7.0.59) Windows NT 2012R2 JVM 옵션 관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>.<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat JBoss Web Server</b><br><b>버젼  : 3.0.2</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 4 (Low)</b><br>======================<br><comment id="a0aA000000HKLbSIAX"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2016-06-21T07:25:59Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2016-06-21T07:25:59Z</b><br><br>안녕하세요,  <br>       <br>본 케이스를 처리완료하도록 하겠습니다. 만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.  <br>     <br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발생됩니다. 고객님께서 남기 신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다. 향후 기술  지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다. <br><br>그리고 아래 Red Hat Customer Portal group을 통하여 많은 유용한 정보들을 볼수 있으니 참고하시기 바랍니다.<br><br>Featured Groups:<br>Red Hat Enterprise Linux - https://access.redhat.com/groups/red-hat-enterprise-linux<br>Red Hat Enterprise Linux 7 Ideas - https://access.redhat.com/groups/red-hat-enterprise-linux-7-ideas<br>Red Hat Enterprise Linux Developer Program (beta) - https://access.redhat.com/groups/red-hat-enterprise-linux-developer-program-beta<br>Red Hat Enterprise Virtualization - https://access.redhat.com/groups/red-hat-enterprise-virtualization<br>Red Hat Storage - https://access.redhat.com/groups/red-hat-storage<br>JBoss Enterprise Middleware - https://access.redhat.com/groups/jboss-enterprise-middleware<br>Red Hat Network Satellite - https://access.redhat.com/groups/red-hat-network-satellite<br>       <br>감사합니다.  <br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Customer Experience and Engagement (CEE)<br><br><publishedDate>2016-06-21T07:25:59Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HK3LgIAL"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2016-06-20T06:48:14Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2016-06-20T06:48:14Z</b><br><br>안녕하세요 <br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>이 케이스는 오랜시간 업데이트가 없습니다. 더 도움이 필요하신건가요? 아니면 종료해도 될까요?<br><br>이번 케이스건에 대한 더 궁금한 사항이 없으시거나 지원이 필요하지 않다면 케이스를 close 하려고 합니다. <br><br>답변이 없으시면 케이스가 자동 종료됩니다. 궁금한 사항이 있으면 연락주시기 바랍니다.<br><br>그럼 수고하세요.<br><br>Regards,  <br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Customer Experience and Engagement (CEE)<br><br><publishedDate>2016-06-20T06:48:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HHPe9IAH"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2016-06-07T01:36:38Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2016-06-07T01:36:38Z</b><br><br>안녕하세요,<br><br>네, 확인 후 추가적으로 문의가 있으시면 알려주시기 바랍니다.<br><br>감사합니다.<br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Red Hat Global Support Services<br><br><publishedDate>2016-06-07T01:36:38Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HHPO1IAP"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-06-07T00:46:20Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-06-07T00:46:20Z</b><br><br>빠른 답변에 감사드립니다. <br><br>가이드 주신 것과 같이 금일 실제 운영장비에 적용 후 테스트 진행하도록 하겠습니다.<br><br>명일 중으로 케이스 종료요청 드리도록 하겠습니다. <br><br>감사합니다.<br><br><publishedDate>2016-06-07T00:46:20Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HHPGWIA5"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2016-06-07T00:22:36Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2016-06-07T00:22:35Z</b><br><br>안녕하세요,<br><br>아래와 같이 정상적으로 logging 되고 있습니다.<br>강제로 System.gc() 호출 시에도 Full GC가 로깅되는 것이 확인 됩니다.<br><br>[gc.log]<br>~~~<br>Java HotSpot(TM) 64-Bit Server VM (24.79-b02) for windows-amd64 JRE (1.7.0_79-b15), built on Apr 10 2015 12:36:16 by &quot;java_re&quot; with unknown MS VC++:1600<br>Memory: 4k page, physical 3145272k(2250912k free), swap 6288688k(5161184k free)<br>CommandLine flags: -XX:InitialHeapSize=268435456 -XX:MaxHeapSize=536870912 -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseCompressedOops -XX:-UseLargePagesIndividualAllocation -XX:+UseParallelGC<br>3.716: [GC [PSYoungGen: 66048K-&gt;10734K(76800K)] 66048K-&gt;11620K(251904K), 0.0145668 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]<br>340.383: [GC [PSYoungGen: 76782K-&gt;10747K(76800K)] 77668K-&gt;19660K(251904K), 0.0209815 secs] [Times: user=0.05 sys=0.00, real=0.02 secs]<br>1041.184: [GC [PSYoungGen: 51666K-&gt;10722K(76800K)] 60579K-&gt;23898K(251904K), 0.0153325 secs] [Times: user=0.03 sys=0.00, real=0.02 secs]<br>1041.200: [Full GC [PSYoungGen: 10722K-&gt;0K(76800K)] [ParOldGen: 13175K-&gt;16833K(175104K)] 23898K-&gt;16833K(251904K) [PSPermGen: 21957K-&gt;21942K(44032K)], 0.0995321 secs] [Times: user=0.17 sys=0.00, real=0.11 secs]<br>~~~<br><br>참고로, 제 test 환경은 Oracle JDK 1.7.0_79로 테스트 되었습니다.<br><br>감사합니다.<br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Red Hat Global Support Services<br><br><publishedDate>2016-06-07T00:22:35Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HGS5qIAH"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-06-05T02:04:51Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-06-05T02:04:51Z</b><br><br>안녕하세요!<br>가이드 주신 것과 같이 로컬PC에서 테스트 한 결과 동일하게 파일은 생성이 되나 로그가 적재되지 않습니다..<br>혹시 함께 첨부해주신 GC로그 파일의 로그적재 순간을 확인할 수 있을까요?<br>감사합니다.<br><br><publishedDate>2016-06-05T02:04:51Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HGEO8IAP"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2016-06-03T04:47:13Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2016-06-03T04:47:13Z</b><br><br>안녕하세요,<br><br>VM 환경에 windows로 테스트한 결과, gc.log에 아래와 같이 로깅이 됩니다.<br>말씀하신 경우는 아래의 2.688에 찍힌 GC 로그가 아예 적재가 안된다고 하신거 맞나요?<br><br>~~~<br>Java HotSpot(TM) 64-Bit Server VM (24.79-b02) for windows-amd64 JRE (1.7.0_79-b15), built on Apr 10 2015 12:36:16 by &quot;java_re&quot; with unknown MS VC++:1600<br>Memory: 4k page, physical 3145272k(2074968k free), swap 6288688k(4927700k free)<br>CommandLine flags: -XX:InitialHeapSize=268435456 -XX:MaxHeapSize=536870912 -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseCompressedOops -XX:-UseLargePagesIndividualAllocation -XX:+UseParallelGC<br>2.688: [GC [PSYoungGen: 66048K-&gt;10748K(76800K)] 66048K-&gt;11629K(251904K), 0.0150462 secs] [Times: user=0.03 sys=0.00, real=0.02 secs]<br>~~~<br><br>제가 테스트 한 순서는 아래와 같습니다.<br>기존에 등록된 service를 remove 하시고 아래와 같은 순서로 테스트 부탁드립니다.<br><br>~~~<br>1. service.bat 수정<br>set &quot;CATALINA_HOME=%INSTALL_BASE%\share\tomcat7&quot;<br>=&gt;<br>set &quot;CATALINA_HOME=%INSTALL_BASE%\share\apache-tomcat-7.0.59&quot;<br><br>(%EXECTUTABLE% 부분은 수정 안함. Default 값으로 유지~!!)<br><br>2. service 등록<br>$&gt; service.bat install<br><br>3. 옵션 추가<br>$&gt; cd JWS_HOME\sbin<br>$&gt; tomcat7.exe&quot; //US//Tomcat7 ++JvmOptions=&quot;-Xloggc:C:\jws-3.0\logs\gc.log-XX;+PrintGCDetails;-XX:+PrintGCTimeStamps;-XX:+PrintHeapAtGC&quot;<br><br>4. 확인<br>$&gt; cd JWS_HOME\tomcat7w.exe<br>위 3의 옵션 추가되었는지 확인<br><br>5. windows server에서 Tomcat7 구동하여 gc.log 확인<br><br>(이후 옵션 변경은 tomcat7w를 이용하여 GUI 환경에서 수정, 신규 옵션 추가는 tomcat7.exe를 통해 추가)<br>~~~<br><br>감사합니다.<br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Red Hat Global Support Services<br><br><publishedDate>2016-06-03T04:47:13Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HBExYIAX"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-06-03T00:08:11Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-06-03T00:08:11Z</b><br><br>안녕하새요! 빠른 답변에 감사드립니다. <br>로컬에서 가이드 하신 데로 해당 옵션 외에 기타 다른 로그는 제외 후 테스트한 결과 동일하게 gc.log파일은 생성이 되나 로그가 적재되지 않습니다. <br>해당 변경은 tomcat7w.exe gui환경에서 변경하였구요<br>또한 레지스트리 파일은 특이사항은 없는 것으로 보이는데 확인해야 할 부분이 있는 건가요?<br>catalina.log 및 레지스트리 화면을 첨부드립니다. <br>감사합니다.<br><br><publishedDate>2016-06-03T00:08:11Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HB3O3IAL"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2016-06-02T09:25:19Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2016-06-02T10:00:31Z</b><br><br>안녕하세요,<br><br>레지스트리 편집기에서 봤을때 (HKEY_LOCAL_MACHINE &gt; SYSTEM &gt; ControlSetxxx &gt; services &gt; 등록된 tomcat name),<br>특이사항은 없는지 좀 봐주실 수 있나요?<br><br>그리고, 몇가지만 확인 좀 하겠습니다.<br><br>1) Xloggc 외의 다른 옵션들은 정상적으로 동작이 되는지?<br>2) Perm 관련 옵션 변경 (1.8에서는 -XX:MaxMetaspaceSize로 사용되는 것으로 알고 있습니다)<br>3) Xloggc 옵션을 제거하면 stdout 에서는 정상적으로 로깅이 되는지?<br>4) -Xloggc:E:\LOG\jboss\gc.log;-verbose:gc;-XX:+PrintGCDetails;-XX:+PrintGCTimeStamps 4개 옵션만 적용하고 나머니 아래 옵션들은 제거하고 확인 부탁드립니다.<br>[제거]<br>-XX:PermSize=256m;-XX:MaxPermSize=256m;-XX:NewSize=384m;-XX:MaxNewSize=384m;-XX:SurvivorRatio=4;<br>-Dcom.sun.management.jmxremote;-Dcom.sun.management.jmxremote.port=8999;-Dcom.sun.management.jmxremote.authenticate=false;-Dcom.sun.management.jmxremote.ssl=false<br><br><br>저도 좀 더 확인을 해보도록 하겠습니다.<br><br>감사합니다.<br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Red Hat Global Support Services<br><br><publishedDate>2016-06-02T09:25:19Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HB33UIAT"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-06-02T08:51:18Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-06-02T08:51:18Z</b><br><br>안녕하세요! <br>빠른 답변에 감사드립니다<br>최초 서비스 등록 시 JVM_OPTIONS에 명시하여 등록진행하였으며<br>이후 변경 시는 tomcat7w.exe를 사용하여 GUI환경에서 변경하였습니다. <br>감사합니다.<br><br><publishedDate>2016-06-02T08:51:18Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HB2iaIAD"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2016-06-02T08:15:40Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2016-06-02T08:15:40Z</b><br><br>안녕하세요,<br><br>아래 설명드린 방법도 안되시는건가요?<br><br>~~~<br>JWS_HOME\bin 디렉토리의 tomcat7w.exe를 실행하시면 [1]의 하단에 나온 이미지와 같이 Tomcat에서 사용하는 JAVA Properties 설정을 할 수 있습니다.<br>Java 탭의 'Java Options'에 해당 옵션 설정을 하시고 확인 부탁드립니다.<br><br>[1] http://stackoverflow.com/questions/27822477/how-can-i-add-timestamps-gc-log-file-names-in-a-java-service-under-windows<br>~~~<br><br>감사합니다. <br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Red Hat Global Support Services<br><br><publishedDate>2016-06-02T08:15:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HB2dVIAT"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-06-02T08:05:34Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-06-02T08:05:34Z</b><br><br>안녕하세요! 빠른 답변에 감사드립니다. <br>네 해당 구문을 &quot;/&quot;, &quot;\&quot; 으로 변경하여도 동일하게 적재가 안됩니다.<br>해당 파일은 정상적으로 생성이 되는데 적재가 안되네요..<br>다른 쪽으로 확인해 볼수 있는 방법은 없을까요?<br>실제 운영서버는 windows2012이나 제 로컬PC windows7에서 테스트해도 동일한 결과가 나옵니다.<br>확인요청드립니다.<br><br><publishedDate>2016-06-02T08:05:34Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HB1AsIAL"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2016-06-02T05:01:24Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2016-06-02T05:01:24Z</b><br><br>안녕하세요,<br><br>죄송하게도 저희가 Windows 환경을 사용하지 않다보니, 테스트를 하기가 힘드네요.<br><br>설정하신 부분은 딱히 문제가 있어 보이지는 않습니다.<br>path 구분을 / -&gt; \ 로 바꿔도 동일한거죠?<br><br>startup.bat을 이용하여 구동하는 경우에는 setenv.bat에 아래와 같이 CATALINA_OPTS에 JVM 옵션들을 설정해 주면 되는데요,<br>set &quot;CATALINA_OPTS=-XX:+PrintGC -Xloggc:~~~&quot;<br><br>Windows Service로 등록되면 JWS_HOME/sbin/tomcat7.exe가 수행이 되서 setenv.bat이 사용되지 않을거라 생각됩니다.<br><br>JWS_HOME\bin 디렉토리의 tomcat7w.exe를 실행하시면 [1]의 하단에 나온 이미지와 같이 Tomcat에서 사용하는 JAVA Properties 설정을 할 수 있습니다.<br>Java 탭의 'Java Options'에 해당 옵션 설정을 하시고 확인 부탁드립니다.<br><br><br>[1] http://stackoverflow.com/questions/27822477/how-can-i-add-timestamps-gc-log-file-names-in-a-java-service-under-windows<br><br>감사합니다. <br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Red Hat Global Support Services<br><br><publishedDate>2016-06-02T05:01:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HAxvDIAT"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2016-06-01T23:53:17Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2016-06-01T23:53:17Z</b><br><br>안녕하세요,  <br>  <br>Red Hat Global Support Services를 이용해주셔서 감사합니다.  <br><br>저는 박민우라고 하고 앞으로 이 케이스를 담당하게 되었습니다.<br><br>현재 이 케이스의 내용을 자세히 살펴보는 중이며, 곧 업데이트 하도록 하겠습니다.<br>  <br>감사합니다. <br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Red Hat Global Support Services<br><br><publishedDate>2016-06-01T23:53:17Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HAlkeIAD"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-06-01T09:14:46Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-06-01T09:14:46Z</b><br><br>안녕하세요!<br>삼성생명 JBOSS EWS-AS(TOMCAT)으로 현재 서비스 중인 시스템의 신규 인스턴스를 추가 구성하여 윈도우서비스를 등록중에 있습니다. <br><br>OS: Windows 2012 <br>JVM : Oracle jdk1.7.0_80<br><br>해당 서비스는 정상 등록되어 APPS 테스트는 종료했으나 JVM 옵션관련하여 문의가 있습니다. <br><br>service.bat에 옵션변경 후 정상적으로 적용되나 GC LOG가 적재되지 않습니다. <br><br>service.bat<br>##중략##<br>&quot;%EXECUTABLE%&quot; //US//%SERVICE_NAME% ++JvmOptions &quot;-Djava.io.tmpdir=%CATALINA_BASE%\temp;-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager;-Djava.util.logging.config.file=%CATALINA_BASE%\conf\logging.properties;-XX:PermSize=256m;-XX:MaxPermSize=256m;-XX:NewSize=384m;-XX:MaxNewSize=384m;-XX:SurvivorRatio=4;-XX:+PrintGCDetails;-XX:+PrintGCTimeStamps;-XX:+PrintHeapAtGC;-Xloggc:E:/LOG/jboss/gc.log;-Dcom.sun.management.jmxremote;-Dcom.sun.management.jmxremote.port=8999;-Dcom.sun.management.jmxremote.authenticate=false;-Dcom.sun.management.jmxremote.ssl=false&quot; --JvmMs 1024 --JvmMx 1024<br>##생략##<br><br>E:\pbwSvr11\bin&gt;service.bat install<br>Installing the service 'Tomcat7' ...<br>Using CATALINA_HOME:    &quot;E:/pbwSvr11&quot;<br>Using CATALINA_BASE:    &quot;E:/pbwSvr11&quot;<br>Using JAVA_HOME:        &quot;C:\Java\jdk1.8.0_65&quot;<br>Using JRE_HOME:         &quot;C:\Java\jdk1.8.0_65\jre&quot;<br>Using JVM:              &quot;C:\Java\jdk1.8.0_65\jre\bin\server\jvm.dll&quot;<br>The service 'Tomcat7' has been installed.<br>E:\pbwSvr11\bin<br><br>GC LOG를 적재하기 위한 옵션이 별도로 있는지요?<br>확인요청 드립니다 <br>감사합니다.<br><br><publishedDate>2016-06-01T09:14:46Z</publishedDate><createdByType>Customer</createdByType><br>======================<br></comments><br>