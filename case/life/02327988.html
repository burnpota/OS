======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2019-03-01T08:21:31Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2019-03-08T06:17:52Z</b><br><b>id : 5002K00000dMaVrQAK</b><br>======================<br><br><b><font size=15>
제목  : 시스템 행 발생
</font></b><br><br>======================<br><actionPlan>올려주신 데이터를 분석한 결과 시스템 행이 2월 28일 23시 7분경 발생하였으며, 이는 아래 문서[1]에서 설명하는<br>커널 버그에 의해 발생된 것으로 보여집니다.<br>따라서, 커널 버전을 kernel-3.10.0-327.55.1.el7 혹은 그 이상으로 업데이트하여 문제를 해소하시기 바랍니다.<br>혹은 kernel.hung_task_panic = 1 설정을 통해 vmcore 수집을 진행하여 보내주시면 추가로 분석할 부분이 있는지도<br>검토해보도록 하겠습니다.<br><br>[관련 문서]<br><br>[1] Kernel panic or soft lockup or hung in netlink_compare in Red Hat Enterprise Linux 7 <br>    https://access.redhat.com/solutions/2647381</actionPlan><b>사전문의<br></b><br>안녕하세요?<br>시스템에서 2월 28일 23시 07분경 HANG TASK TIME OUT으로 인한 CALL TRACE가  발생하여 시스템을 강제적으로 리부팅하였습니다.<br>SAR 데이터는 23시 04분까지 밖에 생성되지 않았으며 덤프도 발생하지 않았습니다.<br>HANG 상황이 의심되어 관련 이슈에 대한 분석을 요청드리는 바이며 <br>아래와 같이 분석에 필요한 파일 4개( sosreport, 어제/오늘 messages 파일, 어제 sar 데이터/nfsiostat 자료)를  수집하여 dropbox에 업로드 하였습니다. <br><br> - 파일 목록<br>  . sosreport-PMDGAL01SL-20190301163003.tar.xz<br>  . messages.zip<br>  . sa28.zip<br>  . nfsiostat.zip<br><br>분석 요청드리고 해당 파일 링크 부탁드리겠습니다.<br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>PMDGAL01SL</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0a2K00000PWbksQAD"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2019-03-08T06:17:50Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2019-03-08T06:17:49Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 기술 문의의 상태를 처리완료 상태로 변경하고자 합니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 *재개*하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Software Maintenance Engineer, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2019-03-08T06:17:49Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PVxdTQAT"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2019-03-06T01:30:58Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2019-03-06T01:30:57Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Software Maintenance Engineer, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2019-03-06T01:30:57Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PRABqQAP"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2019-03-04T00:59:54Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2019-03-04T00:59:54Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>1. 해당 버그가 다른 장비에서 발생할수 있는지요?<br><br>- 네 다른 장비에서도 발생할 수 있습니다.<br><br>2. 제가 알고 있기로는 해당 커널로 오랜동안 운영되었는데요 그동안 해당 이슈가 발생하지 않았습니다<br>특별히 이번에 발생한 이유가 있을까요?<br><br>- 버그에 해당하는 상황이 연출되어서 발생된 것입니다. rhashtable 구현에 문제가 있어, 버그가 수정되었으므로,<br>  커널 업데이트를 진행하여 추후 발생될 가능성을 해소하시기 바랍니다.<br><br>아울러, 7.2 EUS 가 2017년 11월 30일 종료되어, 더 이상 추가 업데이트를 지원하지 않으니,<br>안정성과 성능 향상, 보안 취약점 해소를 위한 최신버전 7.6 버전으로 업데이트도 고려해보시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2019-03-04T00:59:54Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PRA8cQAH"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2019-03-04T00:49:45Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2019-03-04T00:49:45Z</b><br><br>답변감사합니다<br><br>현재 고객사에 동일한 커널로 수백대가 운영중입니다<br><br>1. 해당 버그가 다른 장비에서 발생할수 있는지요?<br><br>2. 제가 알고 있기로는 해당 커널로 오랜동안 운영되었는데요 그동안 해당 이슈가 발생하지 않았습니다<br>특별히 이번에 발생한 이유가 있을까요?<br><br>3. 커널 업데이트외에 다른 방법이 있나요?<br><br><publishedDate>2019-03-04T00:49:45Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000PR9trQAD"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2019-03-03T23:45:47Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2019-03-03T23:45:47Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>올려주신 데이터를 분석한 결과 시스템 행이 2월 28일 23시 7분경 발생하였으며, 이는 아래 문서[1]에서 설명하는<br>커널 버그에 의해 발생된 것으로 보여집니다.<br>따라서, 커널 버전을 kernel-3.10.0-327.55.1.el7 혹은 그 이상으로 업데이트하여 문제를 해소하시기 바랍니다.<br>혹은 kernel.hung_task_panic = 1 설정을 통해 vmcore 수집을 진행하여 보내주시면 추가로 분석할 부분이 있는지도<br>검토해보도록 하겠습니다.<br><br>[관련 문서]<br><br>[1] Kernel panic or soft lockup or hung in netlink_compare in Red Hat Enterprise Linux 7 <br>    https://access.redhat.com/solutions/2647381<br><br>아래는 분석 결과입니다.<br><br>Feb 28 23:09:07 PMDGAL01SL kernel: INFO: task vnetd:2799 blocked for more than 120 seconds.<br>Feb 28 23:09:07 PMDGAL01SL kernel: &quot;echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs&quot; disables this message.<br>Feb 28 23:09:07 PMDGAL01SL kernel: vnetd           D ffffffff81a2ad08     0  2799      1 0x00000000<br>Feb 28 23:09:07 PMDGAL01SL kernel: ffff883adbafbcf0 0000000000000082 ffff883af477f300 ffff883adbafbfd8<br>Feb 28 23:09:07 PMDGAL01SL kernel: ffff883adbafbfd8 ffff883adbafbfd8 ffff883af477f300 ffffffff81a2ad00<br>Feb 28 23:09:07 PMDGAL01SL kernel: ffffffff81a2ad04 ffff883af477f300 00000000ffffffff ffffffff81a2ad08<br>Feb 28 23:09:07 PMDGAL01SL kernel: Call Trace:<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff8163d309&gt;] schedule_preempt_disabled+0x29/0x70<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff8163b005&gt;] __mutex_lock_slowpath+0xc5/0x1c0<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff8163a46f&gt;] mutex_lock+0x1f/0x2f<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff815574ae&gt;] netlink_insert+0x4e/0x100<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff81308470&gt;] ? rhashtable_lookup_compare+0x30/0x90<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff81557b30&gt;] netlink_autobind.isra.37+0xc0/0x100<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff81559c0a&gt;] netlink_bind+0x14a/0x1e0<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff81511490&gt;] SYSC_bind+0xe0/0x120<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffffa051a8b8&gt;] ? prst_preproc+0x38/0x690 [RedCastle]<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff811e10f6&gt;] ? get_empty_filp+0xd6/0x1a0<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff811e11de&gt;] ? alloc_file+0x1e/0xf0<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff8151257e&gt;] SyS_bind+0xe/0x10<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffffa0526ba3&gt;] prst_bind+0x83/0xc0 [RedCastle]<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffffa0526c14&gt;] rg_bind+0x34/0x50 [RedCastle]<br>Feb 28 23:09:07 PMDGAL01SL kernel: [&lt;ffffffff81647209&gt;] system_call_fastpath+0x16/0x1b<br><br>아래는 nfsiostat 을 분석한 결과이며, 특이점은 발견되지 않습니다.<br><br>ops:<br>number of operations per second<br>thrput:<br>number of kB written/read per second<br>perop:<br>number of kB written/read per each operation<br>retrans:<br>number of retransmissions<br>rtt:<br>network + server latency of the request (ms)<br>exe:<br>total time the request spent from init to release, includes rtt (ms)<br>read:<br>n:<br>1396<br>avg-ops:<br>     0.086<br>max-ops:<br>    15.000<br>n:<br>1396<br>avg-thrput:<br>     5.347<br>max-thrput:<br>   963.809<br>n:<br>1396<br>avg-perop:<br>    52.359<br>max-perop:<br>    64.254<br>n:<br>1396<br>avg-retrans:<br>     0.000<br>max-retrans:<br>     0.000<br>n:<br>1396<br>avg-rtt:<br>     7.210<br>max-rtt:<br>     7.252<br>n:<br>1396<br>avg-exe:<br>     7.398<br>max-exe:<br>     7.440<br>write:<br>n:<br>7619<br>avg-ops:<br>     0.814<br>max-ops:<br>    92.000<br>n:<br>7619<br>avg-thrput:<br>     1.923<br>max-thrput:<br>  5875.410<br>n:<br>7619<br>avg-perop:<br>    12.007<br>max-perop:<br>    64.293<br>n:<br>7619<br>avg-retrans:<br>     0.000<br>max-retrans:<br>     0.000<br>n:<br>7619<br>avg-rtt:<br>     0.738<br>max-rtt:<br>    39.500<br>n:<br>7619<br>avg-exe:<br>     1.676<br>max-exe:<br>    39.500<br><br>Linux 3.10.0-327.53.1.el7.x86_64 (PMDGAL01SL)   02/28/19        _x86_64_        (10 CPU)<br><br>00:00:01        CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>23:04:01        all      0.22      0.00      0.30      0.00      0.00      0.00      0.00      0.00      0.00     99.48<br>Average:        all      1.74      0.00      0.43      0.00      0.00      0.00      0.02      0.00      0.00     97.81<br><br>00:00:01     pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff<br>23:04:01         0.00     14.61   4049.27      0.00   2480.41      0.00      0.00      0.00      0.00<br>Average:         0.59     36.68   3846.65      0.00   2604.39      0.00      0.00      0.00      0.00<br><br>00:00:01          tps      rtps      wtps   bread/s   bwrtn/s<br>23:04:01         2.05      0.00      2.05      0.00     29.22<br>Average:         2.48      0.01      2.47      1.17     73.36<br><br>00:00:01    kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty<br>23:04:01    150867536  96251792     38.95     31460  68325152 191968848     50.34  75279588  15463108       188<br>Average:    151085864  96033464     38.86     31454  68172842 191897302     50.32  75009098  15503713       299<br><br>00:00:01    kbswpfree kbswpused  %swpused  kbswpcad   %swpcad<br>23:04:01    134216696         0      0.00         0      0.00<br>Average:    134216696         0      0.00         0      0.00<br><br>00:00:01      runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>23:04:01            1      1898      0.01      0.05      0.05         0<br>Average:            2      1901      0.18      0.18      0.18         0<br><br>00:00:01          DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util<br>23:04:01      dev8-16      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>23:04:01      dev8-32      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>23:04:01       dev8-0      1.27      0.00     21.76     17.18      0.00      0.16      0.07      0.01<br>23:04:01      dev8-48      0.72      0.00      7.36     10.28      0.00      0.81      0.30      0.02<br>23:04:01      dev8-64      0.07      0.00      0.10      1.50      0.00      0.25      0.25      0.00<br>23:04:01     dev253-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>23:04:01     dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>23:04:01     dev253-2      0.07      0.00      4.60     69.00      0.00      0.00      0.00      0.00<br>23:04:01     dev253-3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>23:04:01     dev253-4      0.13      0.00      1.15      8.62      0.00      0.88      0.38      0.00<br>23:04:01     dev253-5      0.35      0.00      3.33      9.52      0.00      0.67      0.19      0.01<br>23:04:01     dev253-6      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>23:04:01     dev253-7      0.32      0.00      2.88      9.11      0.00      0.95      0.32      0.01<br>23:04:01     dev253-8      0.07      0.00      0.10      1.50      0.00      0.25      0.25      0.00<br><br>00:00:01        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s<br>23:04:01    eno33559296      0.03      0.05      0.00      0.01      0.00      0.00      0.00<br>23:04:01           lo      3.95      3.95      0.25      0.25      0.00      0.00      0.00<br>23:04:01    eno16780032     28.56     42.20      6.24     27.64      0.00      0.00      0.00<br>Average:    eno33559296      0.84     35.75      0.07     52.58      0.00      0.00      0.00<br>Average:           lo     35.37     35.37      1.86      1.86      0.00      0.00      0.00<br>Average:    eno16780032    411.75    431.77    169.13    180.64      0.00      0.00      0.00<br><br>00:00:01        IFACE   rxerr/s   txerr/s    coll/s  rxdrop/s  txdrop/s  txcarr/s  rxfram/s  rxfifo/s  txfifo/s<br>23:04:01    eno33559296      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>23:04:01           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>23:04:01    eno16780032      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>Average:    eno33559296      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>Average:    eno16780032      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br><br>00:00:01       call/s retrans/s    read/s   write/s  access/s  getatt/s<br>23:02:01         1.62      0.00      0.00      0.12      0.27      0.38<br>23:03:01        76.95      0.00      0.00      0.03      0.18     67.53<br>23:04:01         1.68      0.00      0.00      0.03      0.28      0.83<br>Average:         1.80      0.00      0.00      0.08      0.27      0.83<br>======================<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2019-03-03T23:45:47Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>