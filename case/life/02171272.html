======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2018-08-29T01:17:37Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-09-14T10:09:09Z</b><br><b>id : 500A000000bwAhuIAE</b><br>======================<br><br><b><font size=15>
제목  : [rear]서로 다른 대역 rear를 nfs구성시 방화벽 open port문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하십니까 타임게이트 오선우입니다<br><br>다른 대역에 있는 서버끼리 nfs를 통하여 rear백업 및 복구를 구성하려고 합니다<br>구성시 문의 사항이 있어 문의드립니다<br><br>1.  방화벽 설정시 아래 포트만 열어주면 되는것인가요?<br>UDP : 111, 1039, 1047,1048 and 2049<br>TCP:  111.1039,1047,1048 and 2049<br><br>2. 위 상황에서 nfs server 구성시 포트를 랜덤하게  다중포트를 사용하는것으로 알고 있습니다<br>위 경우 어떻게 구성하면 rear 구성에 문제가 없는지 확인 부탁드립니다<br><br>감사합니다<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>ITLBKAP1</hostname><br><br><br><comment id="a0aA000000NVYBfIAP"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-29T08:34:08Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-30T00:35:26Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>앞서 안내드린 NFSv3 의 KCS 문서를 보시면 다음과 같이 기술되어 있습니다.<br>====<br>NFSv3 and below rely on portmap to assign the ports on which it will listen. One side effect of this is that the ports are randomly assigned, so each time NFS is restarted the ports will change. This can make it difficult to run an NFS server behind a firewall which only allows access to specific ports on the system.<br><br>The first step is to assign a permanent port number to each of the NFS services (rquotad, mountd, statd, and lockd). You may use your own custom port numbers, although there are SELinux rules which prevent some of these services from starting on non-default ports. We strongly recommend using the default ports. The following examples use the default port numbers.<br>====<br>즉, 말씀하신 것과 같이 NFS 서비스를 제공하는 관련 데몬들이 동적으로 포트를 할당받기 때문에 NFS 가 재시작될 때마다 포트들이 바뀔 수 있습니다.<br>따라서, 서비스 포트가 랜덤하게 바뀌는 것을 방지하기 위하여 /etc/sysconfig/nfs 에 사용하실 포트를 지정하실 필요가 있습니다.<br>포트를 지정함으로써 고정된 포트에 대하여 방화벽을 통해 제어하는 것이 용이하게 됩니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-29T08:34:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NVXwBIAX"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-08-29T08:10:14Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-08-29T08:10:14Z</b><br><br>답변 감사합니다<br><br>제가 잘 이해가 안되는 부분이 있어서 몇가지 문의드립니다<br><br>111,2049 포트는 고정 되어 있고 나머지 rpc.statd,rpc.lockd, rpc.mountd,rpc.rquotad 서비스에 포트는 random인것 같은데요<br><br>nfs서버입장에서 서버자체의 방화벽(iptable,firewalld) 을 사용하지 않고 다 열려 있을 경우<br><br>중간에  방화벽 서버가 존재할경우 방화벽 셋업이 필요가 없는건가요? 111포트와 2049 포트만 열려 있다면 사용이 가능한것인가요?<br><br>rpcinfo를 쳐서 나온 포트들에대해서 열여줘야 하는건가요?<br><br>nfs서버는 현재 다른 장비들에게도 공유중이기에 문서에 나와있듯이 포트 고정이 필요한 상황인가요?<br><br>참고적으로 서버자체 방화벽은 사용하지 않고 있습니다<br><br>감사합니다다<br><br><publishedDate>2018-08-29T08:10:14Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NVW0SIAX"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-29T05:34:52Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-29T05:55:26Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>문의하신 내용에 대하여 안내를 드리면 다음과 같습니다.<br><br>&gt; 1.  방화벽 설정시 아래 포트만 열어주면 되는것인가요?<br>&gt; UDP : 111, 1039, 1047,1048 and 2049<br>&gt; TCP:  111.1039,1047,1048 and 2049<br><br>NFS 의 버젼(NFSv3, NFSv4) 에 따라 대응 포트가 다릅니다.<br><br>따라서, 관련 문서를 안내드립니다.<br><br>제품 메뉴얼<br>https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/storage_administration_guide/#s2-nfs-nfs-firewall-config<br><br>How to configure a system as an NFSv3 server which sits behind a firewall with NFS clients outside of the firewall? <br>  https://access.redhat.com/solutions/3258<br><br>How can I configure a system as an NFSv4 server which sits behind a firewall with NFS clients outside the firewall? <br>  https://access.redhat.com/solutions/221933<br><br>&gt; 2. 위 상황에서 nfs server 구성시 포트를 랜덤하게  다중포트를 사용하는것으로 알고 있습니다<br>&gt; 위 경우 어떻게 구성하면 rear 구성에 문제가 없는지 확인 부탁드립니다<br><br>NFS 서버단에서 방화벽의 목적지 포트에 대해서 열어주시면 됩니다.<br><br>따라서, 설정 및 테스트해보시고 피드백 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-29T05:34:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NVUDyIAP"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-29T02:01:41Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-29T02:01:40Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>저는 Platform Support 를 담당하고 있는<br>Senior Technical Support Engineer 신재욱입니다.<br><br>현재 올려주신 문의내용에 대해 확인 중이며<br>관련 내용을 업데이트드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-29T02:01:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>