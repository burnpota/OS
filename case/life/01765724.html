======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2016-12-31T08:03:44Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2017-01-22T11:13:13Z</b><br><b>id : 500A000000W7u1ZIAR</b><br>======================<br><br><b><font size=15>
제목  : [기술문의]파일시스템 생성 시 초기값 차이
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br>12월29일 18시에 기존 BACKUP1,2,3 볼륨과 동일하게 BACKUP4,5,6 볼륨 생성후<br> <br>multipath 설정을 하고, 해당 파일시스템 생성 후 oracleasm create 작업이 <br><br>수행되었습니다.<br><br>이슈는 기존 파일시스템을 구성했을 때와 같이 파일시스템 옵션은 <br><br>fdisk -cu 로 동일하게 진행했음에도 불구하고, 아래처럼 오라클에서 해당 <br><br>파일시스템을 볼때 1M 차이가 나는 것입니다.<br> <br>이러한 차이가 왜 일어나는지 알수 있을까요??  sosreport 첨부합니다.<br><br>감사합니다.<br> <br>root@SLPIDADL01 /root # su - oragrid /*' disks=allADL01 /home/oragrid # /oragrid/app/12.1.0/bin/kfod asm_diskstring='/dev/oracleasm/disks -------------------------------------------------------------------------------- Disk Size Path User Group ================================================================================<br> 1: 102399 Mb /dev/oracleasm/disks/BACKUP1 oragrid dba<br> 2: 102399 Mb /dev/oracleasm/disks/BACKUP2 oragrid dba<br> 3: 102399 Mb /dev/oracleasm/disks/BACKUP3 oragrid dba<br> 4: 102398 Mb /dev/oracleasm/disks/BACKUP4 oragrid dba<br> 5: 102398 Mb /dev/oracleasm/disks/BACKUP5 oragrid dba<br> 6: 102398 Mb /dev/oracleasm/disks/BACKUP6 oragrid dba <br> <br>root@SLPIDADL01 /root # fdisk -lu /dev/mapper/DG_BACKUP6<br>Disk /dev/mapper/DG_BACKUP6: 107.4 GB, 107374510080 bytes<br>53 heads, 54 sectors/track, 73275 cylinders, total 209715840 sectors<br>Units = sectors of 1 * 512 = 512 bytes<br>Sector size (logical/physical): 512 bytes / 512 bytes<br>I/O size (minimum/optimal): 512 bytes / 512 bytes<br>Disk identifier: 0x2ada2ad2<br>                  Device Boot      Start         End      Blocks   Id  System<br>/dev/mapper/DG_BACKUP6p1            2048   209715839   104856896   83  Linux<br> <br>root@SLPIDADL01 /root # fdisk -lu /dev/mapper/DG_BACKUP1<br>Disk /dev/mapper/DG_BACKUP1: 107.4 GB, 107374510080 bytes<br>53 heads, 54 sectors/track, 73275 cylinders, total 209715840 sectors<br>Units = sectors of 1 * 512 = 512 bytes<br>Sector size (logical/physical): 512 bytes / 512 bytes<br>I/O size (minimum/optimal): 512 bytes / 512 bytes<br>Disk identifier: 0x1631b088<br>                  Device Boot      Start         End      Blocks   Id  System<br>/dev/mapper/DG_BACKUP1p1            2048   209715839   104856896   83  Linux<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>======================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김태현 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-3734-0720<br>- 메일주소 : 김태현 &lt;th0720.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com'<br>======================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000IXYkCIAX"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2017-01-02T07:30:17Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2017-01-02T07:30:17Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>우선 현재 두개의 차이는 말씀하신 것 처럼 fdisk -cu의 옵션을 사용할때와 사용하지 않았을때의 차이에서 발생한 것으로 확인됩니다.<br><br>아래 볼륨들을 보시면...<br><br>DG_BACKUP6 sdaa,sdad <br>DG_BACKUP5 sdz,sdac<br>DG_BACKUP4 sdy,sdab<br><br>parted -s /dev/sdaa print<br><br>Model: HITACHI OPEN-V (scsi)<br>Disk /dev/sdaa: 107GB<br>Sector size (logical/physical): 512B/512B<br>Partition Table: msdos<br><br>Number  Start   End    Size   Type     File system  Flags<br> 1      32.3kB  107GB  107GB  primary<br>======================<br>DG_BACKUP3 sdi,sdt <br>DG_BACKUP2 sdh,sds<br>DG_BACKUP1 sdg,sdr <br><br>* sdy,sdab의 경우 파티션 테이블이 확인되지 않습니다.<br> Error: /dev/sdy: unrecognised disk label<br> Error: /dev/sdab: unrecognised disk label<br><br>Model: HITACHI OPEN-V (scsi)<br>Disk /dev/sdi: 107GB<br>Sector size (logical/physical): 512B/512B<br>Partition Table: msdos<br><br>Number  Start   End    Size   Type     File system  Flags<br> 1      1049kB  107GB  107GB  primary<br>======================<br>위에서처럼 시작위치의 차이에서 해당 1M의 차이가 발생되고 있는 것으로 확인됩니다.<br>즉 -u 옵션 사용시 cylinder대신에 sector 사이즈로 계산이 되고 있기 때문에 시작점의 차이가 있고 이는 시스템을 운영하는데 있어서 특별한 문제의 상황은 아닙니다.<br>======================<br>(Q2) 명령어는 어떤 명령어와 어떤 옵션들을 사용하셨는지? 차이점이 있는지?<br>-&gt;BACKUP1-3은 fdisk &lt;디바이스명&gt; , BACKUP4-6 은 fdisk -cu &lt;디바이스명&gt; 으로 생성했습니다.<br>    fdisk -cu 로 생성시 파티션 start 가 2048로 시작되는데 그냥 fdisk 로 파티션을 생성하는것과<br>    차이점을 알려주시면 감사하겠습니다. 더불어 fdisk 와 fdisk -cu  둘중 어느것이 더 레퍼런스한 파티션 생성<br>    인지 알려주시면 감사하겠습니다.<br><br><br>두가지 어떤 것을 사용해도 큰 문제의 요소가 되지는 않으나, 기본적으로 fdisk -cu를 사용하는 것을 권장을 드리고 있습니다. 참고로 RHEL7 버젼에서는 fdisk에 별도의 옵션이 없더라도 -cu의 옵션이 기본적으로 적용되고 있습니다.<br>======================<br>업무에 참고하여 주시기 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-01-02T07:30:17Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IXYTdIAP"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-01-02T06:12:41Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-01-02T06:12:41Z</b><br><br>안녕하세요.<br>(Q1) 두 볼륨 생성시의 환경이 어떻게 되는지요? 예를들어 BACKUP1-3과 4-6이 동일한 시스템(RHEL버젼 또는 생성한 시스템의 환경)에서 생성하신 것인지?<br>-&gt;BACKUP1-3과 4-6은 동일한 환경에서 생성되었다고 합니다.<br><br>(Q2) 명령어는 어떤 명령어와 어떤 옵션들을 사용하셨는지? 차이점이 있는지?<br>-&gt;BACKUP1-3은 fdisk &lt;디바이스명&gt; , BACKUP4-6 은 fdisk -cu &lt;디바이스명&gt; 으로 생성했습니다.<br>    fdisk -cu 로 생성시 파티션 start 가 2048로 시작되는데 그냥 fdisk 로 파티션을 생성하는것과<br>    차이점을 알려주시면 감사하겠습니다. 더불어 fdisk 와 fdisk -cu  둘중 어느것이 더 레퍼런스한 파티션 생성<br>    인지 알려주시면 감사하겠습니다.<br><br><publishedDate>2017-01-02T06:12:41Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IXYGoIAP"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2017-01-02T05:00:09Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2017-01-02T05:00:09Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>현재 설명주신 것을 보면 BACKUP 1,2,3 볼륨과 BACKUP4,5,6 볼륨의 생성의 시점이 다르다고 하셨는데요..<br><br>&gt; 12월29일 18시에 기존 BACKUP1,2,3 볼륨과 동일하게 BACKUP4,5,6 볼륨 생성후<br><br><br>혹시 (Q1) 두 볼륨 생성시의 환경이 어떻게 되는지요? 예를들어 BACKUP1-3과 4-6이 동일한 시스템(RHEL버젼 또는 생성한 시스템의 환경)에서 생성하신 것인지? <br>그리고 혹시 (Q2) 명령어는 어떤 명령어와 어떤 옵션들을 사용하셨는지? 차이점이 있는지?<br>======================<br>확인 바랍니다.<br><br><br>감사합니다.<br><br><publishedDate>2017-01-02T05:00:09Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IXXwKIAX"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2017-01-02T01:29:15Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2017-01-02T01:29:14Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>문의 주신 내용에 대해서 확인 후, 업데이트 드리겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2017-01-02T01:29:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>12월29일 18시에 기존 BACKUP1,2,3 볼륨과 동일하게 BACKUP4,5,6 볼륨 생성후<br> <br>multipath 설정을 하고, 해당 파일시스템 생성 후 oracleasm create 작업이 <br><br>수행되었습니다.<br><br>이슈는 기존 파일시스템을 구성했을 때와 같이 파일시스템 옵션은 <br><br>fdisk -cu 로 동일하게 진행했음에도 불구하고, 아래처럼 오라클에서 해당 <br><br>파일시스템을 볼때 1M 차이가 나는 것입니다.<br> <br>이러한 차이가 왜 일어나는지 알수 있을까요??  sosreport 첨부합니다.<br><br>감사합니다.<br> <br>root@SLPIDADL01 /root # su - oragrid /*' disks=allADL01 /home/oragrid # /oragrid/app/12.1.0/bin/kfod asm_diskstring='/dev/oracleasm/disks -------------------------------------------------------------------------------- Disk Size Path User Group ================================================================================<br> 1: 102399 Mb /dev/oracleasm/disks/BACKUP1 oragrid dba<br> 2: 102399 Mb /dev/oracleasm/disks/BACKUP2 oragrid dba<br> 3: 102399 Mb /dev/oracleasm/disks/BACKUP3 oragrid dba<br> 4: 102398 Mb /dev/oracleasm/disks/BACKUP4 oragrid dba<br> 5: 102398 Mb /dev/oracleasm/disks/BACKUP5 oragrid dba<br> 6: 102398 Mb /dev/oracleasm/disks/BACKUP6 oragrid dba <br> <br>root@SLPIDADL01 /root # fdisk -lu /dev/mapper/DG_BACKUP6<br>Disk /dev/mapper/DG_BACKUP6: 107.4 GB, 107374510080 bytes<br>53 heads, 54 sectors/track, 73275 cylinders, total 209715840 sectors<br>Units = sectors of 1 * 512 = 512 bytes<br>Sector size (logical/physical): 512 bytes / 512 bytes<br>I/O size (minimum/optimal): 512 bytes / 512 bytes<br>Disk identifier: 0x2ada2ad2<br>                  Device Boot      Start         End      Blocks   Id  System<br>/dev/mapper/DG_BACKUP6p1            2048   209715839   104856896   83  Linux<br> <br>root@SLPIDADL01 /root # fdisk -lu /dev/mapper/DG_BACKUP1<br>Disk /dev/mapper/DG_BACKUP1: 107.4 GB, 107374510080 bytes<br>53 heads, 54 sectors/track, 73275 cylinders, total 209715840 sectors<br>Units = sectors of 1 * 512 = 512 bytes<br>Sector size (logical/physical): 512 bytes / 512 bytes<br>I/O size (minimum/optimal): 512 bytes / 512 bytes<br>Disk identifier: 0x1631b088<br>                  Device Boot      Start         End      Blocks   Id  System<br>/dev/mapper/DG_BACKUP1p1            2048   209715839   104856896   83  Linux</issue><timeFramesAndUrgency>======================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김태현 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-3734-0720<br>- 메일주소 : 김태현 &lt;th0720.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com'<br>======================================================================</timeFramesAndUrgency><cep>false</cep></case>