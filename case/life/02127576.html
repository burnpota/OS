======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2018-06-25T09:14:11Z</b><br><b>마지막 답변자 : Workflow Integration</b><br><b>마지막 수정 일자 : 2018-07-24T06:56:02Z</b><br><b>id : 500A000000b9eZlIAI</b><br>======================<br><br><b><font size=15>
제목  : [생명]rear 구성 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요.<br>rear local.conf 관련 문의 드립니다. 구성은 아래와 같습니다.<br><br>OUTPUT=ISO<br>OUTPUT_URL=nfs://172.19.12.193/os_backup/rear/regular/<br>BACKUP=NETFS<br>AUTOEXCLUDE_MULTIPATH=y<br>NETFS_KEEP_OLD_BACKUP_COPY=y<br>BACKUP_PROG_ARCHIVE=&quot;$(hostname)&quot;<br>BACKUP_URL=nfs://172.19.12.193/os_backup/rear/regular/<br>BACKUP_PROG_EXCLUDE=( &quot;${BACKUP_PROG_EXCLUDE[@]}&quot; '/dev/*' '/run/*' '/sys/fs/cgroup/*' '/sysadmin/*' '/CRASH/*' '/run/user/1021/*' '/run/user/0/*' )<br>EXCLUDE_VG=( 'LRPIBAAPPVG' 'vg0' 'vg9' )<br>EXCLUDE_RECREATE=( &quot;${EXCLUDE_RECREATE[@]}&quot; 'vg:LRPIBAAPPVG' 'vg:vg0' 'vg:vg9' 'lv:/dev/LRPIBAAPPVG/APP' 'lv:/dev/LRPIBAAPPVG/LOG' 'lv:/dev/vg0/home' 'lv:/dev/vg0/sysadmin' 'lv:/dev/vg9/CRASH' 'lv:/dev/vg9/DUMP' 'disk:sda6' 'pv:/dev/sda6' 'disk:sdc1' 'pv:/dev/sdc1' 'disk:sdd1' 'pv:/dev/sdd1' )<br><br>위 구성에서 EXCLUDE_RECREATE 옵션의 기능은 무엇인가요?<br>EXCLUDE_RECREATE 를 넣지 않고 recovery 진행시 EXCLUDE 영역의 데이타가 손실되는지 <br>여부가 궁금합니다.<br>감사합니다. <br><br>===================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 정종욱 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-2831-7377 <br>- 메일주소 : 정종욱 &lt;jjw1103.jung@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(책임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 010-7676-1313<br>- 메일주소 : sm.jin@time-gate.com'<br>===================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000NHkt7IAD"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-07-24T06:56:02Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-07-24T06:56:01Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br>      <br>먼저 케이스는 요청에 의해서 종료처리를 하였으나 케이스가 종료처리 <br>되면서 보내드린 설문조사에 대한 응답이 도착하지 않아 이렇게 안내를 드립니다.<br><br>저희 설문조사는 Red Hat 기술지원 서비스에 대한 고객만족 조사뿐만이 아니라 <br>저희 서비스에 대한 고객의 의견을 듣고 지속적으로 반영하고자 하는 제도이니 향후 기술  <br>지원 서비스의 품질 향상을 위해, 소중한 시간과 의견을 주신다면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-07-24T06:56:01Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Mv8ZdIAJ"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-06-27T04:36:27Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-06-27T04:36:27Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>&gt;AUTOEXCLUDE_MULTIPATH=y  스토리지영역을 백업에서 제외시키고<br>&gt;EXCLUDE_RECREATE 에 명시하지 않아도 상관없는건가요?<br><br>네 해당 옵션을 사용하면 multipath는 자동을 제외되고 데이터도 보존되므로 EXCLUDE_RECREATE 에 명시하지 않아도 상관없습니다.<br><br><br>감사합니다.<br><br><publishedDate>2018-06-27T04:36:27Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Mv7NYIAZ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-06-27T01:56:10Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-06-27T01:56:10Z</b><br><br>안녕하세요.빠른 답변 감사합니다.<br>AUTOEXCLUDE_MULTIPATH=y  스토리지영역을 백업에서 제외시키고<br>EXCLUDE_RECREATE 에 명시하지 않아도 상관없는건가요?<br><br><publishedDate>2018-06-27T01:56:10Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Mv72IIAR"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-06-27T01:19:15Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-06-27T01:19:15Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>네 맞습니다.<br>따라서 파일시스템을 백업에서 제외시키면서 동시에 데이터 손실을 막으시려면 <br>EXCLUDE_RECREATE 와 EXCLUDE_MOUNTPOINTS 를 사용하시면 되겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-06-27T01:19:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Mv70CIAR"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-06-27T01:14:59Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-06-27T01:14:59Z</b><br><br>안녕하세요. 답변 감사합니다.<br>BACKUP_PROG_EXCLUDE 와 EXCLUDE_VG 에 들어간 파일시스템은 백업시 제외가 되고 <br>EXCLUDE_RECREATE 에 명시 하지 않으면 리커버리시 데이터가 없어진다는 말씀이신가요?<br><br><publishedDate>2018-06-27T01:14:59Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MuszrIAB"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-06-26T09:54:14Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-06-26T09:54:14Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>EXCLUDE_RECREATE= <br><br>해당 옵션은 일반적으로 rear로 시스템백업시, 특정 파일시스템은 백업에서 제외시키는 설정입니다. 해당 옵션에서는 일반적으로 fs:/filesystem 형식으로 특정 경로의 파일시스템을 백업에서 제외시키는 역할을 하게됩니다.<br><br>EXCLUDE_RECREATE 옵션을 사용하지 않았다면 원래 해당 옵션으로 지정했던 파일시스템의 데이터도 모두 backup.tar.gz 파일로 백업을 하게 됩니다.<br>BACKUP_PROG_EXCLUDE 에서 지정한 경로는 해당 경로만 생성될 뿐이지 내장되어 있던 데이터는 사라지게 됩니다.<br><br>따라서, 백업을 별도로 진행하지 않아도 원래의 데이터를 보존하여 recovery를 진행한후에도 원 마운트포인트에 마운트되게 하려면 아래와 같이 지정하면 됩니다.<br><br>예) /testvglv1 에 마운트되어 있는 파일시스템의 데이터를 백업하지 않고 , recover후에도 데이터 손실이 없이 정상 마운트되게 하려면:<br><br># df | grep testvg<br>/dev/mapper/testvg-testvglv1      999320    2568    927940   1% /testvglv1 <br>/dev/mapper/testvg2-testvg2lv1    999320    2564    959404   1% /testvg2lv1<br><br># vi /etc/rear/local.conf<br><br>OUTPUT=ISO<br>OUTPUT_URL=nfs://192.168.122.76/storage<br>BACKUP=NETFS<br>BACKUP_URL=nfs://192.168.122.76/storage<br>BACKUP_PROG_EXCLUDE=(&quot;${BACKUP_PROG_EXCLUDE[@]}&quot; '/media' '/var/tmp' '/var/crash' '/testvg2lv1/*' '/tmp/*')    &lt;----testvg2lv1 은 BACKUP_PROG_EXCLUDE에 추가<br>EXCLUDE_VG=( 'testvg' )<br>EXCLUDE_RECREATE=( &quot;${EXCLUDE_RECREATE[@]}&quot; 'fs:/testvglv1' )                                                  &lt;----testvglv1은 EXCLUDE_RECREATE에 추가<br>EXCLUDE_MOUNTPOINTS=('/testvglv1')<br><br><br>상기와 같이 설정후 recovery 진행한 결과, /testvg2lv1 의 데어트는 모두 없어지고, /testvglv1의 데이터는 보존된 것으로 확인되었습니다.<br><br>감사합니다.<br><br><publishedDate>2018-06-26T09:54:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MunWWIAZ"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-06-26T01:34:38Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-06-26T01:34:38Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>저는 이성빈이라고 하며 본 케이스를 담당하게 되었습니다.<br>현재 문의주신 내용에 관련해 확인중에 있으며 답변이 정리되는 대로 코멘트를 업데이트 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-06-26T01:34:38Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>