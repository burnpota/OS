======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2018-05-29T02:50:03Z</b><br><b>마지막 답변자 : HyunYick Park</b><br><b>마지막 수정 일자 : 2018-06-04T07:09:05Z</b><br><b>id : 500A000000atKyzIAE</b><br>======================<br><br><b><font size=15>
제목  : ulimit  관련 문의 사항
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하십니까 타임게이트 오선우입니다<br><br>고객 장비 ulimit 설정 중 몇가지 문의 사항이 있어 문의드립니다<br><br>고객 장비 nofile의 값은 4096일 경우 아래와 같이 soft는 1024 hard는 65536으로 설정할려고합니다 <br><br>root             soft    nofile          1024<br>root             hard    nofile          65536<br><br>1. nofile 설정시 soft값이 지금 값보다 작을 경우 즉 4096 에서 위와 같이 설정할경우 리부팅이 필요한가요?<br>더 작은 값으로 변경시 시스템 리부팅이 필요한것으로 알고 있습니다?<br><br>2. 실제로<br> cat ./etc/security/limits.conf 파일과 <br>cat ./etc/security/limits.d/90-nproc.conf<br><br>파일에 적용하고 로그인을 해봤지만 변경이 되지 않았는데요<br><br>/root/.bash_profile 에 적용할경우  적용되는 것을 확인할수 있었습니다.<br>정상적인 현상인가요? <br><br>확인 부탁드립니다<br>감사합니다<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLTMGRDL01</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000MhJuaIAF"><br>======================<br><b>생성계정 : Park, HyunYick</b><br><b>생성날짜 : 2018-06-04T07:09:04Z</b><br><b>마지막 답변자 : Park, HyunYick</b><br><b>마지막 수정 일자 : 2018-06-04T07:09:04Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해 주셔서 감사합니다.<br><br>해당 케이스를 close 처리해주셔서 감사합니다.<br>케이스가 처리 완료되면 고객 설문조사 메일이 발송됩니다.<br>고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해,<br>소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-06-04T07:09:04Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MhIgqIAF"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-06-04T05:11:58Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-06-04T05:11:58Z</b><br><br>안녕하십니까 타임게이트 오선우입니다<br><br>해당건은 고객에게 문의한 결과 현재는 해당 시시스템이 운영중이여서 테스트 진행이 어렵고<br><br>추후에 리부팅 또는 해당 limit 설정이 가능한 환경이 되면 테스트 다시 진행해보기로 했습니다<br><br>그동안에 우선 케이스 닫고 추가로 필요하면 다시 오픈하도록 하겠습니다<br><br>답변 감사합니다<br><br><publishedDate>2018-06-04T05:11:58Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MgLlDIAV"><br>======================<br><b>생성계정 : Park, HyunYick</b><br><b>생성날짜 : 2018-05-30T05:48:21Z</b><br><b>마지막 답변자 : Park, HyunYick</b><br><b>마지막 수정 일자 : 2018-05-30T05:48:21Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해 주셔서 감사합니다.<br><br>/etc/security/limits.conf 파일에 설정한 내용을 적용하기 위해서는 pam_limits.so 모듈을 거쳐야합니다.<br>아래는 pam_limits.so 모듈이 ulimit을 적용한다는 내용의 limits.conf의 man page 내용입니다.<br><br>~~~<br>﻿NAME<br>       limits.conf - configuration file for the pam_limits module<br><br>DESCRIPTION<br>       The pam_limits.so module applies ulimit limits, nice priority and number of simultaneous login<br>       sessions limit to user login sessions.<br>~~~<br><br>이전 테스트시에 pam_limits.so 모듈을 거치지 않고 이미 연결된 session에서 bash만 추가로 실행되면서 .bash_profile만 적용이 되었을 것으로 예상됩니다.<br>이 부분은 유선으로 말씀드린 것처럼 추후 다시 테스트 하실때는 /etc/security/limits.conf 파일 변경 후 다른 클라이언트에서 ssh로 연결 후 변경사항 적용 내용을 확인하시면 될 것 같습니다.<br>현재까지의 문의 내용에 대하여 정리하여 답변드립니다.<br><br> - /etc/security/limits.conf 파일을 변경 후 적용할 때 reboot이 필요한 것은 아닙니다.<br> - 기존 테스트 시에 적용되지 않았던 것은 이미 연결된 session을 통하여 확인을 했을 것으로 예상됩니다.<br> - .bash_profile에 설정한 ulimit이 적용되었던 것은 bash가 다시 실행되면서 적용되었을 것입니다.<br> - 추후 /etc/security/limits.conf 파일 변경 후 정상 적용되는 것을 확인하실 때 # su - &lt;username&gt; 으로 로그인하셔서 확인하는 방법도 가능합니다.<br><br>아래는 참조하실만한 KCS 입니다.<br><br>[1] How to increase number of open files limit in Red Hat Enterprise Linux ?<br>https://access.redhat.com/solutions/60746<br><br>감사합니다.<br><br><publishedDate>2018-05-30T05:48:21Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MgKY3IAN"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-05-30T02:59:45Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-05-30T02:59:45Z</b><br><br>타임게이트 오선우입니다<br><br>.bash_profile에는 적용이 안되서 저희가 넣은 내용입니다<br><br>특별한것은 없어보이는데 당시 왜 limit.conf가<br>적용되지 않았는지 모르겠습니다<br><br>내용 업데이트드립니다<br><br>root@SLTMGRDL01 /root # ulimit -Ha<br>core file size          (blocks, -c) unlimited<br>data seg size           (kbytes, -d) unlimited<br>scheduling priority             (-e) 0<br>file size               (blocks, -f) unlimited<br>pending signals                 (-i) 61671<br>max locked memory       (kbytes, -l) 64<br>max memory size         (kbytes, -m) unlimited<br>open files                      (-n) 65536<br>pipe size            (512 bytes, -p) 8<br>POSIX message queues     (bytes, -q) 819200<br>real-time priority              (-r) 0<br>stack size              (kbytes, -s) unlimited<br>cpu time               (seconds, -t) unlimited<br>max user processes              (-u) 61671<br>virtual memory          (kbytes, -v) unlimited<br>file locks                      (-x) unlimited<br>root@SLTMGRDL01 /root #<br><br><br>root@SLTMGRDL01 /root # ulimit -Sa<br>core file size          (blocks, -c) 0<br>data seg size           (kbytes, -d) unlimited<br>scheduling priority             (-e) 0<br>file size               (blocks, -f) unlimited<br>pending signals                 (-i) 61671<br>max locked memory       (kbytes, -l) 64<br>max memory size         (kbytes, -m) unlimited<br>open files                      (-n) 65536<br>pipe size            (512 bytes, -p) 8<br>POSIX message queues     (bytes, -q) 819200<br>real-time priority              (-r) 0<br>stack size              (kbytes, -s) 10240<br>cpu time               (seconds, -t) unlimited<br>max user processes              (-u) 61671<br>virtual memory          (kbytes, -v) unlimited<br>file locks                      (-x) unlimited<br>root@SLTMGRDL01 /root #<br><br><br>root@SLTMGRDL01 /root # grep -r ulimit /etc/bashrc /etc/profile /etc/profile.d/<br>root@SLTMGRDL01 /root #<br>root@SLTMGRDL01 /root # grep ulimit ~/.bashrc ~/.bash_profile<br>/root/.bash_profile:ulimit -n 65536<br>root@SLTMGRDL01 /root #<br><br><publishedDate>2018-05-30T02:59:45Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Mg5VOIAZ"><br>======================<br><b>생성계정 : Park, HyunYick</b><br><b>생성날짜 : 2018-05-29T09:45:32Z</b><br><b>마지막 답변자 : Park, HyunYick</b><br><b>마지막 수정 일자 : 2018-05-29T09:45:32Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해 주셔서 감사합니다.<br><br>통화한 결과 문제를 재정의 하여, 현재 시스템 상황을 파악하고자 합니다.<br>따라서 번거로우시겠지만 아래 명령어 결과를 부탁드립니다.<br><br> # ulimit -Ha<br> # ulimit -Sa<br> # grep -r ulimit /etc/bashrc /etc/profile /etc/profile.d/<br> # grep ulimit ~/.bashrc ~/.bash_profile<br><br>명령어 결과 확인 후 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-05-29T09:45:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Mg2QVIAZ"><br>======================<br><b>생성계정 : Park, HyunYick</b><br><b>생성날짜 : 2018-05-29T06:23:40Z</b><br><b>마지막 답변자 : Park, HyunYick</b><br><b>마지막 수정 일자 : 2018-05-29T06:23:40Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해 주셔서 감사합니다.<br><br>해당 케이스에 대하여 확인중에 있습니다.<br>확인 후 업데이트 드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-05-29T06:23:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>