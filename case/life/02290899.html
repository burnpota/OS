======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2019-01-14T01:05:13Z</b><br><b>마지막 답변자 : Ying Huang</b><br><b>마지막 수정 일자 : 2019-01-14T08:55:08Z</b><br><b>id : 5002K00000d9R0IQAU</b><br>======================<br><br><b><font size=15>
제목  : [기술문의]서비스 시작순서
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요. 타임게이트 송기호입니다.<br><br><br> RHEL 7 OS 서비스 가동 순서 조정 문의드립니다.<br><br> <br><br> 아래와 같이 3가지 서비스가 있는데<br><br> <br><br> sapinit.service 서비스가 netbackup.service, vxpbx_exchanged.service 두개의 서비스 보다 먼저 실행 될 수있도록<br><br> <br><br> 설정 방법 문의 드립니다.<br><br> <br>root@PMDGCL01SL /root # systemctl list-units | grep -i netbackup<br>* netbackup.service                                                                                loaded failed failed    LSB: NetBackup<br>root@PMDGCL01SL /root # systemctl list-units | grep -i pbx<br>  vxpbx_exchanged.service                                                                          loaded active running   SYSV: Provides Symantec Private Branch Exchange<br><br>root@PMDGCL01SL /root # systemctl list-units | grep -i sapinit<br>  sapinit.service                                                                                  loaded active running   LSB: Start the sapstartsrv<br><br> <br><br>root@PMDGCL01SL /root # systemctl status vxpbx_exchanged.service<br>* vxpbx_exchanged.service - SYSV: Provides Symantec Private Branch Exchange<br>   Loaded: loaded (/etc/rc.d/init.d/vxpbx_exchanged; bad; vendor preset: disabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:26 KST; 1 months 22 days ago<br>     Docs: man:systemd-sysv-generator(8)<br>  Process: 2818 ExecStart=/etc/rc.d/init.d/vxpbx_exchanged start (code=exited, status=0/SUCCESS)<br>   CGroup: /system.slice/vxpbx_exchanged.service<br>           `-2833 /opt/VRTSpbx/bin/pbx_exchange<br><br>Nov 18 09:29:26 PMDGCL01SL vxpbx_exchanged[2818]: Started Symantec Private Branch Exchange<br><br> <br><br> <br><br> <br><br>root@PMDGCL01SL /root # systemctl status sapinit.service<br>* sapinit.service - LSB: Start the sapstartsrv<br>   Loaded: loaded (/etc/rc.d/init.d/sapinit; bad; vendor preset: disabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:29 KST; 1 months 22 days ago<br>     Docs: man:systemd-sysv-generator(8)<br>  Process: 3300 ExecStart=/etc/rc.d/init.d/sapinit start (code=exited, status=0/SUCCESS)<br>   CGroup: /system.slice/sapinit.service<br>           |-3383 /usr/sap/hostctrl/exe/saphostexec pf=/usr/sap/hostctrl/exe/host_profile<br>           |-3456 /usr/sap/hostctrl/exe/sapstartsrv pf=/usr/sap/hostctrl/exe/host_profile -D<br>           `-3876 /usr/sap/hostctrl/exe/saposcol -l -w60 pf=/usr/sap/hostctrl/exe/host_profile<br><br>Nov 18 09:29:28 PMDGCL01SL sapinit[3300]: start hostcontrol using profile /usr/sap/hostctrl/exe/host_profile<br>Nov 18 09:29:28 PMDGCL01SL su[3356]: pam_rootok(su-l:auth): root check succeeded<br>Nov 18 09:29:28 PMDGCL01SL su[3356]: (to root) root on none<br>Nov 18 09:29:28 PMDGCL01SL saphostexec[3383]: modified /proc/sys/net/ipv4/ip_local_port_range from 32768-60999 t...1162)<br>Nov 18 09:29:28 PMDGCL01SL saphostexec[3383]: modified /proc/sys/net/ipv4/ip_local_reserved_ports for SAP applic...1162)<br>Nov 18 09:29:28 PMDGCL01SL saphostexec[3383]: number of free ports: 38646<br>Nov 18 09:29:28 PMDGCL01SL saphostexec[3383]: number of reserved ports: 26890<br>Nov 18 09:29:28 PMDGCL01SL saphostexec[3383]: number of reserved ports within ip_local_port_range: 25632<br>Nov 18 09:29:28 PMDGCL01SL SAPSAP_99[3456]: SAP Service SAPHostControl successfully started.<br><br> <br><br>root@PMDGCL01SL /root # systemctl status netbackup.service<br>* netbackup.service - LSB: NetBackup<br>   Loaded: loaded (/etc/rc.d/init.d/netbackup; bad; vendor preset: disabled)<br>   Active: failed (Result: exit-code) since Sun 2018-11-18 09:30:14 KST; 1 months 22 days ago<br>     Docs: man:systemd-sysv-generator(8)<br>  Process: 2847 ExecStart=/etc/rc.d/init.d/netbackup start (code=exited, status=2)<br>   CGroup: /system.slice/netbackup.service<br>           |-2877 /usr/openv/netbackup/bin/vnetd -standalone<br>           |-2885 /usr/openv/netbackup/bin/bpcd -standalone<br>           |-2948 /usr/openv/netbackup/bin/nbdisco<br>           |-3922 vmd<br>           |-3951 /usr/openv/netbackup/bin/nbrmms<br>           |-3981 /usr/openv/netbackup/bin/nbsl<br>           `-4110 /usr/openv/netbackup/bin/nbsvcmon<br><br>Nov 18 09:30:14 PMDGCL01SL netbackup[2847]: NetBackup CloudStore Service Container started.<br>Nov 18 09:30:14 PMDGCL01SL netbackup[2847]: NetBackup Service Monitor started.<br>Nov 18 09:30:14 PMDGCL01SL netbackup[2847]: NetBackup Bare Metal Restore Boot Server daemon started.<br>Nov 18 09:30:14 PMDGCL01SL systemd[1]: netbackup.service: control process exited, code=exited status=2<br>Nov 18 09:30:14 PMDGCL01SL systemd[1]: Failed to start LSB: NetBackup.<br>Nov 18 09:30:14 PMDGCL01SL systemd[1]: Unit netbackup.service entered failed state.<br>Nov 18 09:30:14 PMDGCL01SL systemd[1]: netbackup.service failed.<br>Nov 18 09:30:28 PMDGCL01SL nbvault[4100]: Starting nbvault daemon<br>Nov 18 09:30:29 PMDGCL01SL nbvault[4100]: Shutting down nbvault daemon<br>Nov 18 09:31:07 PMDGCL01SL vmd[3922]: ready for connections<br><br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Configuration issue</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>PMDGCL01SL</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0a2K00000Ora1DQAR"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2019-01-14T08:54:45Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2019-01-14T08:54:45Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>앞서 말씀 드렸듯이 문의하신 스크립트 관련 설정은 지원 범위가 아닙니다.<br>마지막으로 추가 지원을 드리 겠으니 참고하시기 바라며 <br>추후에는 이와 같은 스크립트 지원이 되지 않음을 알립니다.<br><br># cat /etc/rc.d/init.d/sapinit<br><br>#!/bin/sh<br># Copyright (c) 1995-2005 SAP AG Walldorf, Germany.<br>#<br># /etc/init.d/sapinit<br>#<br># chkconfig: 345 18 82  &lt;=========== 변경<br># description: Start sapstartsrv<br><br>수정후<br>chkconfig --del sapinit   <br>chkconfig --add sapinit <br><br>해당 케이스는 지원이 되지 않는 부분으로 판단되어 처리완료 하도록 하겠습니다.<br>만일 레드햇 제품 사용시 설치, 사용법, 구성, 진단, 버그 보고(제품 라이프사이클에 따라), 버그 픽스등 <br>장애 발생시에 이슈가 있으시다면 새로운 케이스를 생성해 주시기 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2019-01-14T08:54:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OrZhgQAF"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2019-01-14T08:25:06Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2019-01-14T08:25:05Z</b><br><br>다른 방안도 문의드립니다.<br><br>/etc/rc3.d/S90sapinit 파일을<br><br>&lt;기존&gt;<br>#!/bin/sh<br># Copyright (c) 1995-2005 SAP AG Walldorf, Germany.<br>#<br># /etc/init.d/sapinit<br>#<br># chkconfig: 345 90 10<br># description: Start sapstartsrv<br>#<br><br>&lt;변경후&gt;<br>#!/bin/sh<br># Copyright (c) 1995-2005 SAP AG Walldorf, Germany.<br>#<br># /etc/init.d/sapinit<br>#<br># chkconfig: 345 18 10<br># description: Start sapstartsrv<br>#<br><br>chkconfig --del sapinit   <br>chkconfig --add sapinit  <br>순으로 진행해도 될까요??<br><br><publishedDate>2019-01-14T08:25:05Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000OrZOAQA3"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2019-01-14T07:49:13Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2019-01-14T07:49:12Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>&gt; rc3.d에는<br>&gt; S90sapinit -&gt; S18sapinit 변경<br><br>&gt; rc2.d에는<br>&gt; cp /etc/rc3.d/S18sapinit /etc/rc2.d/ 복사<br><br>&gt; 하여 위의방법을 해소할수 있을까요?<br><br>이 또한 스크립트에서 설정 해야 할 부분입니다. 숫자가 작은 서비스가 먼저 기동됩니다.<br>예제,<br>#! /bin/bash<br>#<br># network       Bring up/down networking<br>#<br># chkconfig: 2345 10 90   &lt;======== 이 부분에서 설정<br><br>말씀 드렸듯이 이와 같은 스크립트 관련 설정은 지원 범위가 아닙니다.<br><br>감사합니다.<br><br><publishedDate>2019-01-14T07:49:12Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OrZHTQA3"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2019-01-14T07:37:27Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2019-01-14T07:37:27Z</b><br><br>답변감사합니다.<br>아래 알려주심 방법이외에 아래와 같이 진행해도 될까요??<br><br>/etc/rc3.d/아래보면 S20vxpbx_exchanged,  S77netbackup, S90sapinit 파일이 있고<br>/etc/rc2.d/아래보면 S20vxpbx_exchanged,  S77netbackup 파일이 있습니다.<br><br>rc3.d에는<br>S90sapinit -&gt; S18sapinit 변경<br><br>rc2.d에는<br>cp /etc/rc3.d/S18sapinit /etc/rc2.d/ 복사<br><br>하여 위의방법을 해소할수 있을까요?<br><br><publishedDate>2019-01-14T07:37:27Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000OrYuJQAV"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2019-01-14T06:55:19Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2019-01-14T06:55:19Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>아시다시피 RHEL7일 경우에는 주로 systemd로 서비스를 관린하게 됩니다.<br>만일 systemd를 사용하실 경우에는 unit 설정파일에 before/after를 추가하셔서 order를 설정하실수 있습니다.<br>- How to decide what dependencies a systemd service unit definition should have<br>https://access.redhat.com/solutions/3116611<br><br>현재 고객님 환경에서 systemd가 관리하는 unit가 아닌 LSB 스크립트를 사용하고 있는것으로 확인됩니다.<br>LSB 스크립트는 수정은 저희 기술지원 범위가 아닙니다.<br><br>지원 범위는 아니지만 참고로 아래와 같이 실현 가능한것으로 보입니다.<br>더 상세한 설정 방법은 upstream LSB 스크립트 작성 방법을 참고하시기 바랍니다.<br><br>netbackup, vxpbx_exchanged script중 Required-Start, Required-Stop에 sapinit 추가<br>### BEGIN INIT INFO<br># Provides: numad<br># Required-Start: sapinit<br># Required-Stop: sapinit<br># Should-Start:<br># Should-Stop:<br># Default-Start:<br># Default-Stop:<br># Short-Description:<br># Description:<br>### END INIT INFO<br><br>감사합니다.<br><br><publishedDate>2019-01-14T06:55:19Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OrXUOQA3"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2019-01-14T02:34:24Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2019-01-14T02:34:24Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>저는 Platform Support 를 담당하고 있는 Senior Technical Support Engineer 황 영 입니다.<br>올려주신 문의내용은 현재 자세히 살펴보고 있는중이며, 관련된 내용이 확인이 되는대로 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2019-01-14T02:34:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>