======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2016-07-21T09:21:08Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-08-11T10:06:55Z</b><br><b>id : 500A000000Ur83lIAB</b><br>======================<br><br><b><font size=15>
제목  : [기술문의]xinetd messages
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>root@GAPBUSAL01 /var/log # tail messages<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br><br>root@GAPBUSAL01 /var/log # rpm -qa | grep xinetd<br>xinetd-2.3.14-39.el6_4.x86_64<br><br>root@GAPBUSAL01 /var/log # uname -a<br>Linux GAPBUSAL01 2.6.32-504.16.2.el6.x86_64 #1 SMP Tue Mar 10 17:01:00 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux<br> <br>시스템 구성상 문제가 있는지 확인 부탁드리며 로그상에 xinetd 관련 특정 버그가 있다면<br><br>업데이트 버전 관련 링크를 달아주시면 감사하겠습니다.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>=================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김종휘 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-9580-6587 <br>- 메일주소 : 김종휘 &lt;jjpaper.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com''<br>=================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000HVrRSIA1"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2016-07-26T07:48:48Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2016-07-26T07:48:48Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>Mar  1 04:15:28 GAPBUSAL01 rsyslogd-2177: imuxsock lost 1958876 messages from pid 122917 due to rate-limiting<br>Mar  1 04:15:28 GAPBUSAL01 rsyslogd-2177: imuxsock begins to drop messages from pid 122917 due to rate-limiting<br><br>이와 같은 메시지는 5초 안에 한개의 프로세스가 200개 이상의 로그가 발생 할때 찍히는 메시지입니다. <br>해당 기능은 /var 파일 시스템의 용량이 빨리 소모 되는 것을 방지 하기 위함입니다. <br><br>이와 같은 메시지를 비활성화 시키는 방법에 대해 아래와 같은 링크에서 확인 가능 하십니다. <br><br> How to disable rsyslog Rate-Limiting in Red Hat Enterprise Linux 6? <br> - https://access.redhat.com/solutions/156863<br><br>다만, 해당 기능을 비활성화 시키시면 /var 파일 시스템이 빨리 소모 될수 있다는 점을 참고 부탁드립니다. <br><br><br>감사합니다. <br><br>Red Hat GSS<br>정미연 드림<br><br><publishedDate>2016-07-26T07:48:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HVqpYIAT"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-07-26T06:49:11Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-07-26T06:49:11Z</b><br><br>안녕하세요.<br><br>동일서버 예전 로그인데 아래로그가 의미 하는게 어떤것인지 알수 있을까요?<br><br>root@GAPBUSAL01 /sysadmin # tail messages-20160301<br>Mar  1 04:15:28 GAPBUSAL01 rsyslogd-2177: imuxsock lost 1958876 messages from pid 122917 due to rate-limiting<br>Mar  1 04:15:28 GAPBUSAL01 rsyslogd-2177: imuxsock begins to drop messages from pid 122917 due to rate-limiting<br>Mar  1 04:15:34 GAPBUSAL01 rsyslogd-2177: imuxsock lost 1939730 messages from pid 122917 due to rate-limiting<br>Mar  1 04:15:34 GAPBUSAL01 rsyslogd-2177: imuxsock begins to drop messages from pid 122917 due to rate-limiting<br>Mar  1 04:15:40 GAPBUSAL01 rsyslogd-2177: imuxsock lost 1951678 messages from pid 122917 due to rate-limiting<br><br>감사합니다.<br><br><publishedDate>2016-07-26T06:49:11Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HVqPBIA1"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-07-26T06:08:07Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-07-26T06:08:07Z</b><br><br>안녕하세요.<br><br>저번주에 담당자가 strace 수집 전<br><br># service xinetd restart <br><br>이후 현재까지 에러메세지가 나타나지 않는관계로 <br><br>작업완료 처리 하겠습니다.<br><br><publishedDate>2016-07-26T06:08:07Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HVYNaIAP"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2016-07-25T05:17:49Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2016-07-25T05:17:49Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>보내 주신 strace log에서 아무런 내용도 없어 다시 수집 요청을 드립니다. <br><br>$ cat xinetd.str <br>99766 14:18:29.023682 restart_syscall(&lt;... resuming interrupted call ...&gt; &lt;unfinished ...&gt;<br><br><br>아래와 같이 다시 xinetd 의 strace log를 수집 부탁드립니다. <br><br># service xinetd stop<br># strace -o /tmp/strace.xinetd -ttvfT -s 8192 xinetd -stayalive -pidfile /var/run/xinetd.pid <br><br><br>다른 커미널에서 messages를 모니터링 하시고 아래와 같은 로그가 발생 되면 strace 또한 xinetd 프로세스를 kill <br>시키세요.<br><br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br><br># ps -ef | grep xinet<br># kill -9 strace-pid<br># kill -9 xinetd-pid <br># rm -f /var/run/xinetd.pid <br><br>테스트 하신후 xinetd 서비스를 재기동 하세요.<br><br><br>위와 같이 작업을 하신후 /tmp/strace.xinetd 파일 또한 /var/log/messages 파일을 보내 주시기 바랍니다. <br><br>감사합니다. <br><br>Red Hat GSS<br>정미연 드림<br><br><publishedDate>2016-07-25T05:17:49Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HVFcsIAH"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2016-07-22T05:22:00Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2016-07-22T05:21:59Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>피드백 감사 드립니다. <br><br>요청 하신 파일을 보내 주시면 바로 분석 드리도록 하겠습니다. <br>======================<br>즐거운 하루 되세요.<br><br>감사합니다. <br><br>Red Hat GSS<br>정미연<br><br><publishedDate>2016-07-22T05:21:59Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HVFMzIAP"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-07-22T04:41:52Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-07-22T04:41:52Z</b><br><br>안녕하세요.<br><br>1. 이와 같은 메시지는 어떤 경우에 발생 되는건가요?<br>-&gt; 초단위로 반복적으로 동일 메세지가 계속 발생 하고 있습니다.<br>      <br>2. 에러 메시지가 발생 할시 아래와 같이 strace log 를 수집 하여 보내 주시기 바랍니다.<br>   - &gt;고객에게 strace 수집을 요청 했습니다.<br><br>3. strace 로그 수집 후 sosreport도 수집 하세요.<br>  - &gt;고객에게 sosreport 수집을 요청 했습니다.<br><br>추후 파일 첨부 하도록 하겠습니다.<br><br><publishedDate>2016-07-22T04:41:52Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HVEwNIAX"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2016-07-22T03:18:52Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2016-07-22T03:18:52Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>말씀 하신 로그와 관련 하여 버그가 있었던 것으로 보입니다. <br><br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br><br>버그: Bug 790036 - xinetd leaking file descriptors<br><br>하지만 해당 버그는 현재 사용 하는 패키지에서 이미 픽스 된 상태인 것으로 보입니다. <br><br>Errata: http://rhn.redhat.com/errata/RHSA-2013-0499.html<br><br>픽스 버전: xinetd-2.3.14-38.el6.src.rpm<br>사용중인 버전: xinetd-2.3.14-39.el6_4.x86_64<br><br><br>따라서 해당 이슈에 대해 좀더 확인 할 부분이 있어 아래와 같이 추가적인 정보 요청을 드립니다. <br><br>1. 이와 같은 메시지는 어떤 경우에 발생 되는건가요?<br>2. 에러 메시지가 발생 할시 아래와 같이 strace log 를 수집 하여 보내 주시기 바랍니다.<br>   - xinetd 의 pid 를 확인 함<br>     # ps -ef | grep xinetd<br><br>   - strace 로그를 수집함 <br>     # strace -s 8192 -o /tmp/xinetd.str -ttvTf -p &lt;xinetd-pid&gt;<br>     약 5분 정도 수집 후 &lt;ctrl+C&gt;로 strace 명령어 중단 하세요.<br><br>3. strace 로그 수집 후 sosreport도 수집 하세요.<br>   # sosreport<br>======================<br>위와 같이 3가지 추가적인 정보를 수집 하여 케이스로 보내 주시기 바랍니다. <br><br><br>감사합니다. <br><br>Red Hat GSS<br>정미연 드림<br><br><publishedDate>2016-07-22T03:18:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>root@GAPBUSAL01 /var/log # tail messages<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: No active service for file descriptor 8<br>Jul 21 10:28:34 GAPBUSAL01 xinetd[122917]: 1 descriptors still set<br><br>root@GAPBUSAL01 /var/log # rpm -qa | grep xinetd<br>xinetd-2.3.14-39.el6_4.x86_64<br><br>root@GAPBUSAL01 /var/log # uname -a<br>Linux GAPBUSAL01 2.6.32-504.16.2.el6.x86_64 #1 SMP Tue Mar 10 17:01:00 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux<br> <br>시스템 구성상 문제가 있는지 확인 부탁드리며 로그상에 xinetd 관련 특정 버그가 있다면<br><br>업데이트 버전 관련 링크를 달아주시면 감사하겠습니다.</issue><timeFramesAndUrgency>=================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김종휘 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-9580-6587 <br>- 메일주소 : 김종휘 &lt;jjpaper.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com''<br>=================================================================</timeFramesAndUrgency><cep>false</cep></case>