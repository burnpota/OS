======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2017-06-28T04:35:40Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2017-09-19T10:02:24Z</b><br><b>id : 500A000000XTYvIIAX</b><br>======================<br><br><b><font size=15>
제목  : SLPPUSAL0B 서버의 swap 사용률증가 관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요. <br>현재 SLPPUSAL0B 와 SLPPUSAL0A가 같은 구성으로 사용중입니다.<br>메모리 부족으로 SLPPUSAL0A &amp; SLPPUSAL0B 의 물리메모리를 8G-&gt;16G로 증가하였습니다.<br>문제는<br>1. 같은 구성임에도 불구하고 SLPPUSAL0B의 SWAP사용률이 높은 반면 SLPPUSAL0A의 사용률은 없는 원인을 알고 싶습니다.<br>&lt;SLPPUSAL0B 메모리 사용률&gt;<br>             total       used       free     shared    buffers     cached<br>Mem:      16201596   15934264     267332          0     363164   14505564<br>-/+ buffers/cache:    1065536   15136060<br>Swap:      8388600    5984472    2404128<br> <br>답변부탁드립니다.<br><br>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 정의찬 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-2952-3184<br>- 메일주소 : 정의찬 &lt;echan.jeong@samsung.com&gt;<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPPUSAL0B &amp; SLPPUSAL0A</hostname><br><br><br><comment id="a0aA000000KHqliIAD"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-09-04T02:50:25Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-09-04T02:50:25Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다. <br><br>말씀 하신 관제에러 통보 SMS 는 스왑 사용량이 급증 될시 발생 하는 것으로 <br>이해 해도 되나요? <br><br>만약 제가 맞게 이해 했다면, 이번에 I/O량이 급증으로 인하여 발생 한 스왑 <br>급증 이슈는 swappiness 파라미터를 낮추시거나 메모리 증설 하시는 것이 <br>모두 이슈를 회피 하실 수 있습니다. <br><br>스왑 사용량은 아래와 같은 공식 중 swap_tendency 값이 100으로 되어 <br>있을 경우 발생 하게 됩니다. <br>swap_tendency = mapped_ratio/2 + distress + vm_swappiness;<br><br>위와 같은 공식중, distress 는 메모리 usage pressure 를 의미 하고 <br>있으며 해당 값은 커널에서 산정 된 것이며 수동으로 조절 할수 없는 부분입니다. <br>distress 는 0 - 100 까지의 숫자입니다. <br><br>mapped_ratio 는 메모리 사용율이며 해당 부분은 메모리 증설로 낮출수 있<br>습니다. <br><br>vm_swappiness 값은 swappiness 파라미터에서 지정 된 것입니다. 디폴트로 <br>60으로 되어 있습니다. <br><br>디스크 I/O 량이 급증 할시 distress 값 또한 mapped_ratio 값이 급증 되어 <br>스왑 급증 이슈가 발생 한 것 같습니다. 이럴 경우에는 메모리 증설 또한 swappiness <br>낮춘는 방법으로 모두 이슈를 회피 가능 하지만, 먼저 swappiness 값을 10 또는<br>20으로 낮춰 보시고 이슈가 계속 발생 하게 되면 메모리를 64GiB로 증설 하는 것도 <br>고려 해 보시는게 좋을 것 같습니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-09-04T02:50:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KHbifIAD"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-09-01T07:49:48Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-09-01T07:49:48Z</b><br><br>답변감사합니다.  전화는 안왔는데 제가 통화중이여서 안온것 같습니다.<br><br>목적은 현재<br>8GB로 구성중이였을때 급격하게 swap이 발생하여<br>관제에러 지속적인 통보 SMS가 발생하였습니다.<br><br>그래서 16GB로 물리 메모리를 확장 하였는데도 불구하고<br>여전히 급격하게 swap발생하고 관제에세 통보SMS가 발생하고 있는 상황입니다.<br><br>말씀하신데로 shared memory로 인해 swap발생한다면<br>단순 메모리 확장으로 이와같은 상황을 해소가 가능한 부분인지?<br><br>아니면<br>파라메터 값을 변경해볼 필요가 있는 부분인지?<br><br>권고부탁드립니다.<br><br>감사합니다<br><br><publishedDate>2017-09-01T07:49:48Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KHbNHIA1"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-09-01T07:14:36Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-09-01T07:14:36Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다. <br><br>070-7862-2071 로 전화 드렸는데 연락이 되지 않아 코멘트 남겨 드립니다. <br>혹시 지금 최종적인 목적은 swap 을 사용 하지 않는 것인가요? <br><br>말씀 하신 3가지 방법중 1번과 3번 모두 시스템에서 스왑을 사용 하는 추세를 <br>낮출수 있어 보이지만, 만약 스왑을 완전히 사용 하지 않는게 목적이라면 스왑을 <br>비활성화 시키는것도 검토 부탁드립니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-09-01T07:14:36Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KHbBGIA1"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-09-01T06:51:21Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-09-01T06:51:20Z</b><br><br>안녕하세요.<br>shared mem에서 swap이 발생하는 부분에 대해서 <br>1. 메모리 확장<br>2. shared 메모리 파라메터(shmmax, shmall) 변경<br>3. swapness 파라메터 변경<br><br>세가지중 하나를 진행예정입니다.<br>권고해주실 부분이 있을까요???<br><br><publishedDate>2017-09-01T06:51:20Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KHMLMIA5"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-31T08:32:16Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-31T08:32:16Z</b><br><br>답변감사합니다.<br>이와같이 shared memory에서 발생하는 부분에 대해서<br>어떠한 방식으로 해결하는것이 가장 올바른 방법인지 <br>알려주시기 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-31T08:32:16Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KHM8kIAH"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-31T08:07:34Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-31T08:07:34Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다. <br><br>&gt; shared memory에서 사용하는 부분이라서 어떠한 프로세스가 스왑을 <br>&gt; 사용할수 없다는 말씀이시죠??<br><br>네, 맞습니다. <br><br>&gt; shmall, shmmax부분을 어느정도로 설정하는 것이 좋을지 권고 부탁드립니다.<br><br>해당 파라미터에 대해 특별히 권장 해 드리는 값이 없어 보입니다. <br>만약 database 을 사용 하실 경우에는 별도로 튜닝 하실 필요가 있으며 <br>권장 값은 벤더사쪽에서 확인 하실 수 있습니다. <br><br>https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Performance_Tuning_Guide/s-memory-captun.html<br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-31T08:07:34Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KHJLFIA5"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-31T01:57:24Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-31T01:57:23Z</b><br><br>답변 감사합니다.<br>shared memory에서 사용하는 부분이라서  <br>어떠한 프로세스가 스왑을 사용할수 없다는 말씀이시죠??<br><br>현재 해당 서버의 물리 메모리를<br>8GB에서 16GB로 확장을 하였습니다.<br>만약 위와 같은 상황이라면<br>shmall, shmmax부분을 어느정도로 설정하는 것이 좋을지 권고 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-31T01:57:23Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KH48cIAD"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-30T03:18:40Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-30T03:18:40Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다. <br><br><br>보내 주신 로그 파일에서는 아래와 같은 부분에서 스왑 사용량을 확인 가능 하신 <br>것으로 보입니다. <br><br>------ Shared Memory Status --------<br>segments allocated 20<br>pages allocated 1845015<br>pages resident  655914<br>pages swapped   890241<br>Swap performance: 0 attempts     0 successes<br><br><br>SwapCached:         1524 kB<br><br><br>shared memory 부분은 /proc/&lt;pid&gt;/status 확인 하실수 없는게 정상입니다. <br>관련 하여 아래 링크에서 설명 되어 있으며 참고 부탁드립니다. <br><br>How can I determine how many System V IPC shared memory segments have been swapped out?<br>https://access.redhat.com/solutions/482153<br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-30T03:18:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KSsYHIA1"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-29T02:31:00Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-29T02:31:00Z</b><br><br>안녕하세요.<br>5초단위로 스왑모니터링을 해본 결과 보내드립니다.<br>제가 본결과는 1분 단위로 했을때와 동일하게<br>스왑사용량이 없는 것으로 보입니다.<br><br>무엇을 더 봐야 할까요?<br><br>왜 모니터링 스크립트에 스왑 사용부분이 나오지 않는지 의문이네요.<br><br><publishedDate>2017-08-29T02:31:00Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KROA3IAP"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-22T05:59:23Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-22T05:59:23Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다. <br><br>알겠습니다. 그럼 일단 본 케이스를 &quot;Waiting On Customer&quot; 상태로 변경 해 <br>드리겠습니다. 만약 관련 해서 추가적인 문의 사항이 있으시면 언제든지 연락 주시기 <br>바랍니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-22T05:59:23Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KRMlwIAH"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-22T02:30:27Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-22T02:30:27Z</b><br><br>답변 감사합니다.<br>제가 답변이 많이 늦은점 양해 부탁드립니다.<br>아래의 내용은 수집후 결과 보내드리겠습니다.<br><br>네트워크 통신 관련은 담당자에게 물어보도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-22T02:30:27Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K9vydIAB"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-16T10:08:07Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-17T01:59:03Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다. <br><br><br>이슈 발생 당시 I/O 량이 높았던 vg9-APP 는 애플리케이션 용 스토리지로 <br>추측 하는데 맞는지요? 그 당시 read 작업이 많았던 것으로 보여져서 혹시 <br>해당 스토리지에서 데이타를 많이 읽는 경우가 어떤게 있는지 확인 하실 필요가 <br>있을 것 같습니다. <br><br>그리고 Shared memory swap 은 /proc/pid/status 에서 확인 하실수 <br>없습니다. 이부분 스왑 사용량도 같이 모니터링 하시려면 스크릅트 파일을 아래와 <br>수정 하시면 될 것 같습니다. <br><br>+++++++++++++++++++++++++++++++++++++++++++++++++++++<br>[root@SLPPUSAL0B:/root] cat /tmp/swap.sh<br>#!/bin/bash<br>echo &quot;&quot;<br>echo &quot;===========================================&quot;<br>date<br>echo &quot;&quot;<br>echo &quot;name pid swap&quot;<br>for file in /proc/*/status<br>do<br> awk '/^Pid|VmSwap|Name/{printf $2 &quot; &quot; $3}END{ print &quot;&quot;}' $file<br>done | sort -k 3 -n -r<br>echo &quot;&quot;<br>ipcs -mu<br>echo &quot;&quot;<br>cat /proc/meminfo |grep -i swapcached<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++<br><br><br>만약 5초당으로 데이타를 수집 하시려면 해당 스크립트 파일을 아래와 같이 <br>수정 하세요. <br><br>+++++++++++++++++++++++++++++++++++++++++++++++++++++<br>[root@SLPPUSAL0B:/root] cat /tmp/swap.sh<br>#!/bin/bash<br>for time in `seq 1 11`<br>do<br> echo &quot;&quot;<br> echo &quot;===========================================&quot;<br> date<br> echo &quot;&quot;<br> echo &quot;name pid swap&quot;<br> for file in /proc/*/status<br>  do<br>   awk '/^Pid|VmSwap|Name/{printf $2 &quot; &quot; $3}END{ print &quot;&quot;}' $file<br>  done | sort -k 3 -n -r<br> echo &quot;&quot;<br> ipcs -mu<br> echo &quot;&quot;<br> cat /proc/meminfo |grep -i swapcached<br> sleep 5<br>done<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++<br><br>cron 설정은 기존 설정을 유지 하시면 됩니다. <br>*/1  *  *  *  * root date &gt;&gt; /var/log/swap.log ; /tmp/swap.sh &gt;&gt; /var/log/swap.log<br><br>추가적으로 이슈 발생 시에 eth0 을 통해 전송된 데이타가 급증 된 것으로 보입니다. <br>이것과 연관성이 있는 것으로 보이는데 혹시 이때 어떤 인터넷 통신이 이루어졌는지도 <br>확인 부탁 드려도 될까요? <br><br>00:00:01        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s<br>...<br>20:03:01         eth0    574.48    389.56     36.69   4440.69      0.00      0.00      0.00<br>20:06:01         eth0   1460.00    896.47     88.14  12971.02      0.00      0.00      0.00<br>20:09:01         eth0   1340.88    829.32     81.20  11623.88      0.00      0.00      0.00<br>20:12:01         eth0   1271.42    797.82     77.01  11380.96      0.00      0.00      0.00<br>20:15:01         eth0   1557.66    933.65     93.88  14055.52      0.00      0.00      0.00<br>20:18:01         eth0   1681.59   1029.92    101.26  16233.25      0.00      0.00      0.00<br>...<br>20:39:01         eth0   1563.72   1325.10     94.13  10007.72      0.00      0.00      0.00<br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-16T10:08:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K9re1IAB"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-16T01:24:30Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-16T01:24:30Z</b><br><br>답변감사합니다.<br>말씀하신  디스크에 대한 IO가 높았던 원인을 찾기위해서<br>모니터링 스크립트를 통해서 본결과<br>메모리가 높았거나 혹은 스왑사용률이 높았던 프로세서들을 발견하지 못하였습니다.<br>이와같은 이유가 있을까요?<br><br>해당 시간에 어떠한 작업이 있었다면 규칙적인 배치작업일 텐데 <br>스왑이 사용률이 높아지는 순간이 불규칙적인 것으로 보입니다.<br>그리고 해당 시간에 어떠한 배치 작업이 있었는지 확인해 보았지만  업무쪽에서 작업을 확인 할수 없다고 합니다.<br><br>혹시 분석을 하기위한 모니터링 스크립트를 보내주시면<br>해당 스크립트를 크론에 건 후 결과를 보내드리 도록하겠습니다.<br><br>개인적인 생각으로는<br>모니터링 스크립트는 분당으로 수집하게 되어있고<br>스왑이 발생했던 순간이 초단위 순간이기 때문에 수집이 정상적으로 되지 않은 것으로 의심되니다만<br>심증입니다.<br><br>그럼 답변 부탁드립니다.<br><br><publishedDate>2017-08-16T01:24:30Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K9OaEIAV"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-14T08:21:37Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-14T08:21:37Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다. <br><br><br>먼저 정보 제공에 감사드립니다. <br><br>보내 주신 명령어의 출력물을 보시면 swap 사용량이 높은 원인은 Shared Memory Status<br>중 pages swapped 가 높기 때문입니다. <br><br>1400152 * 4KB + 3036 KB = 5603644 KB = 5472 MB <br><br><br>이 부분 스왑량이 높은 원인은 앞서 안내 드렸듯이 I/O 가 높았기 때문입니다. <br>만약 그때 I/O 가 높았던 원인을 확인 하시려면 어떤 애플리케이션에서 vg9-APP를 <br>사용 하고 있는지 또한 7월 28일 20시 경에 어떤 작업이 있었는지를 조사 해 보시면 <br>될 것 같습니다. <br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-14T08:21:37Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K9MluIAF"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-14T04:47:17Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-14T04:47:17Z</b><br><br>우선 해당 정보 보내드립니다.<br>[root@SLPPUSAL0B:/root] ipcs -mu<br><br>------ Shared Memory Status --------<br>segments allocated 20<br>pages allocated 1845015<br>pages resident  146003<br>pages swapped   1400152<br>Swap performance: 0 attempts     0 successes<br><br>[root@SLPPUSAL0B:/root] cat /proc/meminfo |grep -i swapcached<br>SwapCached:         3036 kB<br><br><br>감사합니다.<br><br><publishedDate>2017-08-14T04:47:17Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K9MiHIAV"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-14T04:37:10Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-14T04:37:10Z</b><br><br>답변감사합니다.<br>해당 정보를 보내달라는 말씀이신가요??<br><br><publishedDate>2017-08-14T04:37:10Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K93qYIAR"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-11T05:07:03Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-11T05:07:02Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다. <br><br><br>하기 항목에 의하여 스왑 된 것은 제공 해 드린 스크립트로 확인 할수 없는 것으로 <br>확인 되었습니다. <br><br>1) shared memory<br>2) cached swap<br><br>이 부분 스왑 공간은 아래와 같이 확인 가능 하십니다. <br><br># ipcs -mu<br># /proc/meminfo 중 SwapCached<br><br>참고 자료:<br>How can I determine how many System V IPC shared memory segments have been swapped out?<br>- https://access.redhat.com/solutions/482153<br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-11T05:07:02Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K8pCFIAZ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-10T08:21:08Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-10T08:21:08Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다. <br><br><br>먼저 요청 드린 파일을 제공 해 주셔서 대단히 감사드립니다. <br>보내 주신 파일에서 모든 proc 의 swap 사용량이 0으로 나오는 것을 <br>확인 되었습니다. <br><br>이런 현상이 발생 하는 원인에 대해 현재 확인 중에 있으며 관련 하여 <br>업데이트 사항이 있으면 바로 공유 드리도록 하겠습니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-10T08:21:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K8W79IAF"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-09T06:26:04Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-09T06:26:04Z</b><br><br>안녕하세요.요청하신 파일 첨부합니다.<br>감사합니다.<br><br><publishedDate>2017-08-09T06:26:04Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K82MBIAZ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-07T09:58:34Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-07T09:58:34Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>먼저 요청 드린 정보를 제공 해 주셔서 감사합니다. <br>내용을 확인 해 보았으나 status 파일에 아무런 데이타가 없었습니다. <br># cat proc/*/status<br># <br><br>번거로워하시겠지만 status 파일을 다시 보내 주시기 바랍니다. <br># cat /proc/*/status &gt; proc-status.txt<br><br>지금까지 협조 해 주셔서 대단히 감사드리며 빠른 처리를 해 드리도록 <br>노력 하겠습니다. <br><br>추가적으로, 언급 하신 %sys 에서 cpu 사용량이 높은 점에 대해서도 <br>확인 해 보니 swap  사용량이 높아진 시점에 memory 사용량도 급증 <br>된 것을 확인 하였습니다. <br><br>00:00:01    kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit<br>...<br>19:57:01      5691076  10510264     64.87    558996   9051528  11410316     46.40<br>20:00:01      5690100  10511240     64.88    559040   9052420  11359880     46.20<br>20:03:01        94856  16106484     99.41    462216  14734172  11367860     46.23<br>20:06:01        88508  16112832     99.45      1304  15541060  11431872     46.49<br>20:09:01        92972  16108368     99.43      1412  15545448  11382144     46.29<br>20:12:01        92140  16109200     99.43       980  15541328  11431824     46.49<br>20:15:01        92040  16109300     99.43       796  15541064  11434972     46.50<br>20:18:01        91940  16109400     99.43      5368  15535040  11431868     46.49<br>20:21:01        93516  16107824     99.42      8344  15530864  11433576     46.50<br>20:24:01        92560  16108780     99.43     39088  15447700  11435572     46.51<br>20:27:01      5530740  10670600     65.86     60312   9947128  11431820     46.49<br><br>메모리 사용량은 63% 정도로 되어 있었는데 이슈 발생 시점에는 99% 이상으로 올라간 것으로 보입니다.  <br><br>00:00:01          DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util<br>...<br>20:03:01      dev8-16     66.87   9808.25     69.75    147.72      0.14      2.10      1.46      9.73<br>20:03:01     dev253-0     73.27   9808.25     69.75    134.82      0.16      2.14      1.33      9.73<br>...<br>20:06:01      dev8-16    360.99  82875.99     79.14    229.80      0.59      1.65      0.93     33.69<br>20:06:01     dev253-0    364.33  82877.44     79.14    227.70      0.60      1.65      0.93     33.71<br><br>그리고 해당 시점에 디바이스 dev253-0 또한 dev8-16 에 I/O 량이 급증 된 것으로 보입니다. <br>dev253-0 은 vg9-APP 입니다. dev8-16 은 vg9 의 pv sdb 입니다. <br>즉 이슈가 발생 한 시점에는 vg9-APP 에서 I/O 량이 급증 된 것입니다. <br><br>vg9-APP 를 사용 하는 애플리케이션에서 그당시 I/O 가 많이 발생 한 것으로 보이는데, 혹시 <br>그때 어떤 작업이 있었는지 최종 고객과 확인을 하시기 바랍니다.  <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-07T09:58:34Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K807dIAB"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-07T06:31:07Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-07T06:31:07Z</b><br><br>안녕하세요.요청하신 파일 첨부 합니다.<br>감사합니다.<br><br><publishedDate>2017-08-07T06:31:07Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K7ys8IAB"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-07T02:22:27Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-07T02:22:27Z</b><br><br>답변 감사합니다.<br>말씀하신 시간대에서 CPU사용률을 보니<br>16:48:01        CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest     %idle<br>0:06:01        all      2.49      0.00      5.38     15.36      0.00      0.00      0.27      0.00     76.49<br>20:06:01          0      3.60      0.00      8.13     30.48      0.00      0.01      0.55      0.00     57.23<br>20:06:01          1      1.39      0.00      2.64      0.32      0.00      0.00      0.00      0.00     95.66<br>20:09:01        all      2.17      0.00      6.28      8.42      0.00      0.00      0.30      0.00     82.83<br>20:09:01          0      3.19      0.00      7.71     16.69      0.00      0.00      0.59      0.00     71.82<br>20:09:01          1      1.16      0.00      4.86      0.20      0.00      0.00      0.01      0.00     93.77<br>20:12:01        all      2.15      0.00      4.81     12.85      0.00      0.00      0.24      0.00     79.95<br>20:12:01          0      3.17      0.00      7.09     25.58      0.00      0.00      0.48      0.00     63.69<br><br>보니 usr에서 보다는 sys쪽의 %가 높은 것으로 보이는데요.<br>메모리가 부족해서 발생한다기 보다는 다른 이슈사항이 있지 않을까 의심됩니다.<br><br>해당 케이스가 오랫동안 진행되어 빠른 답변 부탁드립니다.<br><br><publishedDate>2017-08-07T02:22:27Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K7yozIAB"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-07T02:10:51Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-07T02:10:51Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>요청 드린 정보를 제공 해 주셔서 대단히 감사드립니다. <br>보내 주신 스크립트 파일로 저희 테스트 환경에서는 스왑 사용량을 제대로 <br>출력 시킬수 있었습니다. <br><br># sh swap-test.sh <br><br>===========================================<br>Mon Aug  7 09:52:37 CST 2017<br><br>name pid swap<br>qemu-kvm 4030 831640 kB<br>qemu-kvm 3984 687464 kB<br>qemu-kvm 26614 665072 kB<br>...<br><br><br>고객 환경에서는 스크립트 파일이 무효 된 원인에 대해 좀더 확인 하기 위해<br>아래와 같은 추가적인 정보 요청을 드립니다. <br><br>1. # free &gt; `hostname`-free.out<br>2. # tar cvf `hostname`-proc.tar.xz /proc/*/status<br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-07T02:10:51Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K7hDmIAJ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-04T05:55:37Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-04T05:55:37Z</b><br><br>안녕하세요. 요청하신 정보 입니다.<br>process.log 로 swap 사용량에 영향을 끼치는 프로세스를 알수는 없을까요?<br>감사합니다.<br><br>1. swap.sh 스크립트 파일 <br>[root@SLPPUSAL0B:/root] cat /tmp/swap.sh<br>#!/bin/bash<br>echo &quot;&quot;<br>echo &quot;===========================================&quot;<br>date<br>echo &quot;&quot;<br>echo &quot;name pid swap&quot;<br>for file in /proc/*/status<br>do<br> awk '/^Pid|VmSwap|Name/{printf $2 &quot; &quot; $3}END{ print &quot;&quot;}' $file<br>done | sort -k 3 -n -r<br><br>2. 아래 명령어 출력 결과<br>   # sh /tmp/swap.sh<br>===========================================<br>Fri Aug  4 13:27:10 KST 2017<br>name pid swap<br>xinetd 1910 0 kB<br>vnetd 22360 0 kB<br>vmw_pvscsi_wq_0 306<br>vmtoolsd 1612 0 kB<br>vmstat 3155 0 kB<br>vmmemctl 707<br>vmmemctl 1444<br>usbhid_resumer 51<br>udevd 488 0 kB<br>udevd 1040 0 kB<br>udevd 1038 0 kB<br>ttylogd 2429 0 kB<br>sync_supers 16<br>swap.sh 5867 0 kB<br>swap.sh 5865 0 kB<br>sshd 4857 0 kB<br>sshd 4855 0 kB<br>sshd 1902 0 kB<br>sosd 2210 0 kB<br>sort 5868 0 kB<br>sh 1953 0 kB<br>seslogd 2426 0 kB<br>scsi_eh_2 309<br>scsi_eh_1 308<br>scsi_eh_0 305<br>runAs 4928 0 kB<br>rsyslogd 1706 0 kB<br>rclogd 2422 0 kB<br>rcagent 1933 0 kB<br>rc_schd 2236 0 kB<br>rc_perf 2227 0 kB<br>python 1853 0 kB<br>python 1851 0 kB<br>pm 15<br>pciehpd 48<br>pbx_exchange 1872 0 kB<br>pbrun 5001 0 kB<br>pbksh 4858 0 kB<br>ontuned 4049 0 kB<br>netns 13<br>mxSMS 2871 0 kB<br>mxSENSOR 2867 0 kB<br>mxMON 2859 0 kB<br>mxLOG 2855 0 kB<br>mxGATE 2863 0 kB<br>mingetty 2609 0 kB<br>mingetty 2607 0 kB<br>mingetty 2605 0 kB<br>mingetty 2603 0 kB<br>mingetty 2601 0 kB<br>mingetty 2599 0 kB<br>migration/1 7<br>migration/1 6<br>migration/0 5<br>migration/0 3<br>md_misc/1 34<br>md_misc/0 33<br>md/1 32<br>md/0 31<br>kthrotld/1 47<br>kthrotld/0 46<br>kthreadd 2<br>kswapd0 36<br>ksuspend_usbd 28<br>kstriped 81<br>ksoftirqd/1 8<br>ksoftirqd/0 4<br>ksmd 37<br>kseriod 30<br>kpsmoused 50<br>kintegrityd/1 19<br>kintegrityd/0 18<br>khungtaskd 35<br>khubd 29<br>khelper 12<br>kdmflush 1077<br>kdmflush 1076<br>kdmflush 1072<br>kdmflush 1070<br>kdmflush 1041<br>kdmflush 1039<br>kdmflush 1037<br>kdmflush 1035<br>kblockd/1 21<br>kblockd/0 20<br>kauditd 1203<br>kacpid 22<br>kacpi_notify 23<br>kacpi_hotplug 24<br>jbd2/sda3-8 1145<br>jbd2/sda2-8 394<br>jbd2/sda1-8 1142<br>jbd2/dm-7-8 1154<br>jbd2/dm-5-8 1151<br>jbd2/dm-4-8 1148<br>jbd2/dm-3-8 1166<br>jbd2/dm-2-8 1163<br>jbd2/dm-1-8 1160<br>jbd2/dm-0-8 1157<br>init 1 0 kB<br>flush-8:0 421<br>flush-253:1 5025<br>flush-253:0 4124<br>flk_uhis 4989 0 kB<br>flk_uhis 4987 0 kB<br>flk_schedrsv 5517 0 kB<br>flk_schedrsv 5515 0 kB<br>flk_schedrsd 5506 0 kB<br>flk_schedrsd 5504 0 kB<br>flk_schedrpt 5495 0 kB<br>flk_schedrpt 5493 0 kB<br>flk_schedexp 5474 0 kB<br>flk_schedexp 5472 0 kB<br>flk_ruhis 4968 0 kB<br>flk_ruhis 4966 0 kB<br>flk_rid 4796 0 kB<br>flk_rid 4794 0 kB<br>flk_read 4845 0 kB<br>flk_read 4843 0 kB<br>flk_pushmgrW 5083 0 kB<br>flk_pushmgrW 5060 0 kB<br>flk_pushmgrA 5348 0 kB<br>flk_pushmgrA 5346 0 kB<br>flk_pifsend 5031 0 kB<br>flk_pifsend 5029 0 kB<br>flk_pif 5010 0 kB<br>flk_pif 5008 0 kB<br>flk_dgw 4947 0 kB<br>flk_dgw 4945 0 kB<br>flk_apr 4882 0 kB<br>flk_apr 4880 0 kB<br>flk_aid 4813 0 kB<br>flk_aid 4811 0 kB<br>flk_GCM 4918 0 kB<br>flk_GCM 4916 0 kB<br>flk_GCM 4915 0 kB<br>flk_GCM 4914 0 kB<br>flk_GCM 4913 0 kB<br>flk_GCM 4912 0 kB<br>flk_GCM 4911 0 kB<br>flk_GCM 4910 0 kB<br>flk_GCM 4909 0 kB<br>flk_GCM 4908 0 kB<br>flk_GCM 4906 0 kB<br>flk_APNS 4861 0 kB<br>flk_APNS 4859 0 kB<br>ext4-dio-unwrit 396<br>ext4-dio-unwrit 395<br>ext4-dio-unwrit 1168<br>ext4-dio-unwrit 1167<br>ext4-dio-unwrit 1165<br>ext4-dio-unwrit 1164<br>ext4-dio-unwrit 1162<br>ext4-dio-unwrit 1161<br>ext4-dio-unwrit 1159<br>ext4-dio-unwrit 1158<br>ext4-dio-unwrit 1156<br>ext4-dio-unwrit 1155<br>ext4-dio-unwrit 1153<br>ext4-dio-unwrit 1152<br>ext4-dio-unwrit 1150<br>ext4-dio-unwrit 1149<br>ext4-dio-unwrit 1147<br>ext4-dio-unwrit 1146<br>ext4-dio-unwrit 1144<br>ext4-dio-unwrit 1143<br>events/1 10<br>events/0 9<br>data_store 4727 0 kB<br>data_store 4724 0 kB<br>crypto/1 41<br>crypto/0 40<br>crond 1918 0 kB<br>cgroup 11<br>bpcd 22363 0 kB<br>bdi-default 17<br>bash 5079 0 kB<br>bash 5052 0 kB<br>awk 6055 0 kB<br>ata_aux 27<br>ata/1 26<br>ata/0 25<br>async/mgr 14<br>aio/1 39<br>aio/0 38<br>VGAuthService 1717 0 kB<br>ManagementAgent 1815 0 kB<br><br><publishedDate>2017-08-04T05:55:37Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K7gB2IAJ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-04T03:09:37Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-04T03:09:37Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>아래와 같이 2017년 7월 28일 20:06:01 ~ 20:09:01 사이에 swap 사용량이 많이 발생 <br>한 것으로 확인 되었습니다. <br><br>Linux 2.6.32-358.23.2.el6.x86_64 (SLPPUSAL0B)   2017-07-28      _x86_64_        (2 CPU)<br><br>00:00:01    kbswpfree kbswpused  %swpused  kbswpcad   %swpcad<br>...<br>20:06:01      8388600         0      0.00         0      0.00<br>20:09:01      3742144   4646456     55.39      1468      0.03<br>20:12:01      3128064   5260536     62.71      2788      0.05<br>20:15:01      2885992   5502608     65.60      2968      0.05<br>20:18:01      2865060   5523540     65.85      2976      0.05<br>20:21:01      2865060   5523540     65.85      2976      0.05<br>20:24:01      2865060   5523540     65.85      2976      0.05<br>20:27:01      2865060   5523540     65.85      2976      0.05<br><br><br>free 명령어에서도 지금 swap 사용량이 있는 것으로 보입니다. <br><br>$ cat sosreport-SLPPUSAL0B-20170803144721-b3a9.zip/SLPPUSAL0B-2017080314441501739099/free <br>             total       used       free     shared    buffers     cached<br>Mem:      16201340   15170184    1031156          0     396652   13680448<br>-/+ buffers/cache:    1093084   15108256<br>Swap:      8388600    5523524    2865076<br><br><br>하지만 수집 하신 swap 로그에서는 swap 사용량이 모두 0으로 보이네요.<br>해당 스크립트는 저희 환경에서는 제대로 작용 되고 있습니다. <br><br># sh swap.sh <br>process name, pid, swap usage<br>qemu-kvm 4030 831640 kB<br>qemu-kvm 3984 690244 kB<br>qemu-kvm 26614 659480 kB<br>qemu-kvm 3676 644360 kB<br>qemu-kvm 25830 512088 kB<br>qemu-kvm 3774 470920 kB<br>qemu-kvm 3930 456092 kB<br>qemu-kvm 3618 273760 kB<br>qemu-kvm 3745 241068 kB<br>qemu-kvm 3840 170040 kB<br>libvirtd 3128 14520 kB<br>collectl 3493 11536 kB<br>...<br><br>고객 환경에서 swap 스크립트 작용 되지 못한 이유를 확인 하기 위해 <br>추가적인 정보 요청을 드립니다. <br><br>1. swap.sh 스크립트 파일 <br>2. 아래 명령어 출력 결과<br>   # sh /tmp/swap.sh<br><br>** swap.sh 내용을 다소 수정 하신 것으로 의심하고 있습니다. <br>process name, pid, swap usage &lt;== 저희 테스트 환경의 출력 결과<br>name pid swap    &lt;== swap.log 에서 확인 된 내용 <br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-08-04T03:09:37Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K7Ra4IAF"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-03T08:06:04Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-03T08:06:04Z</b><br><br>안녕하세요.<br>현재  swap used 가 60% 이상 사용중인 상태 입니다.<br>swap.log를 보니 사용량이 0 KB 이거나 없는것으로 되어있는데  process.log 로 swap 에 영향을 끼치는 프로세스를 알수는 없을까요?<br>sosreport 첨부 합니다.<br><br><publishedDate>2017-08-03T08:06:04Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K79CMIAZ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-08-02T07:48:27Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-08-02T07:48:27Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>말씀 하신 시점의 swap.log 를 확인 해 보니 스왑 사용량이 모두 0KB로 되어 <br>있는 것으로 보입니다. <br><br>Fri Jul 28 08:16:01 KST 2017<br>name pid swap<br>xinetd 1910 0 kB<br>vnetd 22360 0 kB<br>vmw_pvscsi_wq_0 306<br>vmtoolsd 1612 0 kB<br>vmmemctl 707<br>vmmemctl 1444<br>usbhid_resumer 51<br>udevd 488 0 kB<br>udevd 1040 0 kB<br>udevd 1038 0 kB<br>ttylogd 2429 0 kB<br>sync_supers 16<br>swap.sh 883 0 kB<br>swap.sh 878 0 kB<br>sshd 1902 0 kB<br>sosd 2210 0 kB<br>sort 884 0 kB<br>sh 876 0 kB<br>sh 1953 0 kB<br>seslogd 2426 0 kB<br>scsi_eh_2 309<br>scsi_eh_1 308<br>scsi_eh_0 305<br>rsyslogd 1706 0 kB<br>rclogd 2422 0 kB<br>rcagent 1933 0 kB<br>rc_schd 2236 0 kB<br>rc_perf 2227 0 kB<br>python 1853 0 kB<br>python 1851 0 kB<br>pm 15<br>pciehpd 48<br>...<br>hd-audio0 791 <br>flush-253:0 663 <br>ext4-dio-unwrit 652 <br>ext4-dio-unwrit 2640 <br>ext4-dio-unwrit 1896 <br>events_power_ef 34 <br>events_power_ef 33 <br>events_power_ef 32 <br>events_power_ef 31 <br>events_long/3 30 <br>events_long/2 29 <br>events_long/1 28 <br>events_long/0 27 <br>events/3 26 <br>events/3 22 <br>events/2 25 <br>events/2 21 <br>events/1 24 <br>events/1 20 <br>events/0 23 <br>events/0 19 <br>deferwq 97 <br>crypto/3 83 <br>crypto/2 82 <br>crypto/1 81 <br>crypto/0 80 <br>crond 20390 0 kB<br>cgroup 35 <br><br>윗 출력 결과중 swap 사용량이 보이지 않는 프로세스는 kernel thread 들입니다. <br>혹시 스왑 사용량이 증가 되는 현상을 어떻게 확인 하셨는지 알려 주실 수 있다면 대단히 <br>감사드리겠습니다. 또한, sar 데이타도 확인 하기 위해 서버의 sosreport 도 제공 해 <br>주시기 바랍니다. <br><br>감사합니다.  좋은 하루 되십시오.<br><br><publishedDate>2017-08-02T07:48:27Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K76LlIAJ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-08-02T02:19:16Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-08-02T02:19:16Z</b><br><br>안녕하세요.<br><br>아래와 같은 방법으로 process , swap 모니터링 중 swap 사용률이 증가 하는 현상이 발생 하였습니다.<br><br>7월28일(금) 08:16 이후로 계속 발생 되었다고 합니다.<br><br>로그 파일 첨부 합니다. 감사합니다.<br><br><publishedDate>2017-08-02T02:19:16Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JxB4PIAV"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-07-26T01:41:59Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-07-26T01:41:59Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>답변이 늦어진 점 대단히 죄송합니다.<br><br>말씀하신 방법으로 프로세스 별 swap 사용량을 모니터링 하실수 있는것으로 보입니다.<br><br>해당 이슈에 대하여 추가적인 문의사항이 있으시면 연락 주시기 바랍니다.<br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-07-26T01:41:59Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JxAuBIAV"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-07-26T01:18:53Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-07-26T01:18:53Z</b><br><br>안녕하세요. 답변이 없으셔서 일단 아래의 내용을 적용하였습니다.<br>감사합니다.<br><br><publishedDate>2017-07-26T01:18:53Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JwfKFIAZ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-07-24T04:37:39Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-07-24T04:37:39Z</b><br><br>안녕하세요. 아래의 방법외에 추가적으로 아래의 방법으로 진행도 예정중에 있습니다.<br>해당 방법으로 진행시 스왑을 사용하는 프로세스를 모니터링 가능 할지 확인 부탁드립니다.<br><br><br>1. cat /tmp/swap.sh<br>#!/bin/bash<br>echo &quot;process name, pid, swap usage&quot;<br>for file in /proc/*/status<br>do<br>awk '/^Pid|VmSwap|Name/{printf $2 &quot; &quot; $3}END{ print &quot;&quot;}' $file<br>done | sort -k 3 -n -r <br><br>2. cat /etc/crontab<br>*/1  *  *  *  * root date &gt;&gt; /var/log/swap.log ; /tmp/swap.sh &gt;&gt; /var/log/swap.log<br><br>3. cat /etc/logrotate.d/swap<br>/var/log/swap.log{<br>    rotate 2<br>    size 1M<br>    missingok<br>    notifempty<br>    create 644 root root<br>}<br><br>service crond restart<br>service rsyslogd restart<br><br>결과<br>Mon Jul 24 13:20:01 KST 2017<br>name pid swap<br>xinetd 1586 0 kB<br>vmmemctl 892<br>uuidd 1624 0 kB<br>usbhid_resumer 44<br>udevd 455 0 kB<br>udevd 1038 0 kB<br>udevd 1037 0 kB<br>tail 3543 0 kB<br>...생략<br><br>확인부탁드립니다.<br><br><publishedDate>2017-07-24T04:37:39Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JwehcIAB"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-07-24T02:36:33Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-07-24T02:36:32Z</b><br><br>답변감사합니다.<br>추가적으로 swap사용률이 높은 순위로 프로세스 모니터링을 하고 싶은데<br>찾아보니 아래와 같은 방법으로 진행 할 예정입니다.<br>1. <br>#cat /etc/crontab<br>*/1  *  *  *  * root date &gt;&gt; /var/log/process.log ; ps -eo user,pid,ppid,rss,size,vsize,pmem,pcpu,time,cmd --sort -size | head -n 11 &gt;&gt; /var/log/process.log<br><br>2.<br># service crond restart<br><br>3.<br># cat /etc/logrotate.d/process<br>/var/log/process.log{<br>    rotate 2<br>    size 1M<br>    missingok<br>    notifempty<br>    create 644 root root<br>}<br><br>위의 방법순으로 하면 될까요??<br>나오는 결과물에서<br>USER        PID   PPID   RSS    SZ    VSZ %MEM %CPU     TIME CMD<br>root       1693      1  3192 539220 577708  0.2 0.0 00:00:00 /usr/sbin/console-kit-daemon --no-daemon<br><br>SZ부분으로 확인 하면  되는 부분인지 확인부탁드립니다.<br><br><publishedDate>2017-07-24T02:36:32Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jw6b0IAB"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-07-20T02:44:20Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-07-20T02:44:20Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>아래와 같이 crond로 모니터링을 분단위로 하실수 있으십니다.<br># cat /etc/crontab<br>*/1  *  *  *  * root date &gt;&gt; /var/log/process.log ; ps -ef &gt;&gt; /var/log/process.log<br><br># service crond restart<br><br>만일 파일 크기를 리밋하시려면 logrotate를 사용하실수 있으십니다.<br>아래와 같이 설정하시면 /var/log/process.log 사이즈가 1M보다 클 경우 <br>rotate를 하게 되며 rotate 파일은 2개 보존하고 더 많은 로그는 삭제하게 됩니다.<br><br># cat /etc/logrotate.d/process<br>/var/log/process.log{<br>    rotate 2<br>    size 1M<br>    missingok<br>    notifempty<br>    create 644 root root<br>}<br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-07-20T02:44:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jvr6aIAB"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-07-19T04:32:31Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-07-19T04:32:31Z</b><br><br>안녕하세요.<br>답변감사합니다.<br><br>추가 요청 드릴것이 있어서 <br>말씀하신 해당 시간대에 프로세스 모니터링을 실시 하고자 합니다.<br><br>예를들면 <br>ps -ef 분단위로 모니터링해서 파일로 ouput을 하고자 하는 방식입니다.<br><br>권장해주실 만한 <br>혹은 용량이나 혹은 서비스에 큰 영향도가 적은 방법을 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-19T04:32:31Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JokXUIAZ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-07-04T08:33:35Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-07-04T08:33:35Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>네, 이것은 정상적인 현상입니다. 스왑 된 내용은 프로세스에서 다시 사용 하지 않는다면 <br>스스로 반환 되지 않습니다. 만약 스왑을 drop 시키시려면 아래와 같은 명령어로 강제로 <br>반환 시킬수 있습니다. <br><br># swapoff &lt;device&gt;<br># swapon &lt;device&gt;<br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-07-04T08:33:35Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JokR7IAJ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-07-04T08:19:51Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-07-04T08:19:51Z</b><br><br>답변감사합니다.<br><br>말씀하신 부분은 확인해보겠습니다.<br><br>혹시 스왑아웃이 발생 후<br>현재는 IO가 없음에도 불구하고<br>사용한 스왑을 반환하지 않는 것이 정상적인 것인가요???<br><br><publishedDate>2017-07-04T08:19:51Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JokJ9IAJ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-07-04T08:06:20Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-07-04T08:06:20Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>먼저 확인에 대단히 감사드립니다. <br><br>23일의 sar 로그를 확인 결과를 아래와 같이 공유 해 드립니다. <br><br> <br>Linux 2.6.32-358.23.2.el6.x86_64 (SLPPUSAL0B)   2017-06-23      _x86_64_        (2 CPU)<br><br>먼저 말씀 하신대로 6월 23일 20:09:01에 스왑 사용량이 급증 된 것을 확인 하였습니다. <br><br>00:00:01    kbswpfree kbswpused  %swpused  kbswpcad   %swpcad<br>...<br>20:06:01      8388600         0      0.00         0      0.00<br>20:09:01      2710816   5677784     67.68      2272      0.04  &lt;===<br>20:12:01      2423648   5964952     71.11      2672      0.04<br>20:15:01      2405864   5982736     71.32      2656      0.04<br><br><br>00:00:01     pswpin/s pswpout/s<br>...<br>20:09:01         0.18   7992.94  &lt;====<br>20:12:01         0.00    403.58<br>20:15:01         0.00     24.97<br>20:18:02         0.00      1.17<br><br><br>그당시 메모리 사용량 또한 CPU 사용율도 급증 된 것을 확인 하였습니다. <br><br>00:00:01    kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit<br>...<br>20:03:01      5552848  10648748     65.73    521844   9231148  11261512     45.80<br>20:06:01        94996  16106600     99.41      1788  15497412  11277748     45.86  &lt;====<br>20:09:01        92388  16109208     99.43       996  15544288  11277748     45.86<br>20:12:01        92620  16108976     99.43      1036  15542308  11277840     45.86<br>20:15:01        88768  16112828     99.45      1252  15545632  11277748     45.86<br>20:18:02        89140  16112456     99.45       860  15545436  11277748     45.86<br>20:21:01        96480  16105116     99.40     21680  15495252  11277836     45.86<br>20:24:01      1104056  15097540     93.19     50876  14403196  11278000     45.86<br>20:27:01       323212  15878384     98.01     59636  15155132  11277836     45.86<br>20:30:01      1663916  14537680     89.73     86228  13762868  11282436     45.88<br>20:33:01        92364  16109232     99.43    152564  15138264  11283048     45.88<br>20:36:01       116196  16085400     99.28    185180  15016600  11254068     45.77<br><br><br>00:00:01        CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest     %idle<br>...<br>20:06:01        all      2.15      0.00      4.63     17.10      0.00      0.00      0.25      0.00     75.87<br>20:06:01          0      3.25      0.00      7.26     34.07      0.00      0.00      0.51      0.00     54.91<br>20:06:01          1      1.06      0.00      2.01      0.21      0.00      0.00      0.00      0.00     96.72<br>20:09:01        all      2.02      0.00      6.46      8.78      0.00      0.00      0.32      0.00     82.42<br>20:09:01          0      3.15      0.00      7.15     16.99      0.00      0.00      0.64      0.00     72.06<br>20:09:01          1      0.88      0.00      5.78      0.63      0.00      0.00      0.01      0.00     92.71<br>20:12:01        all      1.95      0.00      4.36     11.84      0.00      0.00      0.19      0.00     81.66<br>20:12:01          0      2.97      0.00      6.56     23.63      0.00      0.01      0.37      0.00     66.47<br>20:12:01          1      0.93      0.00      2.18      0.11      0.00      0.00      0.00      0.00     96.77<br><br><br>메모리 사용량 또한 CPU 사용율이 급증 된 원인은 스토리지 또한 네트워크 I/O 가 많이 발생 하였기 때문인 것 같습니다. <br>아래와 같은 내용을 보시면 vg9-APP에 read 많이 발생 하였습니다. <br><br>00:00:01          DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util<br>...<br>20:00:01       dev8-0      0.89      0.00     11.52     12.93      0.00      0.72      0.38      0.03<br>20:00:01      dev8-16      1.71      0.00     35.10     20.47      0.00      1.01      0.75      0.13<br>20:00:01     dev253-0      4.39      0.00     35.10      8.00      0.01      1.28      0.29      0.13<br>20:03:01       dev8-0      1.12      0.00     15.97     14.31      0.00      1.57      0.44      0.05<br>20:03:01      dev8-16     20.44   1911.82     41.89     95.57      0.02      1.01      0.78      1.59<br>20:03:01     dev253-0     23.79   1913.43     41.89     82.18      0.03      1.09      0.67      1.59<br>20:06:01       dev8-0      2.71    109.88     12.54     45.21      0.01      3.75      2.20      0.60<br>20:06:01      dev8-16    347.71  80774.79     64.98    232.49      0.60      1.72      1.05     36.39<br>20:06:01     dev253-0    354.28  80773.17     64.98    228.18      0.62      1.74      1.03     36.41<br>20:09:01       dev8-0     86.92     61.31  63954.77    736.45      0.56      6.44      0.68      5.93<br>20:09:01      dev8-16    143.72  29674.01     35.72    206.72      0.31      2.14      1.34     19.30<br>20:09:01     dev253-0    146.47  29674.01     35.72    202.84      0.32      2.18      1.32     19.31<br>20:12:01       dev8-0     11.58     39.93   3240.74    283.32      0.03      2.92      2.79      3.23<br>20:12:01      dev8-16    227.25  52029.99     35.66    229.11      0.42      1.84      1.12     25.56<br>20:12:01     dev253-0    229.93  52029.99     35.66    226.44      0.42      1.85      1.11     25.57<br><br>dev253-0: vg9-APP  pv: /dev/sdb1<br>dev8-0: sda<br>dev8-16: sdb<br><br><br>00:00:01     pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff<br>...<br>20:00:01         0.00     23.31    137.19      0.00     70.85      0.00      0.00      0.00      0.00<br>20:03:01       956.72     28.93    207.15      0.00    325.69      0.00      0.00      0.00      0.00<br>20:06:01     40441.52     38.76    159.31      0.89  35226.17  31529.04     16.18  29267.50     92.78<br>20:09:01     14867.66  31995.25    126.04      0.56  42073.26  59235.59   2975.66  38770.33     62.32<br>20:12:01     26034.96   1638.20    135.83      0.37  40753.51  38622.15      7.02  38151.18     98.76<br>20:15:01     22559.79    123.49    140.69      0.49  28712.33  26369.36     15.64  26293.72     99.65<br>20:18:02     17984.73     28.26    125.39      0.63  58102.07  54452.21     24.22  54272.85     99.63<br>20:21:01     29010.86     69.72    132.19      0.31  27204.17  20142.88      0.00  20062.67     99.60<br>20:24:01     25461.78    172.09    157.72      0.30  14270.97   5396.68      0.00   5364.78     99.41<br>20:27:01     19899.16     79.74    130.59      0.02   8949.89    119.45      0.00    119.41     99.97<br>20:30:01     15352.79     65.84    178.32      0.28   9715.56    105.88      0.00    105.76     99.89<br>20:33:01     22425.38    432.71    153.84      0.00   9282.96   2846.06      0.00   2845.20     99.97<br>20:36:01      6695.27    358.10    142.88      0.07   3601.63   1438.60      0.00   1437.94     99.95<br>20:39:01        10.39     24.63    124.29      0.00     67.59      0.00      0.00      0.00      0.00<br><br><br>00:00:01          tps      rtps      wtps   bread/s   bwrtn/s<br>...<br>20:00:01         6.99      0.00      6.99      0.00     81.73<br>20:03:01        45.35     37.11      8.24   3825.25     99.75<br>20:06:01       704.70    693.82     10.88 161657.84    142.50<br>20:09:01       377.11    285.26     91.85  59409.34  64026.22<br>20:12:01       468.95    451.96     17.00 104101.50   3312.06<br>20:15:01       392.68    384.51      8.17  90155.27    282.29<br>20:18:02       355.91    348.80      7.10  71857.09     91.95<br>20:21:01       780.05    761.25     18.81 116007.79    266.79<br>20:24:01       865.91    820.59     45.32 101536.76    676.32<br>20:27:01       488.95    467.22     21.73  79594.19    307.40<br>20:30:01       324.82    312.64     12.18  55817.46    197.78<br>20:33:01       729.61    712.35     17.25  44863.40    899.90<br>20:36:01       440.28    428.36     11.93  13416.99    749.70<br>20:39:01        10.17      2.71      7.45     41.55     86.47<br>======================<br>디스크에서 read 한 내용이 네트워크 통해서 전송 한 것으로 보입니다. <br><br>00:00:01        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s<br>...<br>19:57:01         eth0     94.46     76.76      7.92     10.36      0.00      0.00      0.00<br>20:00:01         eth0     96.41     78.61      8.12     10.66      0.00      0.00      0.00<br>20:03:01         eth0    194.66    150.26     14.03    964.10      0.00      0.00      0.00<br>20:06:01         eth0   1304.18    859.38     78.97  12554.02      0.00      0.00      0.00<br>20:09:01         eth0   1320.99    840.42     79.78  12193.91      0.00      0.00      0.00<br>20:12:01         eth0   1106.76    719.38     67.27  10170.23      0.00      0.00      0.00<br>20:15:01         eth0   1073.85    652.09     65.35   9423.94      0.00      0.00      0.00<br>20:18:02         eth0   1412.11    940.27     84.94  15102.15      0.00      0.00      0.00<br>20:21:01         eth0   2541.46   1719.43    151.36  28382.42      0.00      0.00      0.00<br>20:24:01         eth0   2461.20   1723.98    146.73  25353.19      0.00      0.00      0.00<br>20:27:01         eth0   1970.84   1327.06    118.12  19922.49      0.00      0.00      0.00<br>20:30:01         eth0   1500.07   1044.56     90.21  15512.00      0.00      0.00      0.00<br>20:33:01         eth0   2594.23   1990.57    154.56  22608.23      0.00      0.00      0.00<br><br>물론 디스크 write 또한 네트워크 receive 도 있었지만, <br>device read &gt; device write<br>txkB/s &gt; rxkB/s <br>로 되어 있습니다. <br><br>즉, 그당시 다른 서버에서 데이타 요청이 많았던 것으로 보이며 그때 어떤 작업이 있었는지에 대해서는 sosreport 로 알수가 <br>없으니 그쪽에서 확인 하셔야 됩니다. 서버에서 어떤 APP 가 vg9-APP 사용 하고 있는지 확인 하시면 그 당시 어떤 작업이 <br>있었는지가 알게 될 것입니다. <br><br>I/O 로그가 급증 되어 스왑이 많이 사용 되는 현상은 정상적인 현상이며 따로 이슈가 없었던 것으로 판단이 됩니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-07-04T08:06:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JoYzDIAV"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-07-04T04:08:22Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-07-04T04:08:22Z</b><br><br>답변감사합니다.<br>말씀하신 6월 이전의 sar 데이터는 존재하지 않습니다만,<br>현재 6월 20일자 sar데이터를 확인해보면 <br><br>Linux 2.6.32-358.23.2.el6.x86_64 (SLPPUSAL0B)   2017-06-20      _x86_64_        (2 CPU)<br><br>18:09:01      2419680   5968920     71.16      3036      0.05<br>18:12:01      2419680   5968920     71.16      3036      0.05<br>18:15:01      2419680   5968920     71.16      3036      0.05<br>18:18:01      2419680   5968920     71.16      3036      0.05<br>18:21:01      2419680   5968920     71.16      3036      0.05<br>18:24:01      2419680   5968920     71.16      3036      0.05<br>18:27:01      2419680   5968920     71.16      3036      0.05<br>18:30:01      8388564        36      0.00         8     22.22   &lt;--------<br><br>리부팅 후 swap사용률이 0으로 변경 되었음을 확인 할수 있습니다.<br><br>그런데<br><br>Linux 2.6.32-358.23.2.el6.x86_64 (SLPPUSAL0B)   2017-06-23      _x86_64_        (2 CPU)<br><br>19:57:01      8388600         0      0.00         0      0.00<br>20:00:01      8388600         0      0.00         0      0.00<br>20:03:01      8388600         0      0.00         0      0.00<br>20:06:01      8388600         0      0.00         0      0.00<br>20:09:01      2710816   5677784     67.68      2272      0.04<br>20:12:01      2423648   5964952     71.11      2672      0.04<br><br>23일 20:09:01 부터 swap사용률이 급격히 증가함을 확인 할 수있습니다.<br><br>해당 시점을 기존으로 원인에 대한 확인이 가능한지 <br>부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-04T04:08:22Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JoHxyIAF"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-07-03T06:00:20Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-07-03T06:00:20Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>추가적으로 문의 주신 내용에 대해 아래와 같이 답변 드립니다. <br><br>&gt; a. 메모리가 부족에 대한 부분으로 판단되지 않다고 생각해도 되나요?<br><br>네, 맞습니다. <br><br><br>&gt; b. 그렇다면 swap used에 대한 부분을 clear하기 위해서 권장 방법이 있다면 <br>&gt; 부탁드립니다.(예, 리부팅 혹은 swapdrop)<br><br>이미 사용된 swap 공간을 수동으로 drop 시키시려면 swap device 를 swapoff/swapon <br>시키시면 됩니다. <br><br># swapoff &lt;device&gt;<br># swapon &lt;device&gt;<br><br>혹은, 시스템을 재부팅 시키셔도 swap 공간이 drop 됩니다. <br><br><br>&gt; c. 이와 같은 swap used 부분과 관계가 있는 파라메타가 있는지 확인부탁드립니다.<br><br>swap 사용량 관련 된 파라미터는 swappiness 입니다. swappiness 관련 하여 <br>kernel-doc에서 설명 되어 있으며 그 내용을 참고 하시기 바랍니다. <br><br>/usr/share/doc/kernel-doc-3.10.0/Documentation/sysctl/vm.txt:<br><br>==============================================================<br><br>swappiness<br><br>This control is used to define how aggressive the kernel will swap<br>memory pages.  Higher values will increase agressiveness, lower values<br>decrease the amount of swap.  A value of 0 instructs the kernel not to<br>initiate swap until the amount of free and file-backed pages is less<br>than the high water mark in a zone.<br><br>The default value is 60.<br><br>==============================================================<br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-07-03T06:00:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JoHd0IAF"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-07-03T05:06:49Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-07-03T05:06:49Z</b><br><br>답변감사합니다.<br>답변주신 부분을 정리하면<br>현재 swap used가 70%를 유지고 있지만,<br>swapin &amp; swapout에 대한 부분은 발생하고 있지 않기 때문에<br><br>a. 메모리가 부족에 대한 부분으로 판단되지 않다고 생각해도 되나요?<br>b. 그렇다면 swap used에 대한 부분을 clear하기 위해서 권장 방법이 있다면 부탁드립니다.(예, 리부팅 혹은 swapdrop)<br>c. 이와 같은 swap used 부분과 관계가 있는 파라메타가 있는지 확인부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-03T05:06:49Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JoGsTIAV"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-07-03T02:48:32Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-07-03T02:48:32Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>먼저 sosreport 를 보내 주셔서 대단히 감사드립니다. <br>하지만 제가 요청 드린 정보는 서버 SLPPUSAL0B의 6월 이전에 수집된 <br>sar 파일이었습니다.<br><br>SLPPUSAL0B의 6월 이전에 수집된 sar 파일을 요청 드린 원인은 swpin<br>많이 발생 하였을 경우에 서버의 로딩등을 확인 하기 위함입니다. <br><br>다시 확인 부탁드립니다. <br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-07-03T02:48:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JoG9eIAF"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-07-03T00:20:22Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-07-03T00:20:22Z</b><br><br>요청하신 tar 파일 올려드립니다. 감사합니다.<br><br><publishedDate>2017-07-03T00:20:22Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JnhRSIAZ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-29T03:09:51Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-29T03:09:51Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>서버 SLPPUSAL0B에서 스왑 사용량 생긴 원인에 대해 확인 하려면 swpin 많이 <br>발생 한 시점 또한 그 시점의 메모리 사용량과 I/O 발생량을 확인 해야 합니다. <br>즉, swpin 많이 발생 할때 수집된 sar 로그가 필요 하게 됩니다.<br><br>지금 보내 주신 sosreport 에서는 서버 LPPUSAL0B의 swpin/swpout 거의 <br>발생 하지 않으며 스왑 사용량도 안정 된 것으로 보입니다. <br><br>00:00:01     pswpin/s pswpout/s<br>00:03:01         0.00      0.00<br>00:06:01         0.00      0.00<br>00:09:01         0.00      0.00<br>00:12:01         0.00      0.00<br>00:15:01         0.00      0.00<br><br>혹시 백업된 sar 파일이 있으시면 좀더 확인 해 드릴수 있을 것 같습니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-29T03:09:51Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JngaVIAR"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-06-29T01:08:30Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-06-29T01:08:30Z</b><br><br>답변감사합니다.<br>Q) 혹시 swpin 이 많이 발생 하게 되는 시점은 언제인지 그때 어떤 작업이 있었는지<br>확인 가능 하신가요? <br>A) 어떠한 작업을 하였는지는 확인이 힘듭니다. 사용률이 높아서 메모리 확장을 진행하였습니다.<br><br><br>추가질문) sosreport상에서 스왑 사용률이 높아지는 원인을 알수 있을까요? A서버와 B서버가  서로 구성이 같은데 유독 B서버만 스왑사용률이 높은 원인에 대해서 알고 싶습니다.<br><br><publishedDate>2017-06-29T01:08:30Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JnTInIAN"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-28T08:17:14Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-28T08:17:14Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>아래와 같이 SLPPUSAL0B에서 스왑을 사용량이 높은 것으로 확인 되었습니다. <br><br>SLPPUSAL0A]$ cat free <br>             total       used       free     shared    buffers     cached<br>Mem:      16201596   16044692     156904          0     206236   13475288<br>-/+ buffers/cache:    2363168   13838428<br>Swap:      8388600          0    8388600<br><br><br>SLPPUSAL0B]$ cat free <br>             total       used       free     shared    buffers     cached<br>Mem:      16201596   15934264     267332          0     363164   14505564<br>-/+ buffers/cache:    1065536   15136060<br>Swap:      8388600    5984472    2404128<br><br><br>SLPPUSAL0B 에서는 지금 스왑 사용량이 더 이상 올라가는 것으로 보여지지가 않으며 <br>70% 정도로 유지 되고 있습니다. <br><br>그리고 6월1일의 sar 보시면 스왑 사용량이 이미 70% 이상으로 되었으며 그후 swpin <br>많이 발생 한적이 없었습니다. <br><br>Linux 2.6.32-358.23.2.el6.x86_64 (SLPPUSAL0B)   2017-06-01      _x86_64_        (2 CPU)<br>...<br>00:00:01    kbswpfree kbswpused  %swpused  kbswpcad   %swpcad<br>00:03:01      2438992   5949608     70.92      3028      0.05<br>00:06:01      2438992   5949608     70.92      3028      0.05<br><br><br>혹시 swpin 이 많이 발생 하게 되는 시점은 언제인지 그때 어떤 작업이 있었는지<br>확인 가능 하신가요? <br><br>swap 된 내용이 다시 사용하게 되지 않으면 swpout 되지 않습니다. 혹시 swap <br>drop 하시려면 swap off 하셨다가 다시 swap on 하시면 됩니다. <br>(서비스 제공중인 서버에서 해당 작업을 하시는 것을 권장 해 드리지 않습니다.)<br><br># swapoff &lt;device&gt;<br># swapon &lt;device&gt;<br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-28T08:17:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>