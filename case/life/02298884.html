======================<br><b>생성계정 : JIMIN KIM</b><br><b>생성날짜 : 2019-01-24T05:23:27Z</b><br><b>마지막 답변자 : Mahyun Kim</b><br><b>마지막 수정 일자 : 2019-01-25T02:14:38Z</b><br><b>id : 5002K00000dC0NIQA0</b><br>======================<br><br><b><font size=15>
제목  : NFS mount 불가 (nlcokmgr)
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요 <br>삼성SDS 양누리사원입니다.<br><br>특정 서버에서 NFS mount 가 불가하여, 관련 서비스들을 확인해보았는데요<br>서비스들은 정상처럼 보이나 rpcinfo 조회를 해보니<br>문제되는 서버에 nlockmgr service가 보이지 않습니다.<br><br>확인부탁드립니다.<br><br>(정상서버)<br>rpcinfo -s<br>   program version(s) netid(s)                         service     owner<br>    100000  2,3,4     local,udp,tcp,udp6,tcp6          portmapper  superuser<br>    100024  1         tcp6,udp6,tcp,udp                status      29<br>    100021  4,3,1     tcp6,udp6,tcp,udp                nlockmgr    superuser<br><br>rpcinfo -p<br>   program vers proto   port  service<br>    100000    4   tcp    111  portmapper<br>    100000    3   tcp    111  portmapper<br>    100000    2   tcp    111  portmapper<br>    100000    4   udp    111  portmapper<br>    100000    3   udp    111  portmapper<br>    100000    2   udp    111  portmapper<br>    100024    1   udp  43800  status<br>    100024    1   tcp  50316  status<br>    100021    1   udp  47743  nlockmgr<br>    100021    3   udp  47743  nlockmgr<br>    100021    4   udp  47743  nlockmgr<br>    100021    1   tcp  46102  nlockmgr<br>    100021    3   tcp  46102  nlockmgr<br>    100021    4   tcp  46102  nlockmgr<br><br>systemctl status rpcbind.socket<br>* rpcbind.socket - RPCbind Server Activation Socket<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.socket; enabled; vendor preset: enabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:48 KST; 2 months 6 days ago<br>   Listen: /var/run/rpcbind.sock (Stream)<br>           0.0.0.0:111 (Stream)<br><br>systemctl status rpcbind.service<br>* rpcbind.service - RPC bind service<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.service; indirect; vendor preset: enabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:54 KST; 2 months 6 days ago<br>  Process: 1459 ExecStart=/sbin/rpcbind -w $RPCBIND_ARGS (code=exited, status=0/SUCCESS)<br> Main PID: 1464 (rpcbind)<br>   CGroup: /system.slice/rpcbind.service<br>           `-1464 /sbin/rpcbind -w<br><br>systemctl status rpc-statd.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:54 KST; 2 months 6 days ago<br>  Process: 1448 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 1452 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-1452 /usr/sbin/rpc.statd<br><br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Version 1.3.0 starting<br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Flags: TI-RPC<br><br>systemctl status nfslock.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:54 KST; 2 months 6 days ago<br>  Process: 1448 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 1452 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-1452 /usr/sbin/rpc.statd<br><br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Version 1.3.0 starting<br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Flags: TI-RPC<br><br><br>systemctl status nfs-lock.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:54 KST; 2 months 6 days ago<br>  Process: 1448 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 1452 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-1452 /usr/sbin/rpc.statd<br><br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Version 1.3.0 starting<br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Flags: TI-RPC<br><br>(이슈있는 서버)<br>rpcinfo -s<br>   program version(s) netid(s)                         service     owner<br>    100000  2,3,4     local,udp,tcp                    portmapper  superuser<br>    100024  1         tcp,udp                          status      29<br><br>rpcinfo -p<br>   program vers proto   port  service<br>    100000    4   tcp    111  portmapper<br>    100000    3   tcp    111  portmapper<br>    100000    2   tcp    111  portmapper<br>    100000    4   udp    111  portmapper<br>    100000    3   udp    111  portmapper<br>    100000    2   udp    111  portmapper<br>    100024    1   udp  41593  status<br>    100024    1   tcp  32901  status<br><br>systemctl status rpcbind.socket<br>* rpcbind.socket - RPCbind Server Activation Socket<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.socket; enabled; vendor preset: enabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:09 KST; 20min ago<br>   Listen: /var/run/rpcbind.sock (Stream)<br>           0.0.0.0:111 (Stream)<br><br>systemctl status rpcbind.service<br>* rpcbind.service - RPC bind service<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.service; indirect; vendor preset: enabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:21 KST; 20min ago<br>  Process: 88222 ExecStart=/sbin/rpcbind -w $RPCBIND_ARGS (code=exited, status=0/SUCCESS)<br> Main PID: 88223 (rpcbind)<br>   CGroup: /system.slice/rpcbind.service<br>           `-88223 /sbin/rpcbind -w<br><br>systemctl status rpc-statd.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:40 KST; 20min ago<br>  Process: 88267 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 88268 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-88268 /usr/sbin/rpc.statd<br><br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Version 1.3.0 starting<br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Flags: TI-RPC<br><br>systemctl status nfslock.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:40 KST; 20min ago<br>  Process: 88267 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 88268 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-88268 /usr/sbin/rpc.statd<br><br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Version 1.3.0 starting<br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Flags: TI-RPC<br><br>systemctl status nfs-lock.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:40 KST; 20min ago<br>  Process: 88267 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 88268 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-88268 /usr/sbin/rpc.statd<br><br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Version 1.3.0 starting<br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Flags: TI-RPC<br><br>해결 기간이나 업무에 미치는 영향에 대한 정보를 제공해 주시겠습니까?<br><br>OS Backup 이 NFS 환경으로 되어있습니다. <br>원활한 백업환경 복구를 위해 빠른 해결이 필요합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.4</b><br><b>타입  : Configuration issue</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>PCPSEL01SL</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0a2K00000OtqfXQAR"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-01-24T06:38:33Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-01-24T06:38:33Z</b><br><br>안녕하세요. Red Hat 김마현 입니다.<br><br>유선상으로 가이드 드리면서 네트워크 셋업 상의 문제로 확인되었고, 셋업 변경 후 해결되었습니다.<br>해당 케이스는 곧 closed 처리 하겠습니다.<br>close 후 추가 문의가 있으시면 해당 케이스를 재 open 후 문의 하시면 됩니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-01-24T06:38:33Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OtqVXQAZ"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-01-24T06:22:00Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-01-24T06:21:59Z</b><br><br>안녕하세요. Red Hat 김마현 입니다.<br><br>관련하여 조금 전 양누리 사원님과 통화로 확인 시,<br>해당 서버는 nfs client 로만 사용되며, 백업 장비로의 nfs mount가 안되는 상황이라고 전달 받았습니다.<br><br>nlockmgr 는 nfs 서버 서비스를 하기 위해 필요한 것으로 nfs client들이 특정 파일을 동시에 writing 할 수 없게 locking 처리를 해주는 역활을 합니다.<br>따라서 현재 이슈의 서버에서 백업장비로 nfs mount가 안되는 문제와는 연관이 없을것으로 보입니다.<br><br>추가적인 확인 및 이슈해결은 유선 통화 및 자료요청 등을 통해서 진행하겠습니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-01-24T06:21:59Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>삼성SDS 양누리사원입니다.<br><br>특정 서버에서 NFS mount 가 불가하여, 관련 서비스들을 확인해보았는데요<br>서비스들은 정상처럼 보이나 rpcinfo 조회를 해보니<br>문제되는 서버에 nlockmgr service가 보이지 않습니다.<br><br>확인부탁드립니다.<br><br>(정상서버)<br>rpcinfo -s<br>   program version(s) netid(s)                         service     owner<br>    100000  2,3,4     local,udp,tcp,udp6,tcp6          portmapper  superuser<br>    100024  1         tcp6,udp6,tcp,udp                status      29<br>    100021  4,3,1     tcp6,udp6,tcp,udp                nlockmgr    superuser<br><br>rpcinfo -p<br>   program vers proto   port  service<br>    100000    4   tcp    111  portmapper<br>    100000    3   tcp    111  portmapper<br>    100000    2   tcp    111  portmapper<br>    100000    4   udp    111  portmapper<br>    100000    3   udp    111  portmapper<br>    100000    2   udp    111  portmapper<br>    100024    1   udp  43800  status<br>    100024    1   tcp  50316  status<br>    100021    1   udp  47743  nlockmgr<br>    100021    3   udp  47743  nlockmgr<br>    100021    4   udp  47743  nlockmgr<br>    100021    1   tcp  46102  nlockmgr<br>    100021    3   tcp  46102  nlockmgr<br>    100021    4   tcp  46102  nlockmgr<br><br>systemctl status rpcbind.socket<br>* rpcbind.socket - RPCbind Server Activation Socket<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.socket; enabled; vendor preset: enabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:48 KST; 2 months 6 days ago<br>   Listen: /var/run/rpcbind.sock (Stream)<br>           0.0.0.0:111 (Stream)<br><br>systemctl status rpcbind.service<br>* rpcbind.service - RPC bind service<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.service; indirect; vendor preset: enabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:54 KST; 2 months 6 days ago<br>  Process: 1459 ExecStart=/sbin/rpcbind -w $RPCBIND_ARGS (code=exited, status=0/SUCCESS)<br> Main PID: 1464 (rpcbind)<br>   CGroup: /system.slice/rpcbind.service<br>           `-1464 /sbin/rpcbind -w<br><br>systemctl status rpc-statd.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:54 KST; 2 months 6 days ago<br>  Process: 1448 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 1452 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-1452 /usr/sbin/rpc.statd<br><br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Version 1.3.0 starting<br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Flags: TI-RPC<br><br>systemctl status nfslock.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:54 KST; 2 months 6 days ago<br>  Process: 1448 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 1452 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-1452 /usr/sbin/rpc.statd<br><br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Version 1.3.0 starting<br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Flags: TI-RPC<br><br><br>systemctl status nfs-lock.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Sun 2018-11-18 09:29:54 KST; 2 months 6 days ago<br>  Process: 1448 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 1452 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-1452 /usr/sbin/rpc.statd<br><br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Version 1.3.0 starting<br>Nov 18 09:29:54 PEPSAL10SL rpc.statd[1452]: Flags: TI-RPC<br><br>(이슈있는 서버)<br>rpcinfo -s<br>   program version(s) netid(s)                         service     owner<br>    100000  2,3,4     local,udp,tcp                    portmapper  superuser<br>    100024  1         tcp,udp                          status      29<br><br>rpcinfo -p<br>   program vers proto   port  service<br>    100000    4   tcp    111  portmapper<br>    100000    3   tcp    111  portmapper<br>    100000    2   tcp    111  portmapper<br>    100000    4   udp    111  portmapper<br>    100000    3   udp    111  portmapper<br>    100000    2   udp    111  portmapper<br>    100024    1   udp  41593  status<br>    100024    1   tcp  32901  status<br><br>systemctl status rpcbind.socket<br>* rpcbind.socket - RPCbind Server Activation Socket<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.socket; enabled; vendor preset: enabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:09 KST; 20min ago<br>   Listen: /var/run/rpcbind.sock (Stream)<br>           0.0.0.0:111 (Stream)<br><br>systemctl status rpcbind.service<br>* rpcbind.service - RPC bind service<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.service; indirect; vendor preset: enabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:21 KST; 20min ago<br>  Process: 88222 ExecStart=/sbin/rpcbind -w $RPCBIND_ARGS (code=exited, status=0/SUCCESS)<br> Main PID: 88223 (rpcbind)<br>   CGroup: /system.slice/rpcbind.service<br>           `-88223 /sbin/rpcbind -w<br><br>systemctl status rpc-statd.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:40 KST; 20min ago<br>  Process: 88267 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 88268 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-88268 /usr/sbin/rpc.statd<br><br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Version 1.3.0 starting<br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Flags: TI-RPC<br><br>systemctl status nfslock.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:40 KST; 20min ago<br>  Process: 88267 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 88268 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-88268 /usr/sbin/rpc.statd<br><br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Version 1.3.0 starting<br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Flags: TI-RPC<br><br>systemctl status nfs-lock.service<br>* rpc-statd.service - NFS status monitor for NFSv2/3 locking.<br>   Loaded: loaded (/usr/lib/systemd/system/rpc-statd.service; static; vendor preset: disabled)<br>   Active: active (running) since Thu 2019-01-24 13:50:40 KST; 20min ago<br>  Process: 88267 ExecStart=/usr/sbin/rpc.statd $STATDARGS (code=exited, status=0/SUCCESS)<br> Main PID: 88268 (rpc.statd)<br>   CGroup: /system.slice/rpc-statd.service<br>           `-88268 /usr/sbin/rpc.statd<br><br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Version 1.3.0 starting<br>Jan 24 13:50:40 PCPSEL01SL rpc.statd[88268]: Flags: TI-RPC</issue><timeFramesAndUrgency>OS Backup 이 NFS 환경으로 되어있습니다. <br>원활한 백업환경 복구를 위해 빠른 해결이 필요합니다.</timeFramesAndUrgency><cep>false</cep></case>