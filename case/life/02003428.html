======================<br><b>생성계정 : HyunYick Park</b><br><b>생성날짜 : 2018-01-04T01:44:04Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-01-22T11:15:34Z</b><br><b>id : 500A000000ZPH1HIAX</b><br>======================<br><br><b><font size=15>
제목  : 단순 질의
</font></b><br><br>======================<br><b>사전문의<br></b><br>What problem/issue/behavior are you having trouble with?  What do you expect to see?<br><br>Q1) out of memory가 발생할 경우<br>리눅스 기본 구성상 해당 프로세스를 종료하고 시스템은 종료가 되지 않나요?<br><br>Q2) out of memory가 발생할경우<br>시스템을 리부팅하면서 자체적으로 kdump를 발생시키는 방법이 있나요?<br><br>Q3) out of memory가 발생할 경우<br>시스템 덤프가 아닌 어플리케이션 덤프를 발생시킬 수있는 방법이 있나요?<br><br>Q4) ulimit 에서 core file size를 unlimit 로 설정하고<br>core_pattern의 위치를 설정하지 않았을 경우 어플리케이션 덤프가 발생하지 않는건가요?<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 5.6</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 4 (Low)</b><br>======================<br><comment id="a0aA000000LKf82IAD"><br>======================<br><b>생성계정 : Park, HyunYick</b><br><b>생성날짜 : 2018-01-05T09:04:11Z</b><br><b>마지막 답변자 : Park, HyunYick</b><br><b>마지막 수정 일자 : 2018-01-05T09:06:38Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>이전 코멘트에서 전달해드리지 못한 답변입니다.<br><br>Q3) out of memory가 발생할 경우 시스템 덤프가 아닌 어플리케이션 덤프를 발생시킬 수있는 방법이 있나요?<br><br>A3) 내부적으로 확인해보았으나 관련된 설정은 찾을 수 없었습니다. 다만 레드햇 공식 페이지는 아니지만 검색결과 어플리케이션 core가 필요한 경우에 아래와 같은 방법으로 진행해보실 수 있을것 같습니다.<br><br>To restore some semblance of sanity to your memory management:<br><br>1. Disable the OOM Killer (Put vm.oom-kill = 0 in /etc/sysctl.conf)<br><br>2. Disable memory overcommit (Put vm.overcommit_memory = 2 in /etc/sysctl.conf)<br>These settings will make Linux behave in the traditional way (if a process requests more memory than is available malloc() will fail and the process requesting the memory is expected to cope with that failure).<br><br>Note that this is a ternary value:<br><br>• 0 = &quot;estimate if we have enough RAM&quot;<br><br>• 1 = &quot;Always say yes&quot;<br><br>• 2 = &quot;say no if we don't have the memory&quot;<br><br>제가 간단히 확인해본 결과 oom-killer와  vm.overcommit_memory 파라메터를 비활성화하여 oom-killer가 어플리케이션을 kill 하는 것으로 막고, 어플리케이션의 메모리 할당 실패를 유도합니다.<br>어플리케이션이 메모리 할당에 실패하게되면 기존의 core dump 설정에 따라 core를 발생시키는 방법으로 보여집니다.<br><br>해당 URL를 첨부합니다.<br><br>https://serverfault.com/questions/662201/get-a-core-dump-of-debugging-a-process-killed-by-oom-killer<br><br>감사합니다.<br><br><publishedDate>2018-01-05T09:04:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LKbERIA1"><br>======================<br><b>생성계정 : Park, HyunYick</b><br><b>생성날짜 : 2018-01-05T01:51:26Z</b><br><b>마지막 답변자 : Park, HyunYick</b><br><b>마지막 수정 일자 : 2018-01-05T01:53:30Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>out of memory는 스왑을 포함하여 메모리 페이지의 회수가 어려운 경우 발생하는 시스템 수준의 이벤트입니다.<br>이를 바탕으로 문의드린 내용에 대한 답변을 드립니다.<br><br>Q1) out of memory가 발생할 경우 리눅스 기본 구성상 해당 프로세스를 종료하고 시스템은 종료가 되지 않나요?<br><br>A1) 네 시스템은 종료되지 않습니다. 다만 out of memory 발생시에 vmcore를 생성하도록 설정하게 되면 시스템이 재시작 되도록 할 수 있습니다.<br>일반적으로 out of memory가 되면 시스템은 메모리 사용량이나 CPU time 등을 기반으로 프로세스들을 kill합니다.<br><br><br>Q2) out of memory가 발생할경우 시스템을 리부팅하면서 자체적으로 kdump를 발생시키는 방법이 있나요?<br><br>A2) 시스템의 커널 파라메터 값중에 vm.panic_on_oom 파라메터 값을 1로 변경하면 oom-killer 가 발생시에 kdump를 작동하도록 할 수 있습니다.<br><br><br>Q3) out of memory가 발생할 경우 시스템 덤프가 아닌 어플리케이션 덤프를 발생시킬 수있는 방법이 있나요?<br><br>A3) 해당 질문은 내부적으로 확인 중입니다. 추후 다시 답변 드리도록 하겠습니다.<br><br><br>Q4) ulimit 에서 core file size를 unlimit 로 설정하고 core_pattern의 위치를 설정하지 않았을 경우 어플리케이션 덤프가 발생하지 않는건가요?<br><br>A4) core_pattern 설정이 되어 있지 않더라도 core는 발생합니다. 기본적으로 생성되는 경로는 문제가된 프로그램이 실행되었던 경로입니다.<br>혹시 생성이 되지 않으셨던 경우가 있으시다면 아래의 KCS를 참조하셔서 설정 부분을 확인 해보시기 바랍니다.<br><br>&quot;How to enable core file dumps when an application crashes or segmentation faults&quot;<br>https://access.redhat.com/solutions/4896<br><br>&quot;How to collect core dump file of a crashing program that is shipped in Red Hat Enterprise Linux 6/7?&quot;<br>https://access.redhat.com/solutions/56021<br><br>감사합니다.<br><br><publishedDate>2018-01-05T01:51:26Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>리눅스 기본 구성상 해당 프로세스를 종료하고 시스템은 종료가 되지 않나요?<br><br>Q2) out of memory가 발생할경우<br>시스템을 리부팅하면서 자체적으로 kdump를 발생시키는 방법이 있나요?<br><br>Q3) out of memory가 발생할 경우<br>시스템 덤프가 아닌 어플리케이션 덤프를 발생시킬 수있는 방법이 있나요?<br><br>Q4) ulimit 에서 core file size를 unlimit 로 설정하고<br>core_pattern의 위치를 설정하지 않았을 경우 어플리케이션 덤프가 발생하지 않는건가요?</issue><cep>false</cep></case>