======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2018-06-04T06:10:09Z</b><br><b>마지막 답변자 : Workflow Integration</b><br><b>마지막 수정 일자 : 2018-06-07T02:37:31Z</b><br><b>id : 500A000000auA0qIAE</b><br>======================<br><br><b><font size=15>
제목  : OOM killer 동작에 따른 분석요청
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하십니까 타임게이트 오선우입니다<br><br>고객사에 첨부드린 캡쳐화면처럼 oom-kill process 가 동작하였습니다<br><br>1. 로그 내용을 보면 해당 시점 6/3(일) 21시경 실제로 swap 메모리 부족등의 메시지를 볼수 있는데요<br>sar데이터에서는 확인이 어렵습니다<br>실제로 oom-killer가 동작한 상황인가요?<br><br>2. 해당 시점에 특별히 이슈될만한 상황이였는지 분석 부탁드립니다<br><br>sosreport 첨부드립니다<br><br>감사합니다<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPDCCWL0A</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000MiDn8IAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-06-07T02:37:30Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-06-07T02:37:30Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>먼저, 본 기술 문의가 해결되어 다행입니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 재개하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-06-07T02:37:30Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MiDjaIAF"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-06-07T02:31:19Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-06-07T02:31:18Z</b><br><br>안녕하십니까 타임게이트 오선우입니다<br><br>분석과 답변 감사합니다<br><br>해당 건 관련하여 담당자에게 내용 전달하였습니다<br><br>현재까지는 특별한 사항 없습니다<br><br>우선 케이스 닫고 필요한 부분 있으면 다시 오픈 하도록 하겠습니다<br><br>감사합니다<br><br><publishedDate>2018-06-07T02:31:18Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MhulIIAR"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-06-06T03:26:37Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-06-06T03:26:37Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-06-06T03:26:37Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MhJorIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-06-04T07:01:31Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-06-04T07:01:31Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>oom 이 6월 3일 20:31 ~21:07 까지 발생로그가 저장되어있으며, 21:42 시스템이 재시작되었습니다.<br>sa03 데이터에서도 시스템 자원 사용량이 높은 것으로 확인됩니다.<br>EagleyeMain 프로세스가 다수 동작중이며, 이에 따라 메모리 부족 현상이 발생된 것으로 추정하고 있습니다.<br><br>Jun  3 20:31:19 SLPDCCWL0A kernel: EagleyeMain invoked oom-killer: gfp_mask=0x201da, order=0, oom_adj=0, oom_score_adj=0<br>...<br>Jun  3 21:07:04 SLPDCCWL0A kernel: Out of memory: Kill process 1866 (ManagementAgent) score 1 or sacrifice child<br>Jun  3 21:07:04 SLPDCCWL0A kernel: Killed process 1866, UID 0, (ManagementAgent) total-vm:203976kB, anon-rss:324kB, file-rss:296kB<br>Jun  3 21:42:03 SLPDCCWL0A kernel: imklog 5.8.10, log source = /proc/kmsg started.<br><br>Linux 2.6.32-504.23.4.el6.x86_64 (SLPDCCWL0A)   06/03/2018      _x86_64_        (6 CPU)<br><br>오전 9시 15분 경 부터 sys 수치와 iowait 수치가 늘어나고 있습니다.<br><br>12:00:01 AM     CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest     %idle<br> 09:15:01 AM     all      5.47      0.00      1.78      9.19      0.00      0.00      0.01      0.00     83.55<br>09:15:01 AM       0      7.17      0.00      2.48     19.95      0.00      0.00      0.02      0.00     70.38<br>09:15:01 AM       1      6.64      0.00      2.52     19.14      0.00      0.00      0.00      0.00     71.70<br>09:15:01 AM       2      5.43      0.00      1.89     11.17      0.00      0.00      0.02      0.00     81.50<br>09:15:01 AM       3      4.82      0.00      1.40      3.14      0.00      0.00      0.00      0.00     90.63<br>09:15:01 AM       4      4.69      0.00      1.14      1.09      0.00      0.00      0.02      0.00     93.07<br>09:15:01 AM       5      4.08      0.00      1.25      0.69      0.00      0.00      0.00      0.00     93.98<br>09:16:01 AM     all     11.94      0.00      2.19     12.09      0.00      0.00      0.06      0.00     73.72<br>09:16:01 AM       0     13.24      0.00      3.29     17.55      0.00      0.00      0.02      0.00     65.90<br>09:16:01 AM       1     13.58      0.00      3.09     28.38      0.00      0.00      0.10      0.00     54.84<br>09:16:01 AM       2     12.87      0.00      2.04     12.17      0.00      0.00      0.10      0.00     72.82<br>09:16:01 AM       3     11.70      0.00      1.71      8.42      0.00      0.00      0.07      0.00     78.11<br>09:16:01 AM       4     11.42      0.00      1.37      3.86      0.00      0.00      0.08      0.00     83.26<br>======================<br>09:14:01 PM     all     15.86      0.00     15.68     26.27      0.00      0.00      0.83      0.00     41.35<br>09:14:01 PM       0     17.77      0.00     17.69     32.30      0.00      0.00      0.98      0.00     31.27<br>09:14:01 PM       1     17.21      0.00     16.64     32.13      0.00      0.00      0.89      0.00     33.12<br>09:14:01 PM       2     16.18      0.00     15.67     29.27      0.00      0.00      0.90      0.00     37.97<br>09:14:01 PM       3     15.37      0.00     15.14     22.44      0.00      0.00      0.75      0.00     46.30<br>09:14:01 PM       4     14.82      0.00     14.24     21.33      0.00      0.00      0.75      0.00     48.85<br>09:14:01 PM       5     13.83      0.00     14.68     20.18      0.00      0.00      0.72      0.00     50.59<br>09:15:01 PM     all     11.16      0.00      7.56     24.98      0.00      0.00      0.40      0.00     55.91<br>09:15:01 PM       0     13.66      0.00      9.46     31.52      0.00      0.00      0.52      0.00     44.84<br>09:15:01 PM       1     12.74      0.00      8.84     24.25      0.00      0.00      0.45      0.00     53.71<br>09:15:01 PM       2     11.52      0.00      7.20     19.44      0.00      0.00      0.44      0.00     61.41<br>09:15:01 PM       3     10.38      0.00      6.84     18.84      0.00      0.00      0.29      0.00     63.65<br>09:15:01 PM       4      9.68      0.00      6.51     28.80      0.00      0.00      0.32      0.00     54.68<br>09:15:01 PM       5      8.95      0.00      6.54     27.09      0.00      0.00      0.32      0.00     57.10<br>09:16:01 PM     all     17.44      0.00     17.79     27.81      0.00      0.00      0.88      0.00     36.08<br>09:16:01 PM       0     19.06      0.00     19.16     33.81      0.00      0.00      0.90      0.00     27.07<br>09:16:01 PM       1     18.64      0.00     19.64     35.19      0.00      0.00      1.00      0.00     25.53<br>09:16:01 PM       2     18.04      0.00     17.32     26.51      0.00      0.00      0.98      0.00     37.14<br>09:16:01 PM       3     16.46      0.00     17.74     26.75      0.00      0.00      0.85      0.00     38.21<br>09:16:01 PM       4     16.79      0.00     16.68     23.35      0.00      0.00      0.82      0.00     42.36<br>09:16:01 PM       5     15.64      0.00     16.24     21.24      0.00      0.00      0.73      0.00     46.14<br><br>RESTART<br><br>12:00:01 AM  pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff<br>09:10:01 PM  43419.18  15395.72  10878.95   1272.00  12669.76  13757.90   2089.47  11008.12     69.46<br>09:11:02 PM 110261.02  40625.83  18957.53   2151.27  30360.26  20742.01  19341.81  27822.67     69.41<br>09:12:02 PM 419692.31 100670.22  42261.34   6580.26 109603.89  39704.33 276107.92 104904.85     33.22<br>09:13:01 PM 188096.34  71162.12  29470.27   3434.97  50155.52  32218.26  35634.87  47002.84     69.27<br>09:14:01 PM 157745.88  52771.66  23736.49   2495.25  42230.78  26672.77  30593.34  39318.65     68.66<br>09:15:01 PM  72776.11  28082.32  14276.81   1241.56  20357.21  18113.95   7005.75  18440.92     73.41<br>09:16:01 PM 122060.63  53441.86  22957.72   2521.42  33265.65  22711.06  22152.12  30632.31     68.28<br><br>12:00:01 AM       tps      rtps      wtps   bread/s   bwrtn/s<br>09:12:02 PM  41816.61  16857.37  24959.24 1191039.00 202061.43<br>09:13:01 PM  24629.26   7077.69  17551.57 517540.24 142573.95<br>09:14:01 PM  18705.40   5587.66  13117.74 458652.04 105717.94<br>09:15:01 PM   9359.11   2402.37   6956.74 199677.07  56332.90<br>09:16:01 PM  18199.88   4993.84  13206.04 320505.81 107103.76<br><br>12:00:01 AM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit<br>09:11:02 PM    152572  24455224     99.38      1168     27244 105397448    254.65<br>09:12:02 PM    132500  24475296     99.46      1728     24504 105401932    254.66<br>09:13:01 PM    123436  24484360     99.50      2588     51416 105408548    254.67<br>09:14:01 PM    122608  24485188     99.50      3456     43568 105400748    254.65<br>09:15:01 PM    143416  24464380     99.42      4408     62520 105532084    254.97<br>09:16:01 PM    120156  24487640     99.51      1532     25528 105532992    254.97<br><br>12:00:01 AM kbswpfree kbswpused  %swpused  kbswpcad   %swpcad<br>09:10:01 PM         0  16781840    100.00   1036404      6.18<br>09:11:02 PM      5812  16776028     99.97   1003000      5.98<br>09:12:02 PM       240  16781600    100.00   1020880      6.08<br>09:13:01 PM        52  16781788    100.00    999088      5.95<br>09:14:01 PM      6000  16775840     99.96   1042628      6.22<br>09:15:01 PM      1220  16780620     99.99    970488      5.78<br>09:16:01 PM        40  16781800    100.00    985104      5.87<br><br>12:00:01 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15<br>09:11:02 PM        19     16404     29.41     23.45     18.77<br>09:12:02 PM         5     16370     33.26     26.15     20.02<br>09:13:01 PM         0     16317     24.13     24.73     19.91<br>09:14:01 PM         3     16317     19.71     23.60     19.83<br>09:15:01 PM         1     16328      9.28     19.88     18.79<br>09:16:01 PM         6     16408     15.06     19.38     18.66<br><br>&gt; 1. 로그 내용을 보면 해당 시점 6/3(일) 21시경 실제로 swap 메모리 부족등의 메시지를 볼수 있는데요<br>&gt; sar데이터에서는 확인이 어렵습니다<br>&gt; 실제로 oom-killer가 동작한 상황인가요?<br><br>네 로그에서도 oom 로그가 보이며, sa03 에서도 자원 사용량이 높게 나타납니다.<br><br>&gt; 2. 해당 시점에 특별히 이슈될만한 상황이였는지 분석 부탁드립니다<br>EagleeyeMain 프로세스가 다수 동작중인 것이 확인되며, 이 현상이 정상인지 개발 업체에 문의해볼 필요가 있습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-06-04T07:01:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>