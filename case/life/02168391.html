======================<br><b>생성계정 : JIMIN KIM</b><br><b>생성날짜 : 2018-08-24T02:12:54Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2018-08-27T02:22:54Z</b><br><b>id : 500A000000bS40mIAC</b><br>======================<br><br><b><font size=15>
제목  : Kernel upgrade 관련 문의 (RHEL 7.2 → RHEL 7.4)
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>Kernel upgrade 관련해서 문의를 드리려고 합니다.<br><br>대상 서버는 SLTTSSAL01 / SLTTSSDL01 이고 개발계 서버들인데<br>이번에 검증계 서버 SLVTSSAL01 / SLVTSSDL01 도입되면서 커널을 올리게 되었습니다.<br><br>현재 SLTTSSAL01과 SLTTSSDL01 부분은 <br>root@SLTTSSAL01 / # uname -a<br>Linux SLTTSSAL01 3.10.0-327.44.2.el7.x86_64 #1 SMP Thu Nov 24 05:49:35 EST 2016 x86_64 x86_64 x86_64 GNU/Linux<br>root@SLTTSSAL01 / # cat /proc/cmdline<br>BOOT_IMAGE=/vmlinuz-3.10.0-327.44.2.el7.x86_64 root=UUID=9ba318cd-e489-4f45-bb0e-ebc97afec3bd ro crashkernel=512M rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=noop<br>root@SLTTSSAL01 / # rpm -qa | wc -l<br>1644<br><br>root@SLTTSSDL01 /root # uname -a<br>Linux SLTTSSDL01 3.10.0-327.44.2.el7.x86_64 #1 SMP Thu Nov 24 05:49:35 EST 2016 x86_64 x86_64 x86_64 GNU/Linux<br>root@SLTTSSDL01 /root # cat /proc/cmdline<br>BOOT_IMAGE=/vmlinuz-3.10.0-327.44.2.el7.x86_64 root=UUID=9ba318cd-e489-4f45-bb0e-ebc97afec3bd ro crashkernel=512M rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=noop<br>root@SLTTSSDL01 /root # rpm -qa | wc -l<br>1645<br><br>--------------------------------------------------------------------------------------------------------------------------------<br><br>검증계 서버 SLVTSSAL01 / SLVTSSDL01은 아래와 같습니다.<br>root@SLVTSSAL01 /root # uname -a<br>Linux SLVTSSAL01 3.10.0-693.21.1.el7.x86_64 #1 SMP Fri Feb 23 18:54:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux<br>root@SLVTSSAL01 /root # cat /proc/cmdline<br>BOOT_IMAGE=/vmlinuz-3.10.0-693.21.1.el7.x86_64 root=UUID=a7220b49-8112-44d8-9aac-e0c6f248cd20 ro crashkernel=512M rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=noop rdblacklist=vmw_vsock_vmci_transport,vsock,vmw_vmci spectre_v2=off nopti ipv6.disable=1<br>root@SLVTSSAL01 /root # rpm -qa | wc -l<br>1616<br><br>root@SLVTSSDL01 /root # uname -a<br>Linux SLVTSSDL01 3.10.0-693.21.1.el7.x86_64 #1 SMP Fri Feb 23 18:54:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux<br>root@SLVTSSDL01 /root # cat /proc/cmdline<br>BOOT_IMAGE=/vmlinuz-3.10.0-693.21.1.el7.x86_64 root=UUID=a7220b49-8112-44d8-9aac-e0c6f248cd20 ro crashkernel=512M rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=noop rdblacklist=vmw_vsock_vmci_transport,vsock,vmw_vmci spectre_v2=off nopti ipv6.disable=1<br>root@SLVTSSDL01 /root # rpm -qa | wc -l<br>1615<br><br>SLTTSSAL01 → SLVTSSAL01과 동일하게 업그레이드 (RHEL 7.2 → RHEL 7.4)<br>SLTTSSDL01 → SLVTSSDL01과 동일하게 업그레이드 (RHEL 7.2 → RHEL 7.4)<br><br>위와 같이 구성할 예정인데 kernel upgrade 절차 및 필요 파일등에 대해서 문의드리려고 합니다.<br>sosreport는 dropbox.redhat.com에 upload 해놓겠습니다.<br><br><br>확인 부탁드리겠습니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.4</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLTTSSAL01 / SLTTSSDL01 / SLVTSSAL01 / SLVTSSDL01</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>rpm</name></tag></tags><br><comment id="a0aA000000NUw6BIAT"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-08-27T02:22:52Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-08-27T02:22:51Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 기술 문의의 상태를 처리완료 상태로 변경하고자 합니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 *재개*하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-08-27T02:22:51Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NUeRYIA1"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-08-24T07:19:47Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-08-24T07:19:47Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>아래 iso 를 이용하여 로컬 레포지터리를 구성하시면 한번에 7.4 버전으로 업그레이드가 가능합니다.<br><br>How to create local repository distributed through apache of Red Hat Enterprise Linux 5/6/7 using DVD iso for update or installation? <br>https://access.redhat.com/solutions/7227<br><br>레포지터리 관련 문의는 본 기술 문의와 직접적인 관련이 없으니<br>레포지터리와 관련된 도움이 필요하신 내용이 있다면 신규로 기술 문의를 생성해주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-08-24T07:19:47Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NUeMiIAL"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2018-08-24T07:13:04Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2018-08-24T07:13:03Z</b><br><br>안녕하세요<br><br>빠른 답변 감사드립니다.<br><br>구축 시 <br>RHEL 7.2와 7.4의 차이가 있는데 혹시 <br>7.4 ISO 이미지 yum 구성을 통해서  한번ㅇ<br>모두 update하는 방법이 있는지 문의드리려고 합니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-24T07:13:03Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NUeIqIAL"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-08-24T07:06:05Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-08-24T07:06:05Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>변경이 필요한 패키지들을 하나씩 다운로드 받아서 설치해보고 의존성 문제가 발생하면<br>화면에 출력된 의존성 관련 패키지를 검증계에서 버전을 확인한 이후에 해당 패키지를 다운로드하여<br>설치를 재차 시도해야합니다.<br><br>다소 번거로운 작업이며 시간이 소요될 수 있는 점은 인지하시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-08-24T07:06:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NUeH4IAL"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2018-08-24T07:03:10Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2018-08-24T07:03:10Z</b><br><br>안녕하세요<br><br>빠른 답변 감사드립니다.<br><br>한가지 예를 들면<br>아래와 같이 개발계(SLTTSSAL01)과 검증계(SLVTSSAL01) 서버에서<br>389-ds-base- rpm의 경우도 버전이 다른 상황인데요. <br><br>이 부분들도 혹시 모두 검증계와 동일하게 맞추려면 어떻게 해야할지 문의드립니다.<br><br>root@SLTTSSAL01 / # rpm -qa | sort<br>389-ds-base-1.3.4.0-19.el7.x86_64<br>=== 생략 ===<br><br>root@SLVTSSAL01 /root # rpm -qa | sort<br>389-ds-base-1.3.6.1-16.el7.x86_64<br>=== 생략 ===<br><br>감사합니다.<br><br><publishedDate>2018-08-24T07:03:10Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NUdPqIAL"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-08-24T05:21:44Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-08-24T05:21:44Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>서버들이 subscription_manager 를 통해서 저희 레드햇 네트워크에 가입되어있다면,<br>온라인을 통해서 의존성 관련 패키지들이 설치됩니다.<br><br>허나, 내부망일 것으로 예상하여, 매뉴얼로 업데이트하는 방법을 안내해드립니다.<br><br>커널 업데이트는 여러 패키지 의존성이 필요한 부분입니다. 저희 레드햇은 일반적으로 서버별 상세한 패키지 업데이트 방법까지는 안내해드리지 않고 있습니다.<br><br>아래 명령어를 통해서 관련 패키지들의 버전을 확인하였습니다.<br><br>[1] 아래는 업데이트를 진행해야될 시스템의 패키지 리스트입니다.<br><br>[sosreport-SLTTSSDL01-20180824084232]$ egrep &quot;kernel|kexec|perf|dracut|linux-firmware|xfsprogs&quot; installed-rpms  | awk '{print $1}'<br><br>abrt-addon-kerneloops-2.1.11-34.el7.x86_64<br>dracut-033-502.el7_4.1.x86_64<br>dracut-config-rescue-033-502.el7_4.1.x86_64<br>dracut-network-033-502.el7_4.1.x86_64<br>gperftools-libs-2.4-7.el7.x86_64<br>kernel-3.10.0-327.36.3.el7.x86_64<br>kernel-3.10.0-327.44.2.el7.x86_64<br>kernel-3.10.0-327.el7.x86_64<br>kernel-devel-3.10.0-229.el7.x86_64<br>kernel-devel-3.10.0-327.44.2.el7.x86_64<br>kernel-devel-3.10.0-327.el7.x86_64<br>kernel-headers-3.10.0-327.44.2.el7.x86_64<br>kernel-tools-3.10.0-327.44.2.el7.x86_64<br>kernel-tools-libs-3.10.0-327.44.2.el7.x86_64<br>kexec-tools-2.0.7-38.el7.x86_64<br>linux-firmware-20170606-58.gitc990aae.el7_4.noarch<br>perf-3.10.0-327.el7.x86_64<br>python-perf-3.10.0-327.el7.x86_64<br>xfsprogs-3.2.2-2.el7.x86_64<br><br>[2] 아래는 이미 업데이트된 시스템의 패키지 리스트입니다.<br><br>[sosreport-SLVTSSAL01-20180824081420]$ egrep &quot;kernel|kexec|perf|dracut|linux-firmware|xfsprogs&quot; installed-rpms  | awk '{print $1}'<br><br>abrt-addon-kerneloops-2.1.11-48.el7.x86_64<br>dracut-033-502.el7_4.1.x86_64<br>dracut-config-rescue-033-502.el7_4.1.x86_64<br>dracut-network-033-502.el7_4.1.x86_64<br>gperftools-libs-2.4-8.el7.x86_64<br>kernel-3.10.0-693.21.1.el7.x86_64<br>kernel-3.10.0-693.el7.x86_64<br>kernel-devel-3.10.0-693.21.1.el7.x86_64<br>kernel-devel-3.10.0-693.el7.x86_64<br>kernel-headers-3.10.0-693.21.1.el7.x86_64<br>kernel-tools-3.10.0-693.21.1.el7.x86_64<br>kernel-tools-libs-3.10.0-693.21.1.el7.x86_64<br>kexec-tools-2.0.14-17.el7.x86_64<br>linux-firmware-20170606-58.gitc990aae.el7_4.noarch<br>perf-3.10.0-693.21.1.el7.x86_64<br>python-perf-3.10.0-693.21.1.el7.x86_64<br>xfsprogs-4.5.0-12.el7.x86_64<br><br><br>[3] 이미 rpm 은 다운받으셨을 것으로 생각됩니다. 만일 다운로드를 받지 않으셨다면, 아래 링크에서 다운로드 하시기 바랍니다.<br>위에서 확인하신 것처럼 관련 패키지들도 다운로드 합니다.<br><br>https://rhn.redhat.com/errata/RHSA-2018-0395.html<br><br>[4] 아래 처럼 패키지를 명시하여 설치를 진행해봅니다.<br><br># yum localinstall kernel-3.10.0-693.21.1.el7.x86_64.rpm <br><br>[5] 의존성 에러가 발생하였을 것입니다. 관련 패키지들을 이미 아래 레드햇 사이트에서 찾아서 다운로드를 합니다.<br>이때, [2] 에서 확인한 버전을 찾아서 다운로드 합니다.<br><br>https://access.redhat.com/downloads/content/69/ver=/rhel---7/7.6%20Beta/x86_64/packages<br><br>[6] 4번의 연장선이며, 아래 파라메터 형식으로 나열하여 다시 설치를 해봅니다.<br><br># yum localinstall kernel-3.10.0-693.21.1.el7.x86_64.rpm linux-firmware-20170606-58.gitc990aae.el7_4.noarch dracut-033-502.el7_4.1.x86_64 [의존성이 발생한 패키지들의 리스트]<br><br>의존성 에러가 더 이상 발생하지 않는다면, 아래와 같이 보여집니다.<br><br>Dependencies Resolved<br><br>========================================================================================================<br> Package                  Arch       Version                               Repository              Size<br>========================================================================================================<br>Installing:<br> kernel                   x86_64     3.10.0-693.21.1.el7                   rhel-7-server-rpms      43 M<br>...<br>..<br>..<br>..<br>Transaction Summary<br>========================================================================================================<br>Is this ok [y/d/N]: <br><br>y를 눌러 진행하시면 모든 패키지들이 업데이트됩니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-08-24T05:21:44Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NUcFHIA1"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2018-08-24T02:16:19Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2018-08-24T02:16:19Z</b><br><br>안녕하세요<br><br>sosreport는 02168391-파일명으로 <br>4개의 파일을 업로드하였습니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-24T02:16:19Z</publishedDate><createdByType>Customer</createdByType><br>======================<br></comments><br>