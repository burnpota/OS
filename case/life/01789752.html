======================<br><b>생성계정 : 타임게이트 (주)</b><br><b>생성날짜 : 2017-02-10T02:57:04Z</b><br><b>마지막 답변자 : 타임게이트 (주)</b><br><b>마지막 수정 일자 : 2017-02-13T02:26:41Z</b><br><b>id : 500A000000WT9JQIA1</b><br>======================<br><br><b><font size=15>
제목  : RHEL7 HTTPD SERVER의 defunct가 발생하며 프로세스가 정지하는 현상
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>RHEL7 HTTPD SERVER의 defunct가 발생하며 프로세스가 정지하는 현상<br>Redhat SR(01604697) 진행을 참고하여 이상 번들 버전으로 업데이트 후에도  &quot;apr_proc_mutex_lock failed...&quot;  발생.<br>이상 버전의 번들이 defunct bug에 대한 릴리즈 포함이 안되어있는건지?<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>- OS 버전 : Redhat 7.2<br>- apache 버전 : <br>[ftsadm@SLPCISWL0A:/LOG/fts/apache] rpm -qa|grep httpd<br>httpd-2.4.6-40.el7_2.4.x86_64<br>httpd-tools-2.4.6-40.el7_2.4.x86_64<br>- systemd 버전 :<br>[ftsadm@SLPCISWL0A:/LOG/fts/apache] rpm -qa|grep systemd<br>systemd-libs-219-19.el7.x86_64<br>systemd-sysv-219-19.el7.x86_64<br>systemd-python-219-19.el7.x86_64<br>systemd-219-19.el7.x86_64<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>- 오류 내용<br>[Fri Feb 10 08:16:28.359755 2017] [mpm_worker:emerg] [pid 26050:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:30.362409 2017] [mpm_worker:emerg] [pid 26317:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:32.365114 2017] [mpm_worker:emerg] [pid 26585:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:34.367879 2017] [mpm_worker:emerg] [pid 26845:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:36.370464 2017] [mpm_worker:emerg] [pid 27104:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:38.373067 2017] [mpm_worker:emerg] [pid 27363:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:40.375977 2017] [mpm_worker:emerg] [pid 27622:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:42.378617 2017] [mpm_worker:emerg] [pid 27881:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:44.381196 2017] [mpm_worker:emerg] [pid 28140:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:46.383806 2017] [mpm_worker:emerg] [pid 28399:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:48.386670 2017] [mpm_worker:emerg] [pid 28658:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:50.389199 2017] [mpm_worker:emerg] [pid 28917:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:52.391955 2017] [mpm_worker:emerg] [pid 29189:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:54.394732 2017] [mpm_worker:emerg] [pid 29448:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:56.397285 2017] [mpm_worker:emerg] [pid 29715:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:58.400461 2017] [mpm_worker:emerg] [pid 29974:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br><br>반복적으로 발생. 재기동하여 일딴 해소됨.<br><br>What information can you provide around timeframes and the business impact?<br><br>.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Defect / Bug</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 2 (High)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>rpm</name></tag></tags><br><comment id="a0aA000000IoGgXIAV"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-02-13T02:26:27Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-02-13T02:26:27Z</b><br><br>감사합니다. <br>확인결과 OS 설치 시 담당 엔지니어가 패치를 미 적용한 것으로 확인됩니다. <br><br>SR종료하겠습니다. <br><br>감사합니다.<br><br><publishedDate>2017-02-13T02:26:27Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000InuVwIAJ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-02-10T06:15:36Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-02-10T06:15:36Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>케이스 01604697 내용을 확인 해 보니 본 이슈는 systemd-219-19.el7_2.4 <br>되었는데 현재 사용 하신 버전은 systemd-219-19.el7.x86_64 라고 하셨습니다. <br><br>아래와 같이 패키지를 업데이트 하시고 문제가 해결 되는지 확인 부탁드립니다. <br><br>1) 먼저 케이스에 업로드 해놓은 아래의 패키지들을 다운로드 합니다.<br><br>libgudev1-219-19.el7_2.4.x86_64.rpm<br>systemd-sysv-219-19.el7_2.4.x86_64.rpm<br>systemd-libs-219-19.el7_2.4.x86_64.rpm<br>systemd-219-19.el7_2.4.x86_64.rpm<br><br><br>2) 아래의 rpm 명령어로 이 패키지들을 모두 업데이트 합니다.<br><br>[root@localhost ~]$ rpm -Uvh systemd-* libgudev1-219-19.el7_2.4.x86_64.rpm <br>warning: systemd-219-19.el7_2.4.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID fd431d51: NOKEY<br>Preparing...                          ################################# [100%]<br>Updating / installing...<br>   1:systemd-libs-219-19.el7_2.4      ################################# [ 13%]<br>   2:systemd-219-19.el7_2.4           ################################# [ 25%]<br>   3:systemd-sysv-219-19.el7_2.4      ################################# [ 38%]<br>   4:libgudev1-219-19.el7_2.4         ################################# [ 50%]<br>Cleaning up / removing...<br>   5:systemd-sysv-219-19.el7          ################################# [ 63%]<br>   6:systemd-219-19.el7               ################################# [ 75%]<br>   7:libgudev1-219-19.el7             ################################# [ 88%]<br>   8:systemd-libs-219-19.el7          ################################# [100%]<br><br><br>3) /etc/systemd/logind.conf 를 편집기로 열어서 기존의 설정내용을 아래와 같이 주석처리하거나 삭제합니다.<br>$ vi /etc/systemd/logind.conf<br>~~ 생략<br># RemoveIPC=no<br><br>4) 위의 변경사항이 반영이 되도록 systemd-logind 서비스를 재시작합니다.<br>$ systemctl restart systemd-logind.service<br><br>5) Apache 웹서버를 재시작 합니다.<br>$ systemctl restart httpd.service<br><br><br>참고 자료:<br>Applications using IPC (semaphores, shared memory, message queues) have problems after update to RHEL 7.2<br>- https://access.redhat.com/solutions/2062273<br>======================<br>감사합니다. <br><br>Red Hat GSS<br>정미연 드림<br><br><publishedDate>2017-02-10T06:15:36Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000InuMaIAJ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-02-10T05:47:45Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-02-10T05:47:45Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>저는 정미연이라고 하며 앞으로 본 케이스를 담당하게 되었습니다. <br>먼저 문의 주신 내용에 대해 좀더 살펴 보고 업데이트 사항이 있으면 <br>다시 코멘트 남겨 드리도록 하겠습니다. <br><br><br>감사합니다. <br><br>Red Hat GSS<br>정미연 드림<br><br><publishedDate>2017-02-10T05:47:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>Redhat SR(01604697) 진행을 참고하여 이상 번들 버전으로 업데이트 후에도  &quot;apr_proc_mutex_lock failed...&quot;  발생.<br>이상 버전의 번들이 defunct bug에 대한 릴리즈 포함이 안되어있는건지?</issue><environment>- OS 버전 : Redhat 7.2<br>- apache 버전 : <br>[ftsadm@SLPCISWL0A:/LOG/fts/apache] rpm -qa|grep httpd<br>httpd-2.4.6-40.el7_2.4.x86_64<br>httpd-tools-2.4.6-40.el7_2.4.x86_64<br>- systemd 버전 :<br>[ftsadm@SLPCISWL0A:/LOG/fts/apache] rpm -qa|grep systemd<br>systemd-libs-219-19.el7.x86_64<br>systemd-sysv-219-19.el7.x86_64<br>systemd-python-219-19.el7.x86_64<br>systemd-219-19.el7.x86_64</environment><periodicityOfIssue>- 오류 내용<br>[Fri Feb 10 08:16:28.359755 2017] [mpm_worker:emerg] [pid 26050:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:30.362409 2017] [mpm_worker:emerg] [pid 26317:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:32.365114 2017] [mpm_worker:emerg] [pid 26585:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:34.367879 2017] [mpm_worker:emerg] [pid 26845:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:36.370464 2017] [mpm_worker:emerg] [pid 27104:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:38.373067 2017] [mpm_worker:emerg] [pid 27363:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:40.375977 2017] [mpm_worker:emerg] [pid 27622:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:42.378617 2017] [mpm_worker:emerg] [pid 27881:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:44.381196 2017] [mpm_worker:emerg] [pid 28140:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:46.383806 2017] [mpm_worker:emerg] [pid 28399:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:48.386670 2017] [mpm_worker:emerg] [pid 28658:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:50.389199 2017] [mpm_worker:emerg] [pid 28917:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:52.391955 2017] [mpm_worker:emerg] [pid 29189:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:54.394732 2017] [mpm_worker:emerg] [pid 29448:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:56.397285 2017] [mpm_worker:emerg] [pid 29715:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br>[Fri Feb 10 08:16:58.400461 2017] [mpm_worker:emerg] [pid 29974:tid 140277439289088] (22)Invalid argument: AH00272: apr_proc_mutex_lock failed before this child process served any requests.<br><br>반복적으로 발생. 재기동하여 일딴 해소됨.</periodicityOfIssue><timeFramesAndUrgency>.</timeFramesAndUrgency><cep>false</cep></case>