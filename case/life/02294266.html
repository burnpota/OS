======================<br><b>생성계정 : JIMIN KIM</b><br><b>생성날짜 : 2019-01-17T12:46:57Z</b><br><b>마지막 답변자 : Mahyun Kim</b><br><b>마지막 수정 일자 : 2019-01-23T04:38:45Z</b><br><b>id : 5002K00000dAM1lQAG</b><br>======================<br><br><b><font size=15>
제목  : /etc/ntp.conf에 tinker panic 0 반영 후 확인 방법 문
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 가상화 서버의 /etc/ntp.conf 파일에 tinker panic 0 값을 적용하였는데요.<br><br>ntpd.service restart 후 혹시 tinker panic 값이 반영된 내역을 확인할 수 있는 방법이 있는지 문의드리려고 합니다.<br><br><br> - /etc/ntp.conf<br>root@SLPPSHAL01 / # cat /etc/ntp.conf<br># For more information about this file, see the man pages<br># ntp.conf(5), ntp_acc(5), ntp_auth(5), ntp_clock(5), ntp_misc(5), ntp_mon(5).<br><br># PISA<br>tinker panic 0<br><br>driftfile /var/lib/ntp/drift<br><br># Permit time synchronization with our time source, but do not<br># permit the source to query or modify the service on this system.<br>restrict default nomodify notrap nopeer noquery<br><br># Permit all access over the loopback interface.  This could<br># be tightened as well, but to do so would effect some of<br># the administrative functions.<br>restrict 127.0.0.1<br>#restrict ::1<br><br># Hosts on local network are less restricted.<br>#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap<br><br># Use public servers from the pool.ntp.org project.<br># Please consider joining the pool (http://www.pool.ntp.org/join.html).<br><br>#broadcast 192.168.1.255 autokey        # broadcast server<br>#broadcastclient                        # broadcast client<br>#broadcast 224.0.1.1 autokey            # multicast server<br>#multicastclient 224.0.1.1              # multicast client<br>#manycastserver 239.255.254.254         # manycast server<br>#manycastclient 239.255.254.254 autokey # manycast client<br><br># Enable public key cryptography.<br>#crypto<br><br>includefile /etc/ntp/crypto/pw<br><br># Key file containing the keys and key identifiers used when operating<br># with symmetric key cryptography.<br>keys /etc/ntp/keys<br><br># Specify the key identifiers which are trusted.<br>#trustedkey 4 8 42<br><br># Specify the key identifier to use with the ntpdc utility.<br>#requestkey 8<br><br># Specify the key identifier to use with the ntpq utility.<br>#controlkey 8<br><br># Enable writing of statistics records.<br>#statistics clockstats cryptostats loopstats peerstats<br><br># Disable the monitoring facility to prevent amplification attacks using ntpdc<br># monlist command when default restrict does not include the noquery flag. See<br># CVE-2013-5211 for more details.<br># Note: Monitoring will not be disabled with the limited restriction flag.<br>disable monitor<br><br>server PNTPML01SL true<br>restrict PNTPML01SL mask 255.255.255.255 nomodify notrap noquery<br>server PNTPML02SL<br>restrict PNTPML02SL mask 255.255.255.255 nomodify notrap noquery<br><br> - restart 후 log 및 ntp 확인<br>root@SLPPSHAL01 / # ntpq -p<br>     remote           refid      st t when poll reach   delay   offset  jitter<br>==============================================================================<br>+PNTPML01SL      .GPS.            1 u   33  128  377    0.521    0.002   0.007<br>*PNTPML02SL      .GPS.            1 u   93  128  377    0.496    0.006   0.009<br>root@SLPPSHAL01 / # ps -ef | grep -i ntp<br>ntp      10317     1  0 21:03 ?        00:00:00 /usr/sbin/ntpd -u ntp:ntp -g -4 -x<br>root     11158 11096  0 21:36 pts/1    00:00:00 grep --color=auto -i ntp<br>root@SLPPSHAL01 / # systemctl status ntpd.service<br>* ntpd.service - Network Time Service<br>   Loaded: loaded (/usr/lib/systemd/system/ntpd.service; enabled; vendor preset: disabled)<br>   Active: active (running) since Thu 2019-01-17 21:03:08 KST; 33min ago<br>  Process: 10316 ExecStart=/usr/sbin/ntpd -u ntp:ntp $OPTIONS (code=exited, status=0/SUCCESS)<br> Main PID: 10317 (ntpd)<br>   CGroup: /system.slice/ntpd.service<br>           `-10317 /usr/sbin/ntpd -u ntp:ntp -g -4 -x<br><br>Jan 17 21:03:08 SLPPSHAL01 ntpd[10317]: 0.0.0.0 c01d 0d kern kernel time sync enabled<br>Jan 17 21:03:08 SLPPSHAL01 ntpd[10317]: ntp_io: estimated max descriptors: 1024, initial soc... 16<br>Jan 17 21:03:08 SLPPSHAL01 ntpd[10317]: Listen and drop on 0 v4wildcard 0.0.0.0 UDP 123<br>Jan 17 21:03:08 SLPPSHAL01 ntpd[10317]: Listen normally on 1 lo 127.0.0.1 UDP 123<br>Jan 17 21:03:08 SLPPSHAL01 ntpd[10317]: Listen normally on 2 ens192 100.254.190.31 UDP 123<br>Jan 17 21:03:08 SLPPSHAL01 ntpd[10317]: Listen normally on 3 ens224 172.18.16.31 UDP 123<br>Jan 17 21:03:08 SLPPSHAL01 ntpd[10317]: Listening on routing socket on fd #20 for interface ...tes<br>Jan 17 21:03:08 SLPPSHAL01 ntpd[10317]: 0.0.0.0 c016 06 restart<br>Jan 17 21:03:08 SLPPSHAL01 ntpd[10317]: 0.0.0.0 c012 02 freq_set ntpd 16.471 PPM<br>Jan 17 21:06:24 SLPPSHAL01 ntpd[10317]: 0.0.0.0 c615 05 clock_sync<br>Hint: Some lines were ellipsized, use -l to show in full.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.4</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPPSHAL01</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0a2K00000OtY63QAF"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-01-23T04:35:27Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-01-23T04:35:27Z</b><br><br>안녕하세요. Red Hat 김마현입니다.<br><br>답변이 완료된 것으로 보여 해당 케이스는 closed 하겠습니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-01-23T04:35:27Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OtGCeQAN"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-01-22T04:56:39Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-01-22T04:56:38Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>확인 감사드립니다.<br><br>시스템에 적용 후 그럼 확인은   ntpd 서비스의 error log를 통해서 확인하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2019-01-22T04:56:38Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000OtG5WQAV"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-01-22T04:42:46Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-01-22T04:42:46Z</b><br><br>안녕하세요. Red Hat 김마현 입니다.<br><br>관련하여 내용 업데이트 해드립니다.<br><br>내부적으로 확인해본 결과 ntpd에 &quot;tinker panic 0&quot; 설정이 적용된 것을 직접적으로 확인하는 방법은 별도로 없는것으로 확인되었습니다.<br><br>따라서 해당 옵션을 설정 후 ntpd를 재기동 시 syntax 에러가 있는지에 대해서만 messages 로그를 통해 확인이 가능할 것으로 보입니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-01-22T04:42:46Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OsgJUQAZ"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-01-18T06:39:25Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-01-18T06:39:24Z</b><br><br>안녕하세요. Red Hat 김마현입니다.<br><br>문의 주신 내용에 대해 안내해 드리겠습니다.<br><br>조금 전 유선상으로 말씀 드린데로 tinker panic 0가 적용되었는지 ntp 관련 command를 통해서 확인하는 방법은 현재까지는 확인되지 않고있습니다.<br>다만, &quot;tinker panic 0&quot;를 설정 시 오타 등으로 인해 syntax가 맞지 않으면 아래와 같이 syntax error를 messages 로그에서 확인 가능합니다.<br><br>Jan 18 15:36:27 pcm01 ntpd[2565]: syntax error in /etc/ntp.conf line 3, column 1<br><br>현재 시점으로 해당 config가 적용되고 있는지 확인하는 방법에 대해서는 좀 더 확인해 보고 안내해 드리도록 하겠습니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-01-18T06:39:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OsdhWQAR"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-01-18T00:16:54Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-01-18T00:16:54Z</b><br><br>안녕하세요. Red Hat 김마현입니다.<br><br>관련된 내용 확인 후 업데이트해드리겠습니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-01-18T00:16:54Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>