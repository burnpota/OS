======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2018-09-13T04:11:38Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-10-05T10:04:19Z</b><br><b>id : 500A000000by8t0IAA</b><br>======================<br><br><b><font size=15>
제목  : [로그문의]qdisk 관련로그
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요. 송기호입니다.<br>9일 RHCS에 fence관련 옵션을 추가하였습니다.<br>10일 업무 시작 이후 아래와 같은 메세지가 주기적으로 발생하고 있습니다.<br>간단한 히스토리는<br><br>1달전에 스토리지와 dr스토리지간의  복제를 하는 작업을 실행하였는데<br>당시에는 scsi error이 간간히 발생하였다고 합니다.<br><br>최근에는 이와같은 작업을 실행하지 않아 scsi error이 발생하지 않았는데<br>클러트서 fence관련 작업을 추가후 동일하지 않지만 메세지가 발생하고 있습니다.<br><br>sosreport는 수집되는데로 보내드리겠고 우선 간단한 로그부터 보내드리겠습니다.<br>그리고 묘하게되 scsi key값이 보이지가 안습니다 ㅠ<br>Sep 10 04:02:55 qdiskd qdisk cycle took more than 3 seconds to complete (3.050000)<br>Sep 12 04:02:54 qdiskd qdisk cycle took more than 3 seconds to complete (3.010000)<br>Sep 12 07:20:06 qdiskd qdisk cycle took more than 3 seconds to complete (3.620000)<br>Sep 12 21:25:30 qdiskd qdisk cycle took more than 3 seconds to complete (7.170000)<br>Sep 13 04:07:10 qdiskd qdisk cycle took more than 3 seconds to complete (3.840000)<br>Sep 13 06:24:25 qdiskd qdisk cycle took more than 3 seconds to complete (6.070000)<br>Sep 13 08:59:30 qdiskd qdisk cycle took more than 3 seconds to complete (4.080000)<br>Sep 13 08:59:36 qdiskd qdisk cycle took more than 3 seconds to complete (3.280000)<br>Sep 13 09:01:01 qdiskd qdisk cycle took more than 3 seconds to complete (3.800000)<br>Sep 13 09:02:44 qdiskd qdisk cycle took more than 3 seconds to complete (4.280000)<br>Sep 13 09:03:12 qdiskd qdisk cycle took more than 3 seconds to complete (3.960000)<br>Sep 13 09:03:21 qdiskd qdisk cycle took more than 3 seconds to complete (3.140000)<br>Sep 13 09:03:33 qdiskd qdisk cycle took more than 3 seconds to complete (5.980000)<br>Sep 13 09:04:13 qdiskd qdisk cycle took more than 3 seconds to complete (3.850000)<br>Sep 13 09:10:52 qdiskd qdisk cycle took more than 3 seconds to complete (3.310000)<br>Sep 13 09:12:07 qdiskd qdisk cycle took more than 3 seconds to complete (3.060000)<br>Sep 13 09:16:35 qdiskd qdisk cycle took more than 3 seconds to complete (3.860000)<br>Sep 13 09:17:36 qdiskd qdisk cycle took more than 3 seconds to complete (6.950000)<br>Sep 13 09:17:52 qdiskd qdisk cycle took more than 3 seconds to complete (6.830000)<br>Sep 13 09:19:17 qdiskd qdisk cycle took more than 3 seconds to complete (24.710000)<br><br>root@FLPIDMM01 /var/log/cluster # sg_persist -i -k -d /dev/mapper/ext0<br>  HITACHI   DF600F            0000<br>  Peripheral device type: disk<br>  PR generation=0x0, there are NO registered reservation keys<br>root@FLPIDMM01 /var/log/cluster # sg_persist -i -r -d /dev/mapper/ext0<br>  HITACHI   DF600F            0000<br>  Peripheral device type: disk<br>  PR generation=0x0, there is NO reservation held<br><br><br>root@FLPIDMM01 /root # ps -ef | grep fence_scsi_chec<br>root      2632  5787  0 Sep12 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root      3372  5787  0 Sep12 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root      6060  5787  0 08:58 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root      7664  5787  0 Sep12 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root      8558  5787  0 Sep12 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     16177  5787  0 09:12 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     28862  5787  0 09:02 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     31173  5787  0 09:03 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     31567  5787  0 Sep12 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     32371  5787  0 09:03 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     34103  5787  0 09:04 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     36504  5787  0 09:04 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     37907  5787  0 Sep12 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     40837  5787  0 09:06 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     41193  5787  0 09:18 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     41838  5787  0 09:18 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     45007  5787  0 08:55 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br>root     46191  5787  0 09:08 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt;<br><br><br>Sep 13 09:10:52 FLPIDMM01 qdiskd[27270]: qdisk cycle took more than 3 seconds to complete (3.310000)<br><br>Sep 13 09:19:06 FLPIDMM01 multipathd: sdx: hds prio: SCSI error<br>Sep 13 09:19:06 FLPIDMM01 multipathd: exts7: load table [0 314572800 multipath 0 0 2 2 round-robin 0 1 1 65:112 1 round-robin 0 1 1 67:224 1]<br><br>Sep 12 21:30:03 FLPIDMM01 multipathd: sdh: hds prio: SCSI error<br>Sep 12 21:30:03 FLPIDMM01 multipathd: ext7: load table [0 314572800 multipath 0 0 2 2 round-robin 0 1 1 8:112 1 round-robin 0 1 1 66:224 1]<br><br> <br><br> <br><br>====================================================================================================================<br><br> <br><br>root@FLPIDMM02 /root # vi /var/log/messages<br><br>Sep 12 19:16:18 FLPIDMM02 multipathd: sdba: hds prio: SCSI error<br>Sep 12 19:16:18 FLPIDMM02 multipathd: exts3: load table [0 314572800 multipath 0 0 2 2 round-robin 0 1 1 67:64 1 round-robin 0 1 1 65:160 1]<br>Sep 12 19:16:18 FLPIDMM02 kernel: qla2xxx [0000:03:00.1]-801c:1: Abort command issued nexus=1:0:19 --  1 2002.<br>Sep 12 19:16:51 FLPIDMM02 multipathd: exts3: load table [0 314572800 multipath 0 0 2 1 round-robin 0 1 1 65:160 1 round-robin 0 1 1 67:64 1]<br><br>Sep 13 05:25:53 FLPIDMM02 kernel: __ratelimit: 3 callbacks suppressed<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35251]: segfault at 0 ip 0000003b778811a1 sp 00007fff83a6ad48 error 4 in libc-2.12.so[3b77800000+18a000]<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35253]: segfault at 0 ip 0000003b778811a1 sp 00007fffa86595c8 error 4 in libc-2.12.so[3b77800000+18a000]<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35255]: segfault at 0 ip 0000003b778811a1 sp 00007fffc679a488 error 4 in libc-2.12.so[3b77800000+18a000]<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35257]: segfault at 0 ip 0000003b778811a1 sp 00007fff044f2808 error 4 in libc-2.12.so[3b77800000+18a000]<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35259]: segfault at 0 ip 0000003b778811a1 sp 00007fffefbdfc28 error 4 in libc-2.12.so[3b77800000+18a000]<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35261]: segfault at 0 ip 0000003b778811a1 sp 00007fff621778c8 error 4 in libc-2.12.so[3b77800000+18a000]<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35263]: segfault at 0 ip 0000003b778811a1 sp 00007fffe6d7b6c8 error 4 in libc-2.12.so[3b77800000+18a000]<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35265]: segfault at 0 ip 0000003b778811a1 sp 00007ffff07c0fc8 error 4 in libc-2.12.so[3b77800000+18a000]<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35267]: segfault at 0 ip 0000003b778811a1 sp 00007fff76208e98 error 4 in libc-2.12.so[3b77800000+18a000]<br>Sep 13 05:25:53 FLPIDMM02 kernel: ptymonitor[35269]: segfault at 0 ip 0000003b778811a1 sp 00007fffc8df3508 error 4 in libc-2.12.so[3b77800000+18a000]<br><br><br>Sep 13 09:16:35 FLPIDMM02 qdiskd[25805]: qdisk cycle took more than 3 seconds to complete (3.890000)<br>Sep 13 09:17:36 FLPIDMM02 qdiskd[25805]: qdisk cycle took more than 3 seconds to complete (6.740000)<br>Sep 13 09:17:49 FLPIDMM02 qdiskd[25805]: qdisk cycle took more than 3 seconds to complete (3.670000)<br>Sep 13 09:19:16 FLPIDMM02 qdiskd[25805]: qdisk cycle took more than 3 seconds to complete (24.410000)<br>-----------------------------<br><br>2호기<br><br>Sep 12 07:20:06 qdiskd qdisk cycle took more than 3 seconds to complete (3.110000)<br>Sep 12 21:25:30 qdiskd qdisk cycle took more than 3 seconds to complete (6.490000)<br>Sep 13 04:04:28 qdiskd qdisk cycle took more than 3 seconds to complete (3.200000)<br>Sep 13 06:24:24 qdiskd qdisk cycle took more than 3 seconds to complete (4.540000)<br>Sep 13 08:59:29 qdiskd qdisk cycle took more than 3 seconds to complete (5.460000)<br>Sep 13 08:59:36 qdiskd qdisk cycle took more than 3 seconds to complete (3.470000)<br>Sep 13 09:01:01 qdiskd qdisk cycle took more than 3 seconds to complete (3.780000)<br>Sep 13 09:02:44 qdiskd qdisk cycle took more than 3 seconds to complete (4.170000)<br>Sep 13 09:03:12 qdiskd qdisk cycle took more than 3 seconds to complete (4.080000)<br>Sep 13 09:03:33 qdiskd qdisk cycle took more than 3 seconds to complete (6.030000)<br>Sep 13 09:04:13 qdiskd qdisk cycle took more than 3 seconds to complete (3.920000)<br>Sep 13 09:10:52 qdiskd qdisk cycle took more than 3 seconds to complete (3.340000)<br>Sep 13 09:16:35 qdiskd qdisk cycle took more than 3 seconds to complete (3.890000)<br>Sep 13 09:17:36 qdiskd qdisk cycle took more than 3 seconds to complete (6.740000)<br>Sep 13 09:17:49 qdiskd qdisk cycle took more than 3 seconds to complete (3.670000)<br>Sep 13 09:19:16 qdiskd qdisk cycle took more than 3 seconds to complete (24.410000)<br><br><br>root@FLPIDMM02 /root # sg_persist -i -r -d /dev/mapper/ext0<br>  HITACHI   DF600F            0000<br>  Peripheral device type: disk<br>  PR generation=0x0, there is NO reservation held<br>root@FLPIDMM02 /root # sg_persist -i -k -d /dev/mapper/ext0<br>  HITACHI   DF600F            0000<br>  Peripheral device type: disk<br>  PR generation=0x0, there are NO registered reservation keys<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>FLPIDMM01/FLPIDMM02</hostname><br><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-09-20T01:55:06Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-09-20T01:55:06Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>기존 사례를 살펴본 결과,<br>fence_scsi_check 대상 디스크에 대한 I/O 에러가 발생할 경우, 좀비 프로세스가 될 수 있습니다.<br>즉, 현재 클러스터 리소스에 키 및 예약 정보가 없는 것과 연관이 있어 보입니다.<br><br>감사합니다.<br><br><publishedDate>2018-09-20T01:55:06Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NmeWdIAJ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-09-19T00:20:02Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-09-19T00:20:02Z</b><br><br>답변감사합니다.<br>혹시 root      2632  5787  0 Sep12 ?        00:00:00 [fence_scsi_chec] &lt;defunct&gt; 로그가 발생하는 이유를 알수 있을까요?<br><br><publishedDate>2018-09-19T00:20:02Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NmMFwIAN"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-09-18T02:14:10Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-09-18T02:14:10Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>말씀하신 바와 같이<br>해당 메시지는 interval 설정보다 qdiskd 측정 cycle 시간이 길때 발생하며<br>interval*tko 값보다 적게 걸릴 경우에는 단지 정보성 메시지이며 문제가 되지 않습니다. <br><br>관련 링크는 다음과 같습니다.<br><br>Why do I see the warning messages &quot;qdisk cycle took more than X seconds to complete&quot; in a RHEL cluster with a quorum device?<br>  https://access.redhat.com/solutions/19495<br><br>감사합니다.<br><br><publishedDate>2018-09-18T02:14:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NmM1zIAF"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-09-18T01:45:49Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-09-18T01:45:49Z</b><br><br>3초의 인터벌로 5번 체크후 문제가 발생하면 펜싱이되는데 <br>생각에는 <br>IO에러가 qidk와 발생을 하였는 3초안에 통신에되서 정상처리 되었다는 정보성 같기도하고요.<br><br><publishedDate>2018-09-18T01:45:49Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NmM1GIAV"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-09-18T01:43:54Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-09-18T01:43:54Z</b><br><br>답변감사합니다.<br>네 작업당일에는 확인이 되었습니다.<br><br>cluster.conf상에는 문제가 없어보입니다.<br>무슨 이유일까요? 센터에서는 특별한 작업을 하지 않았다고 하고요.<br>리부팅을 하고 싶어도 그게 일정을 잡아야 해서. 쉽지가 않네요.<br><br>우선 qdisk의 로그가 어떠한 의미인지 알려주실수 있으신가요?<br>저도 한번 확인해보겠습니다.<br><br><publishedDate>2018-09-18T01:43:54Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Nm7CrIAJ"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-09-17T08:51:49Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-09-17T08:51:49Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>클러스터 리소스에 키 및 예약 정보가 없다니 이상합니다.<br>이전에는 정보가 확인되었었나요?<br><br>감사합니다.<br><br><publishedDate>2018-09-17T08:51:49Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Nm6gqIAB"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-09-17T08:05:32Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-09-17T08:05:32Z</b><br><br>답변감사합니다. 휴가중이여서 답변이 좀 늦었네요.<br>먼저 현재 동일한 로그는 발생하지 않고 있습니다.<br><br>12일 당시 특별한 작업이 없었습니다. 담당자에게는 목요일 다른 쪽에서 작업확인을 재차 부탁했습니다.<br><br>질문하지 서비스는 현재 정상적으로 운영되고 있는 상황입니다.<br><br>제가 염려되는 부분은 현재 예약된 키값이 양쪽다 보이지 않아서<br>갑자스럭 리부팅이 발생하지 않을까 염려가 되네요.<br><br>해당 상황을 해소하기 위해서 리부팅이 필요할까요??<br><br>추가 내용이 업데이트 되는되로 내용 보내드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-09-17T08:05:32Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NlhWlIAJ"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-09-14T06:08:48Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-09-14T06:08:48Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>데이터 업로드 감사합니다.<br>확인하도록 하겠습니다.<br><br>그런데, 로그 이외에 해당 노드들에서 제공하는 서비스는 정상적으로 운영되고 있는지요?<br>좀 더 상황 설명 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2018-09-14T06:08:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NlQFcIAN"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-09-13T08:36:43Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-09-13T08:36:43Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>저는 Platform Support 를 담당하고 있는<br>Senior Technical Support Engineer 신재욱입니다.<br><br>현재 올려주신 문의내용에 대해 확인 중이며<br>관련 내용을 업데이트드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-09-13T08:36:43Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>