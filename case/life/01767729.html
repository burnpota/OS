======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2017-01-05T11:16:06Z</b><br><b>마지막 답변자 : 타임게이트 타임게이트</b><br><b>마지막 수정 일자 : 2017-01-11T04:41:06Z</b><br><b>id : 500A000000W8KoeIAF</b><br>======================<br><br><b><font size=15>
제목  : [장애문의btmp logroate 관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br>현재 양서버의 logroate.conf가 동일한데<br>btmp가 다르게 저장이 되고 있습니다.<br><br>다른 messages, cron은 정상적인 rotate가 되는 것으로 보이는데<br>유독 btmp만 정상적인 rotate가 되지 않습니다.<br><br>어떠한 이유때문에 이와같은 문제가 발생하는지 확인 부탁드립니다.<br><br>btmp는 sosreport에서 수집이 되지 않아 아래에 ls를 첨부합니다.<br>root@SLPPENDL01 /root # ls -al /var/log/btmp*<br>-rw------- 1 root utmp   0 Dec  1  2015 /var/log/btmp<br>-rw------- 1 root utmp 107 Nov 12  2015 /var/log/btmp-20151020.gz<br>-rw------- 1 root utmp 104 Dec  1  2015 /var/log/btmp-20151112.gz<br>-rw------- 1 root utmp 384 Nov 19  2015 /var/log/btmp-20151201<br> <br>root@SLTIDADL01 /tmp # ls -al /var/log/btmp*<br>-rw------- 1 root utmp   0 Apr  5  2016 /var/log/btmp<br>-rw------- 1 root utmp 107 Nov  9  2015 /var/log/btmp-20151020.gz<br>-rw------- 1 root utmp 104 Dec  1  2015 /var/log/btmp-20151109.gz<br>-rw------- 1 root utmp 254 Jan  1  2016 /var/log/btmp-20151201.gz<br>-rw------- 1 root utmp 446 Feb 25  2016 /var/log/btmp-20160101.gz<br>-rw------- 1 root utmp  98 Apr  5  2016 /var/log/btmp-20160225.gz<br>-rw------- 1 root utmp 384 Apr  4  2016 /var/log/btmp-20160405<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 정의찬 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-2952-3184<br>- 메일주소 : 정의찬 &lt;echan.jeong@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 송기호(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01036209917<br>- 메일주소 : kh.song@time-gate.com<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>타입  : Configuration issue</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000IcYx5IAF"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-01-06T02:47:13Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-01-06T02:47:13Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>sosreport에서 logrotate_debug 정보를 보니 empty 파일 때문에 <br>rotate 되지 않는 것으로 보입니다. <br><br>empty log files are not rotated, old logs are removed<br><br><br>rotating pattern: /var/log/btmp  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/btmp<br>  log does not need rotating<br>======================<br>rotating pattern: /var/log/btmp  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/btmp<br>  log does not need rotating<br><br><br>아래와 같이 ifempty 를 설정 하시고 이슈가 개선되는지 확인 부탁드립니다. <br><br># vim /ect/logrotate.conf:<br>...<br>/var/log/btmp {<br>    missingok<br>    monthly<br>    ifempty<br>    create 0600 root utmp<br>    rotate 12<br>}<br><br><br># logrotate -vvv /etc/logrotate.conf<br><br><br>감사합니다. <br><br>Red Hat GSS<br>정미연 드림<br><br><publishedDate>2017-01-06T02:47:13Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>현재 양서버의 logroate.conf가 동일한데<br>btmp가 다르게 저장이 되고 있습니다.<br><br>다른 messages, cron은 정상적인 rotate가 되는 것으로 보이는데<br>유독 btmp만 정상적인 rotate가 되지 않습니다.<br><br>어떠한 이유때문에 이와같은 문제가 발생하는지 확인 부탁드립니다.<br><br>btmp는 sosreport에서 수집이 되지 않아 아래에 ls를 첨부합니다.<br>root@SLPPENDL01 /root # ls -al /var/log/btmp*<br>-rw------- 1 root utmp   0 Dec  1  2015 /var/log/btmp<br>-rw------- 1 root utmp 107 Nov 12  2015 /var/log/btmp-20151020.gz<br>-rw------- 1 root utmp 104 Dec  1  2015 /var/log/btmp-20151112.gz<br>-rw------- 1 root utmp 384 Nov 19  2015 /var/log/btmp-20151201<br> <br>root@SLTIDADL01 /tmp # ls -al /var/log/btmp*<br>-rw------- 1 root utmp   0 Apr  5  2016 /var/log/btmp<br>-rw------- 1 root utmp 107 Nov  9  2015 /var/log/btmp-20151020.gz<br>-rw------- 1 root utmp 104 Dec  1  2015 /var/log/btmp-20151109.gz<br>-rw------- 1 root utmp 254 Jan  1  2016 /var/log/btmp-20151201.gz<br>-rw------- 1 root utmp 446 Feb 25  2016 /var/log/btmp-20160101.gz<br>-rw------- 1 root utmp  98 Apr  5  2016 /var/log/btmp-20160225.gz<br>-rw------- 1 root utmp 384 Apr  4  2016 /var/log/btmp-20160405</issue><timeFramesAndUrgency>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 정의찬 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-2952-3184<br>- 메일주소 : 정의찬 &lt;echan.jeong@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 송기호(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01036209917<br>- 메일주소 : kh.song@time-gate.com</timeFramesAndUrgency><cep>false</cep></case>