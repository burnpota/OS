======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2017-08-24T03:32:31Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2017-09-06T05:04:20Z</b><br><b>id : 500A000000Y3JPqIAN</b><br>======================<br><br><b><font size=15>
제목  : [장애]hang 장애 이슈
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br>콘솔,터미널 접속이 불가능한 상태에서 담당자가 강제 리부팅을 하였습니다.<br>vmcore 는 생성 하지 못했습니다. sosreport 첨부 합니다.<br><br>Aug 23 17:05:58 ufdev xinetd[3516]: service mxMANAGER: too many consecutive fork failures<br>Aug 23 17:05:58 ufdev xinetd[3516]: FAIL: mxMANAGER fork from=100.254.46.243<br>Aug 23 17:06:39 ufdev xinetd[3516]: mxMANAGER: fork failed: Resource temporarily unavailable (errno = 11)<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 5.4</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>ufdev</hostname><br><br><br><comment id="a0aA000000KHIhBIAX"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-08-31T00:21:59Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-08-31T00:21:59Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 기술 문의의 상태를 처리완료 상태로 변경하고자 합니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 *재개*하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-08-31T00:21:59Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KSrL0IAL"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-08-28T23:20:18Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-08-28T23:20:18Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin<br>Technical Support Engineer<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-08-28T23:20:18Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KS43vIAD"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-08-24T04:08:40Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-08-24T04:08:39Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>Red Hat Enterprise Linux 5 는 Extended Life Phase 로 접어들었으며, ELS 서브스크립션 없이는 제한적인 지원이 이루어지고 있습니다.<br><br>Please note the RHEL 5 is in Extended Life Phase for which we provide only limited support for customers without ELS subscription. The limited support does not cover root cause analysis. Please let me know if you have different account with the ELS subscription so we can provide full support to you. If you have selected RHEL 5 version by accident, and the case is about different RHEL version, then please provide the sosreport so we can begin our analysis.<br><br>제한적인 지원에도 불구하고 분석을 진행해 본 결과, 시스템의 pid 개수가 현재 기본으로 설정된 kernel.pid_max 값에 근접하여<br>더 이상 프로세스 ID 를 할당받지 못하여 fork failed 가 발생된 것으로 확인됩니다.<br><br>DMIDECODE<br>  BIOS:<br>    Vend: Phoenix Technologies LTD    Vers: 6.00    Date: 09/21/2015    BIOS Rev: 4.6<br>  System:<br>    Prod: VMware Virtual Platform<br>  CPU:<br>    2 logical processors<br>    Intel Xeon CPU E5-2690 0 @ 2.90GHz (flags: constant_tsc,lm,nx,pae)<br>  Memory:<br>    Total: 8192 MiB (8 GiB)<br><br>OS<br>  Hostname: ufdev<br>  Distro:   [redhat-release] Red Hat Enterprise Linux Server release 5.4 (Tikanga)<br>  Kernel:<br>    Booted kernel:  2.6.18-274.el5<br>    Booted kernel cmdline:<br>      ro root=LABEL=/ rhgb quiet crashkernel=128M@16M nmi_watchdog=0<br>    Taint-check: 65  (see https://access.redhat.com/solutions/40594)<br>       0  PROPRIETARY_MODULE: Proprietary module has been loaded<br>       6  UNSIGNED_MODULE: Unsigned module has been loaded (RHEL5-specific)<br>    - - - - - - - - - - - - - - - - - - -<br>  Sys time:  Wed Aug 23 17:27:12 KST 2017<br>  Boot time: Wed Aug 23 17:07:02 KST 2017  (epoch: 1503475622)<br>  Uptime:    20 min,  1 user<br>  LoadAvg:   [2 CPU] 1.19 (60%), 0.87 (44%), 0.47 (24%)<br>  /proc/stat:<br>    procs_running: 1   procs_blocked: 1    processes [Since boot]: 42153<br>    cpu [Utilization since boot]:<br>      us 4%, ni 0%, sys 2%, idle 72%, iowait 21%, irq 0%, sftirq 0%, steal 0%<br><br>KDUMP CONFIG<br>  kexec-tools rpm version:<br>    kexec-tools-1.102pre-77.el5.x86_64<br>  Service enablement:<br>    kdump  0:off  1:off  2:on  3:on  4:on  5:on  6:off<br>  kdump initrd/initramfs:<br>    2820218 Feb 14  2013 initrd-2.6.18-274.el5kdump.img<br>  Memory reservation config:<br>    GRUB default  { crashkernel=128M@16M }<br>  kdump.conf:<br>    core_collector makedumpfile -c -d 17<br>    ext3 /dev/sda7<br>    path /crash<br>  Panic sysctls:<br>    kernel.sysrq [bitmask] =  &quot;1&quot;  (all SysRqs allowed)<br>    kernel.panic [secs] =  0  (no autoreboot on panic)<br>    kernel.hung_task_panic =  0<br>    kernel.panic_on_oops =  1<br>    kernel.panic_on_io_nmi =<br>    kernel.panic_on_unrecovered_nmi =  0<br>    kernel.panic_on_stackoverflow =<br>    kernel.softlockup_panic =  0<br>    kernel.unknown_nmi_panic =  1<br>    kernel.nmi_watchdog =  0<br>    vm.panic_on_oom [0-2] =  0  (no panic)<br><br>Aug 19 15:17:47 ufdev xinetd[17303]: setuid failed: Permission denied (errno = 13)<br>Aug 19 15:34:49 ufdev xinetd[3516]: mxMANAGER: fork failed: Resource temporarily unavailable (errno = 11)<br>Aug 19 15:35:04 ufdev last message repeated 3 times<br>Aug 19 15:37:06 ufdev rc_pam_acl[11854]: session opened for user 'zzz00047'(from 100.254.180.22) with service 'sshd' [#1]<br>Aug 19 15:37:14 ufdev rc_pam_acl[11854]: session opened for user 'zzz00047'(from 100.254.180.22) with service 'sshd' [#1]<br>Aug 19 15:38:49 ufdev xinetd[3516]: mxMANAGER: fork failed: Resource temporarily unavailable (errno = 11)<br>Aug 19 15:39:09 ufdev last message repeated 4 times<br>Aug 19 15:39:09 ufdev xinetd[3516]: service mxMANAGER: too many consecutive fork failures<br>Aug 19 15:39:09 ufdev xinetd[3516]: FAIL: mxMANAGER fork from=100.254.46.243<br>Aug 19 15:39:49 ufdev xinetd[3516]: mxMANAGER: fork failed: Resource temporarily unavailable (errno = 11)<br>Aug 19 15:40:04 ufdev last message repeated 3 times<br>Aug 19 15:40:06 ufdev kernel: mxSMS[4759]: segfault at 0000000000000001 rip 00000031b145fc17 rsp 00007fffac328b80 error 4<br>Aug 19 15:40:10 ufdev kernel: mxMANAGER[4759]: segfault at 0000000000000001 rip 00000031b145fc17 rsp 00007fff290bfce0 error 4<br>Aug 19 15:40:49 ufdev xinetd[3516]: mxMANAGER: fork failed: Resource temporarily unavailable (errno = 11)<br><br>Linux 2.6.18-274.el5 (ufdev)    2017-06-22<br><br>00:00:01      runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15<br>14:45:01            3     32456    115.23     54.20     22.85<br>14:48:01            1     32452     54.89     46.96     25.19<br>14:51:01            1     32454     35.94     43.24     27.43<br>14:54:01            1     32456      3.00     24.25     22.82<br>14:57:01            1     32456      1.12     13.96     19.08<br>15:00:01            3     32460      1.13      8.16     15.91<br>15:03:02            1     32460      1.81      5.19     13.34<br>15:06:01            3     32460      1.11      3.37     11.23<br>15:09:01            3     32462      1.12      2.36      9.45<br>15:12:01            1     32462      1.42      1.87      8.00<br>15:18:01            1     32464      1.11      1.40      5.81<br>15:21:01            1     32463      1.14      1.29      4.98<br>15:24:01            1     32465      1.13      1.23      4.30<br>15:27:01            1     32465      1.05      1.14      3.72<br>15:30:01            3     32469      1.19      1.16      3.27<br>15:33:01            1     32467      1.06      1.10      2.87<br>15:36:01            1     32469      1.10      1.07      2.54<br><br>Linux 2.6.18-274.el5 (ufdev)    08/19/17<br><br>00:00:01      runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15<br>15:24:01            1     32465      1.13      1.23      4.30<br>15:27:01            1     32465      1.05      1.14      3.72<br>15:30:01            3     32469      1.19      1.16      3.27<br>15:33:01            1     32467      1.06      1.10      2.87<br>15:36:01            1     32469      1.10      1.07      2.54<br><br>cat proc/sys/kernel/pid_max <br>32768<br><br>[관련 문서]<br>What is the Red Hat Enterprise Linux Extended Life Cycle Support Add-On (ELS), and what is its support life cycle? <br>https://access.redhat.com/solutions/690063<br><br>&quot;FAQ: Red Hat Enterprise Linux 5 Extended Life Cycle Support (ELS) Add-On&quot;<br>https://access.redhat.com/articles/2901061<br><br>What does the error message &quot;fork failed: Resource temporarily unavailable&quot; mean? <br>https://access.redhat.com/knowledge/solutions/22105<br><br><br>따라서, 본 문제는 kernel.pid_max 값을 현재 32768 에서 65536 으로 변경하여 운영하시면 더 이상 fork failed 는 발생하지 않을 것으로 보입니다.<br>또한, 추후 원활한 지원을 위해 본 시스템을 Red Hat Enterprise Linux 6 혹은 7 로 업그레이드를 고려해주시기 바랍니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-08-24T04:08:39Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>콘솔,터미널 접속이 불가능한 상태에서 담당자가 강제 리부팅을 하였습니다.<br>vmcore 는 생성 하지 못했습니다. sosreport 첨부 합니다.<br><br>Aug 23 17:05:58 ufdev xinetd[3516]: service mxMANAGER: too many consecutive fork failures<br>Aug 23 17:05:58 ufdev xinetd[3516]: FAIL: mxMANAGER fork from=100.254.46.243<br>Aug 23 17:06:39 ufdev xinetd[3516]: mxMANAGER: fork failed: Resource temporarily unavailable (errno = 11)<br><br>감사합니다.</issue><cep>false</cep></case>