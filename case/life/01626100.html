======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2016-04-29T01:03:14Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2016-05-03T05:49:44Z</b><br><b>id : 500A000000U4EKlIAN</b><br>======================<br><br><b><font size=15>
제목  : [기술문의]CPU사용량 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>현재 CPU사용률이 USER30%  SYS 30% IDLE40% 정도입니다.<br>WAIT_IO%가 없는 것으로 보아 문제가 없다고 판단되는데요.<br>sosreport첨부드리니, 제가 판단한 부분이 맞는 것인지 확인 부탁드립니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000H3sp8IAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2016-05-03T05:49:43Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2016-05-03T05:49:43Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 기술 문의의 상태를 처리완료 상태로 변경하고자 합니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 *재개*하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2016-05-03T05:49:43Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H3rmrIAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2016-05-03T01:50:14Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2016-05-03T01:50:14Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin<br>Technical Support Engineer<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2016-05-03T01:50:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GyxfeIAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2016-04-29T07:23:09Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2016-04-29T07:23:09Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>저희 레드햇 기술지원 파트에서는 일반적인 내용만을 전달해드리며, 시스템별로 상황이 다르기 때문에 권고하는 파라메터 값이 없습니다.<br>시스템 튜닝에 대한 문의는 TAM 컨택트를 이용하시거나 레드햇 세일즈에 해당 부분 컨설트가 가능한지 여쭤보시기 바랍니다.<br><br>참고) 저희 Red Hat Global Support Service 는 요청하신 문제의 병목현상을 찾고, &quot;일반적인&quot; 튜닝 <br>포인트를 가이드 만을 해드리고 있습니다. 따라서, 더 &quot;정확한&quot; 퍼포먼스 튜닝 서비스를 받기 원한다면, <br>Red Hat 컨설팅 서비스를 권장해드립니다.<br><br>https://access.redhat.com/products/Consulting<br><br>제품구매문의<br>Phone : 080-708-0880<br>Email : buy-kr@redhat.com<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2016-04-29T07:23:09Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GyxFkIAJ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-04-29T06:28:25Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-04-29T06:28:25Z</b><br><br>답변 감사드립니다.<br>해당 서버에 맞는 커널파라메터 세팅을 하고 싶은데<br>vm.swappiness , vm.dirty_ratio 두 값에 대한 recommand를 부탁드립니다.<br><br>더 필요한 정보가 있으면 요청해주시면 보내드리겠습니다.<br>이상입니다.<br><br><publishedDate>2016-04-29T06:28:25Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GywDTIAZ"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2016-04-29T01:58:04Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2016-04-29T01:58:04Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>DMIDECODE<br>  BIOS:<br>    Vers: 6.00    Date: 06/22/2012    BIOS Rev: 4.6<br>  System:<br>    Prod: VMware Virtual Platform<br>  CPU:<br>    2 logical processors (2 CPU cores)<br>    1 Intel Xeon CPU E5-2660 0 @ 2.20GHz (flags: aes,constant_tsc,ht,lm,pae)<br>    └─2 threads / 2 cores each<br>  Memory:<br>    16384 MB (16 GB) total<br><br>OS<br>  Hostname: SLPGRQEL01<br>  Distro:   [redhat-release] Red Hat Enterprise Linux Server release 6.4 (Santiago)<br>  Kernel:<br>    Booted kernel:  2.6.32-358.23.2.el6.x86_64<br><br>    Booted kernel cmdline:<br>      ro root=UUID=f843ae52-0574-4bdf-aaf4-fa9f00c9e039 rd_NO_LUKS rd_NO_LVM<br>      LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16  KEYBOARDTYPE=pc<br>      KEYTABLE=us rd_NO_DM rhgb quiet crashkernel=256M nmi_watchdog=0<br>      transparent_hugepage=never<br>    Taint-check: 1  (see https://access.redhat.com/solutions/40594)<br>       0  PROPRIETARY_MODULE: Proprietary module has been loaded<br>    - - - - - - - - - - - - - - - - - - -<br>  Sys time:  Thu Apr 28 08:37:55 KST 2016<br>  Boot time: Sat Apr 16 10:54:21 KST 2016  (epoch: 1460771661)<br>  Uptime:    11 days, 21:43,  4 users<br>  LoadAvg:   [2 CPU] 0.53 (26%), 0.60 (30%), 0.55 (28%)<br>  /proc/stat:<br>    procs_running: 3   procs_blocked: 0    processes [Since boot]: 5703247<br>    cpu [Utilization since boot]:<br>      us 4%, ni 0%, sys 2%, idle 93%, iowait 0%, irq 0%, sftirq 0%, steal 0%<br><br>SYSCTLS<br>  vm.<br>    dirty_ratio =  &quot;20&quot;  (% of total system memory)<br>    dirty_bytes =  &quot;0&quot;  (disabled -- check dirty_ratio)<br>    dirty_background_ratio =  &quot;10&quot;  (% of total system memory)<br>    dirty_background_bytes =  &quot;0&quot;  (disabled -- check dirty_background_ratio)<br>    dirty_expire_centisecs =  &quot;3000&quot;<br>    dirty_writeback_centisecs =  &quot;500&quot;<br>    nr_hugepages [2-MiB pages] =  &quot;0&quot;<br>    nr_overcommit_hugepages [2-MiB pages] =  &quot;0&quot;<br>    overcommit_memory [0-2] =  &quot;0&quot;  (heuristic overcommit)<br>    overcommit_ratio =  &quot;50&quot;<br>    oom_kill_allocating_task [bool] =  &quot;0&quot;  (scan tasklist)<br>    panic_on_oom [0-2] =  &quot;0&quot;  (no panic)<br>    swappiness [0-100] =  &quot;60&quot;<br><br>  Top CPU-using processes:<br>    USER      PID    %CPU  %MEM  VSZ-MiB  RSS-MiB  TTY    STAT  START  TIME    COMMAND<br>    daasbg1   6895   4.2   14.5  5640     2304     ?      Sl    Apr27  36:27   java -jar /APP/apache/java_bin/QAS3/QAS.jar<br>    root      29329  2.3   0.5   284      86       pts/3  S+    08:37  0:03    /usr/bin/python /usr/sbin/sosreport<br>    maxgauge  25850  1.5   0.5   5611     95       ?      Ssl   Apr25  58:56   mxg_rts -c PGRQ<br>    oracle    6164   1.1   0.0   4975     16       ?      Ss    Apr16  191:52  ora_vktm_PGRQ<br>    oracle    10518  1.0   0.5   4976     87       ?      Ss    08:06  0:20    oraclePGRQ (LOCAL=NO)<br>    oracle    6174   0.6   0.6   4989     101      ?      Ss    Apr16  115:34  ora_dia0_PGRQ<br>    maxgauge  24200  0.4   0.0   146      1        ?      Ssl   Apr17  70:48   mxg_sndf -c PGRQ<br>    oracle    6244   0.3   0.0   213      7        ?      Ssl   Apr16  59:30   /oracle/product/11.2.0/bin/tnslsnr LISTENER -inherit<br>    daasbg1   6651   0.3   0.8   5186     136      ?      Sl    Apr16  65:47   java -jar ldapcert.jar<br>    oracle    27053  0.2   1.4   4977     234      ?      Ss    08:37  0:00    oraclePGRQ (LOCAL=NO)<br>  Top MEM-using processes:<br>    USER      PID    %CPU  %MEM  VSZ-MiB  RSS-MiB  TTY    STAT  START  TIME    COMMAND<br>    oracle    6178   0.0   24.1  5027     3816     ?      Ss    Apr16  2:01    ora_dbw0_PGRQ<br>    daasbg1   6895   4.2   14.5  5640     2304     ?      Sl    Apr27  36:27   java -jar /APP/apache/java_bin/QAS3/QAS.jar<br>    oracle    6188   0.0   2.0   4980     326      ?      Ss    Apr16  7:07    ora_mmon_PGRQ<br>    oracle    24915  0.0   1.6   4977     258      ?      Ss    07:33  0:00    oraclePGRQ (LOCAL=NO)<br>    oracle    2612   0.0   1.5   4978     252      ?      Ss    08:05  0:00    oraclePGRQ (LOCAL=NO)<br>    oracle    4496   0.0   1.5   4977     243      ?      Ss    07:51  0:00    oraclePGRQ (LOCAL=NO)<br>    oracle    18101  0.0   1.4   4977     236      ?      Ss    07:47  0:00    oraclePGRQ (LOCAL=NO)<br>    oracle    27053  0.2   1.4   4977     234      ?      Ss    08:37  0:00    oraclePGRQ (LOCAL=NO)<br>    oracle    20935  0.1   1.4   4977     234      ?      Ss    08:35  0:00    oraclePGRQ (LOCAL=NO)<br>    oracle    9511   0.0   1.4   4977     232      ?      Ss    07:46  0:00    oraclePGRQ (LOCAL=NO)<br><br>Linux 2.6.32-358.23.2.el6.x86_64 (SLPGRQEL01)   04/28/16        _x86_64_        (2 CPU)<br><br>00:00:01        CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest     %idle<br>08:36:01        all     35.24      0.00     29.48      0.08      0.00      0.00      0.61      0.00     34.60<br>08:36:01          0     35.21      0.00     29.29      0.06      0.00      0.00      0.65      0.00     34.79<br>08:36:01          1     35.27      0.00     29.66      0.08      0.00      0.00      0.57      0.00     34.42<br><br>00:00:01     pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff<br>08:30:01         3.81    143.30 243520.17      0.04  40250.65    533.09      0.00    530.97     99.60<br>08:33:01         0.14    136.15 241529.86      0.00  39304.57      0.00      0.00      0.00      0.00<br>08:36:01         9.55    139.64 229999.77      0.13  37748.48    273.15      0.00    271.90     99.54<br><br>00:00:01    kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit<br>08:30:01       432044  15769296     97.33    378564  12349068   9134656     27.69<br>08:33:01       114040  16087300     99.30    380096  12360396   9321500     28.26<br>08:36:01       147652  16053688     99.09    381408  12182148   9312440     28.23<br><br>00:00:01    kbswpfree kbswpused  %swpused  kbswpcad   %swpcad<br>08:30:01     16609920    171916      1.02      4092      2.38<br>08:33:01     16609920    171916      1.02      4092      2.38<br>08:36:01     16609064    172772      1.03      4176      2.42<br><br>00:00:01      runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15<br>08:30:01            1       497      0.59      0.60      0.53<br>08:33:01            1       492      0.69      0.62      0.55<br>08:36:01            2       492      0.80      0.65      0.56<br><br>00:00:01       totsck    tcpsck    udpsck    rawsck   ip-frag    tcp-tw<br>08:30:01          236        27         4         0         0      4099<br>08:33:01          237        25         4         0         0      4042<br>08:36:01          232        23         4         0         0      3671<br><br>시스템이 오라클 데이터베이스를 사용하는 것으로 확인되고있으며,<br>메모리가 다소 부족하여 스왑 메모리 사용이 관측되었습니다.<br>%sys 수치가 다소 높게 표시되는 이유는 커널이 메모리 회수를 하는 과정에서 발생하는 현상으로 보여집니다.<br><br>따라서, 1차적으로 아래 문서 [1] 를 참조하여 오라클 데이터베이스의 메모리 튜닝을 설정하여보시고,<br>오라클의 도움을 받아 hugepage 설정을 하실 필요가 있습니다.<br><br>튜닝 이후에도 비슷한 현상이 발생한다면 물리적인 메모리 증설이 필요할 수도 있습니다.<br>또한, CPU 증설이 필요할 수도 있습니다.<br><br>[참고 문서]<br>[1] Tuning Red Hat Enterprise Linux for Oracle and Oracle RAC performance <br>    https://access.redhat.com/solutions/39188<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2016-04-29T01:58:04Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>WAIT_IO%가 없는 것으로 보아 문제가 없다고 판단되는데요.<br>sosreport첨부드리니, 제가 판단한 부분이 맞는 것인지 확인 부탁드립니다.</issue><cep>false</cep></case>