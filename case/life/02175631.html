======================<br><b>생성계정 : JIMIN KIM</b><br><b>생성날짜 : 2018-09-05T01:28:48Z</b><br><b>마지막 답변자 : Ying Huang</b><br><b>마지막 수정 일자 : 2018-09-10T01:50:36Z</b><br><b>id : 500A000000bx3D7IAI</b><br>======================<br><br><b><font size=15>
제목  : NAS영역에 대한 inode 사용률 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>NAS 서버를 사용하고 있는 client 중 하나인 SLVTSSAL01서버 기준으로 문의드립니다.<br><br>아래 df -i 정보에서 /PDF 영역이 inode 사용률이 조금 높은 편인데요.<br>/PDF 하위에도 여러 디렉토리들이 있는데<br>하위 디렉토리별 inode 사용률을 확인하는 방법을 문의드리려고 합니다.<br><br>이유는 하위 디렉토리마다 실제 업무 담당자가 다르게 배정이 되어있는데요.<br>상대적으로 많이 사용하고 있는 디렉토리를 구분해서 업무 담당자에게 통보해주기 위해서 문의드립니다.<br><br> - df -i 정보<br>root@SLVTSSAL01 /PDF # df -i<br>Filesystem                    Inodes    IUsed    IFree IUse% Mounted on<br>/dev/sda2                   15728640   189703 15538937    2% /<br>devtmpfs                     6113655      424  6113231    1% /dev<br>tmpfs                        6117321        1  6117320    1% /dev/shm<br>tmpfs                        6117321      652  6116669    1% /run<br>tmpfs                        6117321       16  6117305    1% /sys/fs/cgroup<br>/dev/mapper/vg9-CRASH       26736640        4 26736636    1% /CRASH<br>/dev/sda1                     524288      333   523955    1% /boot<br>/dev/sda5                    5242880      123  5242757    1% /home<br>/dev/sda3                   10485760     8940 10476820    1% /var<br>/dev/mapper/vg0-sysadmin     4327528     5489  4322039    1% /sysadmin<br>tmpfs                        6117321        1  6117320    1% /run/user/0<br>/dev/mapper/LLVTSSAPPVG-APP 15728640        3 15728637    1% /APP<br>/dev/mapper/LLVTSSAPPVG-LIB 10485760        3 10485757    1% /LIB<br>/dev/mapper/LLVTSSAPPVG-LOG 15728640        3 15728637    1% /LOG<br>/dev/mapper/LLVTSSAPPVG-TSS  5242880        3  5242877    1% /TSS<br>(NAS server IP):/FLT_PDF     31350784 26881422  4469362   86% /PDF<br>tmpfs                        6117321        1  6117320    1% /run/user/1021<br><br> - /PDF 하위 디렉토리 정보<br>root@SLVTSSAL01 /PDF # ls -al<br>total 304<br>drwxrwxrwx    22 root      root        2048 Jul 31 10:12 .<br>dr-xr-xr-x.   27 root      root        4096 Aug 23 14:35 ..<br>drwxr-----     3     20341     20102   2048 Sep  4  2017 FLT_PDF<br>-rwxrwxrwx     1 nfsnobody nfsnobody    502 Jul 31 10:12 FLT_~9U(.LNK<br>drwxrwxrwx     2 root      root        2048 Apr  4  2014 MIGRATION<br>drwxrwxrwx     4 root      root        2048 Apr  4  2014 WEBZINE<br>drwxrwxrwx    53      1108      1059   4096 Aug 16 17:03 aamms<br>drwxrwxrwx     3 root      root        2048 Dec 20  2017 cm<br>drwxrwxrwx     3 nfsnobody nfsnobody   2048 Feb 15  2016 cp<br>drwxrwxrwx     2 root      root        2048 Apr  4  2014 dDIMSTemp<br>drwxrwxrwx     9 root      root        2048 Jul  6 09:35 homepage<br>drwxrwxrwx     5 nfsnobody nfsnobody   2048 Jul 31 09:27 insrfn<br>drwxrwxrwx     5 root      root        2048 Apr  4  2014 pdf<br>drwxrwxrwx     4 root      root        2048 Apr  4  2014 pi<br>drwxrwxrwx     2 root      root        2048 Apr  4  2014 rm<br>drwxrwxrwx     8 root      root        2048 Feb 23  2016 rp<br>drwxrwxrwx     3 root      root        2048 Apr  4  2014 rs<br>drwxrwxrwx     4 root      root        2048 Jan 22  2018 se<br>drwxrwxrwx  1010 root      root       65536 Sep  5 00:00 shared<br>drwxrwxrwx     4 root      root        2048 Apr  4  2014 temp<br>drwxrwxrwx     3 nfsnobody nfsnobody   2048 Jun 28 10:45 timsTmp<br>drwxrwxrwx  1221 nfsnobody nfsnobody 157696 Aug  3  2016 tms<br>drwxrwxrwx     2 root      root        2048 Apr  4  2014 viewer<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLVTSSAL01</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000NXrwdIAD"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2018-09-10T01:50:34Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2018-09-10T01:50:34Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>정보 공유 감사드리며 이슈가 잘 해결된 것으로 보여 참 다행입니다.<br>본 케이스를 처리완료하도록 하겠습니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.<br><br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발송됩니다. 고객님께서 남기 신 의견은<br>보다 나은 서비스를 위해 지속적으로 반영될 것입니다. 향후 기술 지원 서비스의 품질 향상을 위해,<br>소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-09-10T01:50:34Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NXrKAIA1"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2018-09-10T00:00:39Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2018-09-10T00:00:39Z</b><br><br>안녕하세요<br><br>알려주신 내역으로 확인하였습니다.<br><br>NAS 쪽에서 추가 확인한 결과<br>NAS의 경우는 OS(linux)에서 보이는 inode 조회할 경우<br>NAS의 blocksize로 표현이되는 것으로 확인되었습니다.<br><br>때문에 inode의 개수가 아닌 NAS의 block 개수로 표현되어<br>계산한 합과 차이가 발생했던 것 같습니다.<br><br>hitachi HNAS의 경우 이런 식으로 표현이되는 것으로 확인되었습니다.<br><br>감사합니다.<br><br><publishedDate>2018-09-10T00:00:39Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NXFYPIA5"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2018-09-06T05:23:48Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2018-09-06T05:23:48Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>확인결과 정확한 inode 수를 count 하려면 모든 하위 depth에 대해서 du 명령으로 확인해야합니다.<br>아래의 테스트에 의하면 현재 디렉터리(.) 와 상위 디렉터리(..) 를 포함하여 2개가 더 추가되면 같은 값이 나오는 것을 확인할 수 있습니다.<br><br>[test@localhost ~]$ df -i /boot<br>Filesystem     Inodes IUsed  IFree IUse% Mounted on<br>/dev/sda1      524288   389 523899    1% /boot<br><br>[test@localhost ~]$ sudo du --inodes /boot<br>271<br>/boot/grub2/i386-pc<br>36<br>/boot/grub2/locale<br>2<br>/boot/grub2/fonts<br>315<br>/boot/grub2<br>44<br>/boot/extlinux<br>1<br>/boot/efi/EFI/redhat<br>2<br>/boot/efi/EFI<br>3<br>/boot/efi<br>387<br>/boot<br><br>감사합니다.<br><br><publishedDate>2018-09-06T05:23:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NWwDKIA1"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2018-09-05T04:11:00Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2018-09-05T04:11:00Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>빠른 답변 감사드립니다.<br><br>알려주신 방법으로 확인 후 한가지 문의드릴 점은<br>df -i 값과 해당 하위 내용 조사한 값을 비교하였을 때 차이가 다는 것 처럼 보여서 문의드립니다.<br><br>실제 inode 사용량 처럼보이는 26887741값보다 개별 조사한 값이 작아서 문의드립니다.<br><br>root@SLVTSSAL01 /PDF # df -i | grep PDF<br>100.253.110.49:/FLT_PDF     31350784 26885422  4465362   86% /PDF<br><br> - /PDF 하위 내용<br>root@SLVTSSAL01 /PDF # ls -al<br>total 304<br>drwxrwxrwx    22 root      root        2048 Jul 31 10:12 .<br>dr-xr-xr-x.   27 root      root        4096 Aug 23 14:35 ..<br>drwxr-----     3     20341     20102   2048 Sep  4  2017 FLT_PDF<br>-rwxrwxrwx     1 nfsnobody nfsnobody    502 Jul 31 10:12 FLT_~9U(.LNK<br>drwxrwxrwx     2 root      root        2048 Apr  4  2014 MIGRATION<br>drwxrwxrwx     4 root      root        2048 Apr  4  2014 WEBZINE<br>drwxrwxrwx    53      1108      1059   4096 Aug 16 17:03 aamms<br>drwxrwxrwx     3 root      root        2048 Dec 20  2017 cm<br>drwxrwxrwx     3 nfsnobody nfsnobody   2048 Feb 15  2016 cp<br>drwxrwxrwx     2 root      root        2048 Apr  4  2014 dDIMSTemp<br>drwxrwxrwx     9 root      root        2048 Jul  6 09:35 homepage<br>drwxrwxrwx     5 nfsnobody nfsnobody   2048 Jul 31 09:27 insrfn<br>drwxrwxrwx     5 root      root        2048 Apr  4  2014 pdf<br>drwxrwxrwx     4 root      root        2048 Apr  4  2014 pi<br>drwxrwxrwx     2 root      root        2048 Apr  4  2014 rm<br>drwxrwxrwx     8 root      root        2048 Feb 23  2016 rp<br>drwxrwxrwx     3 root      root        2048 Apr  4  2014 rs<br>drwxrwxrwx     4 root      root        2048 Jan 22  2018 se<br>drwxrwxrwx  1010 root      root       65536 Sep  5 00:00 shared<br>drwxrwxrwx     4 root      root        2048 Apr  4  2014 temp<br>drwxrwxrwx     3 nfsnobody nfsnobody   2048 Jun 28 10:45 timsTmp<br>drwxrwxrwx  1221 nfsnobody nfsnobody 157696 Aug  3  2016 tms<br>drwxrwxrwx     2 root      root        2048 Apr  4  2014 viewer<br><br> - /PDF 하위 내용 inodes 조사<br>.<br>..<br>FLT_PDF : 13<br>FLT_~9U(.LNK : 1<br>MIGRATION : 1<br>WEBZINE : 4<br>aamms : 358<br>cm : 2575<br>cp : 6<br>dDIMSTemp : 1<br>homepage : 114725<br>insrfn : 117<br>pdf : 5<br>pi : 981<br>rm : 1<br>rp : 3107<br>rs : 194<br>se : 4288<br>shared : 21545<br>temp : 3<br>timsTmp : 36<br>tms : 17540<br>viewer : 1<br><br>감사합니다.<br><br><publishedDate>2018-09-05T04:11:00Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NWvLsIAL"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2018-09-05T01:50:43Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2018-09-05T01:50:43Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>디렉토리별 inode 사용률은 아래와 같이 du 명령어로 확인 가능합니다.<br><br># du --inodes --max-depth=1 /etc/ <br>11<br>/etc/grub.d<br>66<br>/etc/pki<br>4<br>/etc/rpm<br>12<br>/etc/yum<br>7<br>/etc/rhsm<br>2<br>/etc/rwtab.d<br>10<br>/etc/abrt<br>2<br>/etc/ssl<br>3<br>/etc/yum.repos.d<br>4<br>/etc/cron.daily<br>1673<br>/etc/selinux<br>2<br>/etc/depmod.d<br>1<br>/etc/dracut.conf.d<br>5<br>/etc/modprobe.d<br>2<br>/etc/rsyslog.d<br>1<br>/etc/binfmt.d<br>1<br>/etc/modules-load.d<br>66<br>/etc/systemd<br>17<br>/etc/profile.d<br>24<br>/etc/dbus-1<br>2<br>/etc/sysctl.d<br>1<br>/etc/tmpfiles.d<br>4<br>/etc/udev<br>16<br>/etc/lvm<br>5<br>/etc/X11<br>9<br>/etc/bash_completion.d<br>1<br>/etc/opt<br>4<br>/etc/pm<br>4<br>/etc/skel<br>78<br>/etc/sysconfig<br>4<br>/etc/xdg<br>1<br>/etc/xinetd.d<br>1<br>/etc/terminfo<br>4<br>/etc/prelink.conf.d<br>4<br>/etc/default<br>4<br>/etc/ld.so.conf.d<br>7<br>/etc/logrotate.d<br>11<br>/etc/polkit-1<br>4<br>/etc/dhcp<br>1<br>/etc/popt.d<br>13<br>/etc/alternatives<br>1<br>/etc/chkconfig.d<br>36<br>/etc/rc.d<br>12<br>/etc/NetworkManager<br>8<br>/etc/ppp<br>1<br>/etc/gcrypt<br>3<br>/etc/libnl<br>5<br>/etc/groff<br>2<br>/etc/pkcs11<br>10<br>/etc/iproute2<br>1<br>/etc/statetab.d<br>10<br>/etc/ssh<br>3<br>/etc/gss<br>1<br>/etc/krb5.conf.d<br>2<br>/etc/python<br>22<br>/etc/security<br>34<br>/etc/pam.d<br>2<br>/etc/sasl2<br>2<br>/etc/cron.hourly<br>1<br>/etc/cron.monthly<br>1<br>/etc/gdbinit.d<br>1<br>/etc/cron.weekly<br>2<br>/etc/my.cnf.d<br>49<br>/etc/openldap<br>1<br>/etc/gnupg<br>2<br>/etc/cron.d<br>2<br>/etc/wpa_supplicant<br>2<br>/etc/plymouth<br>27<br>/etc/libreport<br>6<br>/etc/tuned<br>10<br>/etc/firewalld<br>5<br>/etc/audisp<br>6<br>/etc/audit<br>10<br>/etc/postfix<br>3<br>/etc/qemu-ga<br>3<br>/etc/kernel<br>1<br>/etc/sudoers.d<br>39<br>/etc/latrace.d<br>28<br>/etc/vmware-tools<br>4<br>/etc/gssproxy<br>2<br>/etc/request-key.d<br>1<br>/etc/exports.d<br>2565<br>/etc/<br><br>감사합니다.<br><br><publishedDate>2018-09-05T01:50:43Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>