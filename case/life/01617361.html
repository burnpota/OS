======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2016-04-14T05:10:09Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-05-11T10:03:01Z</b><br><b>id : 500A000000U2OO9IAN</b><br>======================<br><br><b><font size=15>
제목  : core dump 생성 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>고객사 시스템 중 WebLogic 서버에서 하기의 에러를 발생하면서 해당 프로세스가 중단되는 현상이 발생하고 있습니다. <br><br> /APP/domains/P-BS11/bin/startWeblogic.sh: line 180: 14749 Segmentation fault    ${JAVA_HOME}/bin/javak ${JAVA_VM} ${MEM_ARGS} -Dweblogic.Name=${SERVER_NAME} -Djava.security.policy=${WL_HOE}/server/lib/weblogic.policy ${JAVA_OPTIONS} ${PROXY_SETTINGS} ${SERVER_CLASS}<br><br>WebLogic의 nohup log와 기타 다른 로그파일에 상기의 로그스택 외에 별다른 스택이 없고 Segment fault 시 OS 자체적으로 coredump가 생성되지 않아 문의드립니다. <br><br>현재 ulimit 값은 하기와 같습니다.<br>추가적으로 필요한 사항이 있다면 확인부탁드립니다.<br><br> ulimit -a<br>core file size          (blocks, -c) 4194303<br>data seg size           (kbytes, -d) unlimited<br>scheduling priority             (-e) 0<br>file size               (blocks, -f) unlimited<br>pending signals                 (-i) 401408<br>max locked memory       (kbytes, -l) 32<br>max memory size         (kbytes, -m) unlimited<br>open files                      (-n) 40960<br>pipe size            (512 bytes, -p) 8<br>POSIX message queues     (bytes, -q) 819200<br>real-time priority              (-r) 0<br>stack size              (kbytes, -s) 10240<br>cpu time               (seconds, -t) unlimited<br>max user processes              (-u) 401408<br>virtual memory          (kbytes, -v) unlimited<br>file locks                      (-x) unlimited<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>RHEL 6<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000GxmZfIAJ"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-04-25T08:09:05Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-04-25T08:09:05Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>먼저, 이슈가 발생되는 서버가 RHEL5인지 RHEL6인지 확인 부탁드립니다.<br>참고로 올려주신 sosreport는 RHEL5인것으로 확인됩니다.<br><br>아래는 사용중이 서버가 RHEL5인 가정하에 안내된 답변입니다.<br><br>혹시 /APP/domains/P-BS11/bin/startWeblogic.sh 스크립트 파일이<br>/etc/init.d/functions 파일을 읽어 오는지요?<br><br>맞다면 해당 파일에 의하여 core dump의 설정이 변경될수 있습니다.<br><br>RHEL5버전에서,<br><br>ulimit -S -c 0 &gt;/dev/null 2&gt;&amp;1<br><br>또한 아래의 KCS 문서에 의하면 /etc/profile 파일의 아래의 설정도 영향을 줄수 있다고 합니다.<br><br>ulimit -S -c 0 &gt; /dev/null 2&gt;&amp;1<br><br>상기 두 설정을 주석처리시 이슈가 발생되는지 확인 부탁드립니다.<br><br>- How to enable core file dumps when an application crashes or segmentation faults <br>https://access.redhat.com/solutions/4896<br><br>감사합니다.<br><br><publishedDate>2016-04-25T08:09:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GxjMxIAJ"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-04-25T01:32:39Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-04-25T01:32:39Z</b><br><br>안녕하세요! <br>요청하신 내역을 하기와 같이 전달드립니다. <br><br>[weblogic@FLPMMA01 /APP/weblogic]$ cat /proc/18897/limits<br>Limit                     Soft Limit           Hard Limit           Units<br>Max cpu time              unlimited            unlimited            seconds<br>Max file size             unlimited            unlimited            bytes<br>Max data size             unlimited            unlimited            bytes<br>Max stack size            10485760             unlimited            bytes<br>Max core file size        0                    unlimited            bytes<br>Max resident set          unlimited            unlimited            bytes<br>Max processes             401408               401408               processes<br>Max open files            40960                40960                files<br>Max locked memory         32768                32768                bytes<br>Max address space         unlimited            unlimited            bytes<br>Max file locks            unlimited            unlimited            locks<br>Max pending signals       401408               401408               signals<br>Max msgqueue size         819200               819200               bytes<br>Max nice priority         0                    0<br>Max realtime priority     0                    0<br> <br>[weblogic@FLPMMA02 /APP/weblogic]$ cat /proc/3465/limits<br>Limit                     Soft Limit           Hard Limit           Units<br>Max cpu time              unlimited            unlimited            seconds<br>Max file size             unlimited            unlimited            bytes<br>Max data size             unlimited            unlimited            bytes<br>Max stack size            10485760             unlimited            bytes<br>Max core file size        0                    unlimited            bytes<br>Max resident set          unlimited            unlimited            bytes<br>Max processes             401408               401408               processes<br>Max open files            40960                40960                files<br>Max locked memory         32768                32768                bytes<br>Max address space         unlimited            unlimited            bytes<br>Max file locks            unlimited            unlimited            locks<br>Max pending signals       401408               401408               signals<br>Max msgqueue size         819200               819200               bytes<br>Max nice priority         0                    0<br>Max realtime priority     0                    0<br><br>corefile size가 0으로 되어있는데 현재 해당 계정의 bash_profile에는 하기와 같이 설정되어 있습니다 <br><br>## .bash_profile ##<br>PS1='[\u@\h `pwd`]\$ '<br>set -o vi<br>ulimit -c 4194303<br>###<br><br>FLPMMA01 /APP/weblogic]$ ulimit -a<br>core file size          (blocks, -c) 4194303<br>data seg size           (kbytes, -d) unlimited<br>scheduling priority             (-e) 0<br><br>확인 요청드립니다.<br><br><publishedDate>2016-04-25T01:32:39Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Gx5IVIAZ"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-04-22T07:36:13Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-04-22T07:36:13Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>올려주신 &quot;ulimit -a&quot; 명령어 결과는 /APP/domains/P-BS11/bin/startWeblogic.sh <br>해당 프로세스를 실행하는 유저의 결과가 맞는지요?<br><br>코어 파일 생성 여부는 해당 프로세스의 limits 값을 확인해 보아야 합니다.<br>가능하시면 프로세스 기동후 아래와 같이 해당 프로세스의 limits 값을 확인해 주시기 바랍니다.<br><br># cat /proc/&lt;pid&gt;/limits<br><br>감사합니다.<br><br><publishedDate>2016-04-22T07:36:13Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GvWkMIAV"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-04-15T02:13:15Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-04-15T02:13:14Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>abrtd 는 애플리케이션 crash 를 관찰하는 데몬입니다. crash 가 발생하면, 이는 문제의 데이터를 수집합니다.<br>( core file, application 의 명령라인 등) 그리고 crash 되는 application 의 유형에 따라서 그리고,<br>abrt.conf config 내에 설정에 따라서 action 을 가지게 됩니다.<br><br>Bugzilla 로 crash 를 보고하고, report 를 mail 로 보내거나, FTP 또는 SCP 를 통해서 report 를 전송하기<br>위한 다양한 플러그인도 있습니다.<br><br>만일 abrt 관련 서비스가 기동되어 있을 경우 kernel.core.pattern 파라미터가<br>아래와 같이 변경되어 어플리케이션의 코어 파일이 /var/spool/abrt/ 밑에 생성됩니다.<br>또한 만일 레드햇에서 제공되는 패키지가 아닐 경우 관련 코어 파일을 저장하지 않고<br>삭제하게 됩니다.<br><br>kernel.core.pattern = |/use/libexec/aber-hook-ccpp %s %c %p %u %g %t e<br><br>따라서 abrt 프로세스 상태 확인이 필요합니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-15T02:13:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GvLHKIA3"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-04-14T08:12:07Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-04-14T08:12:07Z</b><br><br>답변 감사합니다.<br><br>abrt 서비스가 코어덤프 생성에 어떤 영향을 미치는지 설명부탁드립니다.<br><br>sosreport는 요청중이고 받는대로 보내드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-14T08:12:07Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GvLC0IAN"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-04-14T08:03:02Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-04-14T08:03:02Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>혹시 해당 서버에 abrt 서비스가 기동되어 있는지 확인 부탁 드립니다.<br><br>또한 해당 서버의 설정을 확인해 보기 위하여 sosreport를 생성하셔서<br>케이스에 업로드 부탁 드립니다.<br><br>참고문서:<br>&lt;sosreport란 무엇인가? Red Hat Enterprise Linux 4.6 또는 이후 버전에서 생성 방법은 무엇인가?&gt;<br>https://access.redhat.com/knowledge/ko/solutions/82033<br><br>감사합니다.<br><br><publishedDate>2016-04-14T08:03:02Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br> /APP/domains/P-BS11/bin/startWeblogic.sh: line 180: 14749 Segmentation fault    ${JAVA_HOME}/bin/javak ${JAVA_VM} ${MEM_ARGS} -Dweblogic.Name=${SERVER_NAME} -Djava.security.policy=${WL_HOE}/server/lib/weblogic.policy ${JAVA_OPTIONS} ${PROXY_SETTINGS} ${SERVER_CLASS}<br><br>WebLogic의 nohup log와 기타 다른 로그파일에 상기의 로그스택 외에 별다른 스택이 없고 Segment fault 시 OS 자체적으로 coredump가 생성되지 않아 문의드립니다. <br><br>현재 ulimit 값은 하기와 같습니다.<br>추가적으로 필요한 사항이 있다면 확인부탁드립니다.<br><br> ulimit -a<br>core file size          (blocks, -c) 4194303<br>data seg size           (kbytes, -d) unlimited<br>scheduling priority             (-e) 0<br>file size               (blocks, -f) unlimited<br>pending signals                 (-i) 401408<br>max locked memory       (kbytes, -l) 32<br>max memory size         (kbytes, -m) unlimited<br>open files                      (-n) 40960<br>pipe size            (512 bytes, -p) 8<br>POSIX message queues     (bytes, -q) 819200<br>real-time priority              (-r) 0<br>stack size              (kbytes, -s) 10240<br>cpu time               (seconds, -t) unlimited<br>max user processes              (-u) 401408<br>virtual memory          (kbytes, -v) unlimited<br>file locks                      (-x) unlimited</issue><environment>RHEL 6</environment><periodicityOfIssue>.</periodicityOfIssue><timeFramesAndUrgency>.</timeFramesAndUrgency><cep>false</cep></case>