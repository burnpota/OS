======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2017-02-21T05:29:35Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2017-03-01T01:27:11Z</b><br><b>id : 500A000000WUFsaIAH</b><br>======================<br><br><b><font size=15>
제목  : [장애]리부팅 분석
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br>2/20일 08:50 경 알수 없는 리부팅 현상이 발생했습니다.<br>분석요청 드립니다.sosreport 파일 첨부합니다.<br>그리고 vmcore 파일을 dropbox.redhat.com 에 ftp 접속이 원할하지 못해서 못 올렸는데<br>자세한 업로드 방법 부탁드립니다.<br><br>What information can you provide around timeframes and the business impact?<br><br>=========================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김종휘 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-9580-6587  <br>- 메일주소 : 김종휘 &lt;jjpaper.kim@samsung.com'''&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com'''<br>=========================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>타입  : Defect / Bug</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000Iw2uMIAR"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-03-01T01:27:10Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-03-01T01:27:10Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 기술 문의의 상태를 처리완료 상태로 변경하고자 합니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 *재개*하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-03-01T01:27:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IvE2kIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-02-24T03:58:39Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-02-24T03:58:39Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin<br>Technical Support Engineer<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-02-24T03:58:39Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IuaWJIAZ"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-02-22T00:09:06Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-02-22T00:09:06Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>------------[ cut here ]------------<br>WARNING: at lib/list_debug.c:51 list_del+0x8d/0xa0() (Tainted: P           ---------------   )<br>Hardware name: ProLiant DL380p Gen8<br>list_del corruption. next-&gt;prev should be ffff880423d42000, but was ffff880423d41399<br>Modules linked in: RedCastle(P)(U) iptable_filter ip_tables mptctl mptbase autofs4 sunrpc bonding 8021q garp stp llc ipv6 power_meter hpwdt hpilo tg3 microcode sg serio_raw iTCO_wdt iTCO_vendor_support ioatdma dca shpchp ext4 jbd2 mbcache dm_round_robin sd_mod crc_t10dif qla2xxx scsi_transport_fc scsi_tgt sr_mod cdrom hpsa(U) pata_acpi ata_generic ata_piix dm_multipath dm_mirror dm_region_hash dm_log dm_mod [last unloaded: scsi_wait_scan]<br>Pid: 6851, comm: ps_sos.sh Tainted: P           ---------------    2.6.32-358.23.2.el6.x86_64 #1<br>Call Trace:<br> [&lt;ffffffff8106e3e7&gt;] ? warn_slowpath_common+0x87/0xc0<br> [&lt;ffffffff8106e4d6&gt;] ? warn_slowpath_fmt+0x46/0x50<br> [&lt;ffffffff812892dd&gt;] ? list_del+0x8d/0xa0<br> [&lt;ffffffff811675c5&gt;] ? cache_alloc_refill+0x145/0x240<br> [&lt;ffffffff81142cae&gt;] ? do_wp_page+0x35e/0x920<br> [&lt;ffffffff8116801c&gt;] ? kmem_cache_alloc_trace+0x17c/0x1b0<br> [&lt;ffffffff8119f26a&gt;] ? alloc_fdtable+0x4a/0x150<br> [&lt;ffffffff8119f5fa&gt;] ? dup_fd+0x28a/0x330<br> [&lt;ffffffff8106cbe0&gt;] ? copy_process+0xcd0/0x1450<br> [&lt;ffffffff8106d3f4&gt;] ? do_fork+0x94/0x460<br> [&lt;ffffffffa02f2276&gt;] ? prst_preproc+0x46/0x5f0 [RedCastle]<br> [&lt;ffffffff8104759c&gt;] ? __do_page_fault+0x1ec/0x480<br> [&lt;ffffffffa02fb71d&gt;] ? call_indir_fork+0x5d/0x80 [RedCastle]<br> [&lt;ffffffffa02fb7b3&gt;] ? prst_fork+0x73/0xc0 [RedCastle]<br> [&lt;ffffffff8117e037&gt;] ? fd_install+0x47/0x90<br> [&lt;ffffffffa02fb951&gt;] ? rg_clone+0x91/0x100 [RedCastle]<br> [&lt;ffffffffa02fed23&gt;] ? rg_stub_clone+0x13/0x20 [RedCastle]<br> [&lt;ffffffff8100b072&gt;] ? system_call_fastpath+0x16/0x1b<br>---[ end trace ac0152d58b7f8f1a ]---<br>------------[ cut here ]------------<br>WARNING: at lib/list_debug.c:51 list_del+0x8d/0xa0() (Tainted: P        W  ---------------   )<br>Hardware name: ProLiant DL380p Gen8<br>list_del corruption. next-&gt;prev should be ffff880100450000, but was 00000000000000ff<br>Modules linked in: RedCastle(P)(U) iptable_filter ip_tables mptctl mptbase autofs4 sunrpc bonding 8021q garp stp llc ipv6 power_meter hpwdt hpilo tg3 microcode sg serio_raw iTCO_wdt iTCO_vendor_support ioatdma dca shpchp ext4 jbd2 mbcache dm_round_robin sd_mod crc_t10dif qla2xxx scsi_transport_fc scsi_tgt sr_mod cdrom hpsa(U) pata_acpi ata_generic ata_piix dm_multipath dm_mirror dm_region_hash dm_log dm_mod [last unloaded: scsi_wait_scan]<br>Pid: 53268, comm: splunkd Tainted: P        W  ---------------    2.6.32-358.23.2.el6.x86_64 #1<br>Call Trace:<br> [&lt;ffffffff8106e3e7&gt;] ? warn_slowpath_common+0x87/0xc0<br> [&lt;ffffffff8106e4d6&gt;] ? warn_slowpath_fmt+0x46/0x50<br> [&lt;ffffffff811b599c&gt;] ? __getblk+0x2c/0x2a0<br> [&lt;ffffffff812892dd&gt;] ? list_del+0x8d/0xa0<br> [&lt;ffffffff811675c5&gt;] ? cache_alloc_refill+0x145/0x240<br> [&lt;ffffffffa0135067&gt;] ? ext4_htree_store_dirent+0x37/0x140 [ext4]<br> [&lt;ffffffff81168549&gt;] ? __kmalloc+0x1a9/0x220<br> [&lt;ffffffffa0135067&gt;] ? ext4_htree_store_dirent+0x37/0x140 [ext4]<br> [&lt;ffffffffa0143ae8&gt;] ? htree_dirblock_to_tree+0x128/0x190 [ext4]<br> [&lt;ffffffffa0144498&gt;] ? ext4_htree_fill_tree+0xa8/0x260 [ext4]<br> [&lt;ffffffffa015145f&gt;] ? ext4_statfs+0xef/0x1d0 [ext4]<br> [&lt;ffffffffa0135397&gt;] ? ext4_readdir+0x127/0x700 [ext4]<br> [&lt;ffffffff811b402b&gt;] ? vfs_statfs+0x1b/0xb0<br> [&lt;ffffffff81196550&gt;] ? filldir+0x0/0xe0<br> [&lt;ffffffff811a2100&gt;] ? mntput_no_expire+0x30/0x110<br> [&lt;ffffffff8118f571&gt;] ? path_put+0x31/0x40<br> [&lt;ffffffff81196550&gt;] ? filldir+0x0/0xe0<br> [&lt;ffffffff811967d0&gt;] ? vfs_readdir+0xc0/0xe0<br> [&lt;ffffffff81196959&gt;] ? sys_getdents+0x89/0xf0<br> [&lt;ffffffff8100b072&gt;] ? system_call_fastpath+0x16/0x1b<br>---[ end trace ac0152d58b7f8f1b ]---<br>------------[ cut here ]------------<br>kernel BUG at mm/slab.c:3069!<br>invalid opcode: 0000 [#1] SMP <br>last sysfs file: /sys/devices/system/cpu/online<br>CPU 2 <br>Modules linked in: RedCastle(P)(U) iptable_filter ip_tables mptctl mptbase autofs4 sunrpc bonding 8021q garp stp llc ipv6 power_meter hpwdt hpilo tg3 microcode sg serio_raw iTCO_wdt iTCO_vendor_support ioatdma dca shpchp ext4 jbd2 mbcache dm_round_robin sd_mod crc_t10dif qla2xxx scsi_transport_fc scsi_tgt sr_mod cdrom hpsa(U) pata_acpi ata_generic ata_piix dm_multipath dm_mirror dm_region_hash dm_log dm_mod [last unloaded: scsi_wait_scan]<br><br>Pid: 53268, comm: splunkd Tainted: P        W  ---------------    2.6.32-358.23.2.el6.x86_64 #1 HP ProLiant DL380p Gen8<br>RIP: 0010:[&lt;ffffffff81167664&gt;]  [&lt;ffffffff81167664&gt;] cache_alloc_refill+0x1e4/0x240<br>RSP: 0018:ffff88010075bbd8  EFLAGS: 00010096<br>RAX: 0000000000000023 RBX: ffff88043fc40100 RCX: 0000000084328991<br>RDX: ffff880423d42000 RSI: ffff88043fc21150 RDI: ffff880100450000<br>RBP: ffff88010075bc38 R08: ffff880423d42000 R09: 00000000696d6167<br>R10: 0000000008080808 R11: 0000000000000000 R12: ffff880439cc8000<br>R13: ffff88043fc21140 R14: 0000000000000023 R15: ffff88010fde4c67<br>FS:  00007f0af69fe700(0000) GS:ffff880036640000(0000) knlGS:0000000000000000<br>CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033<br>CR2: 00007f0a91079000 CR3: 0000000838cf1000 CR4: 00000000000407e0<br>DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000<br>DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400<br>Process splunkd (pid: 53268, threadinfo ffff88010075a000, task ffff880423f9e040)<br>Stack:<br> ffff8804ca72d8c0 00000000ca72d8c0 ffff88043fc21180 000492d0a013e78e<br>&lt;d&gt; ffff88043fc21160 ffff88043fc21150 0000000000000020 0000000000000039<br>&lt;d&gt; 0000000000000010 00000000000080d0 ffff88043fc40100 ffffffffa0135067<br>Call Trace:<br> [&lt;ffffffffa0135067&gt;] ? ext4_htree_store_dirent+0x37/0x140 [ext4]<br> [&lt;ffffffff81168549&gt;] __kmalloc+0x1a9/0x220<br> [&lt;ffffffffa0135067&gt;] ext4_htree_store_dirent+0x37/0x140 [ext4]<br> [&lt;ffffffffa0143ae8&gt;] htree_dirblock_to_tree+0x128/0x190 [ext4]<br> [&lt;ffffffffa0144498&gt;] ext4_htree_fill_tree+0xa8/0x260 [ext4]<br> [&lt;ffffffffa015145f&gt;] ? ext4_statfs+0xef/0x1d0 [ext4]<br> [&lt;ffffffffa0135397&gt;] ext4_readdir+0x127/0x700 [ext4]<br> [&lt;ffffffff811b402b&gt;] ? vfs_statfs+0x1b/0xb0<br> [&lt;ffffffff81196550&gt;] ? filldir+0x0/0xe0<br> [&lt;ffffffff811a2100&gt;] ? mntput_no_expire+0x30/0x110<br> [&lt;ffffffff8118f571&gt;] ? path_put+0x31/0x40<br> [&lt;ffffffff81196550&gt;] ? filldir+0x0/0xe0<br> [&lt;ffffffff811967d0&gt;] vfs_readdir+0xc0/0xe0<br> [&lt;ffffffff81196959&gt;] sys_getdents+0x89/0xf0<br> [&lt;ffffffff8100b072&gt;] system_call_fastpath+0x16/0x1b<br>Code: 89 ff e8 b0 1c 12 00 eb 99 66 0f 1f 44 00 00 41 c7 45 60 01 00 00 00 4d 8b 7d 20 4c 39 7d c0 0f 85 f2 fe ff ff eb 84 0f 0b eb fe &lt;0f&gt; 0b 66 2e 0f 1f 84 00 00 00 00 00 eb f4 8b 55 ac 8b 75 bc 31 <br>RIP  [&lt;ffffffff81167664&gt;] cache_alloc_refill+0x1e4/0x240<br> RSP &lt;ffff88010075bbd8&gt;<br><br>AnonHugePages:    188416 kB<br><br>crash: compressed kdump: uncompress failed: -3<br>crash: compressed kdump: uncompress failed: -3<br>crash: compressed kdump: uncompress failed: -3<br>crash: read error: kernel virtual address: ffff880440033db0  type: &quot;pglist node_id&quot;<br><br><br>시스템이 cache_alloc_refill 함수를 호출중에 패닉되었으며, 올려주신 vmcore 가 분석되지 않습니다.<br>vmcore 파일이 완전하게 수집되지 않았을 가능성이 있습니다.<br><br>하지만, 시스템이 splunk 를 사용하고 있는 점, THP 기능이 기본적으로 활성화되고 있는 점,<br>시스템 패닉 이전에 list_del 작업시에 corruption 로그가 검출된 점등으로 미루어보아, 아래 문서에서 언급하는<br>커널 버그에 해당할 가능성이 높습니다.<br><br>Resolution for CVE-2015-1805, pipe: iovec overrun leading to memory corruption <br>https://access.redhat.com/solutions/1382833<br><br>따라서, 커널 업그레이드 혹은 THP 비활성화를 통해서 문제가 재발하지 않는지 확인이 필요합니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-02-22T00:09:06Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IuaIIIAZ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-02-21T23:31:55Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-02-21T23:31:55Z</b><br><br>안녕하세요.<br>01796135-vmcore 드롭박스 링크 입니다.<br>https://www.dropbox.com/s/ju736wi1iph9z49/01796135-vmcore?dl=0<br>감사합니다.<br><br><publishedDate>2017-02-21T23:31:55Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IuGvjIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-02-21T05:43:13Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-02-21T05:43:12Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>레드햇 ftp 접속이 여전히 원활하지 않다면, 구글 드롭박스에 업로드 후 링크를 알려주시면 다운로드하여 분석을 시작할 수 있습니다.<br>또한, vmcore-dmesg.txt 가 생성되었다면 파일을 첨부해주시면 해당 콜트레이스를 분석해볼 수 있습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-02-21T05:43:12Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IuGugIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-02-21T05:40:15Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-02-21T05:40:15Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>아래 문서를 통해 vmcore 파일을 전송해주실 수 있습니다.<br>파일명을 01796135-vmcore 로 변경후 업로드해주시면 저희가 파일을 검색하기 수월합니다.<br><br>Red Hat지원을 받으려고 vmcore, rhev logcollector, large sosreports, heap dumps, big log files와 같은 큰 파일을 제공하고 싶은데 어떻게 해야 합니까?<br>https://access.redhat.com/site/ko/solutions/84503<br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-02-21T05:40:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>2/20일 08:50 경 알수 없는 리부팅 현상이 발생했습니다.<br>분석요청 드립니다.sosreport 파일 첨부합니다.<br>그리고 vmcore 파일을 dropbox.redhat.com 에 ftp 접속이 원할하지 못해서 못 올렸는데<br>자세한 업로드 방법 부탁드립니다.</issue><timeFramesAndUrgency>=========================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김종휘 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-9580-6587  <br>- 메일주소 : 김종휘 &lt;jjpaper.kim@samsung.com'''&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com'''<br>=========================================================</timeFramesAndUrgency><cep>false</cep></case>