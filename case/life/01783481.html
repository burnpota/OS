======================<br><b>생성계정 : 타임게이트 (주)</b><br><b>생성날짜 : 2017-02-01T01:38:37Z</b><br><b>마지막 답변자 : Min Woo Park</b><br><b>마지막 수정 일자 : 2017-04-24T23:36:15Z</b><br><b>id : 500A000000WBH2hIAH</b><br>======================<br><br><b><font size=15>
제목  : [삼성생명] RHEL7 번들 http server 좀비 프로세스 이슈(운영중)
</font></b><br><br>======================<br><b>사전문의<br></b><br>## 고객정보 ##<br>고객사 : 삼성생명<br>고객명 : 박현우 선임<br>연락처 : 010-9104-2853<br>##<br><br>## OS ##<br>uname -a<br>Linux PIWBWL0BSL 3.10.0-327.el7.x86_64 #1 SMP Thu Oct 29 17:29:29 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux<br>##<br><br>## apache version ##<br># rpm -qf /usr/sbin/httpd<br>httpd-2.4.6-40.el7.x86_64<br>##<br><br>## 이슈 ##<br>현재 운영중인 시스템이며 이중화 구성함.<br>지난 1월 4일 이후 1호기로 업무가 유입되지 않아 2호기로만 서비스가 되는 현상임.<br>1호기로 업무가 유입이 되지 않아 error_log 및 access_log 상 특이사항은 없음.<br><br>## 고객 요청사항 ##<br>1) 좀비 프로세스 현상에 대한 명확한 원인 규명이 필요합니다.<br> <br>2) 재발방지 대책으로 조치가 필요한데 원인에 따라 조치 내용이 달라지긴 하겠지만<br>   patch나 재설치가 필요한 건지 아님 다른 방법이 있는지에 대해 답변을 듣고 싶습니다<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 2 (High)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>rpm</name></tag></tags><br><comment id="a0aA000000JKONlIAP"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-04-24T23:36:15Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-04-24T23:36:15Z</b><br><br>안녕하세요,<br><br>core 생성이 잘 된다니 다행입니다.<br>향후 core 발생 시 core 분석을 통해 원인분석이 이루어지면 되겠습니다.<br><br>그럼, 수고하세요.<br><br>감사합니다.<br><br><publishedDate>2017-04-24T23:36:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JKCqbIAH"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-04-24T09:15:27Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-24T09:15:27Z</b><br><br>안녕하세요<br>SR 답변이 늦은 점 죄송합니다. <br><br>고객사 PM기간인 지난 4월 21일(금)  가이드 주신 RHEL7 core 파일 생성 설정 관련하여  적용 후 <br><br>kill -11로 core 파일이 생성됨은 확인하였습니다. <br><br>기 말씀주신 것과 같이 현 SR 종료 후 이슈 재현 시 core의 gdb 수행결과를 별도의 SR로 진행하도록 하겠습니다. <br><br>감사합니다.<br><br><publishedDate>2017-04-24T09:15:27Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JIt6yIAD"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-04-17T01:41:57Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-04-17T01:41:57Z</b><br><br>안녕하세요,<br><br>한가지 당부의 말씀을 드리자면,<br>일반적으로 사용하는 형태 (root user로 systemd를 이용한 start/stop)가 아닌 customizing하여 사용중에 계십니다.<br>~~~~~<br>$ cat ps | grep httpd<br>epadmin   76026  0.0  0.0 325032 24492 ?        Ss   Jan18   0:34 /sbin/httpd -f /APP/ep/apache/conf/httpd.conf -k start<br>epadmin   87078  0.0  0.0 1127920 15160 ?       Sl   19:32   0:00 /sbin/httpd -f /APP/ep/apache/conf/httpd.conf -k start<br>quoadmin  87265  0.0  0.0 910296  4148 ?        Sl   19:35   0:00 /sbin/httpd -f /APP/quo/apache/conf/httpd.conf -k start<br>quoadmin 111768  0.0  0.0 238348 12908 ?        Ss    2016   2:29 /sbin/httpd -f /APP/quo/apache/conf/httpd.conf -k start<br>~~~~~<br><br>따라서, 말씀드린 내용처럼 설정을 해도 동작이 의도와 다르게 될 가능성이 있습니다.<br>개발장비에서 사전 테스트를 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-04-17T01:41:57Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JIshoIAD"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-04-17T00:04:58Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-17T00:04:57Z</b><br><br>안녕하세요<br><br>그럼 말씀하신데로 설정 후 동일현상 재현에 따른 core 파일 생성이 되면 해당 케이스는 종료하겠으며<br><br>별도 gdb 파일로 재 SR오픈하도록 하겠습니다. <br><br>감사합니다.<br><br><publishedDate>2017-04-17T00:04:57Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JIOneIAH"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-04-13T08:07:09Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-04-13T08:07:09Z</b><br><br>안녕하세요,<br><br>추가적으로, 현재 이 case를 통해 2가지 이슈가 진행되고 있습니다.<br><br>1. Apache httpd core 원인 분석<br>2. Apache httpd core 생성 안되는 이슈<br><br>'2. Apache httpd core 생성 안되는 이슈' 로 인해 아직까지 '1. Apache httpd core 원인 분석'의 원인 파악이 안되고 있습니다.<br><br>따라서 '1. Apache httpd core 원인 분석'은 현 case에서 진행하고,<br>'2. Apache httpd core 생성 안되는 이슈'에 대해서는 제가 진행한 테스트 내용을 기반으로 새로운 case에서 진행이 되었으면 합니다. <br><br>관련하여 의견 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-04-13T08:07:09Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JIH7AIAX"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-04-13T02:34:34Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-04-13T02:34:34Z</b><br><br>안녕하세요,<br><br>httpd configuration을 보면, webgate_apache24.so와 같은 3rd party 모듈을 포함해서 사용하시는 것으로 보입니다.<br>그럴 경우, core 파일을 올려주셔도 저희쪽에서 확인이 되지 않을 가능성이 큽니다.<br><br>따라서 가능하면, gdb 결과를 캡춰해서 보내주시면 감사하겠습니다.<br><br>참조 : https://access.redhat.com/articles/1469<br><br>감사합니다.<br><br><publishedDate>2017-04-13T02:34:34Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JIE6OIAX"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-04-13T02:16:13Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-13T02:16:13Z</b><br><br>확인감사합니다. <br><br>OS 인프라 팀에 요청, 적용하여 우선 동일 증상 재현 시 발생 될 core로 재 문의드리겠습니다. <br><br>혹시 core 생성 후 별도의 절차없이 core파일을 첨부드리면 되는지요?(gdb, pkgapp 등)<br><br>확인요청드립니다 .<br><br>감사합니다.<br><br><publishedDate>2017-04-13T02:16:13Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JIDn3IAH"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-04-13T02:08:45Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-04-13T02:08:45Z</b><br><br>안녕하세요, <br><br>제가 일전에 테스트한 환경은 fedora이다 보니, 결과가 좀 다르게 나온것 같습니다.<br>(당시 httpd.conf에 CoreDumpDirectory 설정 후 kill -11 $PID 시에 정상적으로 core 발생됨)<br><br>RHEL7 환경에서 추가 테스트 내용 공유합니다.<br>$ cat /etc/redhat-release <br>Red Hat Enterprise Linux Server release 7.3 (Maipo)<br><br><br>1) /etc/httpd/conf/httpd.conf<br>CoreDumpDirectory /var/apache-dump<br><br>2) /etc/sysctl.conf<br>#kernel.core_pattern = /tmp/core_%e_%p_%h_%u_%t<br><br>3) /etc/systemd/system.conf<br>DefaultLimitCORE=infinity<br><br>4) /usr/lib/systemd/system/httpd.service<br>[Service]<br>LimitCORE = infinity <br><br>5) 위 설정 후 reboot<br><br>6) ulimit -a 확인<br><br>7) core_pattern 확인<br>$ cat /proc/sys/kernel/core_pattern<br>core<br><br>8) core_pattern 변경<br>$ echo &quot;core._%e_%p_%h_%u_%t&quot; &gt; /proc/sys/kernel/core_pattern<br><br>9) apache process kill<br>$ kill -11 $PID<br>==&gt; /var/apache-dump 에 core 생성됨<br>core._httpd_3004_localhost.localdomain_48_1492048027<br><br>10) a.sh(무한루프 수행) 실행 후 core 생성 확인<br>$ kill -11 $PID (a.sh process)<br>=&gt; /tmp 에 core 생성됨<br>core._a.sh_3263_localhost.localdomain_0_1492049104<br><br><br>RHEL 7에서는 /etc/sytemd/systemc.conf의 아래 설정이 추가되어야 합니다. [1]<br>DefaultLimitCORE=infinity<br><br>그러나 해당 설정 추가 이후에도 /etc/sysctl.conf에 kernel.core_pattern 설정이 있으면 apache의 core 생성이 원하는대로 되지 않고 있습니다.<br>이 부분은 kernel 팀에 추가로 확인이 필요해 보입니다.<br><br>결론적으로 말씀드리면, 현재 설정에서 아래의 설정 추가 및 삭제 후 시스템 reboot 이 필요합니다.<br><br>1) /etc/systemd/system.conf<br>DefaultLimitCORE=infinity<br><br>2) /usr/lib/systemd/system/httpd.service<br>[Service]<br>LimitCORE = infinity <br><br>3) /etc/sysctl.conf<br>#kernel.core_pattern = /CRASH/core_%e_%p_%h_%u_%t<br><br>** REBOOT<br><br>reboot 이후 core pattern 변경을 위해서는 아래와 같이 echo 수행<br>$ echo &quot;core._%e_%p_%h_%u_%t&quot; &gt; /proc/sys/kernel/core_pattern<br><br><br>[1] https://access.redhat.com/solutions/4896<br><br>감사합니다.<br><br><publishedDate>2017-04-13T02:08:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JHsjhIAD"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-04-12T08:26:18Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-12T08:26:18Z</b><br><br>안녕하세요<br>추가확인결과 cpu가 아닌 메모리릭 이슈로 maxrequestsperchild 값을 변경하였다고합니다<br>참고하시기 바랍니다<br><br><publishedDate>2017-04-12T08:26:18Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JHrMDIA1"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-04-12T06:09:51Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-04-12T06:09:51Z</b><br><br>안녕하세요,<br><br>답변 감사드립니다.<br><br>OS에도 추가 설정이 필요한지 platform engineer 그룹에 확인 요청을 한 상태입니다.<br>답변이 오는대로 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-04-12T06:09:51Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JHrJJIA1"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-04-12T06:04:12Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-12T06:04:12Z</b><br><br>안녕하세요<br>빠른 확인 감사드리니다<br><br>요청하신 mpm설정값은 하기와 같습니다<br>##<br>ServerLimit             2560<br>StartServers            50<br>MaxClients              32000<br>ThreadLimit             1280<br>MinSpareThreads         160<br>MaxSpareThreads         240<br>ThreadsPerChild         160<br>MaxRequestsPerChild     1000<br>Mutex sem<br>##<br><br>MaxRequestsPerChild 값이 0이아닌 특정값으로 설정되어 있는 이유는 타 시스템에서 httpd 프로세스의 비정상적인 cpu사용패턴이 발생하여 권장받아 적용한 것으로 확인됩니다<br><br>마지막으로 kill -11 PID 시에도 core는 미생성되었습니다<br><br>감사합니다<br><br><publishedDate>2017-04-12T06:04:12Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JHr1fIAD"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-04-12T05:29:19Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-04-12T05:46:54Z</b><br><br>안녕하세요,<br><br>CoreDumpDirectory /var/apache-dump<br>와 같이 CoreDumpDirectory가 설정이 된 상태에서도 core 파일이 생성되지 않으신건가요?<br>$ kill -11 $PID 명령으로 테스트해도 동일하게 생성이 안되시나요?<br><br>그리고 이전에 말씀드린 mpm_worker configuration에 대한 부분은 수정이 되셨나요?<br><br>####################<br>추가적으로, 현재 httpd.conf에서 mpm_woker 설정을 보면 하기와 같이 되어 있습니다.<br>~~~~~<br>ServerLimit             256<br>StartServers            5<br>MaxClients              3200<br>ThreadLimit             128<br>MinSpareThreads         16<br>MaxSpareThreads         24<br>ThreadsPerChild         16<br>MaxRequestsPerChild     100<br>Mutex sem<br>~~~~~<br><br>MaxRequestsPerChild 값을 100으로 설정하신 특별한 이유가 있나요?<br><br>일반적으로 Red Hat 에서 제공하는 설정값은 [2]를 이용하여 사용 환경에 맞게 recommended value를 참조하실 수 있습니다.<br>MaxClients의 경우 최적값은 preform mpm 사용 시 200 * CPU core, worker mpm 사용 시 300 * CPU core 를 권고합니다.<br><br>ex) 4 core에서 worker mpm 사용 시 recommend 설정 값<br><br>&lt;IfModule mpm_worker_module&gt;<br><br>ThreadLimit         120<br><br>ServerLimit         10<br><br>StartServers        3<br><br>MinSpareThreads     5<br><br>MaxSpareThreads     20<br><br>MaxClients          1200<br><br>ThreadsPerChild     120<br><br>MaxRequestsPerChild 0<br>&lt;/IfModule&gt;<br>###############<br><br>확인을 위해 현재 상태의 configuration file에 대해 공유 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-04-12T05:29:19Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JHquPIAT"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-04-12T05:11:03Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-12T05:11:03Z</b><br><br>지난번 가이드 시 signal 11로 인한 크래쉬 시 하기의 옵션을 통해 core파일이 생성된다고 받았습니다<br>CoreDumpDirectory<br><br>업데이트드린 common_error 확인결과 4월6일 오후4시6분경 발생하여 이후 시점으로 아무런 리퀘스트가 유입안되는 것을 로그 및 ie접속으로 확인하였습니다<br><br>해당 시스템의 오픈이 임박하여 빠른 확인을 요청드립니다<br><br>Sosreport는 지난 번에 첨부하여 별도 요청하지 않았습니다<br><br>감사합니다<br><br><publishedDate>2017-04-12T05:11:03Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JHqsnIAD"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-04-12T05:07:00Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-12T05:07:00Z</b><br><br>common_error_log 중 일부<br>## 중략 ##<br>[Tue Mar 28 11:45:46.367172 2017] [mpm_worker:notice] [pid 90805:tid 139886770247744] AH00295: caught SIGTERM, shutting down<br>[Tue Mar 28 11:45:49.229403 2017] [auth_digest:notice] [pid 59039:tid 140536876890176] AH01757: generating secret for digest authentication ...<br>[Tue Mar 28 11:45:49.231821 2017] [ssl:warn] [pid 59039:tid 140536876890176] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br>[Tue Mar 28 11:45:49.658208 2017] [mpm_worker:notice] [pid 59039:tid 140536876890176] AH00292: Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.1e-fips configured -- resuming normal operations<br>[Tue Mar 28 11:45:49.658241 2017] [core:notice] [pid 59039:tid 140536876890176] AH00094: Command line: '/sbin/httpd -f /APP/ep/apache/conf/httpd.conf'<br>[Mon Apr 03 16:46:08.955978 2017] [auth_digest:notice] [pid 11890:tid 140657856374848] AH01757: generating secret for digest authentication ...<br>[Mon Apr 03 16:46:08.976027 2017] [ssl:warn] [pid 11890:tid 140657856374848] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]<br>[Mon Apr 03 16:46:08.976800 2017] [core:warn] [pid 11890:tid 140657856374848] AH00098: pid file /APP/ep/apache/pid/ep_domain.pid overwritten -- Unclean shutdown of previous Apache run?<br>[Mon Apr 03 16:46:09.602208 2017] [mpm_worker:notice] [pid 11890:tid 140657856374848] AH00292: Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.1e-fips configured -- resuming normal operations<br>[Mon Apr 03 16:46:09.602260 2017] [core:notice] [pid 11890:tid 140657856374848] AH00094: Command line: '/sbin/httpd -f /APP/ep/apache/conf/httpd.conf'<br>[Thu Apr 06 16:06:59.738082 2017] [core:notice] [pid 11890:tid 140657856374848] AH00052: child pid 80639 exit signal Segmentation fault<br><br><publishedDate>2017-04-12T05:07:00Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JHqsEIAT"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-04-12T05:06:16Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-12T05:06:16Z</b><br><br>안녕하세요<br>동일증상이 발생하였지만 core가 미생성되어 재오픈합니다<br><br>cat /etc/redhat-release<br>Red Hat Enterprise Linux Server release 7.2 (Maipo)<br>rpm -qf /sbin/httpd <br>httpd-2.4.6-40.el7.x86_64<br><br>ps -ef|grep http<br>epadmin   11890      1  0 Apr03 ?        00:15:01 /sbin/httpd -f /APP/ep/apache/conf/httpd.conf -k start<br>epadmin   80471  11890  0 Apr06 ?        00:00:08 /sbin/httpd -f /APP/ep/apache/conf/httpd.conf -k start<br>epadmin   81020  11890  0 Apr06 ?        00:00:00 /sbin/httpd -f /APP/ep/apache/conf/httpd.conf -k start<br><br>ulimit -a<br>core file size          (blocks, -c) unlimited<br>data seg size           (kbytes, -d) unlimited<br>scheduling priority             (-e) 0<br>file size               (blocks, -f) unlimited<br>pending signals                 (-i) 255505<br>max locked memory       (kbytes, -l) 64<br><br>httpd.conf<br>ServerRoot &quot;/etc/httpd&quot;<br>CoreDumpDirectory /LOG/ep/apache<br>&lt;IfModule !mpm_winnt.c&gt;<br>&lt;IfModule !mpm_netware.c&gt;<br>&lt;/IfModule&gt;<br>&lt;/IfModule&gt;<br><br><publishedDate>2017-04-12T05:06:16Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IoGhPIAV"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-02-13T02:28:36Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-02-13T02:28:36Z</b><br><br>해당 증상이 발생하지 않아 SR종료합니다. <br><br>추후 유사 케이스 발생 시 현 SR번호 참고하여 재 오픈하도록 하겠습니다. <br><br>감사합니다.<br><br><publishedDate>2017-02-13T02:28:36Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000ImiyPIAR"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-02-06T00:20:52Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-02-06T00:20:52Z</b><br><br>안녕하세요,<br><br>답변 감사드립니다.<br><br>Case Status를 &quot;Wait on Customer&quot;로 변경하도록 하겠습니다.<br>추후 변경되는 사항이 있으시면 업데이트 부탁드립니다.<br><br>그럼, 수고하세요.<br><br>감사합니다.<br><br><publishedDate>2017-02-06T00:20:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000ImiuwIAB"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-02-06T00:03:31Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-02-06T00:03:31Z</b><br><br>안녕하세요!<br>빠른 답변에 감사드립니다. <br><br>1차 가이드 주신 데로 적용 후 유사/동일 증상 발생 시 core과 함께 진행하도록 하겠습니다.<br><br>우선 심각도단계는 2-&gt;3으로 조정하였으며 1주 모니터링 후 SR 종료 판단하도록 하겠습니다. <br><br>감사합니다.<br><br><publishedDate>2017-02-06T00:03:31Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000ImSv0IAF"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-02-03T09:15:09Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-02-03T09:15:09Z</b><br><br>안녕하세요,<br><br>로컬에서 테스트를 해봤는데, 경로를 지정해주셔야 core가 떨궈집니다.<br><br>경로는 다른 경로로 설정해주셔도 되는데, epadmin 유저로 write 권한이 반드시 있어야 합니다.<br><br>$ kill -11 $PID 로 떨어지는 것을 테스트 해보실 수 있습니다.<br>(테스트는 동일 환경의 개발 장비에서 child process 에 대해 해주시기 바랍니다.)<br><br>감사합니다.<br><br><publishedDate>2017-02-03T09:15:09Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000ImSWRIA3"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-02-03T08:35:15Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-02-03T08:35:15Z</b><br><br>안녕하세요!<br><br>확인 감사드립니다. <br><br>우선 httpd.conf 하기의 옵션은 해당 core파일이 기본 경로가 아닌 특정 경로로 생성되도록 하는 옵션이 아닌지요?<br>해당 옵션이 미 설정되어 있는 경우 egmentation Fault (11) 시그널을 받았을 때 ulimit core 값이 unlimit로 되어 있어도 생성이 안되는 것인가요?<br><br>## 하기 ##<br>CoreDumpDirectory /var/apache-dump<br>##<br><br>확인요청드립니다. <br><br>감사합니다. <br><br>PS1. 보안 상 일반계정 밖에 접속이 불가능 한데 /var 경로가 아닌 일반경로 /LOG/epadmin/apache/ 경로로 설정이 가능한지 추가로 확인요청드립니다.<br><br><publishedDate>2017-02-03T08:35:15Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000ImSB9IAN"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-02-03T07:54:45Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-02-03T07:54:45Z</b><br><br>안녕하세요,<br><br>https로만 서비스가 되기때문에 ssl_access.log, ssl_error.log에만 로그가 적재되지만,<br>apache httpd 프로세스 동작에 대한 error는 error.log에 로깅이 되기 때문에 요청을 드린 것입니다.<br><br>앞서 주신 커맨트의 아래 부분이 확인하고자 한 내용입니다.<br>추가적으로 이 내용 이전에도 특이 내용이 있는지 확인이 필요하여 error.log에 대한 업로드를 요청드렸습니다.<br><br>## 로그 일부 ##<br>[Thu Jan 05 15:50:07.533593 2017] [core:notice] [pid 8671:tid 139996795627584] AH00052: child pid 51439 exit signal Segmentation fault (11)<br>[Thu Jan 05 17:46:00.954451 2017] [core:notice] [pid 8671:tid 139996795627584] AH00052: child pid 6392 exit signal Segmentation fault (11)<br>[Thu Jan 05 19:00:34.109902 2017] [core:notice] [pid 8671:tid 139996795627584] AH00052: child pid 53349 exit signal Segmentation fault (11)<br>[Wed Jan 18 09:08:19.175593 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 21024 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175634 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 18644 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175641 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 78139 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175648 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 62932 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175653 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 97898 still did not exit, sending a SIGTERM<br>....<br>##<br><br>1월 5일 19시에 마지막으로 찍힌 내용은 AH00052: child pid 51439 exit signal Segmentation fault (11) 입니다.<br><br>말씀드린 것처럼 이 메시지는 OS 로부터 httpd child process(pid xxxx)가 Segmentation Fault (11) 시그널을 받아 crash가 발생하였습니다.<br>httpd 프로세스의 memory 핸들링 과정에서 segmentation fault가 발생한 것인데, 이의 정확한 원인 분석을 위해서는 core 파일 분석이 이루어져야 합니다.<br><br>만약 1월 5일 장애시, Apache process 에 대한  core가 생성되지 않았을 경우에는 [1]을 참조하여 Apache httpd 에 대한 core 생성 설정을 해주어 향후 동일 이슈 발생 시 core 분석이 이루어져야 합니다.<br><br><br>또한, 앞서 말씀드린 mpm_worker의 설정 내용에 대해서도 참고하시기 바랍니다.<br><br>####################<br>추가적으로, 현재 httpd.conf에서 mpm_woker 설정을 보면 하기와 같이 되어 있습니다.<br>~~~~~<br>ServerLimit             256<br>StartServers            5<br>MaxClients              3200<br>ThreadLimit             128<br>MinSpareThreads         16<br>MaxSpareThreads         24<br>ThreadsPerChild         16<br>MaxRequestsPerChild     100<br>Mutex sem<br>~~~~~<br><br>MaxRequestsPerChild 값을 100으로 설정하신 특별한 이유가 있나요?<br><br>일반적으로 Red Hat 에서 제공하는 설정값은 [2]를 이용하여 사용 환경에 맞게 recommended value를 참조하실 수 있습니다.<br>MaxClients의 경우 최적값은 preform mpm 사용 시 200 * CPU core, worker mpm 사용 시 300 * CPU core 를 권고합니다.<br><br>ex) 4 core에서 worker mpm 사용 시 recommend 설정 값<br><br>&lt;IfModule mpm_worker_module&gt;<br><br>ThreadLimit         120<br><br>ServerLimit         10<br><br>StartServers        3<br><br>MinSpareThreads     5<br><br>MaxSpareThreads     20<br><br>MaxClients          1200<br><br>ThreadsPerChild     120<br><br>MaxRequestsPerChild 0<br>&lt;/IfModule&gt;<br>###############<br><br><br>[1] How do I configure a Red Hat Enterprise Linux system so that Apache can dump core files on segmentation faults? <br>https://access.redhat.com/solutions/1467<br><br>[2] https://access.redhat.com/labs/lbconfig<br><br>감사합니다.<br><br><publishedDate>2017-02-03T07:54:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000ImS6OIAV"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-02-03T07:45:24Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-02-03T07:45:24Z</b><br><br>안녕하세요!<br>보안 보안정책으로 인해 해당 문서가 암호화가 계속 걸리네요..<br><br>우선 확인결과 http 로는 업무가 요청되지 않아 별도의 로그가 없는 것으로 확인됩니다. <br><br>ssl_access.log, ssl_error.log 로만 관련 로그가 적재되니 참고하시기 바랍니다. <br><br>감사합니다.<br><br><publishedDate>2017-02-03T07:45:24Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000ImRwiIAF"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-02-03T07:25:27Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-02-03T07:25:27Z</b><br><br>안녕하세요,<br><br>access_error.zip 에 포함된 파일이 아래 내용이 맞나요?<br><br>-rw-rw-r-- 1 mpark mpark 13188  2월  3 16:06 PBWBWL01SL_accesslog.txt<br>-rw-rw-r-- 1 mpark mpark  8708  2월  3 16:06 PBWBWL01SL_errorlog.txt<br>-rw-rw-r-- 1 mpark mpark 13780  2월  3 16:06 PBWBWL02SL_accesslog.txt<br>-rw-rw-r-- 1 mpark mpark  9028  2월  3 16:06 PBWBWL02SL_errorlog.txt<br><br>해당 파일들이 열리지가 않습니다.<br>확인 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-02-03T07:25:27Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000ImRogIAF"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-02-03T07:10:05Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-02-03T07:10:05Z</b><br><br>안녕하세요<br>추가로 요청하신 파일 및 문의에 대하여 하기와 같이 전달드립니다. <br><br>## 하기 ##<br>1. Architecture 확인<br>=&gt; Client -&gt; L7 -&gt; apache -&gt; EP AP서버<br><br>2. 특정 URL 확인 요청<br>해당 URL은 무엇을 의미하는 것인가요?<br>=&gt; IAM이라는 유저그룹 정보 수신하는 곳에서 인터페이스 해주는 정보입니다.<br><br>또한 18일 재기동까지 &quot;/webService/cxf-jaxws/sli/UserGrpUserService_Port&quot; 에 대한 호출도 안된 건가요?<br>=&gt; 네, 1호기는 5일 이후 18일 재기동 시점까지 LOG가 생성되지 않았습니다. <br> <br>3. 설정파일 재 요청 / access &amp; error log<br>첨부드립니다. <br><br>감사합니다.<br><br><publishedDate>2017-02-03T07:10:05Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000ImR5aIAF"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-02-03T05:18:45Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-02-03T05:18:45Z</b><br><br>안녕하세요,<br><br>해당 에러 로그가 1월 5일 이후에 request가 유입되지 않은 원인으로 볼 수 있겠네요.<br><br>AH00052: child pid 51439 exit signal Segmentation fault (11)<br>==&gt;<br>OS 로부터 httpd child process(pid xxxx)가 Segmentation Fault (11) 시그널을 받아 crash가 발생하였습니다.<br>httpd 프로세스의 memory 핸들링 과정에서 segmentation fault가 발생한 것인데, 이의 정확한 원인 분석을 위해서는 core 파일 분석이 이루어져야 합니다.<br>Apache process 에 대한  core가 생성되지 않았을 경우에는 [1]을 참조하여 Apache httpd 에 대한 core 생성 설정을 해주어야 합니다.<br><br><br>AH00045: child process 21024 still did not exit, sending a SIGTERM<br>AH00046: child process 21024 still did not exit, sending a SIGKILL<br>==&gt;<br>Apache restart 시점에 Apache는 child process 들에 대해 SIGTERM(종료 시그널)을 보내게 됩니다.<br>그래도 종료가 되지 않으면 마지막으로 SIGKILL(강제 종료 시그널)을 보내게 됩니다.<br>위의 메시지는 Apache child process들이 비정상적으로 crash된 상태에서 18일에 restart를 시도하는 시점에 발생된 메시지로, 서비스에 크게 문제가 되는 것은 아닙니다.<br><br>1월 5일에 request가 많이 유입되거나 하지는 않았나요?<br>해당 로그 확인 시에는, 어떤 이유에 의해서 apache httpd 프로세스들이 crash가 되면서 문제가 된 것으로 확인됩니다.<br>정확한 원인 분석은 위에 말씀드린 것처럼 core 파일의 분석이 필요합니다.<br><br>추가적으로, 현재 httpd.conf에서 mpm_woker 설정을 보면 하기와 같이 되어 있습니다.<br>~~~~~<br>ServerLimit             256<br>StartServers            5<br>MaxClients              3200<br>ThreadLimit             128<br>MinSpareThreads         16<br>MaxSpareThreads         24<br>ThreadsPerChild         16<br>MaxRequestsPerChild     100<br>Mutex sem<br>~~~~~<br><br>MaxRequestsPerChild 값을 100으로 설정하신 특별한 이유가 있나요?<br><br>일반적으로 Red Hat 에서 제공하는 설정값은 [2]를 이용하여 사용 환경에 맞게 recommended value를 참조하실 수 있습니다.<br>MaxClients의 경우 최적값은 preform mpm 사용 시 200 * CPU core, worker mpm 사용 시 300 * CPU core 를 권고합니다.<br><br>ex) 4 core에서 worker mpm 사용 시 recommend 설정 값<br><br>&lt;IfModule mpm_worker_module&gt;<br><br>ThreadLimit         120<br><br>ServerLimit         10<br><br>StartServers        3<br><br>MinSpareThreads     5<br><br>MaxSpareThreads     20<br><br>MaxClients          1200<br><br>ThreadsPerChild     120<br><br>MaxRequestsPerChild 0<br>&lt;/IfModule&gt;<br><br><br>[1] How do I configure a Red Hat Enterprise Linux system so that Apache can dump core files on segmentation faults? <br>https://access.redhat.com/solutions/1467<br><br>[2] https://access.redhat.com/labs/lbconfig<br><br>감사합니다.<br><br><publishedDate>2017-02-03T05:18:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000ImQetIAF"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-02-03T03:57:27Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-02-03T03:57:27Z</b><br><br>안녕하세요!<br>요청하신 내역은 현재 고객에게 요청하여 확인 중에 있습니다. <br><br>추가로 common_error_log에 하기와 같이 발생하는 에러에 대하여 문의가 요청되었습니다. <br><br>AH00052, AH00045, AH00046 에러코드는 어떤 의미인지 확인 요청드립니다. <br><br><br>## 로그 일부 ##<br>[Thu Jan 05 15:50:07.533593 2017] [core:notice] [pid 8671:tid 139996795627584] AH00052: child pid 51439 exit signal Segmentation fault (11)<br>[Thu Jan 05 17:46:00.954451 2017] [core:notice] [pid 8671:tid 139996795627584] AH00052: child pid 6392 exit signal Segmentation fault (11)<br>[Thu Jan 05 19:00:34.109902 2017] [core:notice] [pid 8671:tid 139996795627584] AH00052: child pid 53349 exit signal Segmentation fault (11)<br>[Wed Jan 18 09:08:19.175593 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 21024 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175634 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 18644 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175641 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 78139 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175648 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 62932 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175653 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 97898 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175660 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 1949 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:19.175666 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 21961 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:21.177709 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 21024 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:21.177751 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 18644 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:21.177759 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 78139 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:21.177776 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 62932 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:21.177783 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 97898 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:21.177789 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 1949 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:21.177795 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 21961 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:23.179835 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 21024 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:23.179876 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 18644 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:23.179883 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 78139 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:23.179889 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 62932 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:23.179894 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 97898 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:23.179898 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 1949 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:23.179902 2017] [core:warn] [pid 8671:tid 139996795627584] AH00045: child process 21961 still did not exit, sending a SIGTERM<br>[Wed Jan 18 09:08:25.168629 2017] [core:error] [pid 8671:tid 139996795627584] AH00046: child process 21024 still did not exit, sending a SIGKILL<br>[Wed Jan 18 09:08:25.168696 2017] [core:error] [pid 8671:tid 139996795627584] AH00046: child process 18644 still did not exit, sending a SIGKILL<br>[Wed Jan 18 09:08:25.168744 2017] [core:error] [pid 8671:tid 139996795627584] AH00046: child process 78139 still did not exit, sending a SIGKILL<br>[Wed Jan 18 09:08:25.168782 2017] [core:error] [pid 8671:tid 139996795627584] AH00046: child process 62932 still did not exit, sending a SIGKILL<br>[Wed Jan 18 09:08:25.168814 2017] [core:error] [pid 8671:tid 139996795627584] AH00046: child process 97898 still did not exit, sending a SIGKILL<br>[Wed Jan 18 09:08:25.168832 2017] [core:error] [pid 8671:tid 139996795627584] AH00046: child process 1949 still did not exit, sending a SIGKILL<br>[Wed Jan 18 09:08:25.168875 2017] [core:error] [pid 8671:tid 139996795627584] AH00046: child process 21961 still did not exit, sending a SIGKILL<br>##<br><br>감사합니다.<br><br><publishedDate>2017-02-03T03:57:27Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000ImQ0sIAF"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-02-03T01:43:00Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-02-03T01:43:00Z</b><br><br>안녕하세요,<br><br>이슈에 대한 정확한 확인 및 분석을 위해 아래의 내용에 대한 답변 부탁드립니다.<br> <br>1. Architecture 확인<br>해당 시스템의 구조가 어떻게 되시나요?<br>client가 직접 apache에 접근하는 형태는 아닌것으로 보입니다.<br>client -&gt; A -&gt; apache -&gt; B 와 같은 형태로 봤을때, A/B에 해당하는 내용이 어떻게 되시나요?<br><br><br>2. Issue 확인<br>~~~~~<br>- http server 좀비 프로세스<br>- 1/5일까지 정상적으로 서비스가 유입되고 있다가 18일 재기동까지 http 프로세스는 기동되어 있으나 유입되지 않아<br>~~~~~<br><br>httpd 프로세스가 좀비 프로세스(defunct)가 되신 것을 확인하신건가요?<br>sosreport를 확인한 결과, /APP/ep/apache 와 /APP/quo/apache 2개의 apache가 구동되는 것으로 보입니다.<br>2개 apache 모두 httpd 프로세스가 defunct가 되었나요?<br><br>ssl_access_ep_log_2017_01_05 로그를 보면, 05/Jan/2017:14:42:00까지는 일반적인 request 처리가 된 것으로 보입니다.<br>이후 05/Jan/2017:14:54:15부터 05/Jan/2017:19:00:33까지는 &quot;/webService/cxf-jaxws/sli/UserGrpUserService_Port&quot; 만 처리가 된 것으로 확인됩니다.<br>해당 URL은 무엇을 의미하는 것인가요?<br>또한 18일 재기동까지 &quot;/webService/cxf-jaxws/sli/UserGrpUserService_Port&quot; 에 대한 호출도 안된 건가요?<br><br>~~~~~<br>100.1.14.61 - unknown [05/Jan/2017:14:42:00 +0900] 0 &quot;POST /portal/EP/dataService.do HTTP/1.1&quot; 200 1046 &quot;https://ep.ap.p.samsunglife.kr:8443/irj/servlet/prt/portal/prtroot/request.Dispatcher&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko&quot; &quot;OAMAuthnHintCookie=1; MYSAPSSO2=AjExMDAgABFwb3J0YWw6ODAwMDAxMTUzNogAE2Jhc2ljYXV0aGVudGljYXRpb24BAAo4MDAwMDExNTM2AgADMDAwAwADUEVQBAAMMjAxNzAxMDUwNTQxBQAEAAAACAoACjgwMDAwMTE1Mzb%2FAW4wggFqBgkqhkiG9w0BBwKgggFbMIIBVwIBATELMAkGBSsOAwIaBQAwCwYJKoZIhvcNAQcBMYIBNjCCATICAQEweDBsMQswCQYDVQQGEwJLUjEOMAwGA1UECRMFU2VvdWwxDDAKBgNVBAoTA0VSUDEQMA4GA1UEBxMHSnVuZy1ndTEfMB0GA1UECxMWU2Ftc3VuZyBMaWZlIEluc3VyYW5jZTEMMAoGA1UEAxMDUEVQAggKIBYIFgIIFDAJBgUrDgMCGgUAoF0wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMTcwMTA1MDU0MTQ0WjAjBgkqhkiG9w0BCQQxFgQUF2u4br%2FqXOvLQovR3Y6u9lPGgbwwCQYHKoZIzjgEAwQ!MDwCHH4H2CV54oHdyHJvmj2Se22KBFejcovZe3HnCmkCHF%2F7EojQJnuRcuFTa%2F0wj8eZot0VHjhyjPQVMIs%3D; OAMRequestContext_ep.ap.p.samsunglife.kr:8443_414e65=ANekplvnpZhAaXdHo0IBBg==; WMONID=MJbU1-Aerc4; PortalAlias=portal; saplb_*=(J2EE1960420)1960450; JSESSIONID=pBBUNahZS0mJ0yNfBNU0pKBVsyVtWQEC6h0A_SAPZWm0lcOETw6GEzeBCyUTrKrU; JSESSIONMARKID=gmDVVQASCI8wdncY6lc-fblmudXnjw-yKCbQLqHQA; ROUTEID=.ep1&quot;<br>100.254.143.145 - unknown [05/Jan/2017:14:54:15 +0900] 0 &quot;POST /webService/cxf-jaxws/sli/UserGrpUserService_Port HTTP/1.0&quot; 200 109 &quot;-&quot; &quot;SAP-Messaging-com.sap.aii.af.sdk.xi/1.0505&quot; &quot;-&quot;<br>100.254.143.144 - unknown [05/Jan/2017:14:54:15 +0900] 0 &quot;POST /webService/cxf-jaxws/sli/UserGrpUserService_Port HTTP/1.0&quot; 200 109 &quot;-&quot; &quot;SAP-Messaging-com.sap.aii.af.sdk.xi/1.0505&quot; &quot;-&quot;<br>10<br>...<br>100.254.143.144 - unknown [05/Jan/2017:19:00:33 +0900] 2 &quot;POST /webService/cxf-jaxws/sli/RoleUserService_Port HTTP/1.0&quot; 200 109 &quot;-&quot; &quot;SAP-Messaging-com.sap.aii.af.sdk.xi/1.0505&quot; &quot;-&quot;<br>~~~~~<br><br><br>3. configuration<br>업로드 해주신 httpd.conf 에는 별다른 configuration이 없습니다.<br>아래와 같이 include 된 conf 파일들에 실제 configuration 이 설정되었을 것으로 생각됩니다.<br>(ssl.conf에 대한 내용이 없는 것으로 보아 아래 3개의 conf에서 또다른 include를 사용하는 것으로 예상됨)<br><br>~~~~~<br>Include /APP/ep/apache/conf/loadModule.conf<br>Include /APP/ep/apache/conf/ep.httpd.conf<br>Include  &quot;/APP/ep/apache/conf/webgate.conf&quot; <br>~~~~~<br><br>/APP/ep/apache/conf 디렉토리에 있는 *.conf 파일들을 모두 업로드 부탁드립니다.<br><br><br>4. access &amp; error log<br>$ ls -rlt /LOG/ep/apache/error<br>$ ls -rlt /LOG/ep/apache/access<br>위의 결과와 ssl_access, ssl_error 외 1월 5일자의 일반 access, error 로그 업로드도 부탁드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-02-03T01:43:00Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000ImPU6IAN"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-02-03T00:15:52Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-02-03T00:15:52Z</b><br><br>안녕하세요,<br><br>답변 감사드립니다.<br>확인 후 업데이트 하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-02-03T00:15:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000ImFlmIAF"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-02-02T12:28:37Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-02-02T12:28:37Z</b><br><br>안녕하세요<br>요청하신 sosreport 및 설정파일, access&amp;error 로그 파일을 첨부드립니다. <br><br>기 말씀드린 것과 같이 1/5일까지 정상적으로 서비스가 유입되고 있다가 18일 재기동까지 http 프로세스는 기동되어 있으나 유입되지않아<br>로그상 특이사항은 없는 것으로 확인됩니다. <br><br>확인바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-02-02T12:28:37Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IlmRgIAJ"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-02-01T02:17:01Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-02-01T02:17:01Z</b><br><br>안녕하세요,<br><br>앞서 요청드린 httpd config &amp; log 파일과 더불어<br>OS의 현 상태 확인을 위해 sosreport도 첨부 부탁드립니다.<br><br>sosreport 생성 방법은 [1]을 참조하실 수 있습니다.<br><br>[1] https://access.redhat.com/ko/solutions/82033<br><br>감사합니다. <br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Customer Experience and Engagement (CEE)<br><br><publishedDate>2017-02-01T02:17:01Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IlmNWIAZ"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-02-01T02:07:32Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-02-01T02:07:31Z</b><br><br>안녕하세요,  <br>  <br>Red Hat Global Support Services를 이용해주셔서 감사합니다.  <br>저는 박민우라고 하고 앞으로 이 케이스를 담당하게 되었습니다.<br><br>httpd.conf를 비롯한 사용하시는 모든 configuration 파일들과 access / error 로그 업로드 부탁드립니다.<br>  <br>감사합니다. <br>Minwoo Park  <br>Senior Technical Support Engineer  <br>Customer Experience and Engagement (CEE)<br><br><publishedDate>2017-02-01T02:07:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>