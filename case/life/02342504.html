======================<br><b>생성계정 : JIMIN KIM</b><br><b>생성날짜 : 2019-03-20T10:09:36Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2019-04-10T04:05:24Z</b><br><b>id : 5002K00000dPjyeQAC</b><br>======================<br><br><b><font size=15>
제목  : kernel update 관련 install 되는 부분과 update 되는 부분 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>kernel update 관련해서 문의드리려고 합니다.<br><br>아래와 같이 3.10.0-957에서 3.10.0-957.5.1로 업데이트를 진행하려고 합니다.<br>아래와 같이 update 관련 파일 확인 후 update 수행 시 kernel 과 kernel-devel 부분은 install이되고<br>나머지 부분은 update가 수행이되는데요.<br><br>kernel 부분은 새로 install이 되어 혹시라도 문제 시 이전 버전으로 돌아가기 위해서 install되는 것으로 알고있는데<br>kernel-devel 부분도 install이 필요한지 문의드립니다.<br><br>■ yum list installed kernel-* 통한 kernel update에 필요한 rpm 확인<br>root@KERNEL_UPDATE_TEST / # yum list installed kernel-*<br>Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager<br>This system is not registered with an entitlement server. You can use subscription-manager to register.<br>Installed Packages<br>kernel.x86_64                                                         3.10.0-957.el7                                              @anaconda/7.6<br>kernel-devel.x86_64                                                   3.10.0-957.el7                                              @anaconda/7.6<br>kernel-headers.x86_64                                                 3.10.0-957.el7                                              @anaconda/7.6<br>kernel-tools.x86_64                                                   3.10.0-957.el7                                              @anaconda/7.6<br>kernel-tools-libs.x86_64                                              3.10.0-957.el7                                              @anaconda/7.6<br><br><br>■ kernel update에 필요한 rpm 통해 repo 구성 후 yum update 수행 결과<br>root@KERNEL_UPDATE_TEST / # yum update<br>Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager<br>This system is not registered with an entitlement server. You can use subscription-manager to register.<br>Resolving Dependencies<br>--&gt; Running transaction check<br>---&gt; Package kernel.x86_64 0:3.10.0-957.5.1.el7 will be installed<br>---&gt; Package kernel-devel.x86_64 0:3.10.0-957.5.1.el7 will be installed<br>---&gt; Package kernel-headers.x86_64 0:3.10.0-957.el7 will be updated<br>---&gt; Package kernel-headers.x86_64 0:3.10.0-957.5.1.el7 will be an update<br>---&gt; Package kernel-tools.x86_64 0:3.10.0-957.el7 will be updated<br>---&gt; Package kernel-tools.x86_64 0:3.10.0-957.5.1.el7 will be an update<br>---&gt; Package kernel-tools-libs.x86_64 0:3.10.0-957.el7 will be updated<br>---&gt; Package kernel-tools-libs.x86_64 0:3.10.0-957.5.1.el7 will be an update<br>--&gt; Finished Dependency Resolution<br><br>Dependencies Resolved<br><br>===============================================================================================================================================<br> Package                            Arch                    Version                               Repository                              Size<br>===============================================================================================================================================<br>Installing:<br> kernel                             x86_64                  3.10.0-957.5.1.el7                    kernel-3.10.0-957.5.1                   48 M<br> kernel-devel                       x86_64                  3.10.0-957.5.1.el7                    kernel-3.10.0-957.5.1                   17 M<br>Updating:<br> kernel-headers                     x86_64                  3.10.0-957.5.1.el7                    kernel-3.10.0-957.5.1                  8.0 M<br> kernel-tools                       x86_64                  3.10.0-957.5.1.el7                    kernel-3.10.0-957.5.1                  7.1 M<br> kernel-tools-libs                  x86_64                  3.10.0-957.5.1.el7                    kernel-3.10.0-957.5.1                  7.0 M<br><br>Transaction Summary<br>===============================================================================================================================================<br>Install  2 Packages<br>Upgrade  3 Packages<br><br>Total download size: 87 M<br>Is this ok [y/d/N]: N<br>Exiting on user command<br>Your transaction was saved, rerun it with:<br> yum load-transaction /tmp/yum_save_tx.2019-03-20.18-14.37Lj_e.yumtx<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.4</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>KERNEL_UPDATE_TEST</hostname><br><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-03-25T08:45:41Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-03-25T08:45:41Z</b><br><br>안녕하세요. Red Hat 김마현 차장입니다.<br><br>피드백 감사드립니다.<br>업데이트 작업 후 추가 문의 사항 있으시면 업데이트 부탁드립니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-03-25T08:45:41Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PmtlOQAR"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-03-25T00:01:11Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-03-25T00:01:11Z</b><br><br>안녕하세요<br><br>SDS 김지민 프로입니다.<br><br>확인해 주신 방법으로 systemtap 서비스를 확인하고<br>아래와 같이 삭제하였습니다.<br><br>root@KERNEL_UPDATE_TEST /root # ps aux | grep [s]tap<br>root@KERNEL_UPDATE_TEST /root # yum remove kernel-devel*<br>Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager<br>This system is not registered with an entitlement server. You can use subscription-manager to register.<br>Resolving Dependencies<br>--&gt; Running transaction check<br>---&gt; Package kernel-devel.x86_64 0:3.10.0-957.el7 will be erased<br>--&gt; Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-3.3-3.el7.x86_64<br>--&gt; Running transaction check<br>---&gt; Package systemtap-devel.x86_64 0:3.3-3.el7 will be erased<br>--&gt; Processing Dependency: systemtap-devel = 3.3-3.el7 for package: systemtap-3.3-3.el7.x86_64<br>--&gt; Running transaction check<br>---&gt; Package systemtap.x86_64 0:3.3-3.el7 will be erased<br>--&gt; Finished Dependency Resolution<br>kernel-3.10.0-957.5.1                                                      | 2.9 kB  00:00:00<br><br>Dependencies Resolved<br><br>==================================================================================================<br> Package                  Arch            Version                    Repository              Size<br>==================================================================================================<br>Removing:<br> kernel-devel             x86_64          3.10.0-957.el7             @anaconda/7.6           37 M<br>Removing for dependencies:<br> systemtap                x86_64          3.3-3.el7                  @anaconda/7.6          202 k<br> systemtap-devel          x86_64          3.3-3.el7                  @anaconda/7.6          7.5 M<br><br>Transaction Summary<br>==================================================================================================<br>Remove  1 Package (+2 Dependent packages)<br><br>Installed size: 45 M<br>Is this ok [y/N]: y<br>Downloading packages:<br>Running transaction check<br>Running transaction test<br>Transaction test succeeded<br>Running transaction<br>  Erasing    : systemtap-3.3-3.el7.x86_64                                                     1/3<br>  Erasing    : systemtap-devel-3.3-3.el7.x86_64                                               2/3<br>  Erasing    : kernel-devel-3.10.0-957.el7.x86_64                                             3/3<br>  Verifying  : kernel-devel-3.10.0-957.el7.x86_64                                             1/3<br>  Verifying  : systemtap-devel-3.3-3.el7.x86_64                                               2/3<br>  Verifying  : systemtap-3.3-3.el7.x86_64                                                     3/3<br><br>Removed:<br>  kernel-devel.x86_64 0:3.10.0-957.el7<br><br>Dependency Removed:<br>  systemtap.x86_64 0:3.3-3.el7                 systemtap-devel.x86_64 0:3.3-3.el7<br><br>Complete!<br><br>삭제 후 커널 업데이트를 진행해보겠습니다.<br><br>감사합니다.<br><br><publishedDate>2019-03-25T00:01:11Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000PmsXOQAZ"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-03-24T13:12:16Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-03-24T22:41:42Z</b><br><br>안녕하세요. Red Hat 김마현 차장입니다.<br><br>문의주신 내용에 대해 안내해 드리겠습니다.<br><br>보내주신 코멘트의 내용 중 kernel-devel 패키지와 함께 삭제되는 systemtap 패키지에 대해 먼저 안내해 드리겠습니다.<br><br>systemtap은 실행 중인 Linux 커널의 커널 모듈을 로드하여 요청된 시스템 추적/검사 기능을 수행하며,<br>커널의 특정 정보들을 수집해서 디버깅하거나 문제를 해결할 때 사용하는 툴입니다.<br><br>만약 systemtap 스크립트를 구동중이라면 아래와 같은 프로세스들이 확인될 것입니다.<br># ps aux | grep [s]tap<br>root     19777  0.5  7.2 355916 130616 pts/0   S    21:43   0:00 stap -g explotingscript.stp<br>root     19991  0.0  0.0 123600   812 pts/0    Sl   21:43   0:00 /usr/libexec/systemtap/stapio -R stap_2daad875ee3474776fc3fd79a905d59_19991<br>root     20011  0.6  1.6 333120 29896 pts/0    S+   21:44   0:00 stap thread-times.stp<br>root     20012  0.0  0.0 123600   816 pts/0    Sl+  21:44   0:00 /usr/libexec/systemtap/stapio -R stap_5807228f7ae044bb7d92b7e888fecce_20012<br>-&gt; 위는 2개의 stp 스크립트가 구동 중인 현황을 보여주고 있습니다.<br><br>하지만 확인 시 아래와 같이 아무런 정보도 나오지 않는다면 해당 systemtap 스크립트가 구동 중이지 않는 것입니다.<br># ps aux | grep [s]tap<br><br>해당 서버에서 확인하시면 systemtap 이 구동 중이지 않을 확률이 높을 것으로 보입니다.<br>사용 중이지 않는다면 kernel-devel 및 의존되는 systemtap 관련 패키지를 함께 삭제해도 무방할 것으로 판단됩니다.<br>참고하셔서 삭제하시면 되겠습니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-03-24T13:12:16Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000Pmrj8QAB"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-03-24T04:38:57Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-03-24T04:38:57Z</b><br><br>안녕하세요<br><br>예시에서 문의드린 서버는 실제 test 및 VM template 구성을 위한 서버인데요.<br><br>일반적으로 운영되는 서버를 만들기 위한 template인데 <br>그럼 kernel-devel 패키지의 경우 사용을 안하기 때문에 삭제를 진행하려고 하는데요.<br><br>아래와 같이 삭제 후 rebooting 후 update를 진행하면 될지 문의드립니다.<br><br>root@KERNEL_UPDATE_TEST /root # yum remove kernel-devel<br>Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager<br>This system is not registered with an entitlement server. You can use subscription-manager to register.<br>Resolving Dependencies<br>--&gt; Running transaction check<br>---&gt; Package kernel-devel.x86_64 0:3.10.0-957.el7 will be erased<br>--&gt; Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-3.3-3.el7.x86_64<br>--&gt; Running transaction check<br>---&gt; Package systemtap-devel.x86_64 0:3.3-3.el7 will be erased<br>--&gt; Processing Dependency: systemtap-devel = 3.3-3.el7 for package: systemtap-3.3-3.el7.x86_64<br>--&gt; Running transaction check<br>---&gt; Package systemtap.x86_64 0:3.3-3.el7 will be erased<br>--&gt; Finished Dependency Resolution<br><br>Dependencies Resolved<br><br>==================================================================================================<br> Package                  Arch            Version                    Repository              Size<br>==================================================================================================<br>Removing:<br> kernel-devel             x86_64          3.10.0-957.el7             @anaconda/7.6           37 M<br>Removing for dependencies:<br> systemtap                x86_64          3.3-3.el7                  @anaconda/7.6          202 k<br> systemtap-devel          x86_64          3.3-3.el7                  @anaconda/7.6          7.5 M<br><br>Transaction Summary<br>==================================================================================================<br>Remove  1 Package (+2 Dependent packages)<br><br>Installed size: 45 M<br>Is this ok [y/N]:<br><br>감사합니다.<br><br><publishedDate>2019-03-24T04:38:57Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000PZyAjQAL"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-03-22T00:55:06Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-03-22T00:55:06Z</b><br><br>안녕하세요. Red Hat 김마현 차장입니다.<br><br>문의 주신 내용에 대해 안내해 드리겠습니다.<br><br>케이스 상에 올려주신대로 해당 서버는 kernel-devel 패키지가 이미 설치되어 있는것으로 확인됩니다.<br><br>root@KERNEL_UPDATE_TEST / # yum list installed kernel-*<br>Loaded plugins: langpacks, product-id, search-disabled-repos, subscription-manager<br>This system is not registered with an entitlement server. You can use subscription-manager to register.<br>Installed Packages<br>kernel.x86_64                                                         3.10.0-957.el7                                              @anaconda/7.6<br>kernel-devel.x86_64                                                   3.10.0-957.el7                                              @anaconda/7.6  --&gt;  ** kernel-devel<br>kernel-headers.x86_64                                                 3.10.0-957.el7                                              @anaconda/7.6<br>kernel-tools.x86_64                                                   3.10.0-957.el7                                              @anaconda/7.6<br>kernel-tools-libs.x86_64                                              3.10.0-957.el7                                              @anaconda/7.6<br><br>따라서 yum update 수행 시 repository 서버에 kernel 버전과 동일한 버전의 kernel-devel 이 있다면 함께 install이 될 것입니다.<br><br># rpm -qi kernel-devel | grep Description -A2<br>Description :<br>This package provides kernel headers and makefiles sufficient to build modules against the kernel package.<br><br>위 설명처럼 kernel-devel 패키지는 커널 모듈 빌드를 위한 패키지입니다.<br>새로운 커널 버전에 맞춰 kernel-devel 패키지 install 하는 것에 대한 여부는 커널 모듈 빌드 여부에 따라 달라집니다.<br>운영환경에서는 일반적으로 필요한 패키지는 아니지만 정확한 사용 유무를 판단하기 힘들다면 새로운 커널 버전에 맞춰 install 하기 바랍니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-03-22T00:55:06Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PZhElQAL"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-03-21T04:11:03Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-03-21T04:11:03Z</b><br><br>안녕하세요. Red Hat 김마현 차장입니다.<br><br>문의주신 내용 확인하여 업데이트 하도록 하겠습니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-03-21T04:11:03Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>