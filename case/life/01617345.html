======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2016-04-14T04:03:21Z</b><br><b>마지막 답변자 : Jack, Jong Young Moon</b><br><b>마지막 수정 일자 : 2016-04-26T01:23:44Z</b><br><b>id : 500A000000U2OHcIAN</b><br>======================<br><br><b><font size=15>
제목  : [장애문의] 서버 리부팅관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br>14일 새벽5시 50분~6시 경 서버의 갑작스러운 리부팅이 있어서 원인파악 요청드립니다.<br><br>추가적으로 현재 kdump가 raw로 셋팅이 되어 있는데<br>makekdumpfile 을 하면 <br>root@SLPCSSDL01 /CRASH # makedumpfile -R vmcore_20160414 &lt; /dev/vg1/DUMP<br>read_start_flat_header: Can't get signature of flattened format.<br>rearrange_dumpdata: Can't get header of flattened format.<br><br>아래와 같은 메시지를 뿌린후 파일시스템에 떨궈지지 않습니다.<br>어떤 문제로 위와 같은 문제가 발생하는지요..?<br><br>답변 기다리겠습니다.<br>감사합니다.<br><br><br>makedumpfile Failed.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김경희 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-3049-1440 <br>- 메일주소 : 김경희 &lt;khsds.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 송기호(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01036209917<br>- 메일주소 : kh.song@time-gate.com<br>==============================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000GxxZ0IAJ"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-04-26T01:23:43Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-04-26T01:23:43Z</b><br><br>안녕하세요.<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>먼저, 케이스를 직접 종료처리해주셔서 정말 감사드립니다. 본 케이스는 원하시는 내용에 대해서 답변을 드린것으로 간주하고 처리완료하도록 하겠습니다.<br><br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.<br>케이스가 처리 완료되면 고객 설문조사 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br><br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-26T01:23:43Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GxlPKIAZ"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-04-25T05:42:49Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-04-25T05:42:49Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>kernel-2.6.32-504.23.4.el6.x86_64 커널버전은 EUS 서브스크립션이 보유하고 계시지 않으면 다운로드 하실 수 없으실것입니다.<br>다만, 말씀하신 이슈는 RHEL 6.7GA 버전에서 패치가 제공되기 때문에 이전에 말씀드렸던 아래의 커널로 업데이트하시면 될것입니다.<br><br>그리고, kernel-2.6.32-504.el6.x86_64 의 버그와 관련된 문서는 아래의 참고문서 [2],[3] 에서 진행이 되었고, 이 내용들은<br>이 내부문서 규정상 공개되지 않을수도 있다는점을 말씀드립니다.<br><br>마지막으로, kernel 업데이트시 필요한 파일들은 아래의 ㄱ. , ㄴ. 에 모두 나열이 되어 있으며, 이 중에서 *.src.rpm 과 *debuginfo*.rpm<br>패키지를 제외한 나머지를 받으셔서 업데이트를 진행하시면 됩니다.<br><br>ㄱ. kernel 다운로드 URL<br>- https://access.redhat.com/downloads/content/rhel---6/x86_64/168/kernel/2.6.32-573.el6/x86_64/fd431d51/package<br><br>ㄴ. kernel-firmware 다운로드 URL<br>- https://access.redhat.com/downloads/content/rhel---6/x86_64/168/kernel-firmware/2.6.32-573.el6/noarch/fd431d51/package<br><br><br>* Note - 커널 업데이트를 하는 방법은 아래의 참고문서[4]를 활용하시길 바랍니다.<br><br><br>[ 참고문서 ]<br><br>[1] Upgrading to RHEL 6.6, 7.0 or 7.1 may result in an application, using futexes, appearing to stall in futex_wait()<br>- https://access.redhat.com/solutions/1386323<br><br>[2] RHEL 6.7<br>- https://bugzilla.redhat.com/show_bug.cgi?id=1167405<br><br>[3] RHEL 6.6 z-stream<br>https://bugzilla.redhat.com/show_bug.cgi?id=1192107<br><br>[4] How to update/upgrade the Red Hat Enterprise Linux kernel?<br>- https://access.redhat.com/solutions/20366<br><br><br>감사합니다.<br><br><publishedDate>2016-04-25T05:42:49Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GxlG4IAJ"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-04-25T05:16:01Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-04-25T05:16:01Z</b><br><br>안녕하세요<br>답변 감사합니다.<br>해당 문제는 <br>서버의 갑작스런 리부팅의 원인을 판단 하고자 하는것입니다.<br>그러나 kdump설정문제로 인해 crashdump 정상적으로 발생되지 않고 sosreport상으로는 정확한 문제가 판단되지 않았습니다.<br><br>시스템 쪽에서 정확한 문제가 판단되지 않은 상태에서<br>oracle에서<br>해당 커널 버전의 버그(kernel-2.6.32-504.el6.x86_64 )로 판단해<br>kernel-2.6.32-504.23.4.el6.x86_64 로 업데이트를 진행하자는 판단을 내려서<br>진행하기로 했습니다.<br><br>고객쪽에서 궁금한 점은<br>kernel-2.6.32-504.el6.x86_64  버전에서 이러한 버그가 있는지 있다면 관련된 문서가 있는지 알려달라고합니다.<br><br>추가적으로<br>kernel-2.6.32-504.el6.x86_64  에서 kernel-2.6.32-504.23.4.el6.x86_64  업데이트를 진행시<br>필요한 파일을 알고 싶습니다.<br>kernel-2.6.32-504.23.4.el6.x86_64  만 있으면되는것인지 아니면 header ,firmware ,devel 등을 파일이 필요한지<br>어떠한 부분은 update 를 어떠한 부분은 upgrade의 workaround를 알고 싶습니다.<br><br>감사합니다~<br><br><publishedDate>2016-04-25T05:16:01Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Gxl9mIAB"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-04-25T04:52:50Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-04-25T04:57:55Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>오라클에서 피드백을 주신 내용은 일리가 있는 내용이긴 합니다만, 올려주신 sosreport 에서 전혀 확인을 하지 못했고,<br>이는 vmcore 분석없이는 이 이슈가 참고문서[1]에 해당이 된다고 말하기가 어렵습니다.<br><br>그럼에도 커널 업데이트를 고려하신다면 아래의 URL 에서 다운로드가 가능합니다.<br><br>* 커널 다운로드 URL<br>- https://access.redhat.com/downloads/content/rhel---6/x86_64/168/kernel/2.6.32-573.el6/x86_64/fd431d51/package<br><br>[ Note ]<br><br>혹시 본 케이스의 방향이 kdump 비정상 실행으로 인한 vmcore 미생성의 원인분석 및 해결로 보아야 하는지,<br>혹은 시스템이 리부팅이 된 원인분석 및 해결방안으로 진행을 해야하는지 확인 부탁드립니다.<br><br><br>[ 참고문서 ]<br><br>[1] Upgrading to RHEL 6.6, 7.0 or 7.1 may result in an application, using futexes, appearing to stall in futex_wait()<br>- https://access.redhat.com/solutions/1386323<br><br><br>감사합니다.<br><br><publishedDate>2016-04-25T04:52:49Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GezrrIAB"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-04-22T09:12:46Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-04-22T09:12:46Z</b><br><br>추가적으로 kernel update를 진행할 시<br>다운받아야 하는 RPM도 알려주시기를 바랍니다.<br>감사합니다.<br><br><publishedDate>2016-04-22T09:12:46Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GezpMIAR"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-04-22T09:00:47Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-04-22T09:00:46Z</b><br><br>안녕하세요.<br>답변감사합니다.<br>해당 리부팅에 대해서 oracle쪽에도 문의를 하였는데 아래와 같은 답변을 받았습니다.<br>메일 전문을 보내드립니다<br>-----------------------------------------------------<br>안녕하세요. 오라클 상주기술지원 김상만입니다.<br> <br>Kernel update 와 관련하여 몇 가지 참고사항을 공유드립니다.<br> <br>Kernel update 가 critical 한 작업이어서 어려운 상황인 것은 알지만 아래의 내용들을 참고해 볼 때,<br>아래의 해당되는 이슈들이 발생할 수 있는 가능성이 충분히 있어보여서 적용을 부탁드립니다.<br> <br>오픈 전까지 작업을 할 수 있는 시점이 차주 밖에는 없기 때문에, 월요일 패치 적용시에 적용을 하는 것이<br>어느 정도 모니터링 기간도 가질 수가 있어서 가장 좋을 것 같습니다.<br> <br>그리고, PCSS, PTAS 를 제외한 6.6 버전은 모두 2.6.32-504.23.4.el6.x86_64 버전을 사용하고 있기 때문에,<br>2.6.32-504.23.4.el6.x86_64 버전을 사용함에 있어서 어느 정도 안정성은 확보되지 않았나 생각됩니다.<br> <br> <br>1) Linux 1386323 와 관련하여 진행된 Bug Case #23094523<br>실제로 해당 고객은 Linux 1386323 defect 에 의해 Oracle Grid 간에 통신이 정상적으로 이루어지지 않아서,<br>Oracle Grid 가 결국 노드 reboot 까지 발생시킴<br> <br>Bug 23094523 : NODE EVICTION DUE TO LMBH TERMINATION WITH ERROR 29770<br>Status 11 - Code/Hardware Bug (Response/Resolution)<br>********<br>Also ACS team Expert Matteo has identified a OS kernel defect that can cause <br>hang in clusterware with below comments:<br>.<br>Customer is using kernel 2.6.32.504 RedHat 6.6 which is affected by this bug  <br>https://access.redhat.com/solutions/1386323<br>this problem impacts multithread application like our crs. Searching <br>information about this issue<br>I've came across this description &quot;he impact of this kernel bug is very <br>simple: user processes can deadlock and hang in seemingly impossible <br>situations. A futex wait call (and anything using a futex wait) can stay <br>blocked forever, even though it had been properly woken up by someone.&quot;<br>This could be the cause of the cssd hangs that lead to node reboot. In my <br>opinion we should suggest ct to upgrade 2.6.32.504.16 which fixes this issue<br> <br> <br>2) Redhat 에서의 Bug Report<br>Upgrading to RHEL 6.6, 7.0 or 7.1 may result in an application, using futexes, appearing to stall in futex_wait()<br> SOLUTION VERIFIED - Updated February 23 2016 at 5:52 PM - <br>English <br>Issue<br>•<br>Softlockup with pThreads, Mutexes on Haswell CPUs and PowerPC CPUs (but may not be limited to just these) <br>•<br>After upgrading to Red Hat Enterprise Linux 6.6 (specifically 2.6.32-504 up to and including 2.6.32-504.12.2) may result in an application hang. <br>•<br>Cannot get a thread dump using kill -3. <br>•<br>Running kill -3 doesn't respond. <br>•<br>Inspecting /proc/ shows all threads are stuck waiting on a futex. For example: <br>Raw<br>Where nnnn = the PID # of the parent task in question<br>             mmmm = the PID # of the thread task<br>             Note. Under the parent /proc/nnnn/task structure you will see the PID's of all of the threads including the parents number repeated.<br><br>cat /proc/nnnn/task/mmmm/stack<br>[&lt;ffffffff810b226a&gt;] futex_wait_queue_me+0xba/0xf0<br>[&lt;ffffffff810b33a0&gt;] futex_wait+0x1c0/0x310<br>[&lt;ffffffff810b4c91&gt;] do_futex+0x121/0xae0<br>[&lt;ffffffff810b56cb&gt;] sys_futex+0x7b/0x170<br>[&lt;ffffffff8100b072&gt;] system_call_fastpath+0x16/0x1b<br>[&lt;ffffffffffffffff&gt;] 0xffffffffffffffff<br> <br> <br>3) 현재 PCSS1, PCSS2 에서 과도하게 CPU 를 차지하고 있는 Process 의 stack 들 확인<br> <br>rit00097@SLPCSSDL01 /home/rit00097 # top<br>top - 17:11:47 up 8 days, 11:18,  3 users,  load average: 12.42, 12.30, 12.22<br>Tasks: 1044 total,   1 running, 1043 sleeping,   0 stopped,   0 zombie<br>Cpu(s): 50.6%us,  0.6%sy,  0.0%ni, 48.5%id,  0.3%wa,  0.0%hi,  0.0%si,  0.0%st<br>Mem:  396794516k total, 158333936k used, 238460580k free,  1360072k buffers<br>Swap: 33554428k total,        0k used, 33554428k free, 142983672k cached<br>  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND<br>30002 root      20   0 3261m 198m  13m S 1642.3  0.1 144742:17 dsm_om_connsvcd &lt;======= 1642% 를 차지함<br>=&gt; stack 조회, thread 들이 아래와 같이 futex 관련 call 을 수행하고 있음<br>[&lt;ffffffff811a58f9&gt;] poll_schedule_timeout+0x39/0x60<br>[&lt;ffffffff811a6b8b&gt;] do_select+0x6bb/0x7c0<br>[&lt;ffffffff811a6e1a&gt;] core_sys_select+0x18a/0x2c0<br>[&lt;ffffffff811a71a7&gt;] sys_select+0x47/0x110<br>[&lt;ffffffff8100b072&gt;] system_call_fastpath+0x16/0x1b<br>[&lt;ffffffffffffffff&gt;] 0xffffffffffffffff<br>[&lt;ffffffff810b226a&gt;] futex_wait_queue_me+0xba/0xf0<br>[&lt;ffffffff810b33a0&gt;] futex_wait+0x1c0/0x310<br>[&lt;ffffffff810b4c91&gt;] do_futex+0x121/0xae0<br>[&lt;ffffffff810b56cb&gt;] sys_futex+0x7b/0x170<br>[&lt;ffffffff8100b072&gt;] system_call_fastpath+0x16/0x1b<br> <br>rit00097@SLPCSSDL02 /home/rit00097 # top<br>top - 17:11:59 up 132 days, 23:57,  1 user,  load average: 1.19, 1.15, 1.10<br>Tasks: 961 total,   1 running, 960 sleeping,   0 stopped,   0 zombie<br>Cpu(s): 47.1%us,  0.5%sy,  0.0%ni, 52.4%id,  0.1%wa,  0.0%hi,  0.0%si,  0.0%st<br>Mem:  396794516k total, 116820228k used, 279974288k free,  1239316k buffers<br>Swap: 33554428k total,        0k used, 33554428k free, 100443312k cached<br>  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND<br>25137 root      20   0 3952m 236m 9884 S 1338.1  0.1  31922,31 java &lt;======= 1338% 를 차지함<br>=&gt; stack 조회, thread 들이 아래와 같이 futex 관련 call 을 수행하고 있음<br>[&lt;ffffffff810b226a&gt;] futex_wait_queue_me+0xba/0xf0<br>[&lt;ffffffff810b33a0&gt;] futex_wait+0x1c0/0x310<br>[&lt;ffffffff810b4c91&gt;] do_futex+0x121/0xae0<br>[&lt;ffffffff810b56cb&gt;] sys_futex+0x7b/0x170<br>[&lt;ffffffff8100b072&gt;] system_call_fastpath+0x16/0x1b<br>[&lt;ffffffffffffffff&gt;] 0xffffffffffffffff<br>[&lt;ffffffff810b226a&gt;] futex_wait_queue_me+0xba/0xf0<br>[&lt;ffffffff810b33a0&gt;] futex_wait+0x1c0/0x310<br>[&lt;ffffffff810b4c91&gt;] do_futex+0x121/0xae0<br>[&lt;ffffffff810b56cb&gt;] sys_futex+0x7b/0x170<br>[&lt;ffffffff8100b072&gt;] system_call_fastpath+0x16/0x1b<br>[&lt;ffffffffffffffff&gt;] 0xffffffffffffffff<br>[&lt;ffffffffffffffff&gt;] 0xffffffffffffffff<br>[&lt;ffffffff810b226a&gt;] futex_wait_queue_me+0xba/0xf0<br><br>-----------------------------------------------------<br><br><br>오라클에서는 해당 이슈로 인해서 <br>현재 <br>2.6.32-504.el6.x86_64 커널버전을<br>2.6.32-504.23.4.el6.x86_64 로 update를 진행할것을 권해주었습니다.<br><br>궁금한점은<br>2.6.32-504.el6.x86_64  버전에서 패닉관련 버그가 있는지 알고 싶습니다.<br>감사합니다.<br><br><publishedDate>2016-04-22T09:00:46Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GwrIpIAJ"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-04-21T07:00:24Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-04-21T09:17:10Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>/etc/kdump.conf 안에 Third Party Module 를 blacklist 처리하는것은 kdump 가 동작시에 crash 커널이 로딩이 될때<br>배제시키기 위함 입니다. 그래서, 서비스 중일때는 여전히 이 모듈을 사용하므로 문제가 발생하지 않을것이지만 만약, 이 RedCastle<br>모듈의 버그로 인해서 발생이 되는 문제라면 그 원인을 알아내기가 어려운 점이 있습니다.<br><br>지금 제가 제안을 드린 두번째 단계 ( 모듈의 블랙리스트 처리 ) 는 이 모듈의 방해로 인해서 kdump 가 정상적으로 동작하지 않는지<br>를 확인하기 위함 입니다. 그래서, 반드시 서비스가 운영하지 않는 시점에 적용하셔서 테스트 하시고 테스트가 완료되면 다시 원본으로<br>돌리기길 바랍니다.<br><br><br>감사합니다.<br><br><publishedDate>2016-04-21T07:00:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GwnbYIAR"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-04-21T01:03:47Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-04-21T01:03:47Z</b><br><br>답변감사합니다.<br>$ vi /etc/kdump.conf<br>~~ 생략<br>blacklist RedCastle<br><br>RedCastle라는 보안툴인데 해당 툴을 blcaklist해도 서비스에 문제가 없는건가요??<br><br><publishedDate>2016-04-21T01:03:47Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GwEIBIA3"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-04-19T08:31:42Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-04-19T08:31:42Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 케이스와 관련하여 오랫동안 업데이트가 없어 보입니다. 혹시 현재 이슈가 어떻게 진행 되고 있으신가요?<br>만약 현재 이슈와 관련한 추가 문의사항이 있으시다면, 언제든지 케이스에 comment 를 남겨주시거나 연락<br>주십시오.<br><br>감사합니다.<br><br><publishedDate>2016-04-19T08:31:42Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GvXPPIA3"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-04-15T04:29:08Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-04-15T04:37:02Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>37872 Apr 14 05:51:02 SLPCSSDL01 ntpd[31214]: Deleting interface #10 bond0:2, 100.254.40.106#123, interface stats: received=0, sent=0, dropped=0, active_time=10759542 secs<br>37873 Apr 14 05:51:02 SLPCSSDL01 ntpd[31214]: Deleting interface #9 bond0:1, 100.254.40.104#123, interface stats: received=0, sent=0, dropped=0, active_time=10759858 secs<br>37874 Apr 14 05:54:27 SLPCSSDL01 kernel: imklog 5.8.10, log source = /proc/kmsg started.<br>37875 Apr 14 05:54:27 SLPCSSDL01 rsyslogd: [origin software=&quot;rsyslogd&quot; swVersion=&quot;5.8.10&quot; x-pid=&quot;26432&quot; x-info=&quot;http://www.rsyslog.com&quot;] start<br>37876 Apr 14 05:54:27 SLPCSSDL01 kernel: Initializing cgroup subsys cpuset<br>37877 Apr 14 05:54:27 SLPCSSDL01 kernel: Initializing cgroup subsys cpu<br><br><br>말씀하신것과 같이 리부팅 시점을 확인해보았는데, 문제가 될만것을 찾지 못했습니다. 다만, 네트워크의 일시적인 장애가 있었던것으로<br>보이는데 이것이 리부팅의 원인이라고는 말하기가 어렵습니다. 이런 경우에는 갑작스러운 리부팅시 생성된 vmcore 분석을 해야만 그<br>원인을 알수가 있습니다.<br><br>추가적으로, sosreport 에서 확인한것으로는 Oracle 이 설치가 되어 있는것 같은데, 만약 RAC 와 같은 클러스터 소프트웨어가<br>설치가 되어 있다면 특정 조건에 의해서 노드를 fence 시켜서 리부팅을 시켰을수도 있고, 하드웨어 벤더사에서 제공되는 관리 소프<br>트웨어에 의해서 리부팅이 되었을 수도 있으니 소프트웨어 개발사와 하드웨어 제조사로 리부팅 원인 분석을 요청하실것을 권장드립니다.<br><br>이후에 저희 Red Hat 의 도움이 다시 필요하시다면 연락을 주시거나, 케이스 업데이트를 해주십시오.<br><br>감사합니다.<br><br><publishedDate>2016-04-15T04:29:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GvXHQIA3"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2016-04-15T04:02:47Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2016-04-15T04:02:47Z</b><br><br>안녕하세요<br>답변감사합니다<br>알려주신 방법은 진행을 해보고 추가 질문 드리겠습니다.<br><br>그외로<br>혹시<br>서버가 갑자기 리부팅된것에 대한 이상은 발견하지 못하셨는지요??<br>답변 부탁드립니다.<br><br><publishedDate>2016-04-15T04:02:47Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GvWeiIAF"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-04-15T01:03:17Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-04-15T01:03:17Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>올려주신 메시지는 Third Party Kernel 모듈에 의해서 발생이 되는것으로 예상이 됩니다.<br>그래서, 먼저 아래의 디버그 모드로 makekdumpfile 을 실행한 출력파일인 makedumpfile_output.txt<br>의 결과를 올려주시고,<br><br>$ makedumpfile -D -R vmcore_20160414 &lt; /dev/vg1/DUMP &gt; makedumpfile_output.txt 2&gt;&amp;1<br><br>두번째로, 아래와 같이 RedCastle 모듈을 blacklist 처리해서 정상적으로 vmcore 가 생성되는지 테스트 후 피드백 부탁드립니다.<br><br>$ vi /etc/kdump.conf<br>~~ 생략<br>blacklist RedCastle<br><br>$ vi /etc/sysconfig/kdump<br>~~ 생략<br>MKDUMPRD_ARGS=&quot;--allow-missing&quot;<br><br>$ service kdump restart<br>$ makedumpfile -R vmcore_20160414 &lt; /dev/vg1/DUMP<br><br><br>[ 참고문서 ]<br><br>[1] How to exclude a third party module from the kdump initrd image<br>- https://access.redhat.com/solutions/889253<br><br><br>감사합니다.<br><br><publishedDate>2016-04-15T01:03:17Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GvWQCIA3"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-04-15T00:18:24Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-04-15T00:18:24Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>현재 올려주신 문의내용을 자세히 살펴보고 있는중입니다. 확인이 되는대로 업데이트를 남기거나 연락드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-15T00:18:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>14일 새벽5시 50분~6시 경 서버의 갑작스러운 리부팅이 있어서 원인파악 요청드립니다.<br><br>추가적으로 현재 kdump가 raw로 셋팅이 되어 있는데<br>makekdumpfile 을 하면 <br>root@SLPCSSDL01 /CRASH # makedumpfile -R vmcore_20160414 &lt; /dev/vg1/DUMP<br>read_start_flat_header: Can't get signature of flattened format.<br>rearrange_dumpdata: Can't get header of flattened format.<br><br>아래와 같은 메시지를 뿌린후 파일시스템에 떨궈지지 않습니다.<br>어떤 문제로 위와 같은 문제가 발생하는지요..?<br><br>답변 기다리겠습니다.<br>감사합니다.<br><br><br>makedumpfile Failed.</issue><timeFramesAndUrgency>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김경희 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-3049-1440 <br>- 메일주소 : 김경희 &lt;khsds.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 송기호(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01036209917<br>- 메일주소 : kh.song@time-gate.com<br>==============================================================================</timeFramesAndUrgency><cep>false</cep></case>