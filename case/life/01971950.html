======================<br><b>생성계정 : 타임게이트 (주)</b><br><b>생성날짜 : 2017-11-13T06:38:53Z</b><br><b>마지막 답변자 : Workflow Integration</b><br><b>마지막 수정 일자 : 2017-11-16T08:59:03Z</b><br><b>id : 500A000000Z2ccBIAR</b><br>======================<br><br><b><font size=15>
제목  : [삼성생명] 번들 http server httpd.conf 옵션 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br>삼생생명 차세대 ERP 관련 이슈에 대하여 하기와 같이 문의가 요청되어 SR 생성드립니다. <br><br>## 고객정보 ##<br>고객사 : 삼성생명<br>고객명 : 박현우 선임<br>연락처 : 010-9104-2853<br>##<br><br>## 환경 ##<br>-OS : RHEL7<br>-WEB : 번들 HTTP<br>rpm -qf /usr/sbin/httpd<br>httpd-2.4.6-40.el7.x86_64<br>-WAS : SAP netweaver 7.x<br><br>##  협력사정보 ##<br>회사명 : 타임게이트<br>담당자 : 안상훈 책임<br>연락처 : 010-3957-1209<br>##<br><br>## 문의사항 ##<br>&lt;httpd.conf&gt;<br>## 중략 ##<br><br>MaxKeepAliveRequests 0<br>KeepAliveTimeout 600<br>EnableSendfile Off<br>EnableMMAP Off<br>ExpiresActive On<br>ExpiresDefault A600<br>AllowEncodedSlashes On<br><br>&lt;Location /&gt;<br>   SetEnv force-proxy-request-1.0 1<br>   SetEnv proxy-nokeepalive 1<br>   SetEnv proxy-initial-not-pooled 1<br>   SetEnv proxy-sendchunked 1<br>   SetEnv proxy-sendchunks 1<br>&lt;/Location&gt;<br><br>고객사에서 추가로 각 옵션을 명시적으로 설정하였을 경우에 대하여 side-effect 및 각 옵션의 정의를 요청하고 있어  SR 업데이트 드립니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>rpm</name></tag></tags><br><comment id="a0aA000000L2w9mIAB"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-16T08:59:02Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-16T08:59:02Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>본 케이스를 직접 close 처리 해주셔서 감사합니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.  <br>  <br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발생됩니다. <br>고객님께서 남기 신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다. 향후 기술  <br>지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.  <br>  <br>감사합니다.<br><br><publishedDate>2017-11-16T08:59:02Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KyAFsIAN"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-14T09:35:18Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-15T01:52:43Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>Q1. 성능저하를 일으키지 않기 위해 할수 있는 방안을 가이드 부탁드립니다<br>A1. 해당 옵션이 필요하지 않으시다면 사용하지 않으시면 되지만 그렇지 않을 경우에는 해당 옵션을 사용하므로써<br>    나타날수 있는 퍼포먼스 저하는 막을수 없는 것이기에 다른 옵션으로 고객님의 실제환경에 맞게 튜닝 및 테스트를 진행하셔야 합니다.<br>    튜닝은 실제환경에 의존적이기 때문에 기술지원으로 저희가 특정값을 제공해드리기 어려운점 양해부탁드립니다.<br>    해당 서비스는 별도의 컨설팅 서비스가 필요하므로 레드햇 영업팀에 연락하시길 바랍니다. <br><br>Q2.  두 가지 옵션을 같이 사용해도 상관없는지 여부<br>A2.  두가지 옵션을 같이 사용하셔도 문제가 없습니다.<br><br>Q3. 해당 옵션들을 명시적으로 선언할 경우 미칠 영향도에 대하여도 확인을 요청드립니다. <br>A3. 해당 옵션 적용시 발생하는 변화 및 영향은 실제환경에 의존적이기 때문에 저희가 답변을 명확하게 제공해드릴수 없는 점 양해부탁드립니다.<br><br><br>감사합니다.<br><br><publishedDate>2017-11-14T09:35:18Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KyOSUIA3"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-11-15T01:40:33Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-11-15T01:40:33Z</b><br><br>추가로 문의드립니다. <br><br>각 옵션의 정의는 잘 확인하였습니다. <br>다만, 해당 옵션들을 명시적으로 선언할 경우 미칠 영향도에 대하여도 확인을 요청드립니다. <br><br>감사합니다.<br><br><publishedDate>2017-11-15T01:40:33Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Ky8zOIAR"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-11-14T08:11:25Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-11-14T08:11:25Z</b><br><br>안녕하세요.<br><br>답변해주신 내용에 추가 문의가 있어 문의드립니다.<br><br>1) SetEnv proxy-initial-not-pooled 1 옵션애 대해 아래와 같이 답변해주셨습니다.<br>=&gt; HTTP/1.0에서 해당 옵션을 사용하면 성능저하가 발생할수 있다고 상기의 링크에서 설명하고 있으니 참고하시길 바랍니다.<br> 성능저하를 일으키지 않기 위해 할수 있는 방안을 가이드 부탁드립니다.<br><br>2) SetEnv proxy-sendchunked 1, SetEnv proxy-sendchunks 1 두 가지 옵션은 같은 작용을 하는 옵션이라고 답변해주셨는데<br>    두 가지 옵션을 같이 사용해도 상관없는지 여부<br><br>위 두가지 문의사항에 대해 답변 부탁드립니다.<br><br><publishedDate>2017-11-14T08:11:25Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Ky8ERIAZ"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-14T07:01:36Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-14T07:02:22Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>문의주신 내용에 대해 아래와 같이 답변드리겠습니다.<br><br>1. MaxKeepAliveRequests 0 <br>해당옵션을 0으로 지정하면 TCP 세션당 가능한 request 가 unlimited 임을 가리킵니다. <br>기본값으로 100을 가지고 있으며 기본값을 사용하면 하나의 TCP 세션으로 최대 request를 100개 받을수 있음을 의미합니다.  <br><br>What is maxKeepAliveRequests in Tomcat? <br>https://access.redhat.com/solutions/1526403<br><br>2. KeepAliveTimeout 600 <br>httpd가 같은 클라이언트의 같은 TCP 세션에서 다음 request 접수까지의 최장 대기시간을 600초로 설정함을 의미합니다. <br><br>3. EnableSendfile Off<br>해당 옵션은 httpd 가 커널의 sendfile support 를 통한 클라이언트로의 파일 전송을 disable 함을 의미합니다.<br><br>4. EnableMMAP Off<br>해당 옵션은 파일 전송시 memory-mapping 를 disable 함을 의미합니다. <br><br>EnableMMAP Off,EnableSendfile Off 는 NFS 볼륨을 사용시 적용해야 한다고 보고 되어있습니다.<br><br>5. ExpiresActive On<br>   ExpiresDefault A600<br><br>상기의 두 옵션은 클라이언트가 파일에 액세스후 600초동안 클라이언트에서 캐싱되고 그 후 expire됨을 의미합니다.  <br><br>6. AllowEncodedSlashes On<br><br>해당 옵션은 encoded path separators (경로 구분자) 가 URL에 포함될 수 있음을 의미합니다.<br><br>~~~~~~~~~~~~~~~~~~<br><br>&lt;Location /&gt;<br>   SetEnv force-proxy-request-1.0 1<br>   SetEnv proxy-nokeepalive 1<br>   SetEnv proxy-initial-not-pooled 1<br>   SetEnv proxy-sendchunked 1<br>   SetEnv proxy-sendchunks 1<br>&lt;/Location&gt;<br><br>상기와 같이 설정하면 proxy는 아래와 같은 동작을 하게 됩니다.<br><br>[참고자료]<br>https://httpd.apache.org/docs/2.4/mod/mod_proxy_http.html<br><br><br>SetEnv force-proxy-request-1.0 1:<br>proxy가 클라이언트로부터 온 request를 HTTP/1.0 백엔드로 포워딩 함.<br><br>SetEnv proxy-nokeepalive 1:<br>proxy가 백엔드로 request 전송후 커넥션을 항상 끊음.<br><br>SetEnv proxy-initial-not-pooled 1:<br>클라이언트에서 request를 보낼시 pooled connection 을 재사용 하지 않음을 의미합니다. <br>HTTP/1.0에서 해당 옵션을 사용하면 성능저하가 발생할수 있다고 상기의 링크에서 설명하고 있으니 참고하시길 바랍니다.<br><br>SetEnv proxy-sendchunked 1<br>SetEnv proxy-sendchunks 1<br><br>두 옵션은 같은 작용을 하는 옵션으로 보이며 request bodies 가 Chunked transfer encoding 으로 보내짐을 의미합니다.<br>상기의 링크에서 참조해보면 해당 옵션은 HTTP/1.1 에서 사용해야 한다고 명시되어 있습니다.<br><br>감사합니다.<br><br><publishedDate>2017-11-14T07:01:35Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Ky6H0IAJ"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-14T03:06:05Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-14T03:06:05Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>먼저 답변이 지연되어 죄송합니다.<br>관련 내용을 찾아보는 중이니 답변이 정리되는 대로 바로 코멘트를 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-11-14T03:06:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>