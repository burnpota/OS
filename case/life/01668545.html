======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2016-07-15T04:44:46Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-08-03T10:05:06Z</b><br><b>id : 500A000000UqWRxIAN</b><br>======================<br><br><b><font size=15>
제목  : [장애문의] 멀티패스 장애
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>Jul 14 23:21:22 SLPCSSDL01 kernel: qla2xxx [0000:04:00.1]-801c:12: Abort command issued nexus=12:0:8 --  1 2002.<br>Jul 14 23:21:23 SLPCSSDL01 multipathd: DG_DATA3: sdk - tur checker reports path is down<br>Jul 14 23:21:23 SLPCSSDL01 multipathd: checker failed path 8:160 in map DG_DATA3<br>Jul 14 23:21:23 SLPCSSDL01 multipathd: DG_DATA3: remaining active paths: 1<br>Jul 14 23:21:23 SLPCSSDL01 kernel: device-mapper: multipath: Failing path 8:160.<br>Jul 14 23:21:28 SLPCSSDL01 multipathd: DG_DATA3: sdk - tur checker reports path is up<br>Jul 14 23:21:28 SLPCSSDL01 multipathd: 8:160: reinstated<br>Jul 14 23:21:28 SLPCSSDL01 multipathd: DG_DATA3: remaining active paths: 2<br><br>어제 23:21  위 로그와 같이 SDK 볼륨 path가 5초간 fail 되는 현상 이 발생 했습니다.<br><br>현재 는 정상 상태 이고요.<br><br> 시스템 구성상 문제가 있는지 확인 부탁드리며 로그상에 특정 이상 유무가 있는지 확인 부탁드립니다.<br><br>sosreport 는 첨부했습니다.<br><br>감사합니다.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>김경희<br>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김경희 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-3049-1440 <br>- 메일주소 : 김경희 &lt;khsds.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com<br>==============================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000HUHfpIAH"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-07-18T00:58:09Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-07-18T00:58:09Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>823 Jul 14 23:21:22 SLPCSSDL01 kernel: qla2xxx [0000:04:00.1]-801c:12: Abort command issued nexus=12:0:8 --  1 2002.<br>824 Jul 14 23:21:23 SLPCSSDL01 multipathd: DG_DATA3: sdk - tur checker reports path is down<br>825 Jul 14 23:21:23 SLPCSSDL01 multipathd: checker failed path 8:160 in map DG_DATA3<br>826 Jul 14 23:21:23 SLPCSSDL01 multipathd: DG_DATA3: remaining active paths: 1<br>827 Jul 14 23:21:23 SLPCSSDL01 kernel: device-mapper: multipath: Failing path 8:160.<br>828 Jul 14 23:21:28 SLPCSSDL01 multipathd: DG_DATA3: sdk - tur checker reports path is up<br>829 Jul 14 23:21:28 SLPCSSDL01 multipathd: 8:160: reinstated<br>830 Jul 14 23:21:28 SLPCSSDL01 multipathd: DG_DATA3: remaining active paths: 2<br><br><br>올려주신 sosreport 내에서 말씀하신 에러 메시지 &quot;qla2xxx [0000:04:00.0]-801c:1: Abort command issued nexus=1:0:0 -- 1 2002&quot; 를 찾았는데 이는 아래와 같은 의미를 가지고 있습니다.<br><br>1) qla2xxx 커널모듈 또는 드라이버의 이름입니다.<br>2) [0000:04:00.0] 는 디바이스의 PCI bus 정보입니다.<br>3) 801c 는 메시지가 유래된곳으로 부터 코드의 일부분을 유일하게 식별하는 16진수 id 입니다.<br>4) 1 은 scsi target 의 host number 입니다.<br>5) Abort command issued nexus=1:0:0 는 드라이버가 scsi target 1:0:0 으로 나아간 명령을 abort 한것입니다.<br>6) 마지막 1 (초) 은 드라이버가 응답하는 device 를 기다리는 시간을 소비한것입니다.<br>7) 2002 는 reset 이 성공한것입니다.<br><br><br>* 근본원인 - 위의 메시지가 나타나는 원인은 아래와 같이 알려져 있습니다.<br><br>1) SAN 이 느려지고, abort 메시지가 나타나는것은 다양한 근원적인 문제가 원인입니다.<br>2) 문제 확인을 해야 할 최초 영역은 Switch 또는 Storage target 과 같은 컴포넌트 와 관련된 SAN 입니다.<br>3) 명령 abort 는 거의 대개 명령의 timeout 에 의해서 원인이 된것입니다. 동작의 첫번째 과정은 명령으로의 <br>   어떤 참조 사항들이 지워지게 된것을 확인하기 위해 명령을 abort 한것입니다.<br>4) 명령 timeout 은 SAN 의 혼잡 상황, a flaky target, 어딘가 잘못된 하드웨어 또는 명령이 drop 되었<br>   을수 있는 target 에서의 과부화와 같은 많은 다양한 것에 의해서 원인이 될 수 있습니다.<br><br><br>* 대응방안<br><br>1) 이 에러들은 SAN 으로 부터 반환되어진 에러들을 나타낸것입니다.<br>2) FC 스위치 , FC 케이블링, zoning, 스토리지 Array 로 부터 현재 어떠한 이슈들이 있는지 검증 시도를 해보시길 바랍니다.<br>3) 이는 또한 FC switch 로그내에 CRC 에러, 어떤 에러 카운터가 있는지 검증하기 위해 스토리지 벤더에게 기술문의 하실것을 권고드립니다.<br><br><br>[ 참고문서 ]<br><br>[1] &quot;Abort command Issued&quot; messages appear in /var/log/messages file<br>- https://access.redhat.com/solutions/27624<br><br><br>감사합니다.<br><br><publishedDate>2016-07-18T00:58:09Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HUHdAIAX"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-07-18T00:47:05Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-07-18T00:47:05Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>현재 올려주신 문의내용을 자세히 살펴보고 있는중입니다. 확인이 되는대로 업데이트를 남기도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-07-18T00:47:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>Jul 14 23:21:22 SLPCSSDL01 kernel: qla2xxx [0000:04:00.1]-801c:12: Abort command issued nexus=12:0:8 --  1 2002.<br>Jul 14 23:21:23 SLPCSSDL01 multipathd: DG_DATA3: sdk - tur checker reports path is down<br>Jul 14 23:21:23 SLPCSSDL01 multipathd: checker failed path 8:160 in map DG_DATA3<br>Jul 14 23:21:23 SLPCSSDL01 multipathd: DG_DATA3: remaining active paths: 1<br>Jul 14 23:21:23 SLPCSSDL01 kernel: device-mapper: multipath: Failing path 8:160.<br>Jul 14 23:21:28 SLPCSSDL01 multipathd: DG_DATA3: sdk - tur checker reports path is up<br>Jul 14 23:21:28 SLPCSSDL01 multipathd: 8:160: reinstated<br>Jul 14 23:21:28 SLPCSSDL01 multipathd: DG_DATA3: remaining active paths: 2<br><br>어제 23:21  위 로그와 같이 SDK 볼륨 path가 5초간 fail 되는 현상 이 발생 했습니다.<br><br>현재 는 정상 상태 이고요.<br><br> 시스템 구성상 문제가 있는지 확인 부탁드리며 로그상에 특정 이상 유무가 있는지 확인 부탁드립니다.<br><br>sosreport 는 첨부했습니다.<br><br>감사합니다.</issue><timeFramesAndUrgency>김경희<br>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김경희 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-3049-1440 <br>- 메일주소 : 김경희 &lt;khsds.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com<br>==============================================================================</timeFramesAndUrgency><cep>false</cep></case>