======================<br><b>생성계정 : 타임게이트 (주)</b><br><b>생성날짜 : 2016-10-26T01:30:17Z</b><br><b>마지막 답변자 : 타임게이트 (주)</b><br><b>마지막 수정 일자 : 2016-11-10T11:13:26Z</b><br><b>id : 500A000000VXhqRIAT</b><br>======================<br><br><b><font size=15>
제목  : [RHEL] 번들 httpd server - proxy 설정 관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>.<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.1</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000IAzuDIAT"><br>======================<br><b>생성계정 : Won, Ted</b><br><b>생성날짜 : 2016-11-07T05:47:06Z</b><br><b>마지막 답변자 : Won, Ted</b><br><b>마지막 수정 일자 : 2016-11-07T05:47:06Z</b><br><br>안녕하세요,<br><br>&gt; 1. 기 확인한 것과 같이 mod_proxy_hcheck는 community version의 최신 httpd server에서 제공되는 모듈로 확인되는데<br>번들 httpd server가 아닌 EWS에서 해당 모듈 제공이 가능한지요?<br><br>말씀주신 mod_proxy_hcheck는 확인 결과 Apache 2.4.21 이후에 포함되었습니다.<br>EWS의 최신 버전(JWS 3.0) Apache 는 2.4.6 버전으로써 mod_proxy_hcheck 가 포함되어 있지 않습니다. [1]<br>앞으로 JWS 3.1 버전에서는 포함될 것으로 예상되나, 아직 작업이 시작되지 않았고 제품 릴리즈 스케쥴이 잡혀있지 않은 상태입니다. [2]<br><br><br>&gt; 2. 가이드 주신것과 같이 mod_jk 또는 mod_balancer를 사용할 경우 뒷단 WAS의 health check가 가능한지요?<br><br>mod_jk의 경우, ping_mode 를 사용하여 서버측의 연결 가능 상태를 미리 체크 해놓은 후 요청을 전달하는 기능이 있습니다. [3],[4]<br>workers.properties :<br>~~~<br>...<br># Define Node1<br># modify the host as your host IP or DNS name.<br>worker.node1.port=8009<br>worker.node1.host=node1.mydomain.com<br>worker.node1.type=ajp13<br>worker.node1.ping_mode=A<br>worker.node1.lbfactor=1<br>...<br>~~~<br><br>mod_cluster의 경우도, 위의 설명과 동일한 기능을 하는 ping 또는 health-check-interval 설정을 사용할 수 있습니다.<br>단, health-check-interval 설정은 JBoss EAP 7 이상에서만 사용 할 수 있습니다.<br>ping 관련 설정 정보: [5],[6],[7]<br>health-check-interval 관련 설정 정보: [8],[9]<br><br>[1] https://access.redhat.com/articles/111723<br>[2] https://issues.jboss.org/browse/JWS3-44<br>[3] https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_Web_Server/3/html-single/HTTP_Connectors_and_Load_Balancing_Guide/index.html#sect-Configuring_Worker_Nodes_in_mod_jk<br>[4] https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_Web_Server/3/html-single/HTTP_Connectors_and_Load_Balancing_Guide/index.html#workers.properties<br>[5] https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_Web_Server/3/html-single/HTTP_Connectors_and_Load_Balancing_Guide/index.html#Proxy_Configuration1<br>[6] https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_Web_Server/3/html-single/HTTP_Connectors_and_Load_Balancing_Guide/index.html#mod_cluster_Proxy_and_Proxy_Discovery_Configuration_Attributes<br>[7] https://access.redhat.com/solutions/1235973 &lt;&lt; mod_cluster health checks<br>[8] https://access.redhat.com/documentation/en/red-hat-jboss-enterprise-application-platform/version-7.0/configuration-guide/#undertow-attribute-refs<br>[9] https://wildscribe.github.io/Wildfly/10.0.0.Final/subsystem/undertow/configuration/filter/mod-cluster/index.html<br><br><br>감사합니다.<br><br><publishedDate>2016-11-07T05:47:06Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IAihtIAD"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-11-04T08:44:49Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-11-04T08:44:49Z</b><br><br>빠른 답변에 감사드립니다 .<br><br>마지막으로 하기의 문의에 대하여 확인 요청드립니다. <br><br>1. 기 확인한 것과 같이 mod_proxy_hcheck는 community version의 최신 httpd server에서 제공되는 모듈로 확인되는데<br>번들 httpd server가 아닌 EWS에서 해당 모듈 제공이 가능한지요?<br><br>2. 가이드 주신것과 같이 mod_jk 또는 mod_balancer를 사용할 경우 뒷단 WAS의 health check가 가능한지요?<br><br>확인 요청드립니다.<br><br><publishedDate>2016-11-04T08:44:49Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IAiQNIA1"><br>======================<br><b>생성계정 : Won, Ted</b><br><b>생성날짜 : 2016-11-04T08:17:14Z</b><br><b>마지막 답변자 : Won, Ted</b><br><b>마지막 수정 일자 : 2016-11-04T08:17:14Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>먼저 말씀 주신 웹 서버 구성은 아래와 같습니다.<br>~~~<br>RHEL bundle Apache HTTPD Server + mod_proxy + JWS-3.0 Tomcat7<br>~~~<br><br>문의 주신 load-balancing 와 fail-over 는 동일한 로드 밸런스 모듈 설정으로 구성 할 수 있습니다.<br><br>이미 아시는 바와 같이 로드 밸런스 모듈이 mod_jk, mod_proxy, mod_cluster 이렇게 3개가 존재합니다.<br>그런데 안타깝게도 저희 KCS [1],[2],[3] 와 같이 JBoss EAP가 아닌 Tomcat 기반의 JWS에서는 mod_jk와 mod_cluster만을 지원하고 가이드하고 있습니다. <br><br>mod_proxy 관련해서는 JBoss EAP 기반의 가이드만 존재하고 있습니다. [4],[5]<br><br>공식 자료가 없는 상황이기는 하지만 도움이 되실 수 있게 아래와 같이 설정 방법 및 사용하실 수 있는 튜닝을 위한 도구에 관하여 정리하였습니다.<br><br>Step 1: Tomcat에 JVM route 설정하기 [6]<br>Tomcat의 JWS_HOME/tomcat&lt;VERSION&gt;/conf/server.xml 파일에서 &lt;Engine&gt; 태그를 찾아서 아래의 예와 같이 jvmRoute를 추가하고 유니크한 노드의 아이디를 지정합니다.<br>~~~<br>&lt;Engine name=&quot;Catalina&quot; jvmRoute=&quot;node1&quot; &gt;<br>~~~<br><br><br>Step 2: Tomcat에 ajp connector 추가하기 [4]<br>JWS Tomcat은 이미 기본 값으로 아래와 같이 지정되어 있습니다. JWS_HOME/tomcat&lt;VERSION&gt;/conf/server.xml 파일에서 &lt;connector&gt; 태그의 설정이 아래와 같은지 확인이 필요합니다.<br>~~~<br>&lt;connector port=&quot;8009&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; /&gt;<br>~~~<br><br><br>Step 3: Apache HTTPD 설정 추가하기 [4]<br>설치된 Apache HTTPD 설정 파일 $HTTPD_HOME/conf.d/proxy_ajp.conf 또는 httpd.conf 파일에서 아래의 예와 같이 추가합니다.<br>~~~<br># Enable the mod_proxy modules in the HTTPD<br>LoadModule proxy_module modules/mod_proxy.so<br>LoadModule proxy_balancer_module modules/mod_proxy_balancer.so<br>LoadModule proxy_ajp_module modules/mod_proxy_ajp.so<br><br>&lt;Proxy balancer://mycluster&gt;<br>  # NOTE! The following commented lines are example values only! please modify them to suit your environment<br>  BalancerMember ajp://node1:8009 route=node1<br>  BalancerMember ajp://node2:8009 route=node2<br>  ProxySet stickysession=JSESSIONID|jsessionid<br>&lt;/Proxy&gt;<br><br>ProxyPass /ClusterWebApp/ balancer://mycluster/ClusterWebApp/<br>~~~<br>위의 설정은 테스트되지 않은 자료를 참고하여 정리한 설정 예입니다. 관련 자료 참조와 실제 아이피등으로 치환이 필요합니다.<br><br><br>Step 4: Tomcat 및 Apache HTTPD 재기동<br><br><br>튜닝을 위한 추가적인 상세 설정은 Load Balancer Configuration Tool [7] 페이지에서 상세 설정들을 만들어낼 수 있습니다. 상세 구성 환경에 맞추어서 지정하시면 성능 최적화된 설정파일을 생성해주는 도구입니다.<br><br><br>추가적으로 mod_proxy에서 사용 할 수 있는 로드 밸런서 파리미터 lbmethod 에 대한 정리입니다. [8],[9]<br>byrequests (기본값): 요청 개수에 기반한 로드 밸런싱, 요청 처리 개수가 작은 노드로 분산합니다. http://httpd.apache.org/docs/2.4/en/mod/mod_lbmethod_byrequests.html<br>bytraffic: 요청의 byte 용량에 기반한 로드 밸런싱, 요청 처리 네트워크 트래픽이 적은 노드로 분산합니다.   http://httpd.apache.org/docs/2.4/en/mod/mod_lbmethod_bytraffic.html <br>bybusyness: 각 노드별 현재 처리중인 요청이 가장 적은 노드로 분산합니다. http://httpd.apache.org/docs/2.4/en/mod/mod_lbmethod_bybusyness.html<br>Apache HTTPD 설정 파일의 ProxyPass 문에서 아래와 같은 예로 사용 할 수 있습니다:<br>~~~<br>ProxyPass /MyApp balancer://mycluster stickysession=JSESSIONID lbmethod=bytraffic<br>~~~<br><br><br>서버 측 제품을 JBoss EAP을 사용하시면 mod_cluster와 함께 상세한 로드 밸런스 알고리즘과 HTTP Session 클러스터링 기능을 사용하실 수 있습니다.<br>이미 EAP 서브스립션도 가지고 계신 만큼 가능하시다면 JBoss EAP 최신 버전과 mod_jk 또는 mod_cluster 모듈로 사용하시는 것을 권고드립니다.<br><br><br>[1] https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_Web_Server/3/html-single/HTTP_Connectors_and_Load_Balancing_Guide/index.html &gt;&gt; HTTP CONNECTORS AND LOAD BALANCING GUIDE<br>[2] https://access.redhat.com/articles/111723 &gt;&gt; JBoss Web Server Component Details<br>[3] https://access.redhat.com/solutions/18495<br>[4] https://access.redhat.com/solutions/285723 &gt;&gt; Configure mod_proxy<br>[5] https://access.redhat.com/documentation/en/red-hat-jboss-enterprise-application-platform/version-7.0/configuration-guide/#mod_proxy-config<br>[6] https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_Web_Server/3/html-single/HTTP_Connectors_and_Load_Balancing_Guide/index.html#Configuring_Apache_Tomcat_to_Work_with_mod_jk<br>[7] https://access.redhat.com/labs/lbconfig/#/?apache_version=24x&amp;apache_cores=4&amp;apache_instances_per_server=1&amp;apache_servers=1&amp;modcluster_version=12x&amp;modcluster_discovery=mcast&amp;jboss_cores=4&amp;jboss_jvms=1&amp;jboss_servers=2&amp;long_running=false&amp;modtype=mod_proxy&amp;mpmtype=Worker&amp;jboss_version=tc&amp;same_server=false<br>[8] http://httpd.apache.org/docs/2.4/mod/mod_proxy.html<br>[9] http://httpd.apache.org/docs/2.4/en/mod/mod_proxy_balancer.html<br><br><br>감사합니다.<br><br><publishedDate>2016-11-04T08:17:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IAgbQIAT"><br>======================<br><b>생성계정 : Won, Ted</b><br><b>생성날짜 : 2016-11-04T04:41:16Z</b><br><b>마지막 답변자 : Won, Ted</b><br><b>마지막 수정 일자 : 2016-11-04T04:41:16Z</b><br><br>안녕하세요,<br><br>확인 감사 드립니다. 말씀 주신 환경에 맞춰서 mod_proxy 관련 답변을 준비 중에 있으며, 곧 업데이트 하도록 하겠습니다.<br><br>OS : RHEL7<br> Linux PIWBWL0BSL 3.10.0-327.el7.x86_64 #1 SMP Thu Oct 29 17:29:29 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux<br> WEB : RHEL bundle HTTPD Server ( httpd-2.4.6-40.el7.x86_64 )<br>OS : Windows NT 2012 R2<br> WAS : JWS-3.0(apache-tomcat-7.0.59)<br><br>감사합니다.<br><br><publishedDate>2016-11-04T04:41:16Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IAgPjIAL"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-11-04T04:13:02Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-11-04T04:13:02Z</b><br><br>잘못된 WebServer 정보가 입력되어 다시 SR업데이트를 합니다. <br><br><br>OS : RHEL7<br>Linux PIWBWL0BSL 3.10.0-327.el7.x86_64 #1 SMP Thu Oct 29 17:29:29 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux<br>WEB : RHEL bundle HTTPD Server ( httpd-2.4.6-40.el7.x86_64 )<br><br>OS : Windows NT 2012 R2<br>WAS : JWS-3.0(apache-tomcat-7.0.59)<br><br>감사합니다.<br><br><publishedDate>2016-11-04T04:13:02Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IAfchIAD"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-11-04T02:09:06Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-11-04T02:09:05Z</b><br><br>안녕하세요! <br>문의하신 고객사 WAS 정보를 전달드립니다. <br><br>OS : Windows NT 2012 R2<br>WEB : jws-httpd-3.0.2-win6.x86_64(2.4.x)<br>WAS : JWS-3.0(apache-tomcat-7.0.59)<br><br>입니다.<br><br><publishedDate>2016-11-04T02:09:05Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IAOCAIA5"><br>======================<br><b>생성계정 : Won, Ted</b><br><b>생성날짜 : 2016-11-03T02:13:16Z</b><br><b>마지막 답변자 : Won, Ted</b><br><b>마지막 수정 일자 : 2016-11-03T02:13:16Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>mod_proxy 관련 문의 주신 내용을 확인 중에 있습니다.<br><br>mod_proxy를 이용하여 Apache와 연동할 대상이 되는 미들웨어 서버의 제품과 버전 정보 확인 요청드립니다.<br><br>Ex) JBoss EAP 7.0.2<br><br>감사합니다.<br><br><publishedDate>2016-11-03T02:13:16Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IANlbIAH"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-11-03T01:24:34Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-11-03T01:24:34Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>저희 미들웨어 엔지니어와 확인후 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-11-03T01:24:34Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IA1YSIA1"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-11-02T02:28:22Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-11-02T02:28:22Z</b><br><br>안녕하세요! <br>빠른 답변에 감사드립니다 .<br><br>권장하여 주신 mod_jk 또는 mod_cluster는 고객사의 요청으로 적용할 수 없는 환경으로<br>mod_proxy를 사용해야만 하는 환경입니다. <br><br>첨부하여 주신 URL상 일반 적용가이드는 명시되어 있으나 하기의 내역에 대하여 재차 문의드립니다 <br><br>1.  load-balancing 관련 상세설정<br>2. fail-over 관련 상세 설정<br><br>번거로우시더라도 mod_proxy관련 답변을 요청드립니다 .<br><br>감사합니다.<br><br><publishedDate>2016-11-02T02:28:22Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000I9k0wIAB"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-11-01T07:34:52Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-11-01T07:34:52Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>현재 해당 이슈는 미들웨어 관련 이슈인것으로 판단됩니다.<br>저희 미들웨어 관련 엔지니어의 답변에 의하면 저희가 제공하는 방법으로 Load Balancing 를 <br>설정시에는 mod_jk 혹은 mod_cluster으로 실현하실수 있을것으로 보입니다.<br><br>상세한 설정 방법은 아래의 공식 문서를 참고하실수 있으십니다.<br><br>2.2. Configure Load Balancing Using Apache HTTP Server and mod_jk<br>3.2. Configure Load Balancing Using Apache HTTP Server and mod_cluster<br><br>https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_Web_Server/3/html/HTTP_Connectors_and_Load_Balancing_Guide/index.html<br><br>감사합니다.<br><br><publishedDate>2016-11-01T07:34:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000I9i6YIAR"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-11-01T02:19:20Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-11-01T02:19:20Z</b><br><br>추가로 문의드립니다. <br><br>현재 설정은 하기와 같습니다. <br><br>&lt;Proxy&gt;<br> BalancerMember A<br> BalancerMember B<br> BalancerMember C<br> ProxySet stickysession=ROUTEID<br>&lt;/Proxy&gt;<br> <br>A 가 서비스 이상이 생기면 동일한 서버에서 오는 요청을 B, C로 보내게 되는데  retry 횟수나 주기 등 어떤 로직에 의해 연결되는지 문의드립니다.<br><br>community apache version일 경우 mod proxy hcheck 모듈을 통해 가능한 것으로 확인되는데 <br><br>해당 기능이 RHEL7 번들 httpd server에서는 공식지원 불가하다고 확인하였습니다. (기술 문의 01731005)<br><br>혹시 번들 httpd server에서 설정 가능한 다른방법이 있을까요?<br><br>감사합니다.<br><br><publishedDate>2016-11-01T02:19:20Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000I8eblIAB"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-10-27T02:48:30Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-10-27T02:48:30Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>서로 다른 서비스를 제공 하시려면 VirtualHost 기능을 사용하실수 있으실 겁니다.<br>구체적인 설정 방법은 아래의 KCS 문서를 참고하시기 바랍니다.<br><br>How to configure virtual hosting in Apache?<br>https://access.redhat.com/solutions/33280<br><br>감사합니다.<br><br><publishedDate>2016-10-27T02:48:30Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000I01SvIAJ"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-10-26T03:43:20Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-10-26T03:43:20Z</b><br><br>빠른 답변에 감사드립니다. <br><br>우선 해당 경로는 하기와 같이 서로 다른 경로로 지정하였습니다. <br>1. crm httpd.conf 일부<br>##중략 ##<br>DefaultRuntimeDir /APP/crm/apache/logs<br><br>/APP/crm/apache/logs # ll<br>-rw-r----- 1 crmadmin apache 8 Oct 25 20:57 slotmem-shm-p4f68b262.shm<br>-rw-r----- 1 crmadmin apache 8 Oct 25 20:57 slotmem-shm-p4f68b262_crmcluster.shm<br><br>2. ep httpd.conf 일부<br>##중략 ##<br>DefaultRuntimeDir /APP/ep/apache/logs<br><br>/APP/ep/apache/logs # ll<br>-rw-r----- 1 epadmin apache 0 Oct 25 20:57 slotmem-shm-pa788467f.shm <br><br>답변 주신 것과 같이 동일 서버에서 두개의 httpd 데몬을 기동하는 것이 지원불가하다고 하면 서로 다른 서비스를 하기 위해서는 어떤 것이 권장인가요?<br>별도의 ews httpd를 사용하거나 httpd 데몬을 위해 별도의 장비를 써야하는 건가요?<br><br>확인요청드립니다. <br><br>감사합니다.<br><br><publishedDate>2016-10-26T03:43:20Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000I01Q1IAJ"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-10-26T03:32:46Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-10-26T03:32:46Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>죄송합니다만 한개 이상의 httpd 데몬을 동일 서버에서 기동하는 구성은 저희 레드햇의 지원범위 밖입니다.<br>따라서 해당 이슈에 대한 troubleshooting은 지원이 되지 않음을 알려드립니다.<br><br>참고로 올려주신 로그에 의하면 slotmem 가 첫번째 데몬에 의하며 이미 생성되어 발생된 이슈 인것으로 보입니다.<br>두 데몬의 DefaultRuntimeDir 을 다르게 설정할 경우 이슈가 해소되는지를 시도해 보실수 있습니다.<br><br>##<br>[Tue Oct 25 20:14:46.563782 2016] [proxy_balancer:emerg] [pid 14176:tid 139805072734272] (13)Permission denied: AH01179: balancer slotmem_create failed<br>[Tue Oct 25 20:57:33.882349 2016] [proxy_balancer:emerg] [pid 36051:tid 139821486393408] (17)File exists: AH01179: balancer slotmem_create failed <br>##<br><br>감사합니다.<br><br><publishedDate>2016-10-26T03:32:46Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000I00wgIAB"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2016-10-26T01:40:19Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2016-10-26T01:40:19Z</b><br><br>## 고객정보 ##<br>1. 고객사 : 삼성생명<br>2. 고객명 : 박현우 선임<br>3. 연락처 : 010-9104-2853 <br>###########<br><br>OS 정보 : <br>uname -a<br>Linux PIWBWL0BSL 3.10.0-327.el7.x86_64 #1 SMP Thu Oct 29 17:29:29 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux<br><br>httpd 정보 :<br>rpm -qf /usr/sbin/httpd<br>httpd-2.4.6-40.el7.x86_64<br><br>증상 : 하나의 httpd 엔진으로 두 개의 별도의 httpd server를 기동할 시 하기의 에러와 함께 하나만 기동되는 현상. 즉, crm이라는 httpd server가 기동된 상태에서 ep라는 httpd server를 추가 기동하려고 할 경우 정상 구동이 안되는 현상임.<br>##<br>[Tue Oct 25 20:14:46.563782 2016] [proxy_balancer:emerg] [pid 14176:tid 139805072734272] (13)Permission denied: AH01179: balancer slotmem_create failed<br>[Tue Oct 25 20:57:33.882349 2016] [proxy_balancer:emerg] [pid 36051:tid 139821486393408] (17)File exists: AH01179: balancer slotmem_create failed <br>##<br><br>정상 구동된 crm은 slotmem-shm-p4f68b262_crmcluster.shm이 존재하는데 <br>/APP/crm/apache/logs # ll<br>-rw-r----- 1 crmadmin apache 8 Oct 25 20:57 slotmem-shm-p4f68b262.shm<br>-rw-r----- 1 crmadmin apache 8 Oct 25 20:57 slotmem-shm-p4f68b262_crmcluster.shm<br><br>ep는 생성되지 않는 것으로 보아 shm파일 관련하여 설정이 부족한 것으로 판단됩니다. <br>/APP/ep/apache/logs # ll<br>-rw-r----- 1 epadmin apache 0 Oct 25 20:57 slotmem-shm-pa788467f.shm <br><br><br>설정파일 <br>1.httpd.conf<br>##중략 ##<br>DefaultRuntimeDir /APP/crm/apache/logs<br>##이하생략 ##<br>해당 설정은 최초 Permission denied: AH01179: balancer slotmem_create failed 로그로 검색하여 하기의  URL을 참고하여 설정해 하나의 httpd server는 기동하였으나, 동일 장비에 또 다른 httpd server 기동 시는 불가함.<br>https://access.redhat.com/solutions/2187921<br><br>2. ep.httpd.conf <br>&lt;VirtualHost 25.54.**.**:44300&gt;<br>        DocumentRoot &quot;/APP/ep/webdocs&quot;<br>        ServerName erp-ep.p.samsunglife.kr:44300<br>        DirectoryIndex index.jsp<br>        ErrorLog &quot;|/usr/sbin/rotatelogs /LOG/ep/apache/ep01/error/ssl_error_ep_log_%Y_%m_%d 86400&quot;<br>        CustomLog &quot;|/usr/sbin/rotatelogs /LOG/ep/apache/ep01/access/ssl_access_ep_log_%Y_%m_%d 86400&quot; combined env=!etc<br>        SSLEngine on<br>        SSLProtocol all -SSLv2 -SSLv3<br>        SSLCipherSuite ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA<br>        SSLHonorCipherOrder on<br>        SSLCertificateFile /APP/ep/apache/conf/ssl/erp-ep.p.samsunglife.kr.crt<br>        SSLCertificateKeyFile /APP/ep/apache/conf/ssl/erp-ep.p.samsunglife.kr.key<br>        SSLProxyCACertificateFile /APP/ep/apache/conf/ssl/CA1.cer<br>        SSLProxyEngine on<br>        ProxyRequests on<br>        ProxyVia on<br>        Header add Set-Cookie &quot;ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/&quot; env=BALANCER_ROUTE_CHANGED<br>        &lt;Proxy balancer://epCluster&gt;<br>        BalancerMember https://ep.ap1.p.samsunglife.kr:*** route=ep1<br>        BalancerMember https://ep.ap2.p.samsunglife.kr:*** route=ep2<br><br>## 중략 ##<br>        ProxySet stickysession=ROUTEID<br>        &lt;/Proxy&gt;<br>        &lt;Location /balancer-manager&gt;<br>        SetHandler balancer-manager<br>        Order deny,allow<br>        Deny from all<br>        Allow from 100.1.91.117,100.118.90.42,100.118.91.116,100.118.181.76,25.54.85.11,piwbwl0asl<br>        &lt;/Location&gt;<br>        &lt;Location /server-status&gt;<br>        SetHandler server-status<br>        Order deny,allow<br>        Deny from all<br>        Allow from 100.1.91.117,100.118.90.42,100.118.91.116,100.118.181.76,25.54.85.11,piwbwl0asl<br>        &lt;/Location&gt;<br>        ProxyPass /balancer-manager !<br>        ProxyPass /server-status !<br>        ProxyPass &quot;/&quot; &quot;balancer://epCluster/&quot;<br>        ProxyPassReverse &quot;/&quot; &quot;balancer://epCluster/&quot;<br>&lt;/VirtualHost&gt;<br><br>####<br><br>확인요청드립니다.<br><br><publishedDate>2016-10-26T01:40:19Z</publishedDate><createdByType>Customer</createdByType><br>======================<br></comments><br>