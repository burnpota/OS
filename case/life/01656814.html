======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2016-06-23T06:01:18Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-07-09T10:06:32Z</b><br><b>id : 500A000000UbUUWIA3</b><br>======================<br><br><b><font size=15>
제목  : [기술문의] 파일시스템,Kdump,멀티패스 재구성
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요<br><br>주말에 서버 파일시스템 , Kdump, 멀티패스 재구성 작업이 있습니다.<br><br>멀티패스 구성에서 blacklist 와 blacklist_exceptions 란을 비워도 멀티패스 구성에 특이사항은 없는지요? <br><br>아래와 같이 작업을 하면 되는지 검증 부탁드립니다.<br><br>         &gt;&gt; 아    래 &lt;&lt;<br><br>1. Logical 삭제 및 볼륨그룹 삭제<br><br>umount /CRASH<br>umount /oracle<br>umount /oraarch_STG1<br>umount /oradata_STG1<br>lvremove /dev/vg0/DUMP<br>lvremove /dev/vg0/CRASH<br>lvremove /dev/vg1/lv_ORACLE<br>lvremove /dev/vg1/lv_HIWARE<br>lvremove /dev/vg2/oradata_STG<br>lvremove /dev/vg2/oraarch_STG1<br>vgremove vg1<br>vgremove vg2<br><br>2.DUMP 영역 재구성 및 kdump 재설정<br><br>pvcreate /dev/sdb1<br>vgcreate vg9 /dev/sdb1<br>lvcreate -n DUMP -L 33G vg9<br>lvcreate -n CRASH -l 100%Free vg9<br>mkfs.ext4 /dev/vg9/CRASH<br>vi /etc/kdump.conf<br>core_collector makedumpfile -d 31 -c<br>raw /dev/vg9/DUMP<br>:wq<br>service kdump restart<br><br>3.멀티패스 재구성<br><br>service multipathd stop<br>vi /etc/multipath.conf<br>device {<br>vendor               &quot;HITACHI&quot;<br>product              &quot;DF.*&quot;<br>path_grouping_policy multibus<br>path_checker         tur<br>getuid_callout       &quot;/sbin/scsi_id -g -u -s /block/%n&quot;<br>features        &quot;1 queue_if_no_path&quot;<br>no_path_retry        10<br>}<br>multipaths {<br>multipath {<br>wwid  360060e8010356df0057f21af000000038<br>alias   ARC100G001<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000039<br>alias   DAT200G001<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000040<br>alias   DAT200G002<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000041<br>alias   DAT200G003<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000042<br>alias   DAT200G004<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000043<br>alias   DAT200G005<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000044<br>alias   DAT200G006<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000045<br>alias   DAT200G007<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000046<br>alias   DAT200G008<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000047<br>alias   DAT200G009<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000048<br>alias   DAT200G010<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000049<br>alias   DAT100G001<br>}<br>}<br>:wq<br>service multipathd start<br>service multipathd status<br>multipath –ll<br><br>4.볼륨그룹 생성<br><br>pvcreate /dev/mapper/ARC100G001<br>pvcreate /dev/mapper/DAT100G001<br>pvcreate /dev/mapper/DAT200G001<br>pvcreate /dev/mapper/DAT200G002<br>pvcreate /dev/mapper/DAT200G003<br>pvcreate /dev/mapper/DAT200G004<br>pvcreate /dev/mapper/DAT200G005<br>pvcreate /dev/mapper/DAT200G006<br>pvcreate /dev/mapper/DAT200G007<br>pvcreate /dev/mapper/DAT200G008<br>pvcreate /dev/mapper/DAT200G009<br>pvcreate /dev/mapper/DAT200G010<br>vgcreate SLPIMDORADG /dev/mapper/DAT100G001<br>vgcreate SLPIMDARCDG /dev/mapper/ARC100G001<br>vgcreate SLPIMDDATDG /dev/mapper/DAT200G001 \<br>/dev/mapper/DAT200G002 \<br>/dev/mapper/DAT200G003 \<br>/dev/mapper/DAT200G004 \<br>/dev/mapper/DAT200G005 \<br>/dev/mapper/DAT200G006 \<br>/dev/mapper/DAT200G007 \<br>/dev/mapper/DAT200G008 \<br>/dev/mapper/DAT200G009 \<br>/dev/mapper/DAT200G010<br>lvcreate -n oracle -L 50G SLPIMDORADG<br>lvcreate -n oraarch_STG1 -L 60G SLPIMDARCDG<br>lvcreate -n oradata_STG1 -L 2T SLPIMDDATDG<br><br>5.파일시스템 생성<br><br>mkfs.ext4 /dev/SLPIMDORADG/oracle<br>mkfs.ext4 /dev/SLPIMDARCDG/oraarch_STG1<br>mkfs.ext4 /dev/SLPIMDDATDG/oradata_STG1<br>vi /etc/fstab<br>/dev/SLPIMDORADG/oracle                            /oracle                  ext4    defaults       0 0<br>/dev/SLPIMDARCDG/oraarch_STG1              /oraarch_STG1     ext4    defaults       0 0<br>/dev/SLPIMDDATDG/oradata_STG1              /oradate_STG1      ext4    defaults      0 0<br>/dev/vg0/CRASH                                              /CRASH                   ext4    defaults       0 0<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>=================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김지민 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-2596-8693<br>- 메일주소 : jiminjohn.kim@samsung.com<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com<br>=================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.3</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000HL2QXIA1"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-06-24T01:08:10Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-06-24T01:08:10Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>/etc/multipath.conf 에서 blacklist 와 blacklist_exceptions 는 multipath<br>를 사용하지 않은 SAN 의 wwid 를 추가하거나, blacklist 중에서 다시 이를 multipath<br>로 사용할 SAN 의 wwid 를 배제하기 위해서 설정하는것이기 때문에 설정하지 않는다고 하더라도<br>필요한 디바이스들이 multipath 로 구성이 된다면 서비스에는 특별히 문제가 될만한것이 없을것<br>입니다.<br><br>그리고, 올려주신 절차상에는 큰 문제가 없어 보이긴 합니다만, 좀 구체적인 절차들은 아래의 참고<br>문서들을 참고하셔서 확인하실것을 권장합니다.<br><br><br>[ 참고문서 ]<br><br>[1] How to remove volume group?<br>- https://access.redhat.com/solutions/899653<br><br>[2] How to verify if DM Multipath is configured correctly?<br>- https://access.redhat.com/solutions/46657<br><br>[3] How can I create logical volumes on Red Hat Enterprise Linux?<br>- https://access.redhat.com/solutions/18666<br><br><br>감사합니다.<br><br><publishedDate>2016-06-24T01:08:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>주말에 서버 파일시스템 , Kdump, 멀티패스 재구성 작업이 있습니다.<br><br>멀티패스 구성에서 blacklist 와 blacklist_exceptions 란을 비워도 멀티패스 구성에 특이사항은 없는지요? <br><br>아래와 같이 작업을 하면 되는지 검증 부탁드립니다.<br><br>         &gt;&gt; 아    래 &lt;&lt;<br><br>1. Logical 삭제 및 볼륨그룹 삭제<br><br>umount /CRASH<br>umount /oracle<br>umount /oraarch_STG1<br>umount /oradata_STG1<br>lvremove /dev/vg0/DUMP<br>lvremove /dev/vg0/CRASH<br>lvremove /dev/vg1/lv_ORACLE<br>lvremove /dev/vg1/lv_HIWARE<br>lvremove /dev/vg2/oradata_STG<br>lvremove /dev/vg2/oraarch_STG1<br>vgremove vg1<br>vgremove vg2<br><br>2.DUMP 영역 재구성 및 kdump 재설정<br><br>pvcreate /dev/sdb1<br>vgcreate vg9 /dev/sdb1<br>lvcreate -n DUMP -L 33G vg9<br>lvcreate -n CRASH -l 100%Free vg9<br>mkfs.ext4 /dev/vg9/CRASH<br>vi /etc/kdump.conf<br>core_collector makedumpfile -d 31 -c<br>raw /dev/vg9/DUMP<br>:wq<br>service kdump restart<br><br>3.멀티패스 재구성<br><br>service multipathd stop<br>vi /etc/multipath.conf<br>device {<br>vendor               &quot;HITACHI&quot;<br>product              &quot;DF.*&quot;<br>path_grouping_policy multibus<br>path_checker         tur<br>getuid_callout       &quot;/sbin/scsi_id -g -u -s /block/%n&quot;<br>features        &quot;1 queue_if_no_path&quot;<br>no_path_retry        10<br>}<br>multipaths {<br>multipath {<br>wwid  360060e8010356df0057f21af000000038<br>alias   ARC100G001<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000039<br>alias   DAT200G001<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000040<br>alias   DAT200G002<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000041<br>alias   DAT200G003<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000042<br>alias   DAT200G004<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000043<br>alias   DAT200G005<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000044<br>alias   DAT200G006<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000045<br>alias   DAT200G007<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000046<br>alias   DAT200G008<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000047<br>alias   DAT200G009<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000048<br>alias   DAT200G010<br>}<br>multipath {<br>wwid  360060e8010356df0057f21af000000049<br>alias   DAT100G001<br>}<br>}<br>:wq<br>service multipathd start<br>service multipathd status<br>multipath –ll<br><br>4.볼륨그룹 생성<br><br>pvcreate /dev/mapper/ARC100G001<br>pvcreate /dev/mapper/DAT100G001<br>pvcreate /dev/mapper/DAT200G001<br>pvcreate /dev/mapper/DAT200G002<br>pvcreate /dev/mapper/DAT200G003<br>pvcreate /dev/mapper/DAT200G004<br>pvcreate /dev/mapper/DAT200G005<br>pvcreate /dev/mapper/DAT200G006<br>pvcreate /dev/mapper/DAT200G007<br>pvcreate /dev/mapper/DAT200G008<br>pvcreate /dev/mapper/DAT200G009<br>pvcreate /dev/mapper/DAT200G010<br>vgcreate SLPIMDORADG /dev/mapper/DAT100G001<br>vgcreate SLPIMDARCDG /dev/mapper/ARC100G001<br>vgcreate SLPIMDDATDG /dev/mapper/DAT200G001 \<br>/dev/mapper/DAT200G002 \<br>/dev/mapper/DAT200G003 \<br>/dev/mapper/DAT200G004 \<br>/dev/mapper/DAT200G005 \<br>/dev/mapper/DAT200G006 \<br>/dev/mapper/DAT200G007 \<br>/dev/mapper/DAT200G008 \<br>/dev/mapper/DAT200G009 \<br>/dev/mapper/DAT200G010<br>lvcreate -n oracle -L 50G SLPIMDORADG<br>lvcreate -n oraarch_STG1 -L 60G SLPIMDARCDG<br>lvcreate -n oradata_STG1 -L 2T SLPIMDDATDG<br><br>5.파일시스템 생성<br><br>mkfs.ext4 /dev/SLPIMDORADG/oracle<br>mkfs.ext4 /dev/SLPIMDARCDG/oraarch_STG1<br>mkfs.ext4 /dev/SLPIMDDATDG/oradata_STG1<br>vi /etc/fstab<br>/dev/SLPIMDORADG/oracle                            /oracle                  ext4    defaults       0 0<br>/dev/SLPIMDARCDG/oraarch_STG1              /oraarch_STG1     ext4    defaults       0 0<br>/dev/SLPIMDDATDG/oradata_STG1              /oradate_STG1      ext4    defaults      0 0<br>/dev/vg0/CRASH                                              /CRASH                   ext4    defaults       0 0</issue><timeFramesAndUrgency>=================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김지민 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-2596-8693<br>- 메일주소 : jiminjohn.kim@samsung.com<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 진성민(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01076761313<br>- 메일주소 : sm.jin@time-gate.com<br>=================================================================</timeFramesAndUrgency><cep>false</cep></case>