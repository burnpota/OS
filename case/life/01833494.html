======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2017-04-19T05:09:33Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2017-04-26T01:56:43Z</b><br><b>id : 500A000000X8CKIIA3</b><br>======================<br><br><b><font size=15>
제목  : [장애문의]xfs 에러
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요.<br>OS설치 후<br>1.  cd /home 에서 ls를 실행 ls: cannot open directory .: Input/output error<br>2. umount 후 fstab 에서 home을 #처리<br>3. home lv를 삭제후 lvcreate 를 이용하여 재구성<br>4. 재구성을 하면 mount를 하지 않았는데 자동적으로 /home디렉토리에 마운트 됨<br><br>위와 같은 상황이 지속적으로 발생하고 있습니다.<br>해당 장애시의 로그와 sosreport를 첨부드리니  확인부탁드립니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000JKhh4IAD"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-04-26T01:56:42Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-04-26T01:56:42Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 기술 문의의 상태를 처리완료 상태로 변경하고자 합니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 *재개*하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-04-26T01:56:42Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JKA5UIAX"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-04-24T03:40:49Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-04-24T03:40:49Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin<br>Technical Support Engineer<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-04-24T03:40:49Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JJP1wIAH"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-04-19T07:26:31Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-04-19T07:26:31Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>파일 시스템의 손상 원인에 대한 로그는 확인할 수 없었습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-04-19T07:26:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JJOoFIAX"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-04-19T07:08:04Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-19T07:08:04Z</b><br><br>답변감사합니다.<br>혹시 metadata가 손상된 원인에 대해서는 로그 상에서는 알수가 없나요??<br><br><publishedDate>2017-04-19T07:08:04Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JJOmDIAX"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-04-19T07:03:38Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-04-19T07:03:37Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>네 아래 문서를 참조하여 파일시스템 점검을 완료하시기 바랍니다.<br><br>What is the meaning of &quot;xfs_log_force: error -5 returned&quot;? <br>https://access.redhat.com/solutions/524323<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-04-19T07:03:37Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JJOl5IAH"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-04-19T07:01:39Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-19T07:01:39Z</b><br><br>답변감사합니다.<br>xfs_repair의경우 추가 옵션없이<br>xfs_repair [장치]를 하면되나요??<br><br><publishedDate>2017-04-19T07:01:39Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JJO8bIAH"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-04-19T06:00:32Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-04-19T06:00:32Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>  `-vg0-home     253:6    0   10G  0 lvm  /home<br>/dev/vg0/home                             /home                   xfs     defaults        0 2<br>/dev/dm-6: UUID=&quot;1dae4fe6-b252-4a0d-959c-5e7523982a1d&quot; TYPE=&quot;xfs&quot;<br>/dev/mapper/vg0-home: UUID=&quot;1dae4fe6-b252-4a0d-959c-5e7523982a1d&quot; TYPE=&quot;xfs&quot;<br><br>dm-6, vg0-home lvm 파티션의 메타데이터가 손상되어 아래와 같은 에러가 발생하는 것을 확인하였습니다.<br><br>Apr  6 08:10:19 SLTDBEAL01 kernel: XFS (dm-6): Metadata corruption detected at xfs_agi_read_verify+0x5e/0x110 [xfs], block 0x2<br>Apr  6 08:10:19 SLTDBEAL01 kernel: XFS (dm-6): Unmount and run xfs_repair<br>Apr  6 08:10:19 SLTDBEAL01 kernel: XFS (dm-6): First 64 bytes of corrupted metadata buffer:<br>Apr  6 08:10:19 SLTDBEAL01 kernel: ffff8806178ac000: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................<br>Apr  6 08:10:19 SLTDBEAL01 kernel: ffff8806178ac010: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................<br>Apr  6 08:10:19 SLTDBEAL01 kernel: ffff8806178ac020: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................<br>Apr  6 08:10:19 SLTDBEAL01 kernel: ffff8806178ac030: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................<br><br>Apr 18 15:49:09 SLTDBEAL01 kernel: XFS (dm-6): xfs_log_force: error -5 returned.<br>Apr 18 15:49:39 SLTDBEAL01 kernel: XFS (dm-6): xfs_log_force: error -5 returned.<br><br>$ grep -v root ps<br>USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND<br>securep+   9567  0.2 25.2 12286696 6088404 ?    Sl   Apr05  38:52 java -Xms6144M -Xmx8192M -Djava.security.egd=file:/dev/./urandom -d64 -DPS0000 -Dcache.lru.size=20000 -Dbp.internal.cache=10000 -Dfile.encoding=UTF-8 -cp .:./ksigncase.jar:../../lib/ext/db2.jar:../../lib/ext/oracle.jar:SpinServer.jar:sapjco3.jar: com.ksign.spin.server.SPINServer start ../<br>e1129281  31752  0.0  0.0 150356  2568 ?        S    18:15   0:00 sshd: e1129281@pts/3<br>e1129281  31753  0.0  0.0 116700  3352 pts/3    Ss+  18:15   0:00 -bash<br>c6036948  34682  0.0  0.0 150508  2572 ?        S    18:17   0:00 sshd: c6036948@pts/4<br>c6036948  34683  0.0  0.0 116700  3344 pts/4    Ss   18:17   0:00 -bash<br>securep+ 117227  0.0  6.6 9872852 1605064 ?     Sl   Apr05   6:33 //bin/java -Djava.util.logging.config.file=/home/securepin/apache-tomcat-7.0.67/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/home/securepin/apache-tomcat-7.0.67/endorsed -classpath /home/securepin/apache-tomcat-7.0.67/bin/bootstrap.jar:/home/securepin/apache-tomcat-7.0.67/bin/tomcat-juli.jar -Dcatalina.base=/home/securepin/apache-tomcat-7.0.67 -Dcatalina.home=/home/securepin/apache-tomcat-7.0.67 -Djava.io.tmpdir=/home/securepin/apache-tomcat-7.0.67/temp org.apache.catalina.startup.Bootstrap start<br><br>1. /home 디렉토리에서 빠져나와<br>2. 모든 사용자계정의 접속을 종료하고<br>3. home 디렉토리를 umount 한 이후<br>4. xfs_repair 를 통해 해당 lvm 파티션의 점검/복구를 진행해보시기 바랍니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-04-19T06:00:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>