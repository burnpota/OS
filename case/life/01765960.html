======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2017-01-02T10:31:39Z</b><br><b>마지막 답변자 : Ying Huang</b><br><b>마지막 수정 일자 : 2017-04-27T06:50:23Z</b><br><b>id : 500A000000W7x8sIAB</b><br>======================<br><br><b><font size=15>
제목  : [기술문의]RHCS 볼륨 증축
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br>이미 구성되어있는 RHCS에 추가 볼륨(vg2)을 증축계획을 가지고 있습니다.<br>vgfree는 400G의 여유가 있는 상황에서<br>oraarch_CDTS, orasys_CDTS, oradata_CDTS logical볼륨 생성 후 cluster.conf에 추가 할 예정입니다. <br><br>해당 작업을 진행하기 위해서 아래와 같은 작업계획을 만들어 보았습니다.<br>해당 작업시 문제가 될 부분에 대해서 확인 부탁드립니다.<br><br>sosreport 는 아래에 파일첨부를 하겠습니다.<br><br>1.<br>lvcreate –L 30G –n lv_oraarch_CDTS vg2<br>2.<br>lvcreate –L 30G –n lv_orasys_CDTS vg2<br>3.<br>lvcreate –L 300G –n lv_oradata_CDTS vg2<br>4.<br>mkfs.ext4 /dev/vg2/lv_ oraarch_CDTS<br>5.<br>mkfs.ext4 /dev/vg2/ lv_orasys_CDTS<br>6.<br>mkfs.ext4 /dev/vg22/ lv_oradata_CDTS<br>7.<br>mkdir /oraarch_CDTS<br>8.<br>mkdir /orasys_CDTS<br>9.<br>mkdir /oradata_CDTS<br>10.<br>ccs -h flptrsd01 --addresource fs name=&quot;oraarch_cdts&quot; device=&quot;/dev/vg2/lv_oraarch_CDTS&quot; force_unmount=&quot;1&quot; fstype=&quot;ext4&quot; mountpoint=&quot;/oraarch_CDTS&quot; self_fence=&quot;1&quot; options=&quot;rw,nobarrier&quot;<br>11.<br>ccs -h flptrsd01 --addresource fs name=&quot;orasys_cdts&quot; device=&quot;/dev/vg2/lv_orasys_CDTS&quot; force_unmount=&quot;1&quot; fstype=&quot;ext4&quot; mountpoint=&quot;/orasys_CDTS&quot; self_fence=&quot;1&quot; options=&quot;rw,nobarrier&quot;<br>12.<br>ccs -h flptrsd01 --addresource fs name=&quot;oradata_cdts&quot; device=&quot;/dev/vg2/lv_oradata_CDTS&quot; force_unmount=&quot;1&quot; fstype=&quot;ext4&quot; mountpoint=&quot;/oradata_CDTS&quot; self_fence=&quot;1&quot; options=&quot;rw,nobarrier&quot;<br>13.<br>ccs -h flptrsd01 --addsubservice cluster-FD fs ref=&quot;oraarch_cdts&quot;<br>14.<br>ccs -h flptrsd01 --addsubservice cluster-FD fs ref=&quot;orasys_cdts&quot;<br>15.<br>ccs -h flptrsd01 --addsubservice cluster-FD fs ref=&quot;oradata_cdts&quot;<br>16.   ccs -h flptrsd01 --sync –activate or cman_tool version -r<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 정의찬 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-2952-3184<br>- 메일주소 : 정의찬 &lt;echan.jeong@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 송기호(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01036209917<br>- 메일주소 : kh.song@time-gate.com<br>==============================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>타입  : Configuration issue</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000IcZuGIAV"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-01-06T05:55:08Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-01-06T05:55:08Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>        &lt;fencedevices&gt;<br>                &lt;fencedevice agent=&quot;fence_scsi&quot; devices=&quot;/dev/mapper/ext1, /dev/mapper/ext2&quot; name=&quot;scsi_fence&quot;/&gt;<br>        &lt;/fencedevices&gt;<br><br>네, 맞게 설정하셨습니다.<br>참고로 fence_scsi를 사용시 watchdog를 함께 사용하여 클러스터 노드를 리부팅 시킬수 있습니다.<br><br>상세한 설정 방법은 아래의 KCS 문서를 참고하시기 바랍니다.<br><br>Is there a watchdog script for fence_scsi to reboot a RHEL 6 cluster node?<br>https://access.redhat.com/solutions/65187<br><br>감사합니다.<br><br><publishedDate>2017-01-06T05:55:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IcLeKIAV"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-01-05T07:10:48Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-01-05T07:10:48Z</b><br><br>답변감사합니다.<br>작업이 약간 변경되어서<br>vg2에 남은 vgfree를 이용하는 방식이 아닌 새로운 볼륨을 할당한 후 vg2 를 extend하여 진행하기로 하였습니다.<br>제가 궁금한 부분은 fencing부부인데요.<br><br>현재 펜싱이 scsi 펜싱으로 되어 있는데<br>만약 새로운 볼륨을 할당 후 /dev/mapper/ext2 로 멀티패싱을 한후에<br>cluster.conf에 어떠한 방식으로 추가해 주는지 궁금합니다.<br><br>(변경전)<br>        &lt;fencedevices&gt;<br>                &lt;fencedevice agent=&quot;fence_scsi&quot; devices=&quot;/dev/mapper/ext0&quot; name=&quot;scsi_fence&quot;/&gt;<br>        &lt;/fencedevices&gt;<br>(변경후)<br>        &lt;fencedevices&gt;<br>                &lt;fencedevice agent=&quot;fence_scsi&quot; devices=&quot;/dev/mapper/ext1, /dev/mapper/ext2&quot; name=&quot;scsi_fence&quot;/&gt;<br>        &lt;/fencedevices&gt;<br><br>위의 방법이 맞는지 확인 부탁드리며,<br>위의 방법적용후 수동으로 scsi 펜싱을 테스트해볼 방법이 있는지 확인 부탁드립니다.<br>감사합니다.<br><br><publishedDate>2017-01-05T07:10:48Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IXe1PIAT"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-01-03T03:13:33Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-01-03T03:13:33Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>현재 말씀하신 방법으로 새로운 LV를 클러스터 리소스로 추가하실수 있습니다.<br>다만 클러스터에서 사용되고 있는 LVM이 공유 스토리지일 경우에는 반드시<br>서비스가 기동되어 있는 노드에서 작업을 하셔야 하며 metadata가 동기화<br>되는것을 보장하기 위하여 기타 노드에서는 vg2를 비활성화 하신후 작업을<br>진행 하셔야 됩니다.<br><br>또한 공유 스토리지를 사용하실 경우 HA-LVM을 사용하시는것을 권장드립니다.<br>상세한 작업 방법은 아래의 문서의 &quot;HA-LVM Tagging variant&quot; 부분을 확인해 보시기 바랍니다.<br><br>What is a Highly Available LVM (HA-LVM) configuration and how do I implement it?<br>https://access.redhat.com/solutions/3067<br><br>감사합니다.<br><br><publishedDate>2017-01-03T03:13:33Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>이미 구성되어있는 RHCS에 추가 볼륨(vg2)을 증축계획을 가지고 있습니다.<br>vgfree는 400G의 여유가 있는 상황에서<br>oraarch_CDTS, orasys_CDTS, oradata_CDTS logical볼륨 생성 후 cluster.conf에 추가 할 예정입니다. <br><br>해당 작업을 진행하기 위해서 아래와 같은 작업계획을 만들어 보았습니다.<br>해당 작업시 문제가 될 부분에 대해서 확인 부탁드립니다.<br><br>sosreport 는 아래에 파일첨부를 하겠습니다.<br><br>1.<br>lvcreate –L 30G –n lv_oraarch_CDTS vg2<br>2.<br>lvcreate –L 30G –n lv_orasys_CDTS vg2<br>3.<br>lvcreate –L 300G –n lv_oradata_CDTS vg2<br>4.<br>mkfs.ext4 /dev/vg2/lv_ oraarch_CDTS<br>5.<br>mkfs.ext4 /dev/vg2/ lv_orasys_CDTS<br>6.<br>mkfs.ext4 /dev/vg22/ lv_oradata_CDTS<br>7.<br>mkdir /oraarch_CDTS<br>8.<br>mkdir /orasys_CDTS<br>9.<br>mkdir /oradata_CDTS<br>10.<br>ccs -h flptrsd01 --addresource fs name=&quot;oraarch_cdts&quot; device=&quot;/dev/vg2/lv_oraarch_CDTS&quot; force_unmount=&quot;1&quot; fstype=&quot;ext4&quot; mountpoint=&quot;/oraarch_CDTS&quot; self_fence=&quot;1&quot; options=&quot;rw,nobarrier&quot;<br>11.<br>ccs -h flptrsd01 --addresource fs name=&quot;orasys_cdts&quot; device=&quot;/dev/vg2/lv_orasys_CDTS&quot; force_unmount=&quot;1&quot; fstype=&quot;ext4&quot; mountpoint=&quot;/orasys_CDTS&quot; self_fence=&quot;1&quot; options=&quot;rw,nobarrier&quot;<br>12.<br>ccs -h flptrsd01 --addresource fs name=&quot;oradata_cdts&quot; device=&quot;/dev/vg2/lv_oradata_CDTS&quot; force_unmount=&quot;1&quot; fstype=&quot;ext4&quot; mountpoint=&quot;/oradata_CDTS&quot; self_fence=&quot;1&quot; options=&quot;rw,nobarrier&quot;<br>13.<br>ccs -h flptrsd01 --addsubservice cluster-FD fs ref=&quot;oraarch_cdts&quot;<br>14.<br>ccs -h flptrsd01 --addsubservice cluster-FD fs ref=&quot;orasys_cdts&quot;<br>15.<br>ccs -h flptrsd01 --addsubservice cluster-FD fs ref=&quot;oradata_cdts&quot;<br>16.   ccs -h flptrsd01 --sync –activate or cman_tool version -r</issue><timeFramesAndUrgency>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 정의찬 (사원)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  82-10-2952-3184<br>- 메일주소 : 정의찬 &lt;echan.jeong@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 송기호(선임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01036209917<br>- 메일주소 : kh.song@time-gate.com<br>==============================================================================</timeFramesAndUrgency><cep>false</cep></case>