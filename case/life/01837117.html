======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2017-04-25T01:42:10Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2017-05-12T10:13:59Z</b><br><b>id : 500A000000X8tTtIAJ</b><br>======================<br><br><b><font size=15>
제목  : [이슈문의]FAT-fs (sdk): Directory bread(block 5) failed
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요.<br>해당 서버를 리부팅 하고 나서 아래와 같은 메시지가 dmesg에 발생하였습니다.<br>Dell물리 서버에서 위와같은 동일 이슈가 있는지 확인 부탁드립니다.<br>root@SLPATCDL01 /root # dmesg | grep sdk<br>[   95.569612] sd 12:0:0:0: [sdk] 2112 512-byte logical blocks: (1.08 MB/1.03 MiB)<br>[   95.575581] sd 12:0:0:0: [sdk] Write Protect is off<br>[   95.575587] sd 12:0:0:0: [sdk] Mode Sense: 23 00 00 00<br>[   95.578993] sd 12:0:0:0: [sdk] No Caching mode page found<br>[   95.579061] sd 12:0:0:0: [sdk] Assuming drive cache: write through<br>[   95.607779]  sdk:<br>[   95.634304] sd 12:0:0:0: [sdk] Attached SCSI removable disk<br>[  100.949871] FAT-fs (sdk): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.<br>[  195.508408] FAT-fs (sdk): Directory bread(block 5) failed<br>[  195.508472] FAT-fs (sdk): Directory bread(block 6) failed<br>[  195.508519] FAT-fs (sdk): Directory bread(block 7) failed<br>[  195.508570] FAT-fs (sdk): Directory bread(block 8) failed<br>[  195.508616] FAT-fs (sdk): Directory bread(block 9) failed<br>[  195.508662] FAT-fs (sdk): Directory bread(block 10) failed<br>[  195.508708] FAT-fs (sdk): Directory bread(block 11) failed<br>[  195.508754] FAT-fs (sdk): Directory bread(block 12) failed<br>[  195.508800] FAT-fs (sdk): Directory bread(block 13) failed<br>[  195.508846] FAT-fs (sdk): Directory bread(block 14) failed<br>[  306.927823] FAT-fs (sdk): FAT read failed (blocknr 1)<br>[  306.927888] FAT-fs (sdk): FAT read failed (blocknr 1)<br>root@SLPATCDL01 /root # dmidecode -t system<br># dmidecode 2.12-dmifs<br>SMBIOS 2.7 present.<br>Handle 0x0100, DMI type 1, 27 bytes<br>System Information<br>        Manufacturer: Dell Inc.<br>        Product Name: PowerEdge R720<br>        Version: Not Specified<br>        Serial Number: GBKWHY1<br>        UUID: 4C4C4544-0042-4B10-8057-C7C04F485931<br>        Wake-up Type: Power Switch<br>        SKU Number: SKU=NotProvided;ModelName=PowerEdge R720<br>        Family: Not Specified<br>Handle 0x0C00, DMI type 12, 5 bytes<br>System Configuration Options<br>        Option 1: NVRAM_CLR:  Clear user settable NVRAM areas and set defaults<br>        Option 2: PWRD_EN:  Close to enable password<br>Handle 0x2000, DMI type 32, 11 bytes<br>System Boot Information<br>        Status: No errors detected<br>root@SLPATCDL01 /root #<br><br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김경희 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-3049-1440 <br>- 메일주소 : 김경희 &lt;khsds.kim@samsung.com&gt;<br><br>* 문제 설명 (Description)<br><br>- 증상 : FAT-fs (sdk): Directory bread(block 5) failed<br>- 발생 시점 : 운용중<br>- 발생 빈도 : 지속적으로 발생<br>- 문의 내용(기대 답변) : 원인 및 해결방안<br>(제품의 동작 방법에 대한 문의의 경우 이슈와 직접적으로 어떻게 연관되어 있는지를 함께 설명)<br><br><br>* 재현 방법<br>(불확실할 경우 예상되는 재현 방법을 설명)<br>불가능<br><br>## sosreport 를 첨부 할 수 없는 경우 아래 내용도 함께 작성 ##<br>* sosreport 첨부 불가 사유<br>예) 보안 이슈로 시간 소요, 시스템이 불안하여 sosreport 실행 보류 중.<br>기술문의이기 때문에 sosreport첨부불가능<br><br>* 제품 정보 <br>RHEL6.6<br><br>- 관련 패키지의 버전 정보<br>예) 커널 관련 증상일 경우 &quot;uname -a&quot; 정보<br>- 제품의 아키텍처 (예, x86_64, x86)<br>Linux GAPBUSAL01 2.6.32-504.16.2.el6.x86_64<br><br>* 하드웨어 정보<br>x86_64<br><br>- Model:Dell PowerEdge R730<br>- CPU: Xeon<br>- Memory:32GB<br>- 기타 관련 설정 정보:<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000INZiIIAX"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-04-28T04:44:38Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-04-28T04:44:38Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>[ messages 로그 확인 ]<br><br>$ vi var/log/messages<br>~~ 생략<br>30349 Apr 24 14:08:30 SLPATCDL01 kernel: usb-storage 1-1.6.2:1.0: USB Mass Storage device detected<br>30350 Apr 24 14:08:30 SLPATCDL01 kernel: scsi host12: usb-storage 1-1.6.2:1.0<br>30351 Apr 24 14:08:30 SLPATCDL01 mtp-probe: checking bus 1, device 6: &quot;/sys/devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.6/1-1.6.2&quot;<br>30352 Apr 24 14:08:30 SLPATCDL01 mtp-probe: bus: 1, device: 6 was not an MTP device<br>30353 Apr 24 14:08:31 SLPATCDL01 kernel: scsi 12:0:0:0: Direct-Access     iDRAC    SECUPD           0329 PQ: 0 ANSI: 0 CCS<br>30354 Apr 24 14:08:31 SLPATCDL01 kernel: sd 12:0:0:0: Attached scsi generic sg10 type 0<br>30355 Apr 24 14:08:31 SLPATCDL01 kernel: sd 12:0:0:0: [sdk] 2112 512-byte logical blocks: (1.08 MB/1.03 MiB)<br>30356 Apr 24 14:08:31 SLPATCDL01 kernel: sd 12:0:0:0: [sdk] Write Protect is off<br>30357 Apr 24 14:08:31 SLPATCDL01 kernel: sd 12:0:0:0: [sdk] Mode Sense: 23 00 00 00<br>30358 Apr 24 14:08:31 SLPATCDL01 kernel: sd 12:0:0:0: [sdk] No Caching mode page found<br>30359 Apr 24 14:08:31 SLPATCDL01 kernel: sd 12:0:0:0: [sdk] Assuming drive cache: write through<br>30360 Apr 24 14:08:31 SLPATCDL01 kernel: sdk:<br>30361 Apr 24 14:08:31 SLPATCDL01 kernel: sd 12:0:0:0: [sdk] Attached SCSI removable disk<br>30362 Apr 24 14:08:31 SLPATCDL01 multipathd: sdk: add path (uevent)<br>30363 Apr 24 14:08:36 SLPATCDL01 kernel: FAT-fs (sdk): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.<br>30364 Apr 24 14:08:57 SLPATCDL01 kernel: usb 1-1.6.2: USB disconnect, device number 6<br>30365 Apr 24 14:08:57 SLPATCDL01 multipathd: sdk: remove path (uevent)<br>30366 Apr 24 14:08:57 SLPATCDL01 multipathd: sdk: path already removed<br>30367 Apr 24 14:08:57 SLPATCDL01 systemd-udevd: error opening USB device 'descriptors' file<br>30368 Apr 24 14:09:00 SLPATCDL01 ntpd_intres[18860]: host name not found: time.bora.net<br>30369 Apr 24 14:09:01 SLPATCDL01 CROND[19039]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>30370 Apr 24 14:10:01 SLPATCDL01 CROND[19213]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>30371 Apr 24 14:10:10 SLPATCDL01 kernel: FAT-fs (sdk): Directory bread(block 5) failed<br>30372 Apr 24 14:10:10 SLPATCDL01 kernel: FAT-fs (sdk): Directory bread(block 6) failed<br>30373 Apr 24 14:10:10 SLPATCDL01 kernel: FAT-fs (sdk): Directory bread(block 7) failed<br>~~ 생략<br><br>[ 마운트 상태 확인 ]<br><br>$ vi proc/mounts<br>~~ 생략<br>/dev/sdk /tmp/SECUPD vfat rw,relatime,fmask=0077,dmask=0077,codepage=437,iocharset=ascii,shortname=mixed,errors=remount-ro 0 0<br>~~ 생략<br><br>$ cat ../../df          <br>df: '/tmp/SECUPD': Input/output error<br>df: '/tmp/SECUPD': Input/output error<br>~~ 생략<br><br>올려주신 sosreport 를 확인해보니 에러가 나타나는 디바이스는 usb 로 예상이 되며 물리적으로 연결이 되었다가 올바르게<br>제거가 되지 않아서 커널에서 이 디바이스의 FAT 파일시스템의 Block 을 읽으려고 시도를 하였지만, 실제로는 존재하지 않<br>아서 읽기 실패 메시지가 나타난것으로 보입니다.<br><br>이 메시지가 더 이상 나타나지 않게 하려면 아래의 umount 를 실행해보시고, 저희 Red Hat 의 지원이 필요하시다면 다시<br>연락주십시오.<br><br>$ umount -l /dev/sdk<br><br>감사합니다.<br><br><publishedDate>2017-04-28T04:44:38Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000INLyhIAH"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-04-27T08:25:40Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-27T08:25:40Z</b><br><br>안녕하세요<br>최초 메세지가 발생했던 당시에는 selinux 가  disabled 상태였으며<br>리부팅 후에도 메세지가 발생하고  있습니다.<br>sosreport 는  내일 업로드 하겠습니다.<br>감사합니다.<br><br><publishedDate>2017-04-27T08:25:40Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000INLFYIA5"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-04-27T07:29:15Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-04-27T07:29:14Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>SELinux 를 Disable 하고 난 뒤에도 동일한 메시지가 나타났다는 말씀이신가요?<br><br>만약, 그렇다면 sosreport 를 케이스에 올려주시면 좀 더 자세한 분석을 해보도록 하겠습니다.<br>또한, 본 이슈를 Dell 에도 문의하셔서 OMSA 측면에 어떤 이슈가 없는지 확인이 필요할거 같습니다.<br><br>감사합니다.<br><br><publishedDate>2017-04-27T07:29:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000INJdFIAX"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2017-04-27T04:30:53Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2017-04-27T04:30:53Z</b><br><br>안녕하세요.<br>selinux 가  disabled 되어 있는 상태에서 메시지가 dmesg에 발생하였습니다<br>감사합니다.<br><br><publishedDate>2017-04-27T04:30:53Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JKQwgIAH"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-04-25T05:56:10Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-04-25T05:56:10Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>직면하신 이슈는 SELINUX 와 Dell OMSA ( Dell OpenManage Server Administrator ) 의 호환성<br>문제로 인해서 나타나는것으로 알려져 있으며 SELinux 를 disable 하므로서 문제해소가 가능할것입니다.<br><br>참고문서[1]의 Resolution 을 적용해보시고 난 이후에 문제해소가 되는지 확인해보시고 난 뒤에도 저희 Red<br>Hat 의 지원이 필요하시다면 다시 연락주십시오.<br><br><br>[ 참고문서 ]<br><br>[1] How do I turn SELinux off in Red Hat Enterprise Linux?<br>- https://access.redhat.com/solutions/3176<br><br>감사합니다.<br><br><publishedDate>2017-04-25T05:56:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JKQtSIAX"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-04-25T05:51:59Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-04-25T05:51:59Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>현재 올려주신 문의내용을 자세히 살펴보고 있는중이며 곧 관련된 내용을 업데이트 하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-04-25T05:51:59Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>