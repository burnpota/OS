======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2019-01-10T02:10:54Z</b><br><b>마지막 답변자 : Workflow Integration</b><br><b>마지막 수정 일자 : 2019-01-23T01:08:05Z</b><br><b>id : 5002K00000d8YpBQAU</b><br>======================<br><br><b><font size=15>
제목  : CRC error장애 판단 기준관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요. 타임게이트 송기호입니다.<br><br>crc error 관련 문의드립니다.<br><br>1. crc error 모니터링 하는방법<br><br>2. crc error 가 발생하였을때 장애 판단기준 (예를들면 crc error가 최소 3개가 발생하면 장애로 판단 1개가 발생하였을때는 무시가능)<br><br>3 이와같은 crc error를 장애를 최소화 할수 있는 방법<br><br>https://access.redhat.com/solutions/66003  문서를 보면 모니터링 하는 방법에 대해서 나와 있는 것으로 보이는데요. <br>혹시 참고 문서나 알고 계신 방법에 부탁드립니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.7</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>NA</hostname><br><br><br><comment id="a0a2K00000OtWaCQAV"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2019-01-23T01:08:05Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2019-01-23T01:08:05Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service입니다.<br><br>케이스를 직접 close 처리 해주셔서 감사합니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.  <br>  <br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발생됩니다. <br>고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다. <br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.  <br>  <br>감사합니다.<br><br><publishedDate>2019-01-23T01:08:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OroNTQAZ"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2019-01-15T04:33:52Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2019-01-15T04:33:52Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>tg3 드라이버의 소스코드를 확인해본 결과 해당 드라이버는 rx_crc_errors 카운터를 제공하지 않는 것으로 확인하였습니다.<br><br>따라서 i40e드라이버를 사용하는 eth8~eth11 의 ethtool -S에서는 rx_crc_errors가 보이나 <br>tg3 드라이버를 사용하고 있는 eth0 ~ eth7 은 ethtool -S 로 rx_crc_errors가 보이지 않는 것은 정상입니다.<br><br>tg3 드라이버를 사용하는 장비는 rx_crc_errors 값 대신에 rx_fcs_errors 값으로 frame error 카운트 수를 확인하실수 있습니다.<br><br>감사합니다.<br><br><publishedDate>2019-01-15T04:33:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000Oro3IQAR"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2019-01-15T03:47:15Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2019-01-15T03:47:15Z</b><br><br>안녕하세요. sosreport 첨부합니다.<br>감사합니다.<br><br><publishedDate>2019-01-15T03:47:15Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000OrXRjQAN"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2019-01-14T02:22:40Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2019-01-14T02:22:40Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>더 자세한 확인을 위해 해당 서버의 sosreport를 본 케이스에 첨부 부탁드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2019-01-14T02:22:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OrGQNQA3"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2019-01-11T07:38:10Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2019-01-11T07:38:10Z</b><br><br>답변감사합니다.<br>답변주신 내용과 레드햇 지식문서를 참고해서 모니터링 방안을 찾고있는데요.<br><br>센터내의 서버들이<br>ethtool -S &lt;네트워크장치&gt; 를하였을때 crc error가 보이지 않습니다.<br><br> <br><br>root@SLDAFXAL01/root # dmidecode -t 1<br># dmidecode 2.12<br>SMBIOS 3.1 present.<br># SMBIOS implementations newer than version 2.8 are not<br># fully supported by this version of dmidecode.<br><br>Handle 0x008D, DMI type 1, 27 bytes<br>System Information<br>        Manufacturer: HPE<br>        Product Name: ProLiant ML350 Gen10<br>        Version: Not Specified<br>        Serial Number: SGH833SY2X<br>        UUID: 36373738-3732-4753-4838-333353593258<br>        Wake-up Type: Power Switch<br>        SKU Number: 877627-B21<br>        Family: ProLiant<br><br>root@SLDAFXAL01/root # ethtool -i eth0<br>driver: tg3<br>version: 3.137<br>firmware-version: 5719-v1.46 NCSI v1.4.18.0<br>bus-info: 0000:37:00.0<br>supports-statistics: yes<br>supports-test: yes<br>supports-eeprom-access: yes<br>supports-register-dump: yes<br>supports-priv-flags: no<br>root@SLDAFXAL01/root # ethtool -S eth0<br>NIC statistics:<br>     rx_octets: 1201686701<br>     rx_fragments: 0<br>     rx_ucast_packets: 9174132<br>     rx_mcast_packets: 2690378<br>     rx_bcast_packets: 2459528<br>     rx_fcs_errors: 0<br>     rx_align_errors: 0<br>     rx_xon_pause_rcvd: 0<br>     rx_xoff_pause_rcvd: 0<br>     rx_mac_ctrl_rcvd: 0<br>     rx_xoff_entered: 0<br>     rx_frame_too_long_errors: 0<br>     rx_jabbers: 0<br>     rx_undersize_packets: 0<br>     rx_in_length_errors: 0<br>     rx_out_length_errors: 0<br>     rx_64_or_less_octet_packets: 0<br>     rx_65_to_127_octet_packets: 0<br>     rx_128_to_255_octet_packets: 0<br>     rx_256_to_511_octet_packets: 0<br>     rx_512_to_1023_octet_packets: 0<br>     rx_1024_to_1522_octet_packets: 0<br>     rx_1523_to_2047_octet_packets: 0<br>     rx_2048_to_4095_octet_packets: 0<br>     rx_4096_to_8191_octet_packets: 0<br>     rx_8192_to_9022_octet_packets: 0<br>     tx_octets: 103263112199<br>     tx_collisions: 0<br>     tx_xon_sent: 0<br>     tx_xoff_sent: 0<br>     tx_flow_control: 0<br>     tx_mac_errors: 0<br>     tx_single_collisions: 0<br>     tx_mult_collisions: 0<br>     tx_deferred: 0<br>     tx_excessive_collisions: 0<br>     tx_late_collisions: 0<br>     tx_collide_2times: 0<br>     tx_collide_3times: 0<br>     tx_collide_4times: 0<br>     tx_collide_5times: 0<br>     tx_collide_6times: 0<br>     tx_collide_7times: 0<br>     tx_collide_8times: 0<br>     tx_collide_9times: 0<br>     tx_collide_10times: 0<br>     tx_collide_11times: 0<br>     tx_collide_12times: 0<br>     tx_collide_13times: 0<br>     tx_collide_14times: 0<br>     tx_collide_15times: 0<br>     tx_ucast_packets: 69384215<br>     tx_mcast_packets: 0<br>     tx_bcast_packets: 20<br>     tx_carrier_sense_errors: 0<br>     tx_discards: 0<br>     tx_errors: 0<br>     dma_writeq_full: 0<br>     dma_write_prioq_full: 0<br>     rxbds_empty: 0<br>     dma_readq_full: 0<br>     dma_read_prioq_full: 0<br>     tx_comp_queue_full: 0<br>     ring_set_send_prod_index: 0<br>     ring_status_update: 0<br>     nic_irqs: 0<br>     nic_avoided_irqs: 0<br>     nic_tx_threshold_hit: 0<br>     mbuf_lwm_thresh_hit: 0<br><br><br>root@SLDAFXAL01/root # cat /etc/sysconfig/network-scripts/ifcfg-eth0<br>DEVICE=eth0<br>#HWADDR=98:F2:B3:09:51:20<br>TYPE=Ethernet<br>#UUID=c6d5f799-5137-4ded-b1e8-a135162bdce7<br>ONBOOT=yes<br>NM_CONTROLLED=no<br>BOOTPROTO=none<br>MASTER=bond0<br>SLAVE=yes<br>ETHTOOL_OPTS=&quot;-K ${DEVICE} gso off gro off tso off lro off; -G ${DEVICE} rx 4096 tx 4096&quot;<br><br>root@SLDAFXAL01/root # cat /etc/redhat-release<br>Red Hat Enterprise Linux Server release 6.9 (Santiago)<br>root@SLDAFXAL01/root # cat /proc/cmdline<br>ro root=UUID=dcf814ec-b4a2-4cef-a136-1199d3d9db37 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=512M<br> KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet nmi_watchdog=0 transparent_hugepage=never elevator=deadline nosoftlockup intel_idle.max_cst<br>ate=0 processor.max_cstate=1 intel_pstate=disable spectre_v2=off nopti ipv6.disable=1<br><br>내부 테스트 장비에 대해서는 정상적으로 보이는데<br>다른 서버들에서는 이와같이 rx_crc_errors: 0 가 보이지 않는 이유가 있을까요??<br><br>감사합니다.<br><br><publishedDate>2019-01-11T07:38:10Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000OqzjsQAB"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2019-01-10T07:02:38Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2019-01-10T07:02:38Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>문의 주신 내용에 대한 답변으로는 언급해주신 문서의 내용을 참고하시면 됩니다.<br><br>What is the meaning of CRC or frame errors on my network interface? <br>https://access.redhat.com/solutions/66003<br><br>Q1. crc error 모니터링 하는방법<br><br>A1. crc error를 모니터링 하는 방법은 ethtool -S 에서 rx_crc_errors 항목의 값이 증가하는 지를 모니터링 하시면 됩니다.<br><br>  # ethtool -S &lt;interface&gt; | grep crc<br>     rx_crc_errors: 0<br><br>Q2. crc error 가 발생하였을때 장애 판단기준 (예를들면 crc error가 최소 3개가 발생하면 장애로 판단 1개가 발생하였을때는 무시가능)<br><br>A2. 상기의 문서에서 설명했지만 어떤 NIC는 링크가 down/up 될때에 crc_error가 발생하는 것은 정상인 경우도 있습니다. 따라서 작은 값(100 이하) 발생후 장시간동안 해당 값에 변화가 없고, 또한 네트워크단에 퍼포먼스 저하가 없다면 무시할수 있을 것으로 판단됩니다. 하지만 일단 단시간내에 지속적인 값의 상승과 함께 네트워크단에 퍼포먼스 저하 이슈가 발생했다면 하드웨어 장애로 판단할수 있으며 교체작업 등을 진행하실수 있습니다.<br><br>Q3 이와같은 crc error를 장애를 최소화 할수 있는 방법<br>A3 crc error는 기본적으로 네트워크 단의 문제로 발생하기 때문에, 해당 값이 지속적으로 상승하면서 네트워크단에 장애가 발생한다면 스위치 및 포트 설정, 케이블, NIC 펌웨어 등을 체크해야 합니다. 따라서 crc error 이슈가 발생한다면 하드웨어 점검 및 교체, 네트워크 장비 벤더사의 권고대로 적절한 스위치 포트설정이 중요합니다.<br><br>감사합니다.<br><br><publishedDate>2019-01-10T07:02:38Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000Oqy71QAB"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2019-01-10T03:34:38Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2019-01-10T03:34:38Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>저는 Platform Support 를 담당하고 있는 Technical Support Engineer 이성빈입니다.<br>올려주신 문의내용은 현재 자세히 살펴보고 있는중이며, 관련된 내용이 확인이 되는대로 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2019-01-10T03:34:38Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>