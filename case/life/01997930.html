======================<br><b>생성계정 : 타임게이트 (주)</b><br><b>생성날짜 : 2017-12-21T01:35:25Z</b><br><b>마지막 답변자 : 타임게이트 (주)</b><br><b>마지막 수정 일자 : 2017-12-22T05:34:57Z</b><br><b>id : 500A000000ZNyA0IAL</b><br>======================<br><br><b><font size=15>
제목  : [삼성생명] 번들 http server mod_proxy 설정 문의 (SAP netweaver 연동)
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>.<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>.<br><br>해결 기간이나 업무에 미치는 영향에 대한 정보를 제공해 주시겠습니까?<br><br>.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Configuration issue</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 4 (Low)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000LEPpnIAH"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-12-21T05:29:13Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-12-21T05:29:13Z</b><br><br>안녕하세요,  <br><br>유선상으로 설명드린 것처럼, 일반적으로 session sticky는 cookie(default JSESSIONID)를 기반으로 수행됩니다.<br>브라우저 상에서 request 호출이 발생하면, JSESSIONID=xxxxxxx 란 이름으로  session cookie가 생성되어 web을 통해 was로 전달이 됩니다.<br>해당 request에 대한 response에 JSESSIONID=xxxxxxx.(jvmid)와 같은 식으로 was 정보가 세팅이 되어 return 되어, 동일 client가 계속해서 동일 was로 request를 전달하는 형태가 됩니다.(sticky session)<br><br>현재 아래와 같이 mod_header 설정이 추가하여 사용하고 있다는 것은, mod_proxy_balancer 단에서 request 헤더에 ROUTEID란 session cookie를 생성하여 ROUTEID=xxxx.(route) 와 같이 route 정보를 보고 해당 route로 request를 전달하겠다는 설정으로 보입니다.<br>Header add Set-Cookie &quot;ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/&quot; env=BALANCER_ROUTE_CHANGED<br><br>해당 설정을 삭제하였을 경우에 session sticky가 동작하지 않는다면, WAS(SAP netweaver)에서 request return 시에 어떻게 session cookie를 보내주는지는 SAP 쪽에 문의해 보셔야 할 것 같습니다.<br><br>##<br>provide load balancing with stickyness using mod_headers, even if the back-end server does not set a suitable session cookie:<br>##<br>=&gt; 이 말은 back-end server(was)에서 session cookie 처리를 잘 못하는 경우라도, mod_headers를 이용한 stickyness를 통해 load balancing을 하겠다는 의미입니다.<br><br>감사합니다. <br>Minwoo Park<br><br><publishedDate>2017-12-21T05:29:13Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LEPUrIAP"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-12-21T04:45:55Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-12-21T04:45:54Z</b><br><br>안녕하세요<br>확인요청하신 내역에 대하여 하기와 같이 전달드립니다. <br><br>어떤 이슈로 인해 해당 설정을 하시는 것인지?<br>--&gt; 첨부된 설정파일 확인해보시면 아시겠지만 하기와 같이 virtualhost를 3개로 설정하여 동일한 backend server를 바라보게 설정을 해놨습니다.<br>&lt;VirtualHost epfc.wb1.p.samsunglife.kr:8443&gt;<br>    <br>DocumentRoot &quot;/APP/ep/webdocs&quot;<br>## 중략 ##<br>&lt;/VirtualHost&gt;<br><br>&lt;VirtualHost epfc.wb1.p.samsunglife.kr:8444&gt;<br>    <br>DocumentRoot &quot;/APP/ep/webdocs&quot;<br>## 중략 ##<br>&lt;/VirtualHost&gt;<br><br>&lt;VirtualHost epfc.wb1.p.samsunglife.kr:8445&gt;<br>    <br>DocumentRoot &quot;/APP/ep/webdocs&quot;<br>## 중략 ##<br>&lt;/VirtualHost&gt;<br><br>기 문의드린 하기의 설정이 없으면 재로그인을 해야하는 세션이 유지되는 않는 현상이 발생하였습니다. <br>Header add Set-Cookie &quot;ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/&quot; env=BALANCER_ROUTE_CHANGED<br><br><publishedDate>2017-12-21T04:45:54Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LEPSgIAP"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-12-21T04:41:21Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-12-21T04:41:21Z</b><br><br>안녕하세요. <br><br>설정파일 첨부 합니다.<br><br>감사합니다.<br><br><publishedDate>2017-12-21T04:41:21Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LEPIKIA5"><br>======================<br><b>생성계정 : Park, Min Woo</b><br><b>생성날짜 : 2017-12-21T04:16:51Z</b><br><b>마지막 답변자 : Park, Min Woo</b><br><b>마지막 수정 일자 : 2017-12-21T04:16:50Z</b><br><br>안녕하세요,  <br>  <br>Red Hat Global Support Services를 이용해주셔서 감사합니다.  <br><br>설정 파일이 첨부되지 않았습니다.<br><br>또한 어떤 이슈로 인해 해당 설정을 하시는 것인지, 설정하고자 하는 목적이 무엇인지 자세한 설명 부탁드립니다.<br>  <br>감사합니다. <br>Minwoo Park<br><br><publishedDate>2017-12-21T04:16:50Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LEOLyIAP"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-12-21T01:38:33Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-12-21T01:38:33Z</b><br><br>설정파일 첨부드립니다.<br><br><publishedDate>2017-12-21T01:38:33Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LEOKvIAP"><br>======================<br><b>생성계정 : (주), 타임게이트</b><br><b>생성날짜 : 2017-12-21T01:35:42Z</b><br><b>마지막 답변자 : (주), 타임게이트</b><br><b>마지막 수정 일자 : 2017-12-21T01:35:42Z</b><br><br>삼생생명 차세대 ERP 관련 이슈에 대하여 하기와 같이 문의가 요청되어 SR 생성드립니다. <br><br>## 고객정보 ##<br>고객사 : 삼성생명<br>고객명 : 박현우 선임<br>연락처 : 010-9104-2853<br>##<br><br>## 환경 ##<br>-OS : RHEL7<br>-WEB : 번들 HTTP<br>rpm -qf /usr/sbin/httpd<br>httpd-2.4.6-40.el7.x86_64<br>-WAS : SAP netweaver 7.x<br><br>##  협력사정보 ##<br>회사명 : 타임게이트<br>담당자 : 안상훈 책임<br>연락처 : 010-3957-1209<br>##<br><br>현재 mod_proxy 설정 중 하기와 같이 header add 값이 추가되어 있습니다. <br>Header add Set-Cookie &quot;ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/&quot; env=BALANCER_ROUTE_CHANGED<br>&lt;Proxy balancer://epCluster&gt;<br>        BalancerMember https://ep.ap1.p.samsunglife.kr:50002 route=ep1<br>        BalancerMember https://ep.ap2.p.samsunglife.kr:50002 route=ep2<br>## 중략 ##<br>ProxySet stickysession=ROUTEID<br>&lt;/Proxy&gt;<br><br>하기의 URL을 참고하여 적용하였는데<br>https://httpd.apache.org/docs/2.4/mod/mod_proxy_balancer.html<br>##<br>provide load balancing with stickyness using mod_headers, even if the back-end server does not set a suitable session cookie:<br>##<br>뒷단의 WAS 서버상에서 적절한 세션쿠키 값이 설정이 안되어 있는 경우에 BALANCER_WORKER_ROUTE, BALANCER_ROUTE_CHANGED이 없는 경우 sticky로 세션이 유지가 안되는 것인지요?<br><br>감사합니다.<br><br><publishedDate>2017-12-21T01:35:42Z</publishedDate><createdByType>Customer</createdByType><br>======================<br></comments><br>