======================<br><b>생성계정 : JIMIN KIM</b><br><b>생성날짜 : 2018-12-31T04:43:08Z</b><br><b>마지막 답변자 : Kyung Huh</b><br><b>마지막 수정 일자 : 2019-01-03T05:42:48Z</b><br><b>id : 5002K00000d6BGpQAM</b><br>======================<br><br><b><font size=15>
제목  : systemctl --failed 메세지 관련 문
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br><br>아래와 같이 대상 서버에서 systemctl --failed 수행 시 <br>systemd-fsck@dev-mapper-LLPTSSAPPVG\x2dAPP.service 서비스가 failed 되어있는 상태인데요.<br><br>기존 LLPTSSAPPVG에 LOG와 APP 파일시스템이 있었는데<br>APP를 지우고 VG명은 LLPTSSLOGVG로 변경하였습니다.<br><br>해당 작업 후 아래와 같이 LLPTSSAPPVG에서 APP 관련 서비스가 fail 상태로 남아있는 것 처럼보이는데<br>원인과 조치하는 방법을 문의드리려고 합니다.<br><br><br>root@SLPTSSAL04 /root # systemctl --failed<br>  UNIT                                               LOAD   ACTIVE SUB    DESCRIPTION<br>* systemd-fsck@dev-mapper-LLPTSSAPPVG\x2dAPP.service loaded failed failed File System Check on /dev/mapper/LLPTSSAPPVG-APP<br><br>LOAD   = Reflects whether the unit definition was properly loaded.<br>ACTIVE = The high-level unit activation state, i.e. generalization of SUB.<br>SUB    = The low-level unit activation state, values depend on unit type.<br><br>1 loaded units listed. Pass --all to see loaded but inactive units, too.<br>To show all installed unit files use 'systemctl list-unit-files'.<br><br><br> - systemctl status<br>root@SLPTSSAL04 /root # systemctl status systemd-fsck@dev-mapper-LLPTSSAPPVG\x2dAPP.service<br>* systemd-fsck@dev-mapper-LLPTSSAPPVGx2dAPP.service - File System Check on /dev/mapper/LLPTSSAPPVGx2dAPP<br>   Loaded: loaded (/usr/lib/systemd/system/systemd-fsck@.service; static; vendor preset: disabled)<br>   Active: inactive (dead)<br>     Docs: man:systemd-fsck@.service(8)<br><br> - vgs<br>root@SLPTSSAL04 /root # vgs<br>  VG          #PV #LV #SN Attr   VSize   VFree<br>  LLPTSSLOGVG   1   1   0 wz--n- 100.00g    0<br>  LRPTSSAPPVG   1   1   0 wz--n-  50.00g    0<br>  vg0           1   1   0 wz--n-   6.99g    0<br>  vg9           1   2   0 wz--n- 225.00g    0<br><br> - lvs<br>root@SLPTSSAL04 /root # lvs<br>  LV       VG          Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert<br>  LOG      LLPTSSLOGVG -wi-ao---- 100.00g<br>  APP      LRPTSSAPPVG -wi-ao----  50.00g<br>  sysadmin vg0         -wi-ao----   6.99g<br>  CRASH    vg9         -wi-ao---- 114.00g<br>  DUMP     vg9         -wi-a----- 111.00g<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.4</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPTSSAL04</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0a2K00000OlX66QAF"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2019-01-03T05:42:46Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2019-01-03T05:42:45Z</b><br><br>확인 감사합니다.<br>케이스를 종료합니다.<br><br>허 경 드림.<br><br><publishedDate>2019-01-03T05:42:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OlNgpQAF"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-01-02T09:47:35Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-01-02T09:47:35Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>답변 감사드립니다.<br><br>케이스 종료해주셔도될 것 같습니다.<br><br>감사합니다.<br><br><publishedDate>2019-01-02T09:47:35Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000OlLhMQAV"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2019-01-02T04:47:08Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2019-01-02T04:47:08Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>해당 systemd unit과 관련한 장치가 이미 존재하지 않는 상태로 변경되었기 때문에 UNIT을 명시하여 실행할 경우 명령이 실패하는 것으로 생각됩니다.<br>LVM 장치 이름 변경 사항을 이미 인지하고 있는 상황이기 때문에 systemctl reset-failed 명령으로 이전 실패 기록 초기화로 정리되는 것입니다.<br><br>추가 문의 없으시면 케이스를 종료처리하겠습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2019-01-02T04:47:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OlD8HQAV"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2018-12-31T08:27:31Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2018-12-31T08:27:30Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>systemctl reset-failed로 해결이 된 것 같습니다. <br><br>뒤에 해당 내역까지 붙여넣기 한 경우에는 command가 실패하는 것 같습니다.<br><br>root@SLPTSSAL04 /root # systemctl --failed<br>  UNIT                                               LOAD   ACTIVE SUB    DESCRIPTION<br>* systemd-fsck@dev-mapper-LLPTSSAPPVG\x2dAPP.service loaded failed failed File System Check on /dev/mapper/LLPTSSAPPVG-APP<br><br>LOAD   = Reflects whether the unit definition was properly loaded.<br>ACTIVE = The high-level unit activation state, i.e. generalization of SUB.<br>SUB    = The low-level unit activation state, values depend on unit type.<br><br>1 loaded units listed. Pass --all to see loaded but inactive units, too.<br>To show all installed unit files use 'systemctl list-unit-files'.<br>root@SLPTSSAL04 /root # systemctl reset-failed systemd-fsck@dev-mapper-LLPTSSAPPVG\x2dAPP.service<br>Failed to reset failed state of unit systemd-fsck@dev-mapper-LLPTSSAPPVGx2dAPP.service: Unit systemd-fsck@dev-mapper-LLPTSSAPPVGx2dAPP.service is not loaded.<br>root@SLPTSSAL04 /root # systemctl --failed<br>  UNIT                                               LOAD   ACTIVE SUB    DESCRIPTION<br>* systemd-fsck@dev-mapper-LLPTSSAPPVG\x2dAPP.service loaded failed failed File System Check on /dev/mapper/LLPTSSAPPVG-APP<br><br>LOAD   = Reflects whether the unit definition was properly loaded.<br>ACTIVE = The high-level unit activation state, i.e. generalization of SUB.<br>SUB    = The low-level unit activation state, values depend on unit type.<br><br>1 loaded units listed. Pass --all to see loaded but inactive units, too.<br>To show all installed unit files use 'systemctl list-unit-files'.<br>root@SLPTSSAL04 /root # systemctl reset-failed<br>root@SLPTSSAL04 /root # systemctl --failed<br>0 loaded units listed. Pass --all to see loaded but inactive units, too.<br>To show all installed unit files use 'systemctl list-unit-files'.<br><br>조치 감사드립니다.<br><br>감사합니다.<br><br><publishedDate>2018-12-31T08:27:30Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000OlCssQAF"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-12-31T07:33:15Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-12-31T07:33:15Z</b><br><br>이미 이름이 변경된 VG이기 때문에 failed 상태를 reset하시는 것으로 충분할 것 같습니다.<br><br>다음 명령으로 리셋하시면 해소될 것으로 보입니다.<br><br># systemctl reset-failed <br>또는 <br># systemctl reset-failed systemd-fsck@dev-mapper-LLPTSSAPPVG\x2dAPP.service<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-12-31T07:33:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OlCgVQAV"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-12-31T06:48:25Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-12-31T06:48:25Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>시스템에 존재하던 파일시스템이어서 systemd가 fsck를 확인하는 예전 정보를 가지고 있는 것으로 보입니다.<br>문제를 해소할 수 있는 방법을 확인하여 알려드리겠습니다. 잠시만 더 기다려 주시기 바랍니다.<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-12-31T06:48:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000OlCAUQA3"><br>======================<br><b>생성계정 : Abbott, Edmund</b><br><b>생성날짜 : 2018-12-31T04:43:32Z</b><br><b>마지막 답변자 : Abbott, Edmund</b><br><b>마지막 수정 일자 : 2018-12-31T04:43:32Z</b><br><br>This comment has been generated via an automated case assistant and is based upon the information provided at case create time.<br>If you have already uploaded or are in the process of creating and uploading a sosreport to this case, please ignore this request.<br><br>Please provide a sosreport.  The lack of a sosreport often impedes our ability to make progress in fully understanding and <br>resolving the reported issue(s) in these types of cases.  If you cannot provide a sosreport for reasons such as its a secure <br>site or other such restrictions, please let us know if not already noted within the case. If this request is not applicable, <br>we do apologize and welcome any feedback or clarifying information you could provide to help us understand the problem. <br><br><br>If the system is or can be booted: <br>======================================================================================  <br><br>  * Create sosreport: ~]# sosreport <br>    Please see the following documentation for more information on the sosreport and how to gather one from the system.<br><br>        What is sosreport and how do I create one in Red Hat Enterprise Linux 4.6 and later?<br>        https://access.redhat.com/knowledge/solutions/3592<br><br>  * Attach to case  : ~]# redhat-support-tool addattachment -c CASE_NUMBER /path/to/sosreport<br>    If needed, an example on attaching a file to a case via the portal UI is available within the following document in <br>    the section entitled &quot;Attaching the file(s) to the ticket and case management through the Customer Portal&quot;.<br><br>        How do I open and manage a support case on the Customer Portal?<br>        https://access.redhat.com/articles/38363#attach<br><br>  * If the sosreport is large in size such that you are not able to upload it into the case, then you can upload it<br>    into the dropbox. For more information on dropbox, please refer the following document.<br><br>        How can I provide large files (such as a vmcore, big log files, or a large sosreport) to Red Hat Support?<br>        https://access.redhat.com/knowledge/solutions/2112<br><br>Please see the following documentation on how to proceed if the system cannot be booted, fails to boot, hangs on boot,<br>crashed during boot, sosreport hangs or otherwise does not complete:<br>====================================================================================== <br><br>  * Additional and alternative steps for gathering a sosreport for Red Hat Enterprise Linux<br>    https://access.redhat.com/articles/2760521<br><br><br>auto-assistant rule reference #:KSOS0150 https://access.redhat.com/articles/2908901<br><br><publishedDate>2018-12-31T04:43:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>