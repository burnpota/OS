======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2018-02-01T02:07:53Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-02-17T11:08:31Z</b><br><b>id : 500A000000ZfsM9IAJ</b><br>======================<br><br><b><font size=15>
제목  : multipath 장치관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요. <br>현재 기존에 사용중이던 LUN을 스토리지에서 제거 후 멀티패스 에서도 제거 한후<br>새롭게 LUN을 할당한 후 멀티패싱을 구성하였습니다.<br><br>문제는<br>multipath -ll 하였을때 기존의 장치가 제거가 되지 않습니다.<br>sdf                       8:80   0  54.3G  0 disk<br>`-share12 (dm-0)        253:0    0  54.3G  0 mpath<br>sdm                       8:192  0  54.3G  0 disk<br>`-share16 (dm-20)       253:20   0  54.3G  0 mpath<br>sdi                       8:128  0  54.3G  0 disk<br>`-share14 (dm-21)       253:21   0  54.3G  0 mpath<br>sde                       8:64   0  54.3G  0 disk<br>`-share12 (dm-0)        253:0    0  54.3G  0 mpath<br>sdk                       8:160  0  54.3G  0 disk<br>`-share15 (dm-22)       253:22   0  54.3G  0 mpath<br>sdo                       8:224  0  54.3G  0 disk<br>`-share17 (dm-23)       253:23   0  54.3G  0 mpath<br>sdh                       8:112  0  54.3G  0 disk<br>`-share13 (dm-24)       253:24   0  54.3G  0 mpath<br>sdq                      65:0    0  54.3G  0 disk<br>`-share18 (dm-25)       253:25   0  54.3G  0 mpath<br>sdj                       8:144  0  54.3G  0 disk<br>`-share14 (dm-21)       253:21   0  54.3G  0 mpath<br>sdu                      65:64   0  54.3G  0 disk<br>`-share20 (dm-26)       253:26   0  54.3G  0 mpath<br>sdc                       8:32   0  54.3G  0 disk<br>`-share11 (dm-27)       253:27   0  54.3G  0 mpath<br>sdr                      65:16   0  54.3G  0 disk<br>`-share18 (dm-25)       253:25   0  54.3G  0 mpath<br>sdg                       8:96   0  54.3G  0 disk<br>`-share13 (dm-24)       253:24   0  54.3G  0 mpath<br>sdd                       8:48   0  54.3G  0 disk<br>`-share11 (dm-27)       253:27   0  54.3G  0 mpath<br>sdv                      65:80   0  54.3G  0 disk<br>`-share20 (dm-26)       253:26   0  54.3G  0 mpath<br>sds                      65:32   0  54.3G  0 disk<br>`-share19 (dm-28)       253:28   0  54.3G  0 mpath<br>sdl                       8:176  0  54.3G  0 disk<br>`-share15 (dm-22)       253:22   0  54.3G  0 mpath<br>sdp                       8:240  0  54.3G  0 disk<br>`-share17 (dm-23)       253:23   0  54.3G  0 mpath<br>sdn                       8:208  0  54.3G  0 disk<br>`-share16 (dm-20)       253:20   0  54.3G  0 mpath<br>sdt                      65:48   0  54.3G  0 disk<br>`-share19 (dm-28)       253:28   0  54.3G  0 mpath<br>sr0                      11:0    1  1024M  0 rom<br>share2 (dm-1)           253:1    0  54.3G  0 mpath<br>share3 (dm-2)           253:2    0  54.3G  0 mpath<br>share4 (dm-3)           253:3    0  54.3G  0 mpath<br>share5 (dm-4)           253:4    0  54.3G  0 mpath<br>share6 (dm-5)           253:5    0  54.3G  0 mpath<br>share7 (dm-6)           253:6    0  54.3G  0 mpath<br>share8 (dm-7)           253:7    0  54.3G  0 mpath<br>share9 (dm-8)           253:8    0  54.3G  0 mpath<br>share10 (dm-9)          253:9    0  54.3G  0 mpath<br><br>share12~19번까지 새롭게 할당하여 작업한 것이고<br>share2~10은 제거를 한것인데 블럭디바이스들은 보이지 제거된것은 확인이 되는데<br>멀티패싱된 장치들이 제거가 되지 않습니다.<br><br>이와같은 상황을 해소하기 위해서 (리부팅은 불가능 합니다.)<br>multipath -F ; multipath -r <br>multipath -f /dev/mapper/share[2-10] ; multipath -r <br>service multipathd stop ; dracut -H -v -f ; service multipathd start <br>를 하였습니다.<br>messages 해당 장치에 대한 IO 에러가 지속적으로 발생하고 있는 상황입니다<br>Jan  6 05:20:03 IBPIEDB1 kernel: end_request: I/O error, dev dm-2, sector 113811712<br>Jan  6 05:20:03 IBPIEDB1 kernel: end_request: I/O error, dev dm-2, sector 113811824<br>Jan  6 05:20:03 IBPIEDB1 kernel: end_request: I/O error, dev dm-2, sector 0<br>Jan  6 05:20:03 IBPIEDB1 kernel: end_request: I/O error, dev dm-2, sector 8<br>Jan  6 05:20:03 IBPIEDB1 kernel: end_request: I/O error, dev dm-2, sector 0<br>Jan  6 05:20:03 IBPIEDB1 kernel: end_request: I/O error, dev dm-3, sector 113811712<br><br>위의 상황을 해소할 수있는 방법 부탁드립니다. <br>==============================================================================<br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>- 성함(직급) : 김경희 (선임)<br>- 회사명(부서명) : 삼성SDS<br>- 전화번호 :  +82-10-3049-1440 <br>- 메일주소 : 김경희 &lt;khsds.kim@samsung.com&gt;<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>- 성함(직급) : 송기호(책임)<br>- 회사명(부서명) : 타임게이트(오픈소스팀)<br>- 전화번호 : 01036209917<br>- 메일주소 : kh.song@time-gate.com<br>==============================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>IBPIEDB1</hostname><br><br><br><comment id="a0aA000000LZ0JKIA1"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2018-02-01T03:50:23Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2018-02-01T03:50:23Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>멀티패스 설정파일을 확인하면 share2, share11 ~ share20에 대한 설정이 있습니다.<br>상기 설정이 맞는지 확이해 보시고 정확하지 않을 경우 /etc/multipath.conf 파일을 수정하시기<br>바랍니다.<br>다음 아래와 같은 방법으로 필요하지 않는 디바이스 정보를 삭제하시기 바랍니다.<br><br># multipath -l<br># multipath -f &lt;device&gt;<br># blockdev --flushbufs &lt;device&gt;<br># mv /etc/multipath/wwids /tmp/<br># service multipathd stop<br># dracut -H -v -f<br># service multipathd start <br><br>상기와 같이 작업후 정상적으로 적용이 되는지 확인해 보시기 바랍니다.<br><br>참고문서:<br>Can a SAN disk be removed from multipath without rebooting on Red Hat Enterprise Linux?<br>https://access.redhat.com/solutions/20063<br><br>감사합니다.<br><br><publishedDate>2018-02-01T03:50:23Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>