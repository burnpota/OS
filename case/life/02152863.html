======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2018-08-01T04:32:19Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-09-05T10:07:03Z</b><br><b>id : 500A000000bVSRIIA4</b><br>======================<br><br><b><font size=15>
제목  : ssh root 접속 시, locale 미적용 이슈
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요, 고객사에서 locale 관련 이슈가 발생하여 문의드립니다.<br><br>/etc/locale.conf 설정에  LANG=&quot;en_US.UTF-8&quot;  으로 설정되어있음에도, root로 원격접속시 제대로 적용이 되지 않습니다. ( echo $LANG  --&gt; C )<br>/root 밑에 .bash_profile  .bashrc 를 확인해 보았으나 특이점은 없었습니다. <br><br>접속 후,  &quot; su - &quot; 명령으로 root 권한을 한번 더 얻어야 locale이 적용되는데, 혹 설정상에 문제가있는지요??<br><br>sosreport 파일 첨부하오니 확인 부탁드립니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.4</b><br><b>타입  : Configuration issue</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLDAMLAL01</hostname><br><br><br><comment id="a0aA000000NU6ajIAD"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-22T07:11:14Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-22T07:11:14Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>해당 케이스에 대한 진행상황은 어떠신지요?<br>확인 부탁드립니다.<br>이후, 일정기간 응답이 없으실 경우 해당 케이스는 자동 close 처리 될 것입니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-22T07:11:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NKWSuIAP"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-06T13:17:17Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-06T13:18:06Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>네, sosreport 상으로도 특별히 이상점을 찾기는 어려웠습니다.<br>아시겠지만 &quot;su -&quot; 명령어의 경우, root 유저의 환경 변수를 읽어들여 적용시킵니다만<br>이에 대해서도 문제 없는 것으로 보아 현재시점에서는 OTP 인증시 처리 부분에 대한 확인이 필요합니다.<br>영향도 확인을 위해 OTP 인증없이(하기 2번 과정 제외) 로그인 테스트가 가능하면 좋을텐데요.<br>====<br>1. teraterm으로 일반유저로 접속<br>   -&gt; locale LANG=&quot;en_US.UTF-8&quot;  정상 확인<br>2. 내부 프로그램 otp 인증으로 root 유저 전환<br>   -&gt; locale LANG=&quot;C&quot; 로 확인<br>3. &quot;su -&quot; 명령으로 root권한 한번 더 획득<br>   -&gt; locale LANG=&quot;en_US.UTF-8&quot;  정상 확인<br>====<br><br>감사합니다.<br><br><publishedDate>2018-08-06T13:17:16Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NKVCbIAP"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-08-06T11:55:34Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-08-06T11:55:34Z</b><br><br>otp 인증 절차에 대해서는, 현재 확인이 불가한 상황입니다.<br><br>전달드린 sosreport 만을 확인 했을때에는 설정상의 문제가 없는건지요??<br><br><publishedDate>2018-08-06T11:55:34Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NK4hPIAT"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-03T02:21:30Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-03T02:21:30Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>음,, 이러면 얘기가 달라지는데요,<br><br>&gt; 2. 내부 프로그램 otp 인증으로 root 유저 전환<br>&gt;   -&gt; locale LANG=&quot;C&quot; 로 확인 <br><br>단순히 teraterm 을 이용한 ssh 서버에의 접속이 아닌 <br>유저측의 별도의 인증 처리 이후 LANG=C 로 변경이 일어난다면<br>해당 프로그램이 어떤 과정을 통해 유저 전환을 하고 있는지에 대해서 확인하실 필요가 있어 보입니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-03T02:21:30Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NK4AOIA1"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-08-03T01:02:13Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-08-03T01:02:13Z</b><br><br>추가로 고객사에서 ssh 클라이언트 접속 방식은 다음과 같습니다.<br><br>1. teraterm으로 일반유저로 접속<br>   -&gt; locale LANG=&quot;en_US.UTF-8&quot;  정상 확인<br>2. 내부 프로그램 otp 인증으로 root 유저 전환<br>   -&gt; locale LANG=&quot;C&quot; 로 확인<br>3. &quot;su -&quot; 명령으로 root권한 한번 더 획득<br>   -&gt; locale LANG=&quot;en_US.UTF-8&quot;  정상 확인<br><br><publishedDate>2018-08-03T01:02:13Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NK46qIAD"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-03T00:54:57Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-03T00:54:57Z</b><br><br>Senddfafaffaffafaafaffa안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>해당 키워드에 대한 내용은 sshd_config 의 man 페이지에 다음과 같이 기술되어 있습니다.<br><br># man sshd_config<br>====<br>SSHD_CONFIG(5)                                                                             BSD File Formats Manual                                                                             SSHD_CONFIG(5)<br><br>NAME<br>     sshd_config — OpenSSH SSH daemon configuration file<br><br>SYNOPSIS<br>     /etc/ssh/sshd_config<br><br>DESCRIPTION<br>     sshd(8) reads configuration data from /etc/ssh/sshd_config (or the file specified with -f on the command line).  The file contains keyword-argument pairs, one per line.  Lines starting with ‘#’ and<br>     empty lines are interpreted as comments.  Arguments may optionally be enclosed in double quotes (&quot;) in order to represent arguments containing spaces.<br><br>     The possible keywords and their meanings are as follows (note that keywords are case-insensitive and arguments are case-sensitive):<br><br>     AcceptEnv<br>             Specifies what environment variables sent by the client will be copied into the session's environ(7).  See SendEnv in ssh_config(5) for how to configure the client.  The TERM environment vari‐<br>             able is always sent whenever the client requests a pseudo-terminal as it is required by the protocol.  Variables are specified by name, which may contain the wildcard characters ‘*’ and ‘?’.<br>             Multiple environment variables may be separated by whitespace or spread across multiple AcceptEnv directives.  Be warned that some environment variables could be used to bypass restricted user<br>             environments.  For this reason, care should be taken in the use of this directive.  The default is not to accept any environment variables.<br>....<br>====<br><br>즉, client 로부터 보내지는 환경 변수(SendEnv 기능)중 accept 할 변수를 지정하는 것입니다.<br>현재, 이는 ssh 서버가 제공하는 기능으로 client 차원의 간섭을 배제하기 위함입니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-03T00:54:57Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NK42UIAT"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-08-03T00:46:26Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-08-03T00:46:26Z</b><br><br>답변 감사합니다.<br><br>말씀주신 내용을 적용하기전에 추가 문의사항이 있는데요, <br>sshd_config 에서 &quot;AcceptEnv&quot; 파라메터의 동작 내용이 어떻게 되는지, 그리고 해당 라인들을 주석 처리했을 때의 차이점이 어떻게 되는지요??<br><br><publishedDate>2018-08-03T00:46:26Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NJmuhIAD"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-02T01:56:16Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-02T02:02:30Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>이러한 상황의 대부분이 ssh 클라이언트의 환경 설정이 적용되어<br>발생하는 경우가 많습니다.<br><br>따라서, 우선 teraterm 자체가 가지고 있는 해당 서버에 접속할 때의 환경변수 설정을 다시한번 확인해보시고,<br>sshd 서버 차원에서는 sshd_config 에서 &quot;AcceptEnv&quot; 파라메터 또는 해당 파라메터에 설정된 환경변수에 대해서 삭제 또는 주석 처리한 후<br>sshd 서비스를 재시작하신 후 개선 여부에 대해서 확인 및 피드백 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-02T01:56:16Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NJYR9IAP"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2018-08-01T08:50:23Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2018-08-01T08:50:23Z</b><br><br>TeraTerm입니다만, reboot 후 해당 서버만 이슈가 발생하였습니다.<br><br><publishedDate>2018-08-01T08:50:23Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NJVj8IAH"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-01T04:53:17Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-01T04:53:17Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>ssh 클라이언트를 뭘로 접속하시나요?<br>확인 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-01T04:53:17Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NJViUIAX"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2018-08-01T04:51:37Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2018-08-01T04:51:36Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>저는 Platform Support 를 담당하고 있는<br>Senior Technical Support Engineer 신재욱입니다.<br><br>현재 올려주신 문의내용은 자세히 살펴보고 있는중이며,<br>곧 관련된 내용을 업데이트 하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-08-01T04:51:36Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>/etc/locale.conf 설정에  LANG=&quot;en_US.UTF-8&quot;  으로 설정되어있음에도, root로 원격접속시 제대로 적용이 되지 않습니다. ( echo $LANG  --&gt; C )<br>/root 밑에 .bash_profile  .bashrc 를 확인해 보았으나 특이점은 없었습니다. <br><br>접속 후,  &quot; su - &quot; 명령으로 root 권한을 한번 더 얻어야 locale이 적용되는데, 혹 설정상에 문제가있는지요??<br><br>sosreport 파일 첨부하오니 확인 부탁드립니다.<br><br>감사합니다.</issue><cep>false</cep></case>