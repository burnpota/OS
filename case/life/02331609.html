======================<br><b>생성계정 : JIMIN KIM</b><br><b>생성날짜 : 2019-03-06T08:29:02Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2019-04-02T04:05:23Z</b><br><b>id : 5002K00000dNPRKQA4</b><br>======================<br><br><b><font size=15>
제목  : ifdown 후 ifup 시 발생하는 문제 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 TOBKML01SL 서버에서 eno33559296 device에 대해서 route 정보 추가후<br>ifdown ifup을 통해서 route 정보를 적용하려 하였는데요. <br><br>ifup 시 메세지가 발생하고<br>root@TOBKML01SL /etc/sysconfig/network-scripts # ifup eno33559296<br>RTNETLINK answers: Cannot allocate memory<br>ERROR    : [/etc/sysconfig/network-scripts/ifup-eth] Failed to bring up eno33559296.<br><br>추가로 /var/log/messages에서도 page allocation failure 관련 메세지가 발생하여 문의드리려고 합니다.<br>rebooting 후에는 정상적으로 ip가 적용이 되었습니다.<br><br><br> - 추가한 route 정보<br>root@TOBKML01SL /etc/sysconfig/network-scripts # cat route-eno33559296<br>ADDRESS0=172.16.12.0<br>NETMASK0=255.255.255.0<br>GATEWAY0=172.16.11.11<br><br> - ip 정보 (ifdown 상태)<br>root@TOBKML01SL /var/log # ip a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN<br>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>2: eno16780032: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP qlen 1000<br>    link/ether 00:50:56:bc:2f:78 brd ff:ff:ff:ff:ff:ff<br>    inet 100.252.145.169/24 brd 100.252.145.255 scope global eno16780032<br>       valid_lft forever preferred_lft forever<br>3: eno33559296: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc mq state DOWN qlen 1000<br>    link/ether 00:50:56:bc:60:15 brd ff:ff:ff:ff:ff:ff<br><br> - /var/log/message 정보<br>Mar  6 16:06:12 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar  6 16:06:12 TOBKML01SL kernel: CPU: 2 PID: 100594 Comm: ip Tainted: P           OE  ------------              3.10.0-327.53.1.el7.x86_64 #1<br>Mar  6 16:06:12 TOBKML01SL kernel: Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop            Reference Platform, BIOS 6.00 09/21/2015<br>Mar  6 16:06:12 TOBKML01SL kernel: 00000000000080d0 00000000362f84a1 ffff880160c47428 ffffffff81636b           21<br>Mar  6 16:06:12 TOBKML01SL kernel: ffff880160c474b8 ffffffff8116f610 0000000000000000 00000000ffffff           ff<br>Mar  6 16:06:12 TOBKML01SL kernel: ffff88083ffbd000 ffffffff81171ff6 ffff880160c47488 00000000362f84           a1<br>Mar  6 16:06:12 TOBKML01SL kernel: Call Trace:<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff81636b21&gt;] dump_stack+0x19/0x1b<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8116f610&gt;] warn_alloc_failed+0x110/0x180<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff81171ff6&gt;] ? drain_local_pages+0x16/0x20<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff81173da6&gt;] __alloc_pages_nodemask+0x9b6/0xba0<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8101ab5f&gt;] dma_generic_alloc_coherent+0x8f/0x140<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8105c141&gt;] x86_swiotlb_alloc_coherent+0x21/0x50<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffffa0023e37&gt;] vmxnet3_open+0x77/0x140 [vmxnet3]<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8152db1f&gt;] __dev_open+0xbf/0x130<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8152de0d&gt;] __dev_change_flags+0x9d/0x170<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8152df09&gt;] dev_change_flags+0x29/0x60<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8153d3b7&gt;] do_setlink+0x387/0x830<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffffa0457c6d&gt;] ? ac_comp+0x10d/0x2f0 [RedCastle]<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8153e15c&gt;] rtnl_newlink+0x50c/0x830<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8153dd43&gt;] ? rtnl_newlink+0xf3/0x830<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8128615c&gt;] ? security_inode_permission+0x1c/0x30<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8130ca3d&gt;] ? list_del+0xd/0x30<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff81285c78&gt;] ? security_capable+0x18/0x20<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff81088989&gt;] ? ns_capable+0x29/0x50<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8153a634&gt;] rtnetlink_rcv_msg+0xa4/0x270<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff811c44c8&gt;] ? __kmalloc_node_track_caller+0x58/0x270<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff811c44c8&gt;] ? __kmalloc_node_track_caller+0x58/0x270<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff812f9452&gt;] ? radix_tree_lookup_slot+0x22/0x50<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff81308490&gt;] ? rhashtable_lookup_compare+0x50/0x90<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8153a590&gt;] ? rtnetlink_rcv+0x30/0x30<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8155ac99&gt;] netlink_rcv_skb+0xa9/0xc0<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8153a588&gt;] rtnetlink_rcv+0x28/0x30<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8155a2ad&gt;] netlink_unicast+0xed/0x1b0<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8155a6a0&gt;] netlink_sendmsg+0x330/0x770<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff815116a0&gt;] sock_sendmsg+0xb0/0xf0<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff811f5cd6&gt;] ? _d_rehash+0x36/0x40<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8124fd37&gt;] ? proc_lookup_de+0xb7/0xe0<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff81511ad9&gt;] ___sys_sendmsg+0x3a9/0x3c0<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff8151026f&gt;] ? sock_destroy_inode+0x2f/0x40<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff811fab58&gt;] ? destroy_inode+0x38/0x60<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff811f58e0&gt;] ? d_free+0x60/0x70<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff811f5fae&gt;] ? dentry_kill+0x14e/0x1b0<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff811ff2ae&gt;] ? mntput_no_expire+0x3e/0x120<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff811ff3b4&gt;] ? mntput+0x24/0x40<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff811e0dc3&gt;] ? __fput+0x183/0x270<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff815129c1&gt;] __sys_sendmsg+0x51/0x90<br>Mar  6 16:06:12 TOBKML01SL kernel: [&lt;ffffffff81512a12&gt;] SyS_sendmsg+0x12/0x20<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>TOBKML01SL</hostname><br><br><br><comment id="a0a2K00000PXqS3QAL"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-03-14T00:40:59Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-03-14T00:40:59Z</b><br><br>안녕하세요. Red Hat 김마현 차장입니다.<br><br>문의 주신내용에 대해 전문 엔지니어로 부터 받은 답변을 안내해 드립니다.<br><br>메모리 누수는 어떤 로그에서도 볼 수 없습니다.<br>journalctl 로그에서 볼 수있는 것은 메모리 누수의 결과입니다.<br>머지 않아 누수로 인해 사용 가능한 메모리가 손실 될 경우 조만간 일부 메모리 할당을 수행 할 수 없게 됩니다.<br><br>그러나 그 시점에서, 그것이 어떤 누출 때문인지 아니면 단지 메모리 요구량이 높기 때문인지는 말하기 어렵습니다.<br>얼마의 시간이 지난 후에 관찰 할 수있는 것은 드라이버로부터 출력되는 '더 이상 메모리를 할당 할 수 없다는 메시지'입니다.<br><br>즉, CASE에 올려주신 로그는 앞서 언급 한 것처럼 메모리 누수가 발생한다는 메시지가 아니라 결과에 대한 메시지 입니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-03-14T00:40:59Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PWuq4QAD"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-03-11T02:59:01Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-03-11T02:59:00Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>빠른 답변 감사드립니다.<br><br>그럼 방법은 kerenel update 밖에 없는 것 같은데요.<br><br>혹시 문제가 발생한 서버와 동일한 환경의 서버에서 memory leak 현상을 확인하려면<br>sosreport를 수행 후 아래 현상을 확인해봐야하는 것인가요?<br><br>egrep -e allocation -e vmxnet3_create_queues  ./sos_commands/logs/journalctl_--all_--this-boot_--no-pager<br>Mar 06 16:06:12 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0 ◀ 발생하는지 확인<br>Mar 06 16:06:12 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3] ◀ 발생하는지 확인<br>=== 생략 ===<br><br>$ grep mode\: ./sos_commands/logs/journalctl_--all_--this-boot_--no-pager | sort -k 11 -u<br>Mar 06 16:06:12 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0 ◀ 발생하는지 확인<br>Mar 06 16:06:12 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0 ◀ 발생하는지 확인<br>=== 생략 ===<br><br>$ grep DMA\: ./sos_commands/logs/journalctl_--all_--this-boot_--no-pager  | grep 512<br>Mar 06 16:06:12 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB ◀ 발생하는지 확인<br>=== 생략 ===<br><br>감사합니다.<br><br><publishedDate>2019-03-11T02:59:00Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000PWgPOQA1"><br>======================<br><b>생성계정 : Tesar, Michal</b><br><b>생성날짜 : 2019-03-08T12:48:08Z</b><br><b>마지막 답변자 : Tesar, Michal</b><br><b>마지막 수정 일자 : 2019-03-08T12:48:08Z</b><br><br>Hello Kim,<br><br>The mem leak is present every time when the vmxnet3_rq_destroy() function is called. So it means that<br><br>the machine is losing a bit of memory every time this function is called. It is accumulating until the point that the DMA region has not such big blocks free for use.<br><br>At that point, the driver is not able to allocate space for its queues any more and fails.<br><br>Along src code, the function is called when link settings like MTU/ring params etc are modified and when link down and up is performed.<br><br>So if you remove the rx buffer value setting from ifcfg files, it will mitigate only one case of the leak and will only slow things down.<br><br>It means that the memory will still be leaking but at a slower rate. This can not be considered as a workaround.<br><br>Only the fixed kernel src code in use can be considered here as complete mitigation of the problem here.<br><br>Regards Michal Tesar<br><br><publishedDate>2019-03-08T12:48:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PWcGPQA1"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-03-08T07:07:32Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-03-08T07:07:32Z</b><br><br>안녕하세요. Red Hat 김마현입니다.<br><br>문의주신 내용 확인하여 업데이트 하도록 하겠습니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-03-08T07:07:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PWc7wQAD"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-03-08T06:56:23Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-03-08T06:56:23Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>빠른 답변 감사드립니다.<br><br>분석해주신 내용으로 보면<br>vmxnet3 드라이버를 사용해서 rx buffer값 설정 변경 절차할 때마다<br>memory 누수가 누적되어 결국 문제가 발생하는 것 처럼보이는데요.<br><br>추가 문의 사항드립니다.<br><br>1. rx buffer 값 변경 설정이 ifcfg 설정 파일에 없는 경우는 memory 누수가 발생하지 않는지 문의드립니다.<br><br>2. kernel-3.10.0-846.el7 커널에서 해당 bug가 조치가 된 것으로 보이는데요. 혹시<br>   분석 내용 중 해결에 대한 부분은 아래 부분 같은데요.<br><br>   &quot;just move the NULL set to after the free.&quot;<br><br>   혹시 아래 내용은 해석을 어떻게 해야될지도 한번 문의드리려고 합니다.<br>   diff --git a/drivers/net/vmxnet3/vmxnet3_drv.c b/drivers/net/vmxnet3/vmxnet3_drv.c<br>index d1c7029ded7c..cf95290b160c 100644<br>--- a/drivers/net/vmxnet3/vmxnet3_drv.c<br>+++ b/drivers/net/vmxnet3/vmxnet3_drv.c<br>@@ -1616,7 +1616,6 @@ static void vmxnet3_rq_destroy(struct vmxnet3_rx_queue *rq,<br>                                          rq-&gt;rx_ring[i].basePA);<br>                        rq-&gt;rx_ring[i].base = NULL;<br>                }<br>-               rq-&gt;buf_info[i] = NULL;<br>        }<br> <br>        if (rq-&gt;data_ring.base) {<br>@@ -1638,6 +1637,7 @@ static void vmxnet3_rq_destroy(struct vmxnet3_rx_queue *rq,<br>                        (rq-&gt;rx_ring[0].size + rq-&gt;rx_ring[1].size);<br>                dma_free_coherent(&amp;adapter-&gt;pdev-&gt;dev, sz, rq-&gt;buf_info[0],<br>                                  rq-&gt;buf_info_pa);<br>+               rq-&gt;buf_info[0] = rq-&gt;buf_info[1] = NULL;<br>        }<br> }<br><br><br>감사합니다.<br><br><publishedDate>2019-03-08T06:56:23Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0a2K00000PWP21QAH"><br>======================<br><b>생성계정 : Tesar, Michal</b><br><b>생성날짜 : 2019-03-07T12:56:00Z</b><br><b>마지막 답변자 : Tesar, Michal</b><br><b>마지막 수정 일자 : 2019-03-07T12:56:00Z</b><br><br>Hello,<br><br>the log is full of these:<br><br>$ egrep -e allocation -e vmxnet3_create_queues  ./sos_commands/logs/journalctl_--all_--this-boot_--no-pager<br>Mar 06 16:06:12 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:06:12 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:06:12 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:06:12 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:06:28 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:06:28 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:06:28 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:06:28 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:06:59 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:06:59 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:06:59 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:06:59 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:07:43 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:07:43 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:07:43 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:07:43 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:10:52 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:10:52 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:10:52 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:10:52 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:12:27 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:12:27 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:12:27 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:12:27 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:14:41 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:14:41 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:14:41 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:14:41 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:15:01 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:15:01 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:15:01 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:15:01 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:15:32 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:15:32 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:15:32 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:15:32 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:16:03 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:16:03 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:16:03 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:16:03 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:19:36 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:19:36 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:19:36 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:19:36 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:21:05 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:21:05 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:21:05 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:21:05 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:21:27 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:21:27 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:21:27 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:21:27 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:24:15 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:24:15 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:24:15 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:24:15 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:27:10 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:27:10 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:27:10 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:27:10 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:27:15 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:27:15 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:27:15 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:27:15 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:29:08 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:29:08 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:29:08 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:29:08 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:30:54 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:30:54 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:30:54 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:30:54 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:32:30 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:32:30 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:32:30 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:32:30 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:32:53 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:32:53 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:32:53 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:32:53 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:33:02 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:33:02 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:33:02 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:33:02 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:34:13 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:34:13 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:34:13 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:34:13 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:34:20 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:34:20 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:34:20 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:34:20 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:37:15 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:37:15 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:37:15 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:37:15 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:42:26 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:42:26 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:42:26 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:42:26 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:44:46 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:44:46 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br>Mar 06 16:44:46 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br>Mar 06 16:44:46 TOBKML01SL kernel:  [&lt;ffffffffa0023987&gt;] vmxnet3_create_queues+0x157/0x590 [vmxnet3]<br><br>order:7 -&gt; 2^7 pages = 512Kb<br><br>$ grep mode\: ./sos_commands/logs/journalctl_--all_--this-boot_--no-pager | sort -k 11 -u<br>Mar 06 16:06:12 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0x80d0<br>Mar 06 16:06:12 TOBKML01SL kernel: ip: page allocation failure: order:7, mode:0xd0<br><br>vmxnet3_rq_create(struct vmxnet3_rx_queue *rq, struct vmxnet3_adapter *adapter)<br>{   <br>    int i;<br>    size_t sz;<br>    struct vmxnet3_rx_buf_info *bi;<br>        <br>    for (i = 0; i &lt; 2; i++) {<br>       <br>        sz = rq-&gt;rx_ring[i].size * sizeof(struct Vmxnet3_RxDesc);<br>        rq-&gt;rx_ring[i].base = dma_alloc_coherent(<br>                        &amp;adapter-&gt;pdev-&gt;dev, sz,<br>                        &amp;rq-&gt;rx_ring[i].basePA,<br>                        GFP_KERNEL);<br>        if (!rq-&gt;rx_ring[i].base) { <br>            netdev_err(adapter-&gt;netdev,<br>                   &quot;failed to allocate rx ring %d\n&quot;, i);<br>            goto err;<br>        }<br>    }<br>    <br>    sz = rq-&gt;comp_ring.size * sizeof(struct Vmxnet3_RxCompDesc);<br>    rq-&gt;comp_ring.base = dma_alloc_coherent(&amp;adapter-&gt;pdev-&gt;dev, sz,<br>                        &amp;rq-&gt;comp_ring.basePA,<br>                        GFP_KERNEL);<br>    if (!rq-&gt;comp_ring.base) {<br>        netdev_err(adapter-&gt;netdev, &quot;failed to allocate rx comp ring\n&quot;);<br>        goto err;<br>    }<br>        <br>    sz = sizeof(struct vmxnet3_rx_buf_info) * (rq-&gt;rx_ring[0].size +<br>                           rq-&gt;rx_ring[1].size);<br>    bi = dma_zalloc_coherent(&amp;adapter-&gt;pdev-&gt;dev, sz, &amp;rq-&gt;buf_info_pa,<br>                 GFP_KERNEL);<br><br><br>$ grep DMA\: ./sos_commands/logs/journalctl_--all_--this-boot_--no-pager  | grep 512<br>Mar 06 16:06:12 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:06:12 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:06:28 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:06:28 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:06:59 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:06:59 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:07:43 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:07:43 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:10:52 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:10:52 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:12:27 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:12:27 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:14:41 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:14:41 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:15:01 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:15:01 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:15:32 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:15:32 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:16:03 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:16:03 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:19:36 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:19:36 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:21:05 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:21:05 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:21:27 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:21:27 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:24:15 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:24:15 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:27:10 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:27:10 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:27:15 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:27:15 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:29:08 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:29:08 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:30:54 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:30:54 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:32:30 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:32:30 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:32:53 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:32:53 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:33:02 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:33:02 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:34:13 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:34:13 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:34:20 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:34:20 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:37:15 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:37:15 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:42:26 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:42:26 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:44:46 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br>Mar 06 16:44:46 TOBKML01SL kernel: Node 0 DMA: 1*4kB (U) 0*8kB 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15892kB<br><br>So it always tries to allocate from DMA zone a block of 512Kb but there is no such free block.<br><br>It looks like hit if this bug:<br><br>$ git show 848b159835ddef99cc4193083f7e786c3992f580<br>commit 848b159835ddef99cc4193083f7e786c3992f580<br>Author: Neil Horman &lt;nhorman@tuxdriver.com&gt;<br>Date:   Mon Jan 22 16:06:37 2018 -0500<br><br>    vmxnet3: repair memory leak<br>    <br>    with the introduction of commit<br>    b0eb57cb97e7837ebb746404c2c58c6f536f23fa, it appears that rq-&gt;buf_info<br>    is improperly handled.  While it is heap allocated when an rx queue is<br>    setup, and freed when torn down, an old line of code in<br>    vmxnet3_rq_destroy was not properly removed, leading to rq-&gt;buf_info[0]<br>    being set to NULL prior to its being freed, causing a memory leak, which<br>    eventually exhausts the system on repeated create/destroy operations<br>    (for example, when  the mtu of a vmxnet3 interface is changed<br>    frequently.<br>    <br>    Fix is pretty straight forward, just move the NULL set to after the<br>    free.<br>    <br>    Tested by myself with successful results<br>    <br>    Applies to net, and should likely be queued for stable, please<br>    <br>    Signed-off-by: Neil Horman &lt;nhorman@tuxdriver.com&gt;<br>    Reported-By: boyang@redhat.com<br>    CC: boyang@redhat.com<br>    CC: Shrikrishna Khare &lt;skhare@vmware.com&gt;<br>    CC: &quot;VMware, Inc.&quot; &lt;pv-drivers@vmware.com&gt;<br>    CC: David S. Miller &lt;davem@davemloft.net&gt;<br>    Acked-by: Shrikrishna Khare &lt;skhare@vmware.com&gt;<br>    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;<br><br>diff --git a/drivers/net/vmxnet3/vmxnet3_drv.c b/drivers/net/vmxnet3/vmxnet3_drv.c<br>index d1c7029ded7c..cf95290b160c 100644<br>--- a/drivers/net/vmxnet3/vmxnet3_drv.c<br>+++ b/drivers/net/vmxnet3/vmxnet3_drv.c<br>@@ -1616,7 +1616,6 @@ static void vmxnet3_rq_destroy(struct vmxnet3_rx_queue *rq,<br>                                          rq-&gt;rx_ring[i].basePA);<br>                        rq-&gt;rx_ring[i].base = NULL;<br>                }<br>-               rq-&gt;buf_info[i] = NULL;<br>        }<br> <br>        if (rq-&gt;data_ring.base) {<br>@@ -1638,6 +1637,7 @@ static void vmxnet3_rq_destroy(struct vmxnet3_rx_queue *rq,<br>                        (rq-&gt;rx_ring[0].size + rq-&gt;rx_ring[1].size);<br>                dma_free_coherent(&amp;adapter-&gt;pdev-&gt;dev, sz, rq-&gt;buf_info[0],<br>                                  rq-&gt;buf_info_pa);<br>+               rq-&gt;buf_info[0] = rq-&gt;buf_info[1] = NULL;<br>        }<br> }<br><br><br>This bug has been backported into rhel-7 in release: kernel-3.10.0-846.el7<br><br>So would it be possible to upgrade your kernelat least to the above mentioned release, please?<br><br>Regards Michal Tesar<br><br><publishedDate>2019-03-07T12:56:00Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PW1iHQAT"><br>======================<br><b>생성계정 : Kim, Mahyun</b><br><b>생성날짜 : 2019-03-06T08:41:44Z</b><br><b>마지막 답변자 : Kim, Mahyun</b><br><b>마지막 수정 일자 : 2019-03-06T08:41:43Z</b><br><br>안녕하세요. Red Hat 김마현입니다.<br><br>문의주신 내용 확인하여 업데이트 하도록 하겠습니다.<br><br>감사합니다.<br>김마현 드림.<br><br><publishedDate>2019-03-06T08:41:43Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PW1aDQAT"><br>======================<br><b>생성계정 : KIM, JIMIN</b><br><b>생성날짜 : 2019-03-06T08:32:36Z</b><br><b>마지막 답변자 : KIM, JIMIN</b><br><b>마지막 수정 일자 : 2019-03-06T08:32:36Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>02331609-sosreport-호스트명 으로<br>sosreport upload 하였습니다.<br><br>감사합니다.<br><br><publishedDate>2019-03-06T08:32:36Z</publishedDate><createdByType>Customer</createdByType><br>======================<br></comments><br>