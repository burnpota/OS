======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2019-02-18T08:13:56Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2019-03-06T05:35:18Z</b><br><b>id : 5002K00000dGg12QAC</b><br>======================<br><br><b><font size=15>
제목  : rhel7 /dev/shm 디렉토리 하위 file관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요. 송기호입니다.<br>rhel7에서 /dev/shm하위를 보면 여러 파일들이 존재하고 있습니다.<br>root@SLPIMGDL02 /dev/shm # ls -al<br>total 659460<br>drwxrwxrwt  2 root    root    5500 Feb 18 15:18 .<br>drwxr-xr-x 26 root    root    8320 Feb 18 15:26 ..<br>-rw-------  1 oragrid dba  4194304 Feb 18 15:30 ora_+ASM2_1670610944_0<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670610944_1<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670610944_2<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670643713_0<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670643713_1<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670643713_10<br>-rw-------  1 oragrid dba        0 Sep  7 18:29 ora_+ASM2_1670643713_194<br>-rw-------  1 oragrid dba        0 Sep  7 18:29 ora_+ASM2_1670643713_195<br>...중략..<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670643713_90<br>-rw-------  1 oragrid dba  4194304 Oct 11 15:40 ora_+ASM2_1670643713_91<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670643713_92<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670643713_93<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670643713_94<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670643713_95<br>-rw-------  1 oragrid dba  4194304 Oct 11 15:40 ora_+ASM2_1670643713_96<br>-rw-------  1 oragrid dba  4194304 Feb 18 15:30 ora_+ASM2_1670643713_97<br>-rw-------  1 oragrid dba  4194304 Oct 29 16:08 ora_+ASM2_1670643713_98<br>-rw-------  1 oragrid dba  4194304 Sep  7 18:29 ora_+ASM2_1670643713_99<br>-rw-------  1 root    root      32 May 15  2018 sem.MILI_INIT_LOCK<br><br>ora_xx파일은소유자와 권한이  oragrid:dba 인것으로 보아 oracleasm에서 생성한 것으로 판단됩니다. 다만 <br>sem.MILI_INIT_LOCK 파일의 경우 소유자와 그룹이 root:root도 되어 있는데 이 파일이 시스템과 관련있는 파일인지 확인 부탁드립니다.<br><br>root@SLPIMGDL02 /dev/shm # file sem.MILI_INIT_LOCK<br>sem.MILI_INIT_LOCK: data<br>root@SLPIMGDL02 /dev/shm # fuser -cu sem.MILI_INIT_LOCK<br>/dev/shm/sem.MILI_INIT_LOCK:  7628m(oragrid) 19123c(root) 36607m(oragrid) 36638m(oragrid) 48133m(oragrid) 54109m(oragrid) 63689m(oragrid) 63691m(oragrid) 63693m(oragrid) 63696m(oragrid) 63700m(oragrid) 63702m(oragrid) 63706m(oragrid) 63710m(oragrid) 63712m(oragrid) 63714m(oragrid) 63716m(oragrid) 63718m(oragrid) 63720m(oragrid) 63722m(oragrid) 63726m(oragrid) 63728m(oragrid) 63730m(oragrid) 63732m(oragrid) 63734m(oragrid) 63736m(oragrid) 63738m(oragrid) 63740m(oragrid) 63742m(oragrid) 63744m(oragrid) 63746m(oragrid) 63748m(oragrid) 63750m(oragrid) 63757m(oragrid) 63761m(oragrid) 63774m(oragrid) 63776m(oragrid) 63778m(oragrid) 63792m(oragrid) 63805m(oragrid) 63809m(oragrid) 63813m(oragrid) 63835m(oragrid) 63854m(oragrid) 66208m(oragrid) 66273m(oragrid) 68156m(oragrid) 68211m(oragrid) 79563m(oragrid) 91794m(oragrid)<br>root@SLPIMGDL02 /dev/shm # ps -ef | grep 19123<br>root      19123  19089  0 15:23 pts/1    00:00:00 bash -l<br>root      43313  19123  0 15:34 pts/1    00:00:00 ps -ef<br>root      43314  19123  0 15:34 pts/1    00:00:00 grep --color=auto 19123<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.4</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPIMGDL02</hostname><br><br><br><comment id="a0a2K00000POMRhQAP"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2019-02-19T01:39:12Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2019-02-19T01:39:12Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>저는 Platform Support 를 담당하고 있는 Senior Technical Support Engineer 황 영 입니다.<br><br>확인한바에 의하면 커널은 lock 파일을 /dev/shm에 저장하지 않습니다.<br>따라서 이는 어떤 프로그램에 의해 생성된 파일인 것으로 보입니다.<br><br>보내주신 로그에 의하면 해당 서버에서 oracleasm가 /dev/shm을 사용하는것으로 보이는데<br>해당 프로그램에 의해 생성된 파일인지를 확인해 보시면 좋을것 같습니다.<br><br>재현이 가능하다면 어떤 프로그램에 의해 생성된 파일인지는 audit룰을 추가하셔서 확인해 보실수 있습니다.<br><br>1) audit.rules 추가: <br><br># vim /etc/audit/audit.rules <br>-w /dev/shm/sem.MILI_INIT_LOCK -p rwxa -k shm-access<br><br>Permissions (-p) could be any of the following: <br><br>r - read of the file<br>w - write to the file<br>x - execute the file<br>a - change in the file’s attribute<br><br><br>2) audit 서비스 재시작<br><br># service auditd restart<br>Stopping auditd:                                           [  OK  ]<br>Starting auditd:                                           [  OK  ]<br><br><br>3) 상기 파일 생성후 아래의 명령어로 로그 확인<br># ausearch -k shm-access                                                              ^<br>    <br><br>감사합니다.<br><br><publishedDate>2019-02-19T01:39:12Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>