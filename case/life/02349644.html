======================<br><b>생성계정 : 타임게이트 타임게이트</b><br><b>생성날짜 : 2019-03-29T06:37:51Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2019-04-08T00:02:33Z</b><br><b>id : 5002K00000dZeqyQAC</b><br>======================<br><br><b><font size=15>
제목  : 특정프로그램이 실행후 시스템이 다운되는현상
</font></b><br><br>======================<br><actionPlan>올려주신 messages 파일을 확인한 결과, i40e 장치에서 다수의 로그가 발생되는 것으로 확인됩니다.<br>이는 문서[1] 에서 설명하는 내용으로, interface 에 대한 flow director rules 가 올바르게 설정되지 않는 경우 발생되는 경고 메세지로 알려져있습니다.<br>혹은 RHEL 7.2 에 탑재된 i40e 드라이버가 Technical Preview 버전이며, flow director 가 설정되지 않은 경우에는 메세지 자체가 유해하지 않으며 무시해도된다고<br>설명하고 있습니다.<br><br>These are warning messages when the flow director rules is set incorrectly for the interface or related to an issue in the Red Hat Enterprise Linux 7.2 kernel that will be fixed in Red Hat Enterprise Linux 7.3 kernel. In case no flow director are configured, the message is harmless and can be ignored.<br><br>가능하시다면, 7.2 버전의 커널보다는 kernel-3.10.0-514 혹은 최신버전 kernel-3.10.0-957.10.1.el7 버전으로 설치하여<br>i40e 장치 드라이버를 업그레이드하는 것을 권고드립니다.<br><br> - echo c &gt; /proc/sysrq-trigger 를 통해 vmcore 수집이 되는지 확인<br> - 아래 파라메터를 활성화하여 문제 재발시에 vmcore 수집 시도<br>    kernel.hung_task_panic=1<br>    kernel.panic_on_stackoverflow=1<br>    kernel.softlockup_panic=1<br>    kernel.nmi_watchdog=1<br><br>하지만, 해당 현상이 시스템 리부팅을 유발하는지는 확인되지 않으며, vmcore 수집을 통해서 시스템 다운의 원인을 확인해볼 필요가 있습니다.<br>혹은 커널 업그레이드 이후에도 증상이 발생되는지도 확인해볼 필요가 있습니다.<br><br>[관련 문서]<br><br>[1] Why do we see large number of &quot;FD filter programming failed due to incorrect filter parameters&quot; error messages with i40e driver in RHEL7.2? <br>    https://access.redhat.com/solutions/2100761</actionPlan><b>사전문의<br></b><br>안녕하세요. 타임게이트 송기호입니다.<br>시스템에서 특정 프로그램돌면서 <br>아래와 같은 시간에 시스템이 다운이됩니다.<br><br>3/26 14:39<br>3/27 15:39<br>3/29 10:12<br><br>딥러닝 서버로 GPU를 사용하고 있는 환경이며<br>이와같은 증상이 단순 프로그램적인 문제인지는 업무담당자와 미팅중이고.<br>시스템상의에서의 원인이 있는지 확인 부탁드립니다.<br><br>좋은하루되세요~<br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Account / Customer Service Request</b><br><b>계정 번호  : 1648604</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPDLSAL01</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0a2K00000Pq6qlQAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2019-04-08T00:02:30Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2019-04-08T00:02:30Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 기술 문의의 상태를 처리완료 상태로 변경하고자 합니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 *재개*하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Software Maintenance Engineer, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2019-04-08T00:02:30Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PpVz0QAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2019-04-04T06:02:27Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2019-04-04T06:02:27Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Software Maintenance Engineer, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2019-04-04T06:02:27Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000Por4FQAR"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2019-04-02T05:34:59Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2019-04-02T05:34:58Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>올려주신 messages 파일을 확인한 결과, i40e 장치에서 다수의 로그가 발생되는 것으로 확인됩니다.<br>이는 문서[1] 에서 설명하는 내용으로, interface 에 대한 flow director rules 가 올바르게 설정되지 않는 경우 발생되는 경고 메세지로 알려져있습니다.<br>혹은 RHEL 7.2 에 탑재된 i40e 드라이버가 Technical Preview 버전이며, flow director 가 설정되지 않은 경우에는 메세지 자체가 유해하지 않으며 무시해도된다고<br>설명하고 있습니다.<br><br>These are warning messages when the flow director rules is set incorrectly for the interface or related to an issue in the Red Hat Enterprise Linux 7.2 kernel that will be fixed in Red Hat Enterprise Linux 7.3 kernel. In case no flow director are configured, the message is harmless and can be ignored.<br><br>가능하시다면, 7.2 버전의 커널보다는 kernel-3.10.0-514 혹은 최신버전 kernel-3.10.0-957.10.1.el7 버전으로 설치하여<br>i40e 장치 드라이버를 업그레이드하는 것을 권고드립니다.<br><br> - echo c &gt; /proc/sysrq-trigger 를 통해 vmcore 수집이 되는지 확인<br> - 아래 파라메터를 활성화하여 문제 재발시에 vmcore 수집 시도<br>    kernel.hung_task_panic=1<br>    kernel.panic_on_stackoverflow=1<br>    kernel.softlockup_panic=1<br>    kernel.nmi_watchdog=1<br><br>하지만, 해당 현상이 시스템 리부팅을 유발하는지는 확인되지 않으며, vmcore 수집을 통해서 시스템 다운의 원인을 확인해볼 필요가 있습니다.<br>혹은 커널 업그레이드 이후에도 증상이 발생되는지도 확인해볼 필요가 있습니다.<br><br>[관련 문서]<br><br>[1] Why do we see large number of &quot;FD filter programming failed due to incorrect filter parameters&quot; error messages with i40e driver in RHEL7.2? <br>    https://access.redhat.com/solutions/2100761<br><br>아래는 로그입니다.<br><br>Mar 15 11:38:37 SLPDLSAL01 kernel: i40e 0000:05:00.1: FD filter programming failed due to incorrect filter parameters<br>Mar 15 11:40:04 SLPDLSAL01 rsyslogd: [origin software=&quot;rsyslogd&quot; swVersion=&quot;7.4.7&quot; x-pid=&quot;3500&quot; x-info=&quot;http://www.rsyslog.com&quot;] start<br>--- RESTART ---<br>Mar 15 11:39:57 SLPDLSAL01 journal: Runtime journal is using 8.0M (max allowed 4.0G, trying to leave 4.0G free of 251.6G available ?~F~R current limit 4.0G).<br>Mar 15 11:39:57 SLPDLSAL01 kernel: Initializing cgroup subsys cpuset<br>Mar 15 11:39:57 SLPDLSAL01 kernel: Initializing cgroup subsys cpu<br>Mar 15 11:39:57 SLPDLSAL01 kernel: Initializing cgroup subsys cpuacct<br>Mar 15 11:39:57 SLPDLSAL01 kernel: Linux version 3.10.0-327.44.2.el7.x86_64 (mockbuild@x86-034.build.eng.bos.redhat.com) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-4) (GCC) ) #1 SMP Thu Nov 24 05:49:35 EST 2016<br>Mar 15 11:39:57 SLPDLSAL01 kernel: Command line: BOOT_IMAGE=/vmlinuz-3.10.0-327.44.2.el7.x86_64 root=UUID=314fba29-d2ca-4151-a5a4-af3375cc9842 ro crashkernel=512M rd.md.uuid=c2444bc5:5e770000:2a78c78e:a9b30000 rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=deadline<br><br>[    3.987733] i40e 0000:05:00.0: f5.40.47690 a1.5 n5.40 e2d35<br>[    3.987737] i40e 0000:05:00.0: The driver for the device detected a newer version of the NVM image than expected. Please install the most recent version of the network driver.<br><br>ETHTOOL<br>  Interface Status:<br>    bond0                  link=up 10000Mb/s full (autoneg=N)  rx ring UNKNOWN   drv bonding v3.7.1 / fw 2<br>    docker0  N/A           link=DOWN                           rx ring UNKNOWN   drv bridge v2.3 / fw N/A<br>    p2p1     0000:05:00.0  link=up 10000Mb/s full (autoneg=N)  rx ring 512/4096  drv i40e v1.3.21-k / fw f5.40.47690 a1.5 n5.40 e2d35<br>    p2p2     0000:05:00.1  link=up 10000Mb/s full (autoneg=N)  rx ring 512/4096  drv i40e v1.3.21-k / fw f5.40.47690 a1.5 n5.40 e2d35<br>  Interface Errors:<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Software Maintenance Engineer, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2019-04-02T05:34:58Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000Poo4dQAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2019-04-01T22:51:45Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2019-04-01T22:51:44Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Software Maintenance Engineer, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2019-04-01T22:51:44Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PoUj6QAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2019-03-31T23:38:25Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2019-03-31T23:48:46Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>올려주신 sosreport 를 확인해보았으나, 시스템 다운되는 현상에 대한 원인은 확인할 수 없었습니다.<br>최근 리부팅이전에 특이한 자원 사용이 없었으며, var/log/messages 파일이 용량 제한으로 누락된 것으로 보여집니다.<br><br>따라서 아래 사항을 요청드립니다.<br> - var/log/messages 업로드<br> - echo c &gt; /proc/sysrq-trigger 를 통해 vmcore 수집이 되는지 확인<br> - 아래 파라메터를 활성화하여 문제 재발시에 vmcore 수집 시도<br>    kernel.hung_task_panic=1<br>    kernel.panic_on_stackoverflow=1<br>    kernel.softlockup_panic=1<br>    kernel.nmi_watchdog=1<br><br>Linux 3.10.0-327.44.2.el7.x86_64 (SLPDLSAL01)   03/29/19        _x86_64_        (64 CPU)<br><br>00:00:02        CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>10:07:01        all     18.54      0.00      6.50      0.00      0.00      0.00      0.00      0.00      0.00     74.96<br><br>00:00:02     pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff<br>10:07:01         0.00     24.22 448530.42      0.00 359482.74      0.00      0.00      0.00      0.00<br><br>00:00:02          tps      rtps      wtps   bread/s   bwrtn/s<br>10:07:01         2.12      0.00      2.12      0.00     55.12<br><br>00:00:02    kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty<br>10:07:01    494797304  32954560      6.24      8676   7878456  11018688      1.96  13305496   6383860       620<br><br>00:00:02      runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>10:07:01            2      1654     12.83     11.71      9.74         0<br><br>DMIDECODE<br>  BIOS:<br>    Vend: Dell Inc.    Vers: 2.6.0    Date: 10/27/2017    BIOS Rev: 2.6    FW Rev:  <br>  System:<br>    Prod: PowerEdge C4130<br>  CPU:<br>    2 of 2 CPU sockets populated, 16 cores/32 threads per CPU<br>    32 total cores, 64 total threads<br>    Vers: Intel(R) Xeon(R) CPU E5-2683 v4 @ 2.10GHz<br>  Memory:<br>    Total: 524288 MiB (512 GiB)<br><br>OS<br>  Hostname: SLPDLSAL01<br>  Distro:   [redhat-release] Red Hat Enterprise Linux Server release 7.2 (Maipo)<br>  Kernel:<br>    Booted kernel:  3.10.0-327.44.2.el7.x86_64<br>    Booted kernel cmdline:<br>      root=UUID=314fba29-d2ca-4151-a5a4-af3375cc9842 ro crashkernel=512M rd.md.uuid=c2444bc5:5e770000:2a78c78e:a9b30000 rhgb quiet LANG=en_US.UTF-8 <br>      nmi_watchdog=0 transparent_hugepage=never elevator=deadline<br>    Taint-check: 12289  (see https://access.redhat.com/solutions/40594)<br>       0  PROPRIETARY_MODULE: Proprietary module has been loaded<br>      12  OOT_MODULE: Out-of-tree module has been loaded<br>      13  UNSIGNED_MODULE: Unsigned module has been loaded<br>    - - - - - - - - - - - - - - - - - - -<br>  Sys time:  Fri Mar 29 10:27:57 KST 2019<br>  Boot time: Fri Mar 29 01:11:04 UTC 2019  (epoch: 1553821864)<br>  Uptime:    16 min,  3 users<br>  LoadAvg:   [64 CPU] 0.02 (0%), 0.05 (0%), 0.09 (0%)<br>  /proc/stat:<br>    procs_running: 1   procs_blocked: 0    processes [Since boot]: 11952<br>    cpu [Utilization since boot]:<br>      us 0%, ni 0%, sys 0%, idle 100%, iowait 0%, irq 0%, sftirq 0%, steal 0%<br><br>KDUMP CONFIG<br>  kexec-tools rpm version:<br>    kexec-tools-2.0.7-38.el7.x86_64<br>  Service enablement:<br>    UNIT           STATE<br>    kdump.service  enabled<br>  kdump initrd/initramfs:<br>    30044763 May 27  2018 initramfs-3.10.0-327.44.2.el7.x86_64kdump.img<br>    18448190 Aug 29  2017 initramfs-3.10.0-327.el7.x86_64kdump.img<br>  Memory reservation config:<br>    /proc/cmdline { crashkernel=512M }<br>    GRUB default  { unknown  (no grub config file) }<br>  Actual memory reservation per /proc/iomem:<br>      18000000-37ffffff : Crash kernel<br>  kdump.conf:<br>    raw /dev/vg9/DUMP<br>    core_collector makedumpfile -c -d 31 -F<br>  Panic sysctls:<br>    kernel.sysrq [bitmask] =  &quot;1&quot;  (all SysRqs allowed)<br>    kernel.panic [secs] =  0  (no autoreboot on panic)<br>    kernel.hung_task_panic =  0<br>    kernel.panic_on_oops =  1<br>    kernel.panic_on_io_nmi =  1<br>    kernel.panic_on_unrecovered_nmi =  1<br>    kernel.panic_on_stackoverflow =  0<br>    kernel.softlockup_panic =  0<br>    kernel.unknown_nmi_panic =  1<br>    kernel.nmi_watchdog =  0<br>    vm.panic_on_oom [0-2] =  0  (no panic)<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Software Maintenance Engineer, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2019-03-31T23:38:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0a2K00000PoCIZQA3"><br>======================<br><b>생성계정 : 타임게이트, 타임게이트</b><br><b>생성날짜 : 2019-03-29T06:39:31Z</b><br><b>마지막 답변자 : 타임게이트, 타임게이트</b><br><b>마지막 수정 일자 : 2019-03-29T06:39:31Z</b><br><br>sosreport는 다시 첨부해드리겠습니다.<br><br><publishedDate>2019-03-29T06:39:31Z</publishedDate><createdByType>Customer</createdByType><br>======================<br></comments><br>