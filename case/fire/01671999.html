======================<br><b>생성계정 : Seung-Pil Kim</b><br><b>생성날짜 : 2016-07-21T16:55:23Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-08-06T10:10:45Z</b><br><b>id : 500A000000UrBiZIAV</b><br>======================<br><br><b><font size=15>
제목  : [삼성화재][보험ERP][가동계] Despite described in blacklist using wwid, multipath is not ignoring local disk.
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>In order to blacklist individual local disk devices, described blacklist using the WWID of that device. <br>but, multipath command shows the path of local disk in &quot;paths list&quot;.<br><br>Is there any problem in multipath configuration or multipath's version?<br><br><br>[root@ ]# cat /etc/multipath.conf<br>defaults {<br><br>user_friendly_names yes<br><br>find_multipaths yes<br>#<br>no_path_retry<br><br>fail<br><br>polling_interval<br>60<br>}<br><br>blacklist {<br><br>devnode &quot;^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*&quot;<br><br>devnode &quot;^hd[a-z]&quot;<br><br>wwid<br>36141877054307b001e156874054ec789<br><br>wwid<br>36141877054307b001e202b5313c45f96<br><br>wwid<br>36141877054307b001e202b5613f6dce1<br>}<br>... ~snip~ ...<br><br>[root@ ]# multipath -v4 -ll<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-0<br>Jun 05 10:34:41 | dm-0: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-1<br>Jun 05 10:34:41 | dm-1: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-10<br>Jun 05 10:34:41 | dm-10: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-11<br>Jun 05 10:34:41 | dm-11: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-12<br>Jun 05 10:34:41 | dm-12: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-13<br>Jun 05 10:34:41 | dm-13: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-14<br>Jun 05 10:34:41 | dm-14: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-15<br>Jun 05 10:34:41 | dm-15: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-16<br>Jun 05 10:34:41 | dm-16: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-17<br>Jun 05 10:34:41 | dm-17: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-18<br>Jun 05 10:34:41 | dm-18: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-19<br>Jun 05 10:34:41 | dm-19: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-2<br>Jun 05 10:34:41 | dm-2: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-3<br>Jun 05 10:34:41 | dm-3: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-4<br>Jun 05 10:34:41 | dm-4: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-5<br>Jun 05 10:34:41 | dm-5: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-6<br>Jun 05 10:34:41 | dm-6: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-7<br>Jun 05 10:34:41 | dm-7: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-8<br>Jun 05 10:34:41 | dm-8: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-9<br>Jun 05 10:34:41 | dm-9: device node name blacklisted<br>Jun 05 10:34:41 | Discovery status 0<br><br>===== paths list =====<br>uuid hcil     dev  dev_t  pri dm_st chk_st vend/prod/rev             dev_st<br>     0:2:0:0  sda  8:0    -1  undef ready  DELL    ,PERC H730P Adp   running<br>     0:2:1:0  sdb  8:16   -1  undef ready  DELL    ,PERC H730P Adp   running<br>     0:2:2:0  sdc  8:32   -1  undef ready  DELL    ,PERC H730P Adp   running<br>     2:0:0:0  sdd  8:48   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:1  sde  8:64   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:10 sdn  8:208  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:11 sdo  8:224  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:2  sdf  8:80   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:3  sdg  8:96   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:4  sdh  8:112  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:5  sdi  8:128  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:6  sdj  8:144  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:7  sdk  8:160  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:8  sdl  8:176  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:9  sdm  8:192  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:0  sdp  8:240  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:1  sdq  65:0   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:10 sdz  65:144 -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:11 sdaa 65:160 -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:2  sdr  65:16  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:3  sds  65:32  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:4  sdt  65:48  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:5  sdu  65:64  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:6  sdv  65:80  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:7  sdw  65:96  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:8  sdx  65:112 -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:9  sdy  65:128 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:0  sdab 65:176 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:1  sdac 65:192 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:10 sdal 66:80  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:11 sdam 66:96  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:2  sdad 65:208 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:3  sdae 65:224 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:4  sdaf 65:240 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:5  sdag 66:0   -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:6  sdah 66:16  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:7  sdai 66:32  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:8  sdaj 66:48  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:9  sdak 66:64  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:0  sdan 66:112 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:1  sdao 66:128 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:10 sdax 67:16  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:11 sday 67:32  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:2  sdap 66:144 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:3  sdaq 66:160 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:4  sdar 66:176 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:5  sdas 66:192 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:6  sdat 66:208 -1  undef ready  HITACHI ,OPEN-V           running<br><br><br>[root@ ]# lsscsi <br>lsscsi  | head<br>[0:2:0:0]    disk    DELL     PERC H730P Adp   4.26  /dev/sda <br>[0:2:1:0]    disk    DELL     PERC H730P Adp   4.26  /dev/sdb <br>[0:2:2:0]    disk    DELL     PERC H730P Adp   4.26  /dev/sdc<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 3 (Normal)</b><br><br><br><folderNumber>74173</folderNumber><br><comment id="a0aA000000HVF5AIAX"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-07-22T03:45:53Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-07-22T03:45:53Z</b><br><br>Greetings!<br><br>Thanks for contacting Red Hat Global Support Services!<br><br>Blacklist with wwid, multipath won't aggregate this blacklisted devices, but you can see these devices in paths list.<br><br>blacklist {<br>        devnode &quot;^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*&quot;<br>        devnode &quot;^hd[a-z]&quot;<br>        wwid    36141877054307b001e156874054ec789<br>        wwid    36141877054307b001e202b5313c45f96<br>        wwid    36141877054307b001e202b5613f6dce1<br>}<br><br>If you don't want to see these local devices in paths list, as the vendor of these three local devices are DELL, please try to blacklist it with product name.<br><br>blacklist {<br>#       wwid &quot;SATA_HGST_HTS725050A_TF755AWHH33R1K&quot;<br>#       devnode &quot;^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*&quot;<br>#       devnode &quot;^hd[a-z]&quot;<br>       device {<br>               vendor  &quot;DELL&quot;<br>               product &quot;*&quot;<br>       }<br>}<br><br># service multipathd reload<br><br>Best Regards,<br>Catherine Huang<br>Technical Support Engineer, Support Delivery<br><br><publishedDate>2016-07-22T03:45:53Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>but, multipath command shows the path of local disk in &quot;paths list&quot;.<br><br>Is there any problem in multipath configuration or multipath's version?<br><br><br>[root@ ]# cat /etc/multipath.conf<br>defaults {<br><br>user_friendly_names yes<br><br>find_multipaths yes<br>#<br>no_path_retry<br><br>fail<br><br>polling_interval<br>60<br>}<br><br>blacklist {<br><br>devnode &quot;^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*&quot;<br><br>devnode &quot;^hd[a-z]&quot;<br><br>wwid<br>36141877054307b001e156874054ec789<br><br>wwid<br>36141877054307b001e202b5313c45f96<br><br>wwid<br>36141877054307b001e202b5613f6dce1<br>}<br>... ~snip~ ...<br><br>[root@ ]# multipath -v4 -ll<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-0<br>Jun 05 10:34:41 | dm-0: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-1<br>Jun 05 10:34:41 | dm-1: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-10<br>Jun 05 10:34:41 | dm-10: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-11<br>Jun 05 10:34:41 | dm-11: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-12<br>Jun 05 10:34:41 | dm-12: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-13<br>Jun 05 10:34:41 | dm-13: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-14<br>Jun 05 10:34:41 | dm-14: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-15<br>Jun 05 10:34:41 | dm-15: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-16<br>Jun 05 10:34:41 | dm-16: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-17<br>Jun 05 10:34:41 | dm-17: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-18<br>Jun 05 10:34:41 | dm-18: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-19<br>Jun 05 10:34:41 | dm-19: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-2<br>Jun 05 10:34:41 | dm-2: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-3<br>Jun 05 10:34:41 | dm-3: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-4<br>Jun 05 10:34:41 | dm-4: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-5<br>Jun 05 10:34:41 | dm-5: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-6<br>Jun 05 10:34:41 | dm-6: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-7<br>Jun 05 10:34:41 | dm-7: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-8<br>Jun 05 10:34:41 | dm-8: device node name blacklisted<br>Jun 05 10:34:41 | Discover device /sys/devices/virtual/block/dm-9<br>Jun 05 10:34:41 | dm-9: device node name blacklisted<br>Jun 05 10:34:41 | Discovery status 0<br><br>===== paths list =====<br>uuid hcil     dev  dev_t  pri dm_st chk_st vend/prod/rev             dev_st<br>     0:2:0:0  sda  8:0    -1  undef ready  DELL    ,PERC H730P Adp   running<br>     0:2:1:0  sdb  8:16   -1  undef ready  DELL    ,PERC H730P Adp   running<br>     0:2:2:0  sdc  8:32   -1  undef ready  DELL    ,PERC H730P Adp   running<br>     2:0:0:0  sdd  8:48   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:1  sde  8:64   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:10 sdn  8:208  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:11 sdo  8:224  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:2  sdf  8:80   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:3  sdg  8:96   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:4  sdh  8:112  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:5  sdi  8:128  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:6  sdj  8:144  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:7  sdk  8:160  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:8  sdl  8:176  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:0:9  sdm  8:192  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:0  sdp  8:240  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:1  sdq  65:0   -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:10 sdz  65:144 -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:11 sdaa 65:160 -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:2  sdr  65:16  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:3  sds  65:32  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:4  sdt  65:48  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:5  sdu  65:64  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:6  sdv  65:80  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:7  sdw  65:96  -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:8  sdx  65:112 -1  undef ready  HITACHI ,OPEN-V           running<br>     2:0:1:9  sdy  65:128 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:0  sdab 65:176 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:1  sdac 65:192 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:10 sdal 66:80  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:11 sdam 66:96  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:2  sdad 65:208 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:3  sdae 65:224 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:4  sdaf 65:240 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:5  sdag 66:0   -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:6  sdah 66:16  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:7  sdai 66:32  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:8  sdaj 66:48  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:0:9  sdak 66:64  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:0  sdan 66:112 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:1  sdao 66:128 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:10 sdax 67:16  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:11 sday 67:32  -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:2  sdap 66:144 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:3  sdaq 66:160 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:4  sdar 66:176 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:5  sdas 66:192 -1  undef ready  HITACHI ,OPEN-V           running<br>     4:0:1:6  sdat 66:208 -1  undef ready  HITACHI ,OPEN-V           running<br><br><br>[root@ ]# lsscsi <br>lsscsi  | head<br>[0:2:0:0]    disk    DELL     PERC H730P Adp   4.26  /dev/sda <br>[0:2:1:0]    disk    DELL     PERC H730P Adp   4.26  /dev/sdb <br>[0:2:2:0]    disk    DELL     PERC H730P Adp   4.26  /dev/sdc</issue><cep>false</cep><folderName>ERP-ALL</folderName></case>