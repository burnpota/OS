======================<br><b>생성계정 : Seung-Pil Kim</b><br><b>생성날짜 : 2016-02-15T15:20:54Z</b><br><b>마지막 답변자 : Adnan Shaikh</b><br><b>마지막 수정 일자 : 2016-02-28T05:14:17Z</b><br><b>id : 500A000000TcKR4IAN</b><br>======================<br><br><b><font size=15>
제목  : fence_kdump related questions
</font></b><br><br>======================<br><b>사전문의<br></b><br>What problem/issue/behavior are you having trouble with?  What do you expect to see?<br><br>1. when pcmk_host_check is set to dynamic-list, how pacemaker obtain node list? (what exactly mean &quot;query the device&quot;?)<br>2. when pcmk_host_check is not set and pcmk_host_list has the node list, what is expected behavior?<br>3. what is related fence_kdump option when kdump.conf is configured with &quot;fence_kdump_args -i 5&quot;?<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>fencing</name></tag><tag><name>pacemaker</name></tag></tags><br><comment id="a0aA000000GaxHCIAZ"><br>======================<br><b>생성계정 : Shaikh, Adnan</b><br><b>생성날짜 : 2016-02-28T05:14:16Z</b><br><b>마지막 답변자 : Shaikh, Adnan</b><br><b>마지막 수정 일자 : 2016-02-28T05:14:16Z</b><br><br>Hello,<br><br>Thanks for the update.<br><br>As per the last comment we are closing the case.<br><br>If you receive a survey request, please take this opportunity to let us know what we did well, and where we can improve.  Your feedback and comments are appreciated.<br><br><br>Thanks,<br>Mohammad Adnan Shaikh<br><br><publishedDate>2016-02-28T05:14:16Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GasVnIAJ"><br>======================<br><b>생성계정 : Ram Jeon, Ja</b><br><b>생성날짜 : 2016-02-27T13:36:29Z</b><br><b>마지막 답변자 : Ram Jeon, Ja</b><br><b>마지막 수정 일자 : 2016-02-27T13:36:29Z</b><br><br>Hi Mohammad,<br><br>Thanks  for the information.<br>Please close the case.<br>Thanks, jaram<br><br><publishedDate>2016-02-27T13:36:29Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GaPIJIA3"><br>======================<br><b>생성계정 : Shaikh, Adnan</b><br><b>생성날짜 : 2016-02-25T09:44:05Z</b><br><b>마지막 답변자 : Shaikh, Adnan</b><br><b>마지막 수정 일자 : 2016-02-25T09:44:05Z</b><br><br>Hello,<br><br>In our test environment we have used the &quot;strace&quot; command while fencing one of node and we saw it read corosync.conf ,there weren't any reference for cib.xml file<br><br><br>Thanks,<br>Mohammad Adnan Shaikh<br><br><publishedDate>2016-02-25T09:44:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GaMHsIAN"><br>======================<br><b>생성계정 : Ram Jeon, Ja</b><br><b>생성날짜 : 2016-02-25T02:57:18Z</b><br><b>마지막 답변자 : Ram Jeon, Ja</b><br><b>마지막 수정 일자 : 2016-02-25T02:57:18Z</b><br><br>Hi Mohammad,<br><br>I think you misunderstood my question.<br><br>&gt;&gt; Are the node names different in &quot;pcs cluster cib&quot; and corosync.conf in your case. <br>&gt;&gt; Have tested in one of our system and I see the node names are same in either of the files.<br><br>I know that pacemaker obtain node name.<br>But from WHERE? and HOW PACEMAKER OBTAIN THOSE NODE LIST?<br><br>Does pacemaker execute pcs cluster cib and obtain from there?<br>or does it check corosync.conf and obtain from there?<br><br>Please specify where actually pacemaker obtain those node list.<br>Thanks, jaram<br><br><publishedDate>2016-02-25T02:57:18Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Ga858IAB"><br>======================<br><b>생성계정 : Shaikh, Adnan</b><br><b>생성날짜 : 2016-02-24T02:33:16Z</b><br><b>마지막 답변자 : Shaikh, Adnan</b><br><b>마지막 수정 일자 : 2016-02-24T02:33:16Z</b><br><br>Hello,<br><br>&gt;&gt; Does this mean pacemaker obtain node from &quot;pcs cluster cib&quot;? or from corosync.conf or some other way?<br><br>Are the node names different in &quot;pcs cluster cib&quot; and corosync.conf in your case. <br>Have tested in one of our system and I see the node names are same in either of the files.<br><br>&gt;&gt; Again, I don't see file that you mentioned, Do i need to create it?<br><br>Yes you need to create the file<br><br># cat /etc/sysconfig/fence_kdump <br>FENCE_KDUMP_OPTS=&quot;-c 5 -i 1&quot;<br><br><br>Thanks,<br>Mohammad Adnan Shaikh<br><br><publishedDate>2016-02-24T02:33:16Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GZsPEIA1"><br>======================<br><b>생성계정 : Ram Jeon, Ja</b><br><b>생성날짜 : 2016-02-23T02:52:39Z</b><br><b>마지막 답변자 : Ram Jeon, Ja</b><br><b>마지막 수정 일자 : 2016-02-23T02:52:39Z</b><br><br>Hi Mohammad,<br>======================<br>&gt; From the cluster node-name specified while creating the cluster.<br>Does this mean pacemaker obtain node from &quot;pcs cluster cib&quot;? or from corosync.conf or some other way?<br><br>&gt; No, I meant /etc/sysconfig/fence_kdump.<br>Again, I don't see file that you mentioned, Do i need to create it?<br>If so, can you provide sample syntax that need to be configured inside the file.<br><br>Thanks, jaram<br><br><publishedDate>2016-02-23T02:52:39Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GZUMBIA5"><br>======================<br><b>생성계정 : Shaikh, Adnan</b><br><b>생성날짜 : 2016-02-22T03:13:58Z</b><br><b>마지막 답변자 : Shaikh, Adnan</b><br><b>마지막 수정 일자 : 2016-02-22T03:13:58Z</b><br><br>Hello,<br><br>Here are the updates for the query raised.<br><br>&gt;&gt; Can you simply let me know how pacemaker obtain node when pcmk_host_check is dynamic-list?<br><br>From the cluster node-name specified while creating the cluster.<br><br>&gt;&gt; so, when pcmk_host_list is set then, pcmk_host_check is not necessary to be configured as &quot;static-list&quot;?<br><br>Yes if pcmk_host-list is set then you do not need to explicilty set pcmk_host_check as static-list<br><br>&gt;&gt; Do you mean &quot;/etc/sysconfig/kdump&quot; ?<br><br>No, I meant /etc/sysconfig/fence_kdump.<br><br><br>Thanks,<br>Mohammad Adnan Shaikh<br><br><publishedDate>2016-02-22T03:13:58Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GYxjnIAD"><br>======================<br><b>생성계정 : Ram Jeon, Ja</b><br><b>생성날짜 : 2016-02-18T16:19:10Z</b><br><b>마지막 답변자 : Ram Jeon, Ja</b><br><b>마지막 수정 일자 : 2016-02-18T16:19:10Z</b><br><br>Hi Mohammad,<br><br>1.  Can you simply let me know how pacemaker obtain node when pcmk_host_check is dynamic-list? (from specific command or from configuration file...ETC)<br>&gt; When a stonith device is created with the default setting of &quot;pcmk_host_check=dynamic-list&quot;, stonith will automatically pass in the name of node to fence as the port attribute. In the case of         &gt; virtualization-based agents, it is common for the node name to not match the name of the VM on the virtualization host, and thus this port attribute ends up being wrong, causing fence attempts &gt; to fail . By specifying a pcmk_host_map, one can tell stonith to pass a different port value for each node.<br><br>2. so, when pcmk_host_list is set then, pcmk_host_check is not necessary to be configured as &quot;static-list&quot;?<br><br>3.  there is no such a file as &quot;/etc/sysconfig/fence_kdump&quot; on my system.<br>Do you mean &quot;/etc/sysconfig/kdump&quot; ?<br><br>Thanks, jaram<br><br><publishedDate>2016-02-18T16:19:10Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GYL84IAH"><br>======================<br><b>생성계정 : Shaikh, Adnan</b><br><b>생성날짜 : 2016-02-17T05:53:26Z</b><br><b>마지막 답변자 : Shaikh, Adnan</b><br><b>마지막 수정 일자 : 2016-02-17T05:53:26Z</b><br><br>Hello,<br><br>In continuation to the previous comment regarding fence-kdump:<br><br>The fence_kdump fence agent has two components:<br><br>    fence_kdump: The fencing agent. When fencing occurs, this agent will listen for a message from the node that is being fenced. If the agent does not receive a message from the failed node within a certain amount of time, the agent returns failure and other fencing methods should be attempted. If the agent does receive a message from the failed node, the agent returns success and the node is considered to be fenced.<br><br>    fence_kdump_send: The utility that sends the message. This is normally run from within the kdump kernel while the kdump crash recovery service is performing core collection. Messages will be sent continuously at a regular interval to all nodes in the cluster.<br><br><br>The behavior of fence_kdump_send can be modified by setting options in the /etc/sysconfig/fence_kdump file:<br><br>FENCE_KDUMP_OPTS=&quot;-i 5&quot;<br><br>In this example, fence_kdump_send would send a message every 5 seconds. For a complete list of fence_kdump_send options, please refer to the fence_kdump_send man page. Note that any changes to /etc/sysconfig/fence_kdump requires that the kdump service be restarted.<br><br><br>Thanks,<br>Mohammad Adnan Shaikh<br><br><publishedDate>2016-02-17T05:53:26Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GY4yqIAD"><br>======================<br><b>생성계정 : Shaikh, Adnan</b><br><b>생성날짜 : 2016-02-16T06:10:40Z</b><br><b>마지막 답변자 : Shaikh, Adnan</b><br><b>마지막 수정 일자 : 2016-02-16T06:10:40Z</b><br><br>Hello,<br><br>Here are the updates<br><br>&gt;&gt; 1. when pcmk_host_check is set to dynamic-list, how pacemaker obtain node list? (what exactly mean &quot;query the device&quot;?)<br><br>When a stonith device is created with the default setting of &quot;pcmk_host_check=dynamic-list&quot;, stonith will automatically pass in the name of node to fence as the port attribute. In the case of virtualization-based agents, it is common for the node name to not match the name of the VM on the virtualization host, and thus this port attribute ends up being wrong, causing fence attempts to fail . By specifying a pcmk_host_map, one can tell stonith to pass a different port value for each node.<br><br>&gt;&gt; 2. when pcmk_host_check is not set and pcmk_host_list has the node list, what is expected behavior?<br><br>pcmk_host_list being recognized by stonithd depends on pcmk_host_check being set to static-list. This is the default value if pcmk_host_list is specified and pcmk_host_check is not, but if pcmk_host_check is for some reason set to dynamic-list or none, then it should be set to static-list or unset entirely so that pcmk_host_list is recongized. pcmk_host_check is another attribute that is set directly on applicable devices.<br><br>&gt;&gt; 3. what is related fence_kdump option when kdump.conf is configured with &quot;fence_kdump_args -i 5&quot;?<br><br>The fence_kdump_send utility is used to send these arguments , and it exists in RHEL 7. We are just checking its feasibility.<br><br> <br> <br>Thanks,<br>Mohammad Adnan Shaikh<br><br><publishedDate>2016-02-16T06:10:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GY4H0IAL"><br>======================<br><b>생성계정 : Shaikh, Adnan</b><br><b>생성날짜 : 2016-02-16T04:09:45Z</b><br><b>마지막 답변자 : Shaikh, Adnan</b><br><b>마지막 수정 일자 : 2016-02-16T04:09:44Z</b><br><br>Hello,<br><br>Thank you for contacting Red Hat.<br><br>Please allow me sometime to analyse the requirement and get back with our analysis.<br><br><br>Thanks,<br>Mohammad Adnan Shaikh<br><br><publishedDate>2016-02-16T04:09:44Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>2. when pcmk_host_check is not set and pcmk_host_list has the node list, what is expected behavior?<br>3. what is related fence_kdump option when kdump.conf is configured with &quot;fence_kdump_args -i 5&quot;?</issue><cep>false</cep></case>