======================<br><b>생성계정 : hyangjun son</b><br><b>생성날짜 : 2017-04-13T05:54:30Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2017-05-05T10:04:45Z</b><br><b>id : 500A000000WmaEmIAJ</b><br>======================<br><br><b><font size=15>
제목  : timedatectl 결과값 NTP synchronized : no
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>서버에 띄우려는 No-Sql서비스가 timedatectl값중 NTP synchronized =yes 를 참조하는데<br>synchronized 값이 no로 바뀌는 이슈가 발생.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>기존엔  ntpd.service를 사용하였고, ntp.conf에 NTP 서버 4대를 설정하여 사용하고잇었음<br>(ntp와 chrony서비스 두개가 띄워져 있었음)<br>ex) 42.1.160.101 true<br>      42.1.160.102 <br>      42.8.168.101<br>      42.8.168.102 <br>위와같이 설정하여 사용하고있었으며 ntpq -p 결과값이 나왔었음.<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>현재 ntp 서비스를 disable 해 놓고, chronyd 를 재기동하였음.<br>ntp.conf에 설정했던 대로 true를 적용했으나 여전히 sync가 no였고, <br>true값을 빼니 yes로 되어 임시로 조치함.<br><br>What information can you provide around timeframes and the business impact?<br><br>7.1에서 synchronized 값이 yes가 되려면 어떻게 해야하는지 확인부탁드립니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.1</b><br><b>타입  : Defect / Bug</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 4 (Low)</b><br>======================<br><comment id="a0aA000000JJMsyIAH"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-04-19T02:41:23Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-04-19T02:41:23Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>&gt; 그렇다면 혹시 chrony 데몬 사용시(ntp데몬은 disable)에는 /etc/chrony.conf에 <br>&gt; 아래 ntp서버 4대를 어떻게 설정하면되나요? <br>&gt; 현재는 아래와같이 적용해놓았더니 timedatectl 값이 sync=yes, enable=yes로 되었습니다.<br><br>/etc/chrony.conf 파일에 아래와 같이 추가해주시고 서비스 재기동을 해주시면 됩니다.<br><br>server 42.1.160.101<br>server 42.1.160.102 <br>server 42.8.168.101<br>server 42.8.168.102 <br><br><br>&gt; 또한가지, timedatectl  명령어의 enabled과 sync 값은 어떤데몬을 참조하는지요?<br>&gt; chrony데몬을 disable하고 ntp 데몬을 사용해도 timedatectl값이 enabled=yes, synchronized=yes 가 될수 있는지 궁금합니다.<br><br>서버에서 chrony 패키지를 삭제하시고 아래의 명령어를 사용하시면 ntpd 데몬이 올라와 있으며 시간이 ntpd 데몬에<br>의하여 동기화 됩니다.<br><br># timedatectl set-ntp true<br><br>감사합니다.<br><br><publishedDate>2017-04-19T02:41:23Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JIwb6IAD"><br>======================<br><b>생성계정 : son, hyangjun</b><br><b>생성날짜 : 2017-04-17T11:22:30Z</b><br><b>마지막 답변자 : son, hyangjun</b><br><b>마지막 수정 일자 : 2017-04-17T11:22:30Z</b><br><br>그렇다면 혹시 chrony 데몬 사용시(ntp데몬은 disable)에는 /etc/chrony.conf에 <br>아래 ntp서버 4대를 어떻게 설정하면되나요? <br>현재는 아래와같이 적용해놓았더니 timedatectl 값이 sync=yes, enable=yes로 되었습니다.<br>42.1.160.101<br>42.1.160.102 <br><br>또한가지, timedatectl  명령어의 enabled과 sync 값은 어떤데몬을 참조하는지요?<br>chrony데몬을 disable하고 ntp 데몬을 사용해도 timedatectl값이 enabled=yes, synchronized=yes 가 될수 있는지 궁금합니다.<br>--------------------------------------------------<br>(Huang, Ying에 회신)<br>&gt; 안녕하세요,<br>&gt; <br>&gt; Red Hat Global Support Services를 이용해주셔서 감사합니다.<br>&gt; <br>&gt; 42.1.160.101 true<br>&gt; 42.1.160.102 <br>&gt; 42.8.168.101<br>&gt; 42.8.168.102 <br>&gt; <br>&gt; true 옵션은 두개의 NTP 서버만 있을 경우 두 서버의 시간이 불일치할 경우에 시간 동기화에<br>&gt; 실패되는것을 방지하기 위하여 추가하는 옵션이며 현재 4개의 NTP 서버가 설정되어 있는<br>&gt; 환경에서는 필요하지 않으십니다.<br>&gt; <br>&gt; 또한 서버에서 ntpd와 chronyd 서비스를 한개만 사용하셔야 하며 동시에 사용시에는<br>&gt; 정상적으로 시간동기화가 되지 않을수 있습니다.<br>&gt; <br>&gt; 또한 timdatectl 출력 결과는 ntpd 혹은 chronyd 서비스에 대한 설정이 변경시<br>&gt; 바로 적용이 되지 않을수 있는데 이와 같은 경우에는 아래와 같은 명령어를 실행하실수 있으십니다.<br>&gt; <br>&gt; # systemctl restart systemd-timedated.service<br>&gt; <br>&gt; 따라서 시간 동기화 여부는 아래의 명령어 결과로 확인하시기 바랍니다.<br>&gt; <br>&gt; chronyd 경우<br>&gt; # chronyc sources<br>&gt; <br>&gt; ntpd 경우<br>&gt; # ntpq -p<br>&gt; <br>&gt; 감사합니다.<br><br><publishedDate>2017-04-17T11:22:30Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JIbb2IAD"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-04-14T03:48:08Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-04-14T03:48:08Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>42.1.160.101 true<br>42.1.160.102 <br>42.8.168.101<br>42.8.168.102 <br><br>true 옵션은 두개의 NTP 서버만 있을 경우 두 서버의 시간이 불일치할 경우에 시간 동기화에<br>실패되는것을 방지하기 위하여 추가하는 옵션이며 현재 4개의 NTP 서버가 설정되어 있는<br>환경에서는 필요하지 않으십니다.<br><br>또한 서버에서 ntpd와 chronyd 서비스를 한개만 사용하셔야 하며 동시에 사용시에는<br>정상적으로 시간동기화가 되지 않을수 있습니다.<br><br>또한 timdatectl 출력 결과는 ntpd 혹은 chronyd 서비스에 대한 설정이 변경시<br>바로 적용이 되지 않을수 있는데 이와 같은 경우에는 아래와 같은 명령어를 실행하실수 있으십니다.<br><br># systemctl restart systemd-timedated.service<br><br>따라서 시간 동기화 여부는 아래의 명령어 결과로 확인하시기 바랍니다.<br><br>chronyd 경우<br># chronyc sources<br><br>ntpd 경우<br># ntpq -p<br><br>감사합니다.<br><br><publishedDate>2017-04-14T03:48:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>synchronized 값이 no로 바뀌는 이슈가 발생.</issue><environment>기존엔  ntpd.service를 사용하였고, ntp.conf에 NTP 서버 4대를 설정하여 사용하고잇었음<br>(ntp와 chrony서비스 두개가 띄워져 있었음)<br>ex) 42.1.160.101 true<br>      42.1.160.102 <br>      42.8.168.101<br>      42.8.168.102 <br>위와같이 설정하여 사용하고있었으며 ntpq -p 결과값이 나왔었음.</environment><periodicityOfIssue>현재 ntp 서비스를 disable 해 놓고, chronyd 를 재기동하였음.<br>ntp.conf에 설정했던 대로 true를 적용했으나 여전히 sync가 no였고, <br>true값을 빼니 yes로 되어 임시로 조치함.</periodicityOfIssue><timeFramesAndUrgency>7.1에서 synchronized 값이 yes가 되려면 어떻게 해야하는지 확인부탁드립니다.</timeFramesAndUrgency><cep>false</cep></case>