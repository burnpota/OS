======================<br><b>생성계정 : support os</b><br><b>생성날짜 : 2018-07-25T04:13:04Z</b><br><b>마지막 답변자 : Workflow Integration</b><br><b>마지막 수정 일자 : 2018-08-01T04:07:24Z</b><br><b>id : 500A000000bUVfZIAW</b><br>======================<br><br><b><font size=15>
제목  : LVM 를 이용하여 10TB 파일시스템을 만들경우 xfs  지원여부
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>1. lvm  를 통해 10TB  xfs 파일시스템을 만들려고 합니다. xfs  는 500TB 까지 만들수 있는걸로 아는데 안정적인 운영을 위하여  권고하는 사이즈가 있는지요?<br><br>2. 만약 가능하다고 하면 10TB 파일시스템을 만들때 <br>기본 PE 사이즈가 4096byte 인데  pv당  만들수 있는 최대 갯수과 VG 사용할수 있는 최대 PE 갯수는 어떻게 되나요?<br><br>3. 제한이 있다고 하면 PE 사이즈를 어떻게 조절해서 사용해야 하는지요?<br><br>4. 파일시스템 성능향상을 위해서 적용할수 있는 옵션같은게 있는지요?<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.4</b><br><b>타입  : Configuration issue</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 3 (Normal)</b><br><hostname>[삼성화재][U2L]</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000NJVR4IAP"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-08-01T04:07:23Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-08-01T04:07:23Z</b><br><br>안녕하세요,  <br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br>      <br>먼저, 답변이 도움이 되신거 같아 다행입니다. 요청하신것과 같이 본 케이스를 처리완료하도록 하겠습니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.  <br>    <br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발송드리니 고객님께서 의견을 남겨주시면 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술  지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>그리고 아래 Red Hat Customer Portal group을 통하여 많은 유용한 정보들을 볼수 있으니 참고하시기 바랍니다.<br><br>Featured Groups:<br>Red Hat Enterprise Linux - https://access.redhat.com/groups/red-hat-enterprise-linux<br>Red Hat Enterprise Linux 7 Ideas - https://access.redhat.com/groups/red-hat-enterprise-linux-7-ideas<br>Red Hat Enterprise Linux Developer Program (beta) - https://access.redhat.com/groups/red-hat-enterprise-linux-developer-program-beta<br>Red Hat Enterprise Virtualization - https://access.redhat.com/groups/red-hat-enterprise-virtualization<br>Red Hat Storage - https://access.redhat.com/groups/red-hat-storage<br>JBoss Enterprise Middleware - https://access.redhat.com/groups/jboss-enterprise-middleware<br>Red Hat Network Satellite - https://access.redhat.com/groups/red-hat-network-satellite<br>       <br>감사합니다.<br><br><publishedDate>2018-08-01T04:07:23Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NJVB6IAP"><br>======================<br><b>생성계정 : os, support</b><br><b>생성날짜 : 2018-08-01T03:26:12Z</b><br><b>마지막 답변자 : os, support</b><br><b>마지막 수정 일자 : 2018-08-01T03:26:11Z</b><br><br>네 감사합니다.<br><br><publishedDate>2018-08-01T03:26:11Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NJTZ3IAP"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-08-01T00:46:34Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-08-01T00:46:34Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>먼저 정확하지 않는 LVM 버전 정보로 인해서 올바른 답변을 드리지 못한점 죄송하다는 말씀을 드립니다. 저희 스토리지 전문그룹으로 다시 한번 더 확인을 해보니<br>PE 의 제한이 65534 인것은 LVM1 에 해당이 되고 LVM2 인 경우에는 제한값이 없다고 합니다. - 참고문서[1]<br><br>그래서, LVM2 를 사용한다면 PE 사이즈의 제한값을 적용하지 않는것이 나은 방법이고 만약 큰수의 PE 를 지정하는것은 LVM 과 관련된 도구(명령어)들이 느려지<br>는것으로 알려져 있습니다. 그렇다고 하더라도, LV 로의 어떤 I/O 성능에 영향은 가지지 않습니다.<br><br>요청하신 관련된 공식문서는 아래의 참고문서[1],[2]를 활용하실 수 있습니다.<br><br><br>[ 참고문서 ]<br><br>[1] What is the maximum number of physical extents allowed to be created in an LVM2 volume group ? <br>- https://access.redhat.com/solutions/55120<br><br>[2] Choosing PE size for large file system<br>- https://access.redhat.com/solutions/129893<br><br>감사합니다.<br><br><publishedDate>2018-08-01T00:46:34Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NJFBBIA5"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-07-31T07:34:24Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-07-31T07:34:24Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>먼저 테스트 해주신 내용을 공유해주셔서 감사합니다. 올려주신 추가문의 내용과 Red Hat 공식문서에 대해서는 저희 스토리지 전문그룹으로 다시 한번 더 확인하여 답변을 드릴수 있도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-07-31T07:34:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NIjOYIA1"><br>======================<br><b>생성계정 : os, support</b><br><b>생성날짜 : 2018-07-27T15:14:00Z</b><br><b>마지막 답변자 : os, support</b><br><b>마지막 수정 일자 : 2018-07-27T15:13:59Z</b><br><br>답변감사합니다. <br>몇가지 추가 질문드립니다.<br>Q2) 만약 가능하다고 하면 10TB 파일시스템을 만들때 기본 PE 사이즈가 4096byte 인데  pv당  만들수 있는 최대 갯수과 VG 사용할수 있는 최대 PE 갯수는 어떻게 되나요?<br>A2) PE 의 default 크기는 4096 KiB 이고, 이를 사용한다면 LV 당 PE 의 최대수는 65534 로 제한이 되기 때문에 한 LV 의 크기는 256 GiB 라는 제한값이 있습니다.<br><br>Q2-1) 실제 RHEL7.4 에서  default PE 로 단일 LV 를 10TiB  생성이 되는것을 확인하였습니다.<br>500G LUN  20개를 가지고 단일 VG 를 생성하고 단일 LV 를 생성하였습니다.<br><br>알려주신 https://access.redhat.com/solutions/65201  여기를 봐도 default PE/LE size 로 64 bit 에서 500TiB 까지 생성했다고 나옵니다.<br>&quot; LV 당 PE 의 최대수는 65534 로 제한이 되기 때문에 한 LV 의 크기는 256 GiB 라는 제한값&quot; 이부분은 상당히 중요한 부분 같은데 레드햇 공식문서에서 <br>언급한 부분이 없습니다. 솔루션에도 없는것 같습니다. 공식적으로   65534  로 명시한 문서가 혹시 있을까요? 고객쪽에 문서와 함께 안내를 하고 싶은데요.<br><br><publishedDate>2018-07-27T15:13:59Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000NIdx2IAD"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-07-27T08:24:05Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-07-27T08:24:05Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>Q1) lvm  를 통해 10TB  xfs 파일시스템을 만들려고 합니다. xfs  는 500TB 까지 만들수 있는걸로 아는데 안정적인 운영을 위하여  권고하는 사이즈가 있는지요?<br>A1) LVM 과 XFS 모두 최대지원되는 크기는 500TiB 입니다. 안정적인 운영을 위해서 별도로 권고되는 크기는 없고, 이는 전적으로 고객환경에서 필요한 크기에<br>       따라 정해질 수 있을것입니다.<br><br>Q2) 만약 가능하다고 하면 10TB 파일시스템을 만들때 기본 PE 사이즈가 4096byte 인데  pv당  만들수 있는 최대 갯수과 VG 사용할수 있는 최대 PE 갯수는 어떻게 되나요?<br>A2) PE 의 default 크기는 4096 KiB 이고, 이를 사용한다면 LV 당 PE 의 최대수는 65534 로 제한이 되기 때문에 한 LV 의 크기는 256 GiB 라는 제한값이 있습니다.<br><br>Q3) 제한이 있다고 하면 PE 사이즈를 어떻게 조절해서 사용해야 하는지요?<br>A3) PE 의 크기를 조절하기 위해서는 참고문서[4] 에서 설명한것과 같이 /etc/lvm/lvm.conf 내에 physical_extent_size 를 수정해야 할것입니다.<br>       다른 예로 만약 나중에 1TB 로 확장을 원한다면 아래와 같은 명령으로 VG 를 생성해야할 수 도 있을것입니다.<br>       $vgcreate -s 16m testvg /dev/sd[a-f]1<br><br>Q4) 파일시스템 성능향상을 위해서 적용할수 있는 옵션같은게 있는지요?<br>A4) 아래의 참고문서[5]를 활용하시면 여러 XFS 파일시스템의 옵션을 환경에 맞게 적용하실 수 있을것입니다.<br><br><br>[ 참고문서 ]<br><br>[1] What is maximum size of logical volume?<br>- https://access.redhat.com/solutions/65201<br><br>[2] What are the file and file system size limitations for Red Hat Enterprise Linux?<br>- https://access.redhat.com/solutions/1532<br><br>[3] Is there a maximum number of physical volumes allowed in a volume group?<br>- https://access.redhat.com/solutions/38638<br><br>[4] Can I set a default PE size in /etc/lvm/lvm.conf?<br>- https://access.redhat.com/solutions/733983<br><br>[5] What are some of best practices for tuning XFS filesystems<br>- https://access.redhat.com/solutions/203173<br><br>감사합니다.<br><br><publishedDate>2018-07-27T08:24:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000NIbaDIAT"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-07-27T03:45:36Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-07-27T03:45:36Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>저는 Platform Support 를 담당하고 있는 Senior Technical Support Engineer 문종영 입니다.<br>올려주신 문의내용은 현재 자세히 살펴보고 있는중이며, 관련된 내용이 확인이 되는대로 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-07-27T03:45:36Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>2. 만약 가능하다고 하면 10TB 파일시스템을 만들때 <br>기본 PE 사이즈가 4096byte 인데  pv당  만들수 있는 최대 갯수과 VG 사용할수 있는 최대 PE 갯수는 어떻게 되나요?<br><br>3. 제한이 있다고 하면 PE 사이즈를 어떻게 조절해서 사용해야 하는지요?<br><br>4. 파일시스템 성능향상을 위해서 적용할수 있는 옵션같은게 있는지요?</issue><cep>false</cep></case>