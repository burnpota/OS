======================<br><b>생성계정 : 주호 이</b><br><b>생성날짜 : 2016-06-04T06:46:03Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-06-16T10:05:59Z</b><br><b>id : 500A000000UZOp6IAH</b><br>======================<br><br><b><font size=15>
제목  : OS HANG
</font></b><br><br>======================<br><actionPlan>*** Handover Note *** <br><br>Customer's OOH contact details: <br>Problem specification (object/defect): OS hang<br>Current status: Previous engineer requested problem description, business impact, and contact information in English for easier troubleshooting<br>Next steps: Assist further with issues as applicable<br><br>***</actionPlan><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>. OS HANG 현상 발생<br>. NMI 시그널로 덤프 생성불가<br> /var/log/messages 로그에 6/4 00시 이후 로그에 SAP 관련 Deadlock 메세지가 다수 발생하여 커널 모듈에 영향이 발생한 것으로 추정되는데 HANG 원인과 모니터링 방안을 알고 싶습니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>. Redhat 7.2 OS HANG<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 2 (High)</b><br>======================<br><comment id="a0aA000000HHe1hIAD"><br>======================<br><b>생성계정 : Singh, Harpreet</b><br><b>생성날짜 : 2016-06-07T21:11:17Z</b><br><b>마지막 답변자 : Singh, Harpreet</b><br><b>마지막 수정 일자 : 2016-06-07T21:11:16Z</b><br><br>Hello there, <br>======================<br>As we have not heard back in sometime regarding this case, we will be dropping the 24x7 coverage. Please keep in mind that this can be changed at anytime per the situation. <br>======================<br>Regards, <br>======================<br>Harpreet Singh<br>Red Hat<br><br><publishedDate>2016-06-07T21:11:16Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HHSOMIA5"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-06-07T08:18:07Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-06-07T08:18:07Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>우선 보내주신 sosreport를 확인하였고.. 아래와 같이 확인한 부분을 업데이트 드립니다.<br><br><br>결론적으로 먼저 정리해보면,<br><br>리부팅 작업이 총 4차례정도 있었던 것으로 유추되며, 그 시간은 아래와 같습니다.<br><br>1- 6/4 14:25분경<br>2- 6/4 20:16분경<br>3- 6/5 08:38분경<br>4- 6/5 10:22분경<br><br>우선, HANG의 원인을 분석하기 위해서는 기본적으로 kernel을 강제로 crash시켜서 vmcore를 받아야 만이 원인을 분석하는데 도움이 됩니다.<br>하지만 현재 수집된 로그만으로 해당 원인을 유추해본다면, 당시 하드웨어 이슈가 있었던 것으로 보이고, 하드웨어 이슈로 인하여 NMI signal이 처리되지 못함에 따라 kernel의 crash또한 불가능 햇던 것으로 유추됩니다.<br><br>현재 Hardware를 교체를 하였기때문에 해당 이슈가 추가로 발생하는지에 대한 추가 모니터링이 필요합니다.<br><br><br>추가적으로, 만약 하드웨어를 교체한 후에도 MCE라든지 hardware error 메시지가 추가로 발생을 하셨다면, 하드웨어 벤더쪽으로 연락하시어 사전에 이러한 부분의 점검 및 하드웨어 교체를 받으시기 바랍니다.<br><br><br>감사합니다.<br>======================<br><br>* 아래부분은 참고자료입니다.<br>======================<br>1. Hang관련 분석<br><br>유선으로 말씀드렷듯이, 기본적으로 시스템의 HANG 원인을 분석하기 위해서는 kernel을 강제로 당시 crash시켜서 vmcore를 받아야 만이 해당 이슈를 분석할 수 있습니다.<br>다만, 보내주신 로그들을 기반으로 혹시 문제의 여지가 있을 만한 부분에 대해서 아래와 같이 점검하였고 업데이트 드립니다.<br><br><br>2. 6/4일 시스템 리부팅 전후의 문제 확인<br><br>우선 시스템이 리부팅이 있었던 시점에서 특별한 문제가 로그가 기록된 것은 없었습니다.<br>다만, 이야기하셨듯이 application database deadlock 과 같은 로그가 빈번히 발생했던 것으로는 보이나 해당 문제가 시스템을 hang으로 만드는 원인이라고 보기는 힘든 것 같습니다.<br><br><br>3. Hardware Error<br><br>로그상에 다수의 Hardware error를 발견할 수 있었습니다.<br><br>24830:Jun  4 16:59:07 pmsalp01 kernel: {1}[Hardware Error]: Hardware error from APEI Generic Hardware Error Source: 65534<br>24831:Jun  4 16:59:07 pmsalp01 kernel: {1}[Hardware Error]: It has been corrected by h/w and requires no further action<br>24832:Jun  4 16:59:07 pmsalp01 kernel: {1}[Hardware Error]: event severity: corrected<br>24833:Jun  4 16:59:07 pmsalp01 kernel: {1}[Hardware Error]:  Error 0, type: corrected<br>24834:Jun  4 16:59:07 pmsalp01 kernel: {1}[Hardware Error]:   section type: unknown, 330f1140-72a5-11df-9690-0002a5d5c51b<br>24835:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]: Hardware error from APEI Generic Hardware Error Source: 4<br>24836:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]: It has been corrected by h/w and requires no further action<br>24837:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]: event severity: corrected<br>24838:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]:  Error 0, type: corrected<br>24839:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]:  fru_text: DIMM_A6<br>24840:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]:   section_type: memory error<br>24841:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]:   error_status: 0x0000000000000400<br>24842:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]:   node: 1 card: 1 module: 6 rank: 4 <br>24843:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]:   error_type: 15, physical memory map-out event<br><br><br>해당 로그(mce 포함)들은 기본적으로 하드웨어에서 커널로 보내주는 데이터 입니다. 그렇기 때문에 해당 로그가 발생하는 정확한 원인과 내용은 리눅스의 커널에서는 분석이 어렵습니다.<br>즉, 하드웨어 벤더로 해당 메시지가 발생하는 원인에 대해서 문의하여야 합니다.<br>======================<br>4. 리부팅시 시점 및 메시지<br><br>리부팅은 총 4번 정도도 있었던 것으로 유추합니다.<br><br>1번째 6/4 14:25분 경, 리부팅에서는 정확한 원인이 로그상에 없음에 따라 분석이 어려운 상황이며,<br>2번째(6/4 20:16분경)-3번째(6/5 08:38분경) 리부팅시점 전에는 hardware error를 발견할 수 있었습니다.<br>그래서 4번째(6/5 10:22분경)에는 시스템 교체작업이 있지 않았나 추정합니다.<br><br><br>(1) 리부팅<br>20901:Jun  4 22:12:55 pmsalp01 kernel: ACPI: MCEJ 000000007b6c9000 00130 (v01 INTEL           00000001 INTL 0100000D)<br>21312:Jun  4 22:12:55 pmsalp01 kernel: Kernel command line: BOOT_IMAGE=/vmlinuz-3.10.0-327.el7.x86_64 root=/dev/mapper/vg00-root_lv ro crashkernel=512M rd.lvm.lv=vg00/root_lv rd.lvm.lv=vg00/swap_lv nomodeset biosdevname=1 rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=deadline rdloaddriver=megaraid_sas rdloaddriver=lpfc vga=794<br>23728:Jun  4 14:25:34 pmsalp01 ntpd[6924]: 0.0.0.0 c615 05 clock_sync<br><br><br>(2) 리부팅<br>24843:Jun  4 16:59:07 pmsalp01 kernel: {2}[Hardware Error]:   error_type: 15, physical memory map-out event<br>25020:Jun  5 04:04:04 pmsalp01 kernel: Command line: BOOT_IMAGE=/vmlinuz-3.10.0-327.el7.x86_64 root=/dev/mapper/vg00-root_lv ro crashkernel=512M rd.lvm.lv=vg00/root_lv rd.lvm.lv=vg00/swap_lv nomodeset biosdevname=1 rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=deadline rdloaddriver=megaraid_sas rdloaddriver=lpfc vga=794<br>27718:Jun  4 20:16:37 pmsalp01 ntpd[6996]: 0.0.0.0 c615 05 clock_sync<br><br>(3) 리부팅<br>28519:Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]:   error_type: 15, physical memory map-out event<br>28540:Jun  5 16:26:07 pmsalp01 kernel: Command line: BOOT_IMAGE=/vmlinuz-3.10.0-327.el7.x86_64 root=/dev/mapper/vg00-root_lv ro crashkernel=512M rd.lvm.lv=vg00/root_lv rd.lvm.lv=vg00/swap_lv nomodeset biosdevname=1 rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=deadline rdloaddriver=megaraid_sas rdloaddriver=lpfc vga=794<br>31251:Jun  5 08:38:46 pmsalp01 ntpd[7066]: 0.0.0.0 c615 05 clock_sync<br><br>(4) 리부팅 <br>31600:Jun  5 10:21:51 pmsalp01 kernel: Command line: BOOT_IMAGE=/vmlinuz-3.10.0-327.el7.x86_64 root=/dev/mapper/vg00-root_lv ro crashkernel=512M rd.lvm.lv=vg00/root_lv rd.lvm.lv=vg00/swap_lv nomodeset biosdevname=1 rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=deadline rdloaddriver=megaraid_sas rdloaddriver=lpfc vga=794<br>33991:Jun  5 10:22:16 pmsalp01 ntpd[6861]: 0.0.0.0 c615 05 clock_sync<br><br><br>5. 시간 설정 관련<br><br>현재 로그들을 보면, hardware의 시간과 sofrware의 시간의 gap이 발생하는 것으로 보입니다. 그럼에 따라 현재 시간을 구분하기가 어려운 상태입니다.<br>iDrac 에서의 ntp 타임 설정 및 hwclock 설정을 software date time과 동일하게 맞추는 작업을 진행을 통해서 향후의 이슈의 로그를 분석하는데 도움이 되고, 운영상의 시간착오를 줄이기 위해서 시간셋팅을 하여 주시기 바랍니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-06-07T08:18:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HHR7NIAX"><br>======================<br><b>생성계정 : 이, 주호</b><br><b>생성날짜 : 2016-06-07T06:04:23Z</b><br><b>마지막 답변자 : 이, 주호</b><br><b>마지막 수정 일자 : 2016-06-07T06:04:23Z</b><br><br>안녕하세요.<br><br>확인요청 하신 내용에 회신 드립니다.<br><br>Q1. 애플리케이션 에러가 하드웨어 문제로 발생할 가능성<br>A1) SAPFFP 프로세스 관련한 에러 메세지는 대부분 별도 구성된 DB시스템(IBM DB2)과의 연결과 관련된 내용으로 보입니다.<br>      이번 문제에서 시스템이 ICMP echo reply 조차 할 수 없는 상태가 된 것이, 어느 부분의 문제에 기인한 것인지 분석하고자 합니다.<br>      제공하여드린 sosreport 외 필요한 정보가 있는 경우, 알려주시기 바랍니다.<br><br><br>Q2. 타사의 megaraid 를 제거하고 레드햇 탑재 드라이버 운용<br>   - 07.810.09.00-rh1<br>A2) 알려주신 &quot;07.810.09.00-rh1&quot; 버젼으로 바꾸어 테스트 해보아야 할 이유( 유사사례, 알려진 이슈나 문제점)이 있습니까?<br>       그렇다면, 정식 검토 후 일정을 수립하여 적용해 볼 수 있습니다.<br>       제조사(DELL) megaraid 드라이버를 사용하고 있는, 동일한 구성의 동일업무 시스템에서는 관련한 이슈가 없었기에 관련성은 적어보이며,<br>       해결을 위한 검토 우선순위도 낮은 듯 보입니다.<br><br><br>Q3. smartd 설정<br>   - https://access.redhat.com/solutions/1201923'<br>A3) 이번 문제가 smartd가 설정되지 않아서 발생한 이슈입니까? smartd를 반드시 설정해야 하는 것 인지 확인 필요합니다.<br><br><br>Q4. 메인보드 교체 이후에 MCE 에러 발생 모니터<br>A4) DIMM_B6 에서 발생하던 메세지가, 메인보드(메모리 모듈 + 메모리 RiserCard + 메인보드 전체) 교체 이후 DIMM_A6에서 한 번 발생 하였습니다.<br><br><br>Q5. 해당 시간에 어떤 작업이 있는지 확인 필요<br>A5) 본 시스템은 ERP용 시스템이며, SAP 애플리케이션이 탑재됩니다. 업무 부하테스트를 진행한 것으로 알고 있습니다.<br>      단, 부하가 없던 시간에도 시스템에 HANG이 발생하였습니다. ( Application이나 특정 작업과의 개연성은 적은 것 같습니다. )<br><br><br>문제의 원인을 추적하기 위한 설정이나 방법을 제공하시는 것이라면,<br>이유와 우선순위를 함께 알려주시면 도움이 될 것 같습니다.<br><br>고맙습니다.<br><br><br>(Shin, Jay에 회신)<br>&gt; 안녕하세요<br>&gt; <br>&gt; Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br>&gt; <br>&gt; -------------------------------------------------------------------------------------------------------------------------------------------------------------<br>&gt; ENVIRONMENT:<br>&gt;   3.10.0-327.el7.x86_64<br>&gt;   PowerEdge R930 / 40 x Intel(R) Xeon(R) CPU E7-8891 v3 @ 2.80GHz<br>&gt;   RAM 1024 GB<br>&gt; <br>&gt; SPECIFICS:<br>&gt; <br>&gt; RESEARCH:<br>&gt; <br>&gt;   filename:       /lib/modules/3.10.0-327.el7.x86_64/extra/megaraid_sas/megaraid_sas.ko<br>&gt;   version:        06.902.57.00<br>&gt; <br>&gt;  <br>&gt; STEPS TAKEN: <br>&gt;  <br>&gt; SUPPORTING DATA:<br>&gt;   Attached to Case: sosreport<br>&gt; <br>&gt;   Elsewhere:<br>&gt;  <br>&gt; LOGS:<br>&gt; <br>&gt; Jun  1 08:11:00 pmsalp01 SAPFFP_10[27489]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: InvalBeg<br>&gt; Jun  1 08:11:00 pmsalp01 SAPFFP_10[27489]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: InvalEnd<br>&gt; Jun  1 08:11:25 pmsalp01 SAPFFP_20[38397]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: InvalBeg<br>&gt; Jun  1 08:11:25 pmsalp01 SAPFFP_20[38397]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: Inval<br><br><publishedDate>2016-06-07T06:04:23Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HHPNIIA5"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2016-06-07T00:43:15Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2016-06-07T00:43:15Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>-------------------------------------------------------------------------------------------------------------------------------------------------------------<br>ENVIRONMENT:<br>  3.10.0-327.el7.x86_64<br>  PowerEdge R930 / 40 x Intel(R) Xeon(R) CPU E7-8891 v3 @ 2.80GHz<br>  RAM 1024 GB<br><br>SPECIFICS:<br><br>RESEARCH:<br><br>  filename:       /lib/modules/3.10.0-327.el7.x86_64/extra/megaraid_sas/megaraid_sas.ko<br>  version:        06.902.57.00<br><br> <br>STEPS TAKEN: <br> <br>SUPPORTING DATA:<br>  Attached to Case: sosreport<br><br>  Elsewhere:<br> <br>LOGS:<br><br>Jun  1 08:11:00 pmsalp01 SAPFFP_10[27489]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: InvalBeg<br>Jun  1 08:11:00 pmsalp01 SAPFFP_10[27489]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: InvalEnd<br>Jun  1 08:11:25 pmsalp01 SAPFFP_20[38397]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: InvalBeg<br>Jun  1 08:11:25 pmsalp01 SAPFFP_20[38397]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: InvalEnd<br>Jun  1 08:12:46 pmsalp01 SAPFFP_00[4771]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: InvalBeg<br>Jun  1 08:12:46 pmsalp01 SAPFFP_00[4771]: BBD Basis System: Reset buffer EXP_OTR ; mode and status: InvalEnd<br>Jun  1 08:13:55 pmsalp01 SAPFFP_00[25360]: D62 Database: Access to database FFP via Command Line Processor (see DBA Cockpit Audit Log)<br>Jun  1 08:15:26 pmsalp01 SAPFFP_00[4771]: D62 Database: Access to database FFP via Command Line Processor (see DBA Cockpit Audit Log)<br>Jun  1 08:15:26 pmsalp01 SAPFFP_00[4771]: BY2 Database: Database error -104 at OPC<br>Jun  1 08:15:26 pmsalp01 SAPFFP_00[4771]: BY0 Database: &gt; SQL0104N An unexpected token &quot;,&quot;/PM0/ABDAPOLICY&quot; policy&quot; wa<br>Jun  1 08:15:26 pmsalp01 SAPFFP_00[4771]: BY0 Database: &gt; found following &quot;TATUS = '005' ) Mig,&quot;. Expected tokens may<br>Jun  1 08:15:26 pmsalp01 SAPFFP_00[4771]: BY0 Database: &gt; include: &quot;&lt;table_ref&gt;&quot;. SQLSTATE=42601 row=1<br>Jun  1 08:15:30 pmsalp01 SAPFFP_00[19958]: D62 Database: Access to database FFP via Command Line Processor (see DBA Cockpit Audit Log)<br>Jun  1 08:15:30 pmsalp01 SAPFFP_00[19958]: BY2 Database: Database error -206 at OPC<br>Jun  1 08:15:30 pmsalp01 SAPFFP_00[19958]: BY0 Database: &gt; SQL0206N &quot;EXTERNAL_RUNID&quot; is not valid in the context where<br>Jun  1 08:15:30 pmsalp01 SAPFFP_00[19958]: BY0 Database: &gt; it is used. SQLSTATE=42703 row=1<br>...<br>Jun  4 00:10:01 pmsalp01 multipathd: sdc: spurious uevent, path not found<br>Jun  4 00:10:01 pmsalp01 multipathd: uevent trigger error<br>Jun  4 00:13:17 pmsalp01 SAPFFP_00[23750]: BY4 Database: Database error 0 with INS access to table /PM0/ABDASUBJCT1<br>Jun  4 00:13:17 pmsalp01 SAPFFP_00[23750]: BY0 Database: &gt; SQL0302N The value of a host variable in the EXECUTE or OPE<br>Jun  4 00:13:17 pmsalp01 SAPFFP_00[23750]: BY0 Database: &gt; statement is out of range for its corresponding use.<br>Jun  4 00:13:17 pmsalp01 SAPFFP_00[23750]: BY0 Database: &gt; SQLSTATE=22003 row=1<br>Jun  4 00:13:38 pmsalp01 systemd-logind: New session 16002 of user ffpadm.<br>Jun  4 00:13:38 pmsalp01 systemd-logind: Removed session 16002.<br>Jun  4 00:13:38 pmsalp01 systemd-logind: New session 16003 of user ffpadm.<br>Jun  4 00:13:39 pmsalp01 systemd-logind: Removed session 16003.<br>Jun  4 00:14:00 pmsalp01 SAPFFP_10[38425]: BY4 Database: Database error 0 with INS access to table /PM0/ABDASUBJCT1<br>Jun  4 00:14:00 pmsalp01 SAPFFP_10[38425]: BY0 Database: &gt; SQL0302N The value of a host variable in the EXECUTE or OPE<br>Jun  4 00:14:00 pmsalp01 SAPFFP_10[38425]: BY0 Database: &gt; statement is out of range for its corresponding use.<br>Jun  4 00:14:00 pmsalp01 SAPFFP_10[38425]: BY0 Database: &gt; SQLSTATE=22003 row=1<br>Jun  4 00:15:00 pmsalp01 SAPFFP_00[23750]: BYO Database: Deadlock occurred<br>Jun  4 00:15:00 pmsalp01 SAPFFP_10[27479]: BYO Database: Deadlock occurred<br>Jun  4 00:15:01 pmsalp01 SAPFFP_00[23750]: BY4 Database: Database error -911 with DEL access to table /PM0/ABDAPREM<br>Jun  4 00:15:01 pmsalp01 SAPFFP_00[23750]: BY0 Database: &gt; SQL0911N The current transaction has been rolled back<br>Jun  4 00:15:01 pmsalp01 SAPFFP_00[23750]: BY0 Database: &gt; because of a deadlock or timeout. Reason code &quot;2&quot;.<br>Jun  4 00:15:01 pmsalp01 SAPFFP_00[23750]: BY0 Database: &gt; SQLSTATE=40001 row=1<br><br>var/log/messages:Jun  4 21:32:50 pmsalp01 kernel: mce: [Hardware Error]: Machine check events logged<br>var/log/messages:Jun  4 22:14:12 pmsalp01 kernel: mce: [Hardware Error]: Machine check events logged<br>var/log/messages:Jun  4 22:52:30 pmsalp01 kernel: mce: [Hardware Error]: Machine check events logged<br>var/log/messages:Jun  4 23:05:44 pmsalp01 kernel: mce: [Hardware Error]: Machine check events logged<br><br>Jun  4 23:05:44 pmsalp01 kernel: mce: [Hardware Error]: Machine check events logged<br>Jun  4 23:05:45 pmsalp01 kernel: EDAC MC0: 0 CE memory read error on CPU_SrcID#0_Ha#0_Chan#3_DIMM#1 (channel:3 slot:1 page:0x3f22157 offset:0x9c0 grain:32 syndrome:0x0 -  area:DRAM err_code:0000:009f socket:0 ha:1 channel_mask:1 rank:5)<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]: Hardware error from APEI Generic Hardware Error Source: 65534<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]: It has been corrected by h/w and requires no further action<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]: event severity: corrected<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:  Error 0, type: corrected<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:   section type: unknown, 330f1140-72a5-11df-9690-0002a5d5c51b<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:  Error 1, type: corrected<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:   section type: unknown, 330f1140-72a5-11df-9690-0002a5d5c51b<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:  Error 2, type: corrected<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:   section type: unknown, 330f1140-72a5-11df-9690-0002a5d5c51b<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:  Error 3, type: corrected<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:   section type: unknown, 330f1140-72a5-11df-9690-0002a5d5c51b<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:  Error 4, type: corrected<br>Jun  5 00:12:50 pmsalp01 kernel: {9}[Hardware Error]:   section type: unknown, 330f1140-72a5-11df-9690-0002a5d5c51b<br>Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]: Hardware error from APEI Generic Hardware Error Source: 4<br>Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]: It has been corrected by h/w and requires no further action<br>Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]: event severity: corrected<br>Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]:  Error 0, type: corrected<br>Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]:  fru_text: DIMM_A6<br>Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]:   section_type: memory error<br>Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]:   error_status: 0x0000000000000400<br>Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]:   node: 1 card: 1 module: 6 rank: 4<br>Jun  5 00:12:50 pmsalp01 kernel: {10}[Hardware Error]:   error_type: 15, physical memory map-out event<br><br>Jun  5 10:21:59 pmsalp01 smartd[6851]: Device: /dev/sdj, opened<br>Jun  5 10:21:59 pmsalp01 smartd[6851]: Device: /dev/sdj, [HITACHI  OPEN-V           8001], lu id: 0x60060e8007c643000030c643000011bc, S/N: 507553, 214 GB<br>Jun  5 10:21:59 pmsalp01 smartd[6851]: Device: /dev/sdj, IE (SMART) not enabled, skip device<br><br>Linux 3.10.0-327.el7.x86_64 (pmsalp01)  2016-06-04      _x86_64_        (40 CPU)<br><br>02:10:01 PM     CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>02:31:01 PM     all      0.43      0.00      0.49      0.02      0.00      0.00      0.00      0.00      0.00     99.07<br>02:32:02 PM     all     12.02      0.00     32.94      0.11      0.00      0.00      0.06      0.00      0.00     54.87<br><br>02:10:01 PM  pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff<br>02:31:01 PM    490.72     15.87  50217.87      1.08  35458.63      0.00      0.00      0.00      0.00<br>02:32:02 PM  14159.64    334.49 1013334.70      8.80  46500.58      0.00      0.00      0.00      0.00<br><br>02:10:01 PM   frmpg/s   bufpg/s   campg/s<br>02:31:01 PM   -446.24      0.00    286.39<br>02:32:02 PM -149306.90      0.00 104932.99<br><br>02:10:01 PM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty<br>02:31:01 PM 1039127532  17114044      1.62       128   7164860   1806980      0.14   1221412   6802900       244<br>02:32:02 PM 1003210264  53031312      5.02       128  32407540 519998108     41.35  10635560  31880528      4764<br><br>02:10:01 PM dentunusd   file-nr  inode-nr    pty-nr<br>02:31:01 PM     86329      2640     97560         4<br>02:32:02 PM    100688     24080    113784         5<br><br>02:10:01 PM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>02:31:01 PM         1      1019      0.36      0.16      0.15         0<br>02:32:02 PM       179      1995     41.91     11.86      4.17         0<br><br>02:10:01 PM    totsck    tcpsck    udpsck    rawsck   ip-frag    tcp-tw<br>02:31:01 PM       681        66        15         1         0        18<br>02:32:02 PM      1778       687       442         1         0         5<br>-------------------------------------------------------------------------------------------------------------------------------------------------------------<br><br>올려주신 sosreport를 통해서 확인한 사항은 다음과 같습니다.<br><br>1. Database Error 및 Deadlock 발생<br>2. 타사의 megaraid 드라이버 사용 중<br>3. smartd 설정이 되어있지 않음<br>4. Machine check events 발생 후 메인보드 교체<br>5. 02:32:02 PM 에 시스템 자원 사용 및 로드 증가<br><br>아래 언급한 부분의 확인이 필요합니다.<br>1. 애플리케이션 에러가 하드웨어 문제로 발생할 가능성<br>2. 타사의 megaraid 를 제거하고 레드햇 탑재 드라이버 운용<br>   - 07.810.09.00-rh1<br>3. smartd 설정<br>   - https://access.redhat.com/solutions/1201923<br>4. 메인보드 교체 이후에 MCE 에러 발생 모니터<br>5. 해당 시간에 어떤 작업이 있는지 확인 필요<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2016-06-07T00:43:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HHP3cIAH"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2016-06-06T23:34:01Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2016-06-06T23:34:01Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>올려주신 파일을 다운로드하고 있습니다.<br>분석 결과 조속히 안내해드리도록 하겠습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2016-06-06T23:34:01Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HGbCdIAL"><br>======================<br><b>생성계정 : Kim, Seung-Pil</b><br><b>생성날짜 : 2016-06-06T14:16:11Z</b><br><b>마지막 답변자 : Kim, Seung-Pil</b><br><b>마지막 수정 일자 : 2016-06-06T14:16:11Z</b><br><br>Hello.<br>SOSREPORT FILE uploading has completed in dropbox.redhat.com<br>Here is information about sosreport.<br><br><br>1) 6/4/2016 - at the time of issue<br>- pmsalp01_var_log.tar.gz<br>- sosreport-pmsalp01-20160604152151.tar.xz<br><br>2) 6/5/2016 - sosreport before replace hardware( Mainboard )<br>- sosreport-pmsalp01.20160605-20160605090959.tar.bz2<br>- sosreport-pmsalp01.20160605-20160605090959.tar.xz<br><br>2) 6/5/2016 - sosreport after replace hardware( Mainboard )<br>- sosreport-pmsalp01.20160605-20160605103420.tar.bz2<br>- sosreport-pmsalp01.20160605-20160605103420.tar.xz<br>- sosreport-pmsalp01.20160605-20160605103420.tar.xz.md5<br><br>thank you in advance.<br><br><publishedDate>2016-06-06T14:16:11Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HGUX7IAP"><br>======================<br><b>생성계정 : Babar, Yogesh</b><br><b>생성날짜 : 2016-06-06T01:44:31Z</b><br><b>마지막 답변자 : Babar, Yogesh</b><br><b>마지막 수정 일자 : 2016-06-06T01:44:31Z</b><br><br>Hello, <br><br><br>This is Yogesh from kernel team. Since there is no update from last 24 hours we are removing this case from 24 X 7 support. It means you will get severity - 2 support during your timezone. <br>Feel free to revert back in case of any difficulty or concern. <br><br><br>Regards,<br>Yogesh Babar<br>Red Hat Global Support<br><br><publishedDate>2016-06-06T01:44:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HGUMnIAP"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2016-06-06T01:15:32Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2016-06-06T01:15:32Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>올리셨다는 sosreport와 var_log 파일을 ftp 서버에서 찾을 수가 없었습니다.<br>다시 올려주시면 분석을 시작하도록 하겠습니다.<br> <br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2016-06-06T01:15:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HGTqpIAH"><br>======================<br><b>생성계정 : Brown, Matt</b><br><b>생성날짜 : 2016-06-05T22:49:54Z</b><br><b>마지막 답변자 : Brown, Matt</b><br><b>마지막 수정 일자 : 2016-06-05T22:49:53Z</b><br><br>Hello,<br><br>This case will soon be transferred to another engineer as part of the ongoing 24x7 support on this case.  Below is the handover note:<br><br>*** Handover Note *** <br><br>Customer's OOH contact details: <br>Problem specification (object/defect): OS hang<br>Current status: Previous engineer requested problem description, business impact, and contact information in English for easier troubleshooting<br>Next steps: Assist further with issues as applicable<br><br>***<br><br><publishedDate>2016-06-05T22:49:53Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HGSyNIAX"><br>======================<br><b>생성계정 : Brown, Matt</b><br><b>생성날짜 : 2016-06-05T14:10:08Z</b><br><b>마지막 답변자 : Brown, Matt</b><br><b>마지막 수정 일자 : 2016-06-05T14:10:08Z</b><br><br>Hello,<br><br>My name is Matthew Brown, and I am the North American engineer who is watching your case.<br><br>I see from the case notes that Vishal requested a problem description, business impact, and contact information for this case in English.  If possible, please see if this information can be provided, and Red Hat can then assist further.<br><br>Regards,<br><br>Matthew Brown<br>Red Hat Global Support Services<br>Raleigh, North Carolina<br>Hours: 10:00 AM-7:00 PM EDT (UTC-4)<br><br><publishedDate>2016-06-05T14:10:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HGSOnIAP"><br>======================<br><b>생성계정 : Agrawal, Vishal</b><br><b>생성날짜 : 2016-06-05T06:37:24Z</b><br><b>마지막 답변자 : Agrawal, Vishal</b><br><b>마지막 수정 일자 : 2016-06-05T06:37:24Z</b><br><br>Dear Customer,<br><br>My name is Vishal Agrawal and I am working on this case. <br><br>I see that you have Premium subscriptions and have submitted a Severity-1 case.  It's outside of your local business hours at this moment, so your case will be supported in English.<br><br>If you would  like to continue the support, can you please let us know the following details in English:<br> <br>a) Problem description.<br><br><br>b) Business impact of the issue.<br><br><br>c) Contact point for this particular case whom we can reach 24x7, if needed.<br><br>Awaiting for your reply,<br><br>Best Regards,<br>Vishal Agrawal.<br>GSS RedHat<br><br><publishedDate>2016-06-05T06:37:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HGS7wIAH"><br>======================<br><b>생성계정 : 이, 주호</b><br><b>생성날짜 : 2016-06-05T02:49:00Z</b><br><b>마지막 답변자 : 이, 주호</b><br><b>마지막 수정 일자 : 2016-06-05T02:49:00Z</b><br><br>참고로 2016년 06년 -05일 오전 장애 발생시에는 특별히 별도의 테스트나 작업을 하지 않았습니다.<br><br><publishedDate>2016-06-05T02:49:00Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HGS7mIAH"><br>======================<br><b>생성계정 : 이, 주호</b><br><b>생성날짜 : 2016-06-05T02:47:26Z</b><br><b>마지막 답변자 : 이, 주호</b><br><b>마지막 수정 일자 : 2016-06-05T02:47:26Z</b><br><br>pmsalp01 장비가 2016년 06월05일 06:20~07:30 문제가 다시 발생하여 <br>동일한 스펙의 장비로 하드디스크와 pci  카드를 이동해 두었습니다.<br><br>장애발생 일 sosreport 와 장비 이전작업  전,후  sosreport 를 첨부합니다.<br><br><br>해당 장비의 sosreport 를 다음 과 같이 ftp 에 올려두었습니다.<br><br>pmsalp01 2016년 06월04일 문제 발생시 sosreport<br>-sosreport-pmsalp01-20160604152151.tar.gz<br>-pmsalp01_var_log.tar.gz<br><br>pmsalp01 2016년 06월05일 오전 장비 교체전 sosreport<br><br>-sosreport-pmsalp01-20160605-20160605090959.tar.bz2<br><br>pmsalp01 2016년 06월05일 오전 장비 교체후 sosreport<br><br>-sosreport-pmsalp01-20160605-20160605103420.tar.bz2<br><br><publishedDate>2016-06-05T02:47:26Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HGRTzIAP"><br>======================<br><b>생성계정 : Kirby, Taylor</b><br><b>생성날짜 : 2016-06-04T16:19:05Z</b><br><b>마지막 답변자 : Kirby, Taylor</b><br><b>마지막 수정 일자 : 2016-06-04T16:19:05Z</b><br><br>Dear Customer,<br><br><br>My name is Taylor Kirby.<br><br>Thank you for contacting Red Hat Global Support Services.<br><br>Your case will be responded by our support representative in our next business hours depending upon your contract type and severity.<br> <br>Please refer the following links for our service level agreement.<br><br>＜ Service Level Agreement＞<br>     https://access.redhat.com/ja/support/offerings/production/sla<br><br>＜ Red Hat Severity Definition ＞<br>     https://access.redhat.com/support/policy/severity<br><br>Kind Regards,<br><br>Taylor Kirby<br><br>Red Hat Global Support Services<br><br><publishedDate>2016-06-04T16:19:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>. NMI 시그널로 덤프 생성불가<br> /var/log/messages 로그에 6/4 00시 이후 로그에 SAP 관련 Deadlock 메세지가 다수 발생하여 커널 모듈에 영향이 발생한 것으로 추정되는데 HANG 원인과 모니터링 방안을 알고 싶습니다.</issue><environment>. Redhat 7.2 OS HANG</environment><cep>false</cep></case>