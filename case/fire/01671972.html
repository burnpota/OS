======================<br><b>생성계정 : Seung-Pil Kim</b><br><b>생성날짜 : 2016-07-21T16:11:27Z</b><br><b>마지막 답변자 : Jake Jaewook Shin</b><br><b>마지막 수정 일자 : 2016-08-02T01:23:48Z</b><br><b>id : 500A000000UrB9ZIAV</b><br>======================<br><br><b><font size=15>
제목  : [삼성화재][보험ERP][가동계] can't manually configure the Ethernet port speed to 1 Gbps on 10 Gbps NIC.
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>1) Environments<br>Network Switch gbic ports : 1 Gbps  <br>System NIC gbic ports : 10 Gbps<br><br>2) Expectation : <br>Link up, 1 Gbps speed and full Duplex.<br><br>3) Results<br>[root@epswlp05:/var/log]#ifup p5p1<br>Cannot set new settings: Invalid argument<br>  not setting speed<br>  not setting duplex<br>======================<br><br>##############################################################################<br>#cat /proc/net/bonding/bond0<br>Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)<br><br>Bonding Mode: fault-tolerance (active-backup)<br>Primary Slave: None<br>Currently Active Slave: p4p1<br>MII Status: up<br>MII Polling Interval (ms): 100<br>Up Delay (ms): 0<br>Down Delay (ms): 0<br><br>Slave Interface: p4p1<br>MII Status: up<br>Speed: 1000 Mbps<br>Duplex: full<br>Link Failure Count: 0<br>Permanent HW addr: a0:36:9f:9c:eb:54<br>Slave queue ID: 0<br><br>Slave Interface: p5p1<br>MII Status: up<br>Speed: 1000 Mbps<br>Duplex: full<br>Link Failure Count: 0<br>Permanent HW addr: a0:36:9f:9c:f9:80<br>Slave queue ID: 0<br>[root@epswlp05:/var/log]#ifdown p5p1<br>[root@epswlp05:/var/log]#ifup p5p1<br>Cannot set new settings: Invalid argument<br>  not setting speed<br>  not setting duplex<br>[root@epswlp05:/var/log]#cat /etc/sysconfig/network-scripts/ifcfg-p5p1<br>BOOTPROTO=none<br>NAME=p5p1<br>DEVICE=p5p1<br>DEVICETYPE=Bond<br>NM_CONTROLLED=no<br>ONBOOT=yes<br>SLAVE=yes<br>MASTER=bond0<br>#ETHTOOL_OPTS=&quot; -G ${DEVICE} rx 4096 tx 4096; -s ${DEVICE} speed 1000 duplex full autoneg off&quot;<br>#ETHTOOL_OPTS=&quot; -s ${DEVICE} speed 1000 duplex full autoneg off&quot;<br>#ETHTOOL_OPTS=&quot; speed 1000 duplex full ; -G ${DEVICE} rx 4096 tx 4096&quot;<br>ETHTOOL_OPTS=&quot;speed 1000 duplex full&quot;<br>[root@epswlp05:/var/log]#cat /etc/sysconfig/network-scripts/ifcfg-bond0<br>BOOTPROTO=none<br>NAME=bond0<br>DEVICE=bond0<br>DEVICETYPE=Bond<br>NM_CONTROLLED=no<br>ONBOOT=yes<br>IPADDR=42.Y<br>NETMASK=255.255.255.0<br>GATEWAY=42.Y<br>BONDING_OPTS=&quot;mode=1 miimon=100&quot;<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>항상 10 Gbps 의 속도를 지원하는 NIC에 1 Gbps 속도를 설정으로 지정하여 설정할 수 없습니다.<br>ifup 명령을 사용하여 해당 NIC를 활성화하면,   &quot;not setting speed&quot;와같이 하기의 메세지가 발생합니다.<br><br>[root@epswlp05:/var/log]#ifdown p5p1<br>[root@epswlp05:/var/log]#ifup p5p1<br>Cannot set new settings: Invalid argument<br>  not setting speed<br>  not setting duplex<br><br>#cat /etc/sysconfig/network-scripts/ifcfg-p5p1<br>BOOTPROTO=none<br>NAME=p5p1<br>DEVICE=p5p1<br>DEVICETYPE=Bond<br>NM_CONTROLLED=no<br>ONBOOT=yes<br>SLAVE=yes<br>MASTER=bond0<br>ETHTOOL_OPTS=&quot;speed 1000 duplex full&quot;<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><folderNumber>74168</folderNumber><br><comment id="a0aA000000HXRVTIA5"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2016-08-02T01:23:45Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2016-08-02T01:23:45Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>해당 케이스에 대하여 close 연락주셔서 감사합니다!<br><br>케이스가 처리 완료되면 고객 설문조사 메일이 발송됩니다.<br>고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해,<br>소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-08-02T01:23:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HXQlDIAX"><br>======================<br><b>생성계정 : Kim, Seung-Pil</b><br><b>생성날짜 : 2016-08-02T00:00:12Z</b><br><b>마지막 답변자 : Kim, Seung-Pil</b><br><b>마지막 수정 일자 : 2016-08-02T00:00:12Z</b><br><br>안녕하세요.<br><br>본 기술문의는 종료하여 주시기 바랍니다.<br><br>지원에 감사 드립니다.<br><br>(Shin, Jae Wook에 회신)<br>&gt; 안녕하세요,<br>&gt; <br>&gt; Red Hat Global Support Service를 이용해주셔서 감사합니다.<br>&gt; <br>&gt; 연락 감사드립니다.<br>&gt; 해당 케이스는 이상으로 종료처리해도 될지 확인 부탁드립니다.<br>&gt; <br>&gt; 감사합니다.<br><br><publishedDate>2016-08-02T00:00:12Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HX9fUIAT"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2016-08-01T00:26:33Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2016-08-01T00:26:33Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>연락 감사드립니다.<br>해당 케이스는 이상으로 종료처리해도 될지 확인 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2016-08-01T00:26:33Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HWsCgIAL"><br>======================<br><b>생성계정 : Kim, Seung-Pil</b><br><b>생성날짜 : 2016-07-29T04:37:33Z</b><br><b>마지막 답변자 : Kim, Seung-Pil</b><br><b>마지막 수정 일자 : 2016-07-29T04:37:32Z</b><br><br>안녕하세요.<br>지원에 감사 드립니다.<br><br>직접 command를 수행하였을 때에도, 동일하게 아래의 메세지가 발생하였습니다.<br>Cannot set new settings: Invalid argument<br>  not setting speed<br>  not setting duplex<br><br><br>추가로, 현재 진행상태를 업데이트 드립니다.<br><br>1. 네트워크 스위치 Log 확인<br>   - 진행 중<br>   - 이전에, 네트워크 스위치 로그를 확인 요청한 전례가 있으나,<br>      해당 스위치 포트에서 link up / down이 반복되었다는 것 외 특별한 내용은 없다는 답변을 받은 이력이 있음.<br><br>2. negotiation 설정 테스트 진행 중<br>   - 인터페이스 설정파일에 아래 설정을 추가하여 테스트 중이며, link up과 speed가 1000 Mbps로 정상 설정되어 동작하고 있음을 확인 하였음.<br>   ETHTOOL_OPTS=&quot;speed 1000 duplex full advertise 0x020 &quot;<br><br>고맙습니다.<br><br><br>(Shin, Jae Wook에 회신)<br>&gt; 안녕하세요,<br>&gt; <br>&gt; Red Hat Global Support Service를 이용해주셔서 감사합니다.<br>&gt; <br>&gt; 직접 커멘드로 실행했을때는 어떤 메세지가 발생하는지 확인 바랍니다.<br>&gt; <br>&gt; # ethtool -s p5p1 speed 1000 duplex full<br>&gt; <br>&gt; 감사합니다.<br><br><publishedDate>2016-07-29T04:37:32Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HVEtsIAH"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2016-07-22T03:06:07Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2016-07-22T03:06:07Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>직접 커멘드로 실행했을때는 어떤 메세지가 발생하는지 확인 바랍니다.<br><br># ethtool -s p5p1 speed 1000 duplex full<br><br>감사합니다.<br><br><publishedDate>2016-07-22T03:06:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HVEtJIAX"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2016-07-22T03:04:06Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2016-07-22T03:04:06Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>앞으로 해당 케이스를 담당하게 된 신재욱이라고 합니다.<br><br>현재 이 케이스의 내용을 살펴보는 중이며, 관련하여 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-07-22T03:04:06Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>Network Switch gbic ports : 1 Gbps  <br>System NIC gbic ports : 10 Gbps<br><br>2) Expectation : <br>Link up, 1 Gbps speed and full Duplex.<br><br>3) Results<br>[root@epswlp05:/var/log]#ifup p5p1<br>Cannot set new settings: Invalid argument<br>  not setting speed<br>  not setting duplex<br>======================<br><br>##############################################################################<br>#cat /proc/net/bonding/bond0<br>Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)<br><br>Bonding Mode: fault-tolerance (active-backup)<br>Primary Slave: None<br>Currently Active Slave: p4p1<br>MII Status: up<br>MII Polling Interval (ms): 100<br>Up Delay (ms): 0<br>Down Delay (ms): 0<br><br>Slave Interface: p4p1<br>MII Status: up<br>Speed: 1000 Mbps<br>Duplex: full<br>Link Failure Count: 0<br>Permanent HW addr: a0:36:9f:9c:eb:54<br>Slave queue ID: 0<br><br>Slave Interface: p5p1<br>MII Status: up<br>Speed: 1000 Mbps<br>Duplex: full<br>Link Failure Count: 0<br>Permanent HW addr: a0:36:9f:9c:f9:80<br>Slave queue ID: 0<br>[root@epswlp05:/var/log]#ifdown p5p1<br>[root@epswlp05:/var/log]#ifup p5p1<br>Cannot set new settings: Invalid argument<br>  not setting speed<br>  not setting duplex<br>[root@epswlp05:/var/log]#cat /etc/sysconfig/network-scripts/ifcfg-p5p1<br>BOOTPROTO=none<br>NAME=p5p1<br>DEVICE=p5p1<br>DEVICETYPE=Bond<br>NM_CONTROLLED=no<br>ONBOOT=yes<br>SLAVE=yes<br>MASTER=bond0<br>#ETHTOOL_OPTS=&quot; -G ${DEVICE} rx 4096 tx 4096; -s ${DEVICE} speed 1000 duplex full autoneg off&quot;<br>#ETHTOOL_OPTS=&quot; -s ${DEVICE} speed 1000 duplex full autoneg off&quot;<br>#ETHTOOL_OPTS=&quot; speed 1000 duplex full ; -G ${DEVICE} rx 4096 tx 4096&quot;<br>ETHTOOL_OPTS=&quot;speed 1000 duplex full&quot;<br>[root@epswlp05:/var/log]#cat /etc/sysconfig/network-scripts/ifcfg-bond0<br>BOOTPROTO=none<br>NAME=bond0<br>DEVICE=bond0<br>DEVICETYPE=Bond<br>NM_CONTROLLED=no<br>ONBOOT=yes<br>IPADDR=42.Y<br>NETMASK=255.255.255.0<br>GATEWAY=42.Y<br>BONDING_OPTS=&quot;mode=1 miimon=100&quot;</issue><periodicityOfIssue>항상 10 Gbps 의 속도를 지원하는 NIC에 1 Gbps 속도를 설정으로 지정하여 설정할 수 없습니다.<br>ifup 명령을 사용하여 해당 NIC를 활성화하면,   &quot;not setting speed&quot;와같이 하기의 메세지가 발생합니다.<br><br>[root@epswlp05:/var/log]#ifdown p5p1<br>[root@epswlp05:/var/log]#ifup p5p1<br>Cannot set new settings: Invalid argument<br>  not setting speed<br>  not setting duplex<br><br>#cat /etc/sysconfig/network-scripts/ifcfg-p5p1<br>BOOTPROTO=none<br>NAME=p5p1<br>DEVICE=p5p1<br>DEVICETYPE=Bond<br>NM_CONTROLLED=no<br>ONBOOT=yes<br>SLAVE=yes<br>MASTER=bond0<br>ETHTOOL_OPTS=&quot;speed 1000 duplex full&quot;</periodicityOfIssue><cep>false</cep><folderName>ERP-NON_SAP</folderName></case>