======================<br><b>생성계정 : 주호 이</b><br><b>생성날짜 : 2016-04-22T09:05:57Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-05-13T10:04:57Z</b><br><b>id : 500A000000U3KcmIAF</b><br>======================<br><br><b><font size=15>
제목  : [삼성화재][레가시 DR] 시스템 리부팅 후 lvm 파일시스템 에러문제
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>첨부파일: sosreport 파일 과 dd 명령어를 이용하여 만든 메타데이터 파일을 같이 보내드립니다.<br><br> <br><br>1.이러한 현상이 일어나는 이유는 무엇인가요?<br><br>2.해당 볼륨의 데이터를 복구 할려면 어떻게 해야 하는지요?<br><br>3.해담 문제에 대한 버그나 패치가 존재하는지요?<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 4 (Low)</b><br><br><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-04-27T07:58:35Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-04-27T07:58:34Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>현재 LVM이 정상적으로 인식되었고 관련 로그가 기록되지 않은 원인으로<br>앞서 부팅 후 PV, VG, LV 조회 안된 원인을 확인하기 어려운 것으로 보입니다.<br><br>fsck 는 첫번째 superblock에 corrupt 이슈가 있을 경우 혹은 <br>첫번째 superblock를 찾을수 없을 경우 실패됩니다.<br><br>현재 파일시스템이 복구 가능한지를 확인해 보기 위하여 아래와 같은 정보 수집 <br>부탁드립니다.<br><br># file -s /dev/vg01/home_lv &gt; /tmp/home_lv_type.out<br># dumpe2fs /dev/vg01/home_lv &gt; /tmp/home_lv.out<br># e2image -r /dev/vg01/home_lv -| bzip2 &gt; /tmp/home_lv_metadata.e2i.bz2<br># tar cvf /tmp/home_lv.tar /tmp/home_lv_type.out /tmp/home_lv.out /tmp/home_lv_metadata.e2i.bz2<br><br>/dev/vg01/securepin_lv 에 대하여서도 동일하게 정보 수집 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-27T07:58:34Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Gy1TnIAJ"><br>======================<br><b>생성계정 : 이, 주호</b><br><b>생성날짜 : 2016-04-26T08:44:35Z</b><br><b>마지막 답변자 : 이, 주호</b><br><b>마지막 수정 일자 : 2016-04-26T08:44:35Z</b><br><br>처음 접수했던 내용에 기입하였으나 다시 아래에 기입해 드립니다.<br> . 리부팅 후 emergency 모드로 부팅됨<br> . /etc/fstab 에 LV 로 마운트 하는 부분을 주석처리 후 정상 부팅됨<br> . 부팅 후 PV, VG, LV 조회 안됨<br> . 아래와 같이 조치 수행하였으나 F/S 복구는 안됨<br>#pvcreate —uuid “/etc/lmv/backup/안으 파일을 참조하여 적음”  - - restorefile /etc/archive/안에 있는 최신파일을 기준으로 작업함”  /dev/sda8<br># vgcfgrestore vg00<br># lvs -a -o +devices<br># lvchange  -ay /dev/VG/해당볼륨<br>#pvscan —cache<br>#pvs  -&gt; 출력정상<br>#vgs  -&gt; 출력정상<br>#lvs   -&gt; 출력정상<br><br>/dev/mapper/ 에 해당 lvm 들이 정상적으로 보이지만 마운트를 할 수 없음<br>마운트 시  마운트 할 수 없다는 메세지 발생<br>파일시스템 체크 시 아래와 같은 메세지 발생<br><br>e2fsck: Invalid argument while trying to open /dev/VolGroup00/LogVol01<br>The superblock could not be read or does not describe a correct ext2<br>filesystem.  If the device is valid and it really contains an ext2<br>filesystem (and not swap or ufs or something else), then the superblock<br>is corrupt, and you might try running e2fsck with an alternate superblock:<br>    e2fsck -b 8193 &lt;device&gt;<br><br>. 조치 불가하여 _new 라는 파일시스템 2개를 새로 생성하여 DATA 백업본으로 복구하여 현재 사용중입니다. _new 로 끝나는 파일시스템 및 lv는 신규생성하여 현재 정상입니다.<br><br><publishedDate>2016-04-26T08:44:35Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Gy1EAIAZ"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-04-26T08:23:07Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-04-26T08:23:07Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>새로 올려주신 sosreport에 의하면 해당 서버에 존재하는 VG명은 vg01이며 파티션은 /dev/sda8이고 <br>LV 명들은 각각 home_lv, securepin_lv, home_new, securepin_new 인것으로 확인됩니다.<br>이중 home_lv는 2015년 12월 30일에 생성되었고 기타 LV들은 2016년 4월 16일에 생성된것으로<br>확인됩니다.<br><br>현재 home_new, securepin_new는 정상적으로 마운트되어 사용중인것으로 확인됩니다.<br><br>/dev/mapper/vg01-home_new /home ext4 rw,relatime,barrier=1,data=ordered 0 0<br>/dev/mapper/vg01-securepin_new /securepin ext4 rw,relatime,barrier=1,data=ordered 0 0<br><br>현재 로그에서 에러 메시지가 발견이 되지 않고 있는데,<br>- 서버 리부팅후 어떤 에러가 발생 되었는지요? 구체적인 에러 메시지를 알려주시기 바랍니다.<br>- 현재 해당 서버에서 지속적으로 말씀하신 에러가 발생 되는지요? 확인 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-26T08:23:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GxmlgIAB"><br>======================<br><b>생성계정 : 이, 주호</b><br><b>생성날짜 : 2016-04-25T08:28:32Z</b><br><b>마지막 답변자 : 이, 주호</b><br><b>마지막 수정 일자 : 2016-04-25T08:28:32Z</b><br><br>(Huang, Ying에 회신)<br>&gt; 안녕하세요,<br>&gt; <br>&gt; Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br>&gt; <br>&gt; 문의사항:<br>&gt; 1.이러한 현상이 일어나는 이유는 무엇인가요?<br>&gt; <br>&gt; 현재 올려주신 metadata에 의하면 이슈가 발생된 파티션은 /dev/sda8이고 VG명은 vg01이며<br>&gt; LV 명은 home_lv 인것으로 확인됩니다. 또한 이와 같은 정보가 생성된 시점은 2015년 12월 30일로<br>&gt; 확인됩니다.<br>&gt; <br>&gt; 다만 해당 서버에 VG명은 vg01인 파티션은 /dev/sdb1로 확인되며<br>&gt; 그 위에 생성된 LV는 crash_lv인것으로 보입니다. 이와 같은 작업이 진행된 시점은<br>&gt; 2016년 1월 7일 인것으로 확인됩니다.<br>&gt; <br>&gt; /dev/mapper/vg01-crash_lv /CRASH xfs rw,relatime,attr2,inode64,noquota 0 0<br>&gt; <br>&gt; 또한 해당 서버에 sda8 파티션이 없는것으로 확인됩니다.<br>&gt; 해당 서버에 있는 디바이스의 metadata 인지를 확인 부탁드립니다.<br>&gt; <br>&gt; 2.해당 볼륨의 데이터를 복구 할려면 어떻게 해야 하는지요?<br>&gt; <br>&gt; 만일 볼륨내의 데이터가 손상되지 않았다면 복구 가능할수 있습니다.<br>&gt; 다만 무조건 복구가 가능하다는 보장은 없으며 데이타 복구는 저희 지원범위가 아님을 미리 알려드립니다.<br>&gt; <br>&gt; 3.해담 문제에 대한 버그나 패치가 존재하는지요?<br>&gt; <br>&gt; 관련 버그는 확인이 되지 않고 있습니다.<br>&gt; <br>&gt; 감사합니다.<br><br><br>SOS 리포트 데이터가 잘 못 첨부되어 다시 보내드립니다.<br>번거롭게 해드려서 죄송합니다.<br><br><publishedDate>2016-04-25T08:28:32Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GxmDdIAJ"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-04-25T07:31:15Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-04-25T07:31:15Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>문의사항:<br>1.이러한 현상이 일어나는 이유는 무엇인가요?<br><br>현재 올려주신 metadata에 의하면 이슈가 발생된 파티션은 /dev/sda8이고 VG명은 vg01이며<br>LV 명은 home_lv 인것으로 확인됩니다. 또한 이와 같은 정보가 생성된 시점은 2015년 12월 30일로<br>확인됩니다.<br><br>다만 해당 서버에 VG명은 vg01인 파티션은 /dev/sdb1로 확인되며<br>그 위에 생성된 LV는 crash_lv인것으로 보입니다. 이와 같은 작업이 진행된 시점은<br>2016년 1월 7일 인것으로 확인됩니다.<br><br>/dev/mapper/vg01-crash_lv /CRASH xfs rw,relatime,attr2,inode64,noquota 0 0<br><br>또한 해당 서버에 sda8 파티션이 없는것으로 확인됩니다.<br>해당 서버에 있는 디바이스의 metadata 인지를 확인 부탁드립니다.<br><br>2.해당 볼륨의 데이터를 복구 할려면 어떻게 해야 하는지요?<br><br>만일 볼륨내의 데이터가 손상되지 않았다면 복구 가능할수 있습니다.<br>다만 무조건 복구가 가능하다는 보장은 없으며 데이타 복구는 저희 지원범위가 아님을 미리 알려드립니다.<br><br>3.해담 문제에 대한 버그나 패치가 존재하는지요?<br><br>관련 버그는 확인이 되지 않고 있습니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-25T07:31:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br> <br><br>1.이러한 현상이 일어나는 이유는 무엇인가요?<br><br>2.해당 볼륨의 데이터를 복구 할려면 어떻게 해야 하는지요?<br><br>3.해담 문제에 대한 버그나 패치가 존재하는지요?</issue><cep>false</cep></case>