======================<br><b>생성계정 : 주호 이</b><br><b>생성날짜 : 2016-05-18T08:02:52Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-06-04T10:09:36Z</b><br><b>id : 500A000000UCXaHIAX</b><br>======================<br><br><b><font size=15>
제목  : 서버 HANG
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>VMware 환경에 Rhel 7.2 OS 를 사용중으로 시스템 HANG 현상 발생하여 강제 리셋함.<br>해당 원인 확인 및 Bug 여부 확인.<br><br>의심 메세지.<br>. BUG: scheduling while atomic: swapper/1/0/0x10000100<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 3 (Normal)</b><br>======================<br><comment id="a0aA000000H8WMtIAN"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-19T01:41:50Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-19T01:41:50Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>해당 값은 커널 파라미터가 아니기 때문에 sysctl.conf에 적용이 안되시며, 부팅 이후에도 지속적으로 적용하기 위해서는 init 시점에 넣어줘야 합니다.<br><br>예를들어,<br># cat /etc/rc.d/rc.local<br><br>[...]<br><br>echo 1 &gt; /sys/module/rcupdate/parameters/rcu_cpu_stall_suppress<br>======================<br># chmod +x /etc/rc.d/rc.local<br><br><br>감사합니다.<br><br><publishedDate>2016-05-19T01:41:50Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H8K73IAF"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-18T08:27:47Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-19T00:43:15Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>보내주신 데이터를 확인한 결과, 최근 타사에서 유사한 사례와 유사한 것으로 보입니다. 당시 vmcore를 분석한 건은 RHEL7의 CPU 스케쥴링의 문제가 되는 부분이 발생하였고 이는 VMware의 vmci의 모듈이 스케쥴의 영향을 준 것으로 유추됩니다. 그리고 이러한 문제가 계속 발생하면서 에러를 처리하던 RCU의 버퍼(RHEL7에서 새로 소개된)가 full이되면서 시스템이 hang 이슈가 발생했던 것으로 분석되었습니다.<br><br>그리고 이것은 꼭 vmware의 vmci만의 이슈는 아니라 RHEL7에서 스케쥴 이슈를 처리과정에서 에러가 지속적으로 발생되는 환경에서 유사한 이슈가 발생할 수 있으므로, 아래와 같이 설정하시는 것을 우선 권장 드립니다.<br><br>echo 1 &gt; /sys/module/rcupdate/parameters/rcu_cpu_stall_suppress<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-18T08:27:47Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H8JzrIAF"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-18T08:16:27Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-18T08:16:26Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>첨부된 sosreport를 학인 후, 다시 답변 드리도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-18T08:16:26Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>해당 원인 확인 및 Bug 여부 확인.<br><br>의심 메세지.<br>. BUG: scheduling while atomic: swapper/1/0/0x10000100</issue><cep>false</cep></case>