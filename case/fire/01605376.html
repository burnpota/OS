======================<br><b>생성계정 : 주호 이</b><br><b>생성날짜 : 2016-03-23T02:16:20Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-04-09T10:06:07Z</b><br><b>id : 500A000000TtK1oIAF</b><br>======================<br><br><b><font size=15>
제목  : [삼성화재][보험ERP][가동계] kernel: sdd: unknown partition table AND device appeared twice with different sysfs paths  in messages
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>기존에는 sg_persist 명령어를 사용하여도 이러한 메시지가 발생하지 않았으나<br><br> <br><br>https://access.redhat.com/support/cases/#/case/01576098 권고 사항대로 아래와 같이 변경후 sg_persist 명령어 실행후 메세지 발생 함<br><br> <br><br> <br><br> # sed -i '/DM_UDEV_DISABLE_OTHER_RULES_FLAG/s|.*|SUBSYSTEM==&quot;block&quot;, KERNEL!=&quot;ram*&quot;, ACTION==&quot;add&quot;, ENV{DM_UDEV_DISABLE_OTHER_RULES_FLAG}==&quot;1&quot;, ENV{SYSTEMD_READY}=&quot;0&quot;|' /usr/lib/udev/rules.d/99-systemd.rules <br><br> <br><br> <br><br>#sg_persist -s --device=/dev/sdxx ​실행 했을 경우 아래와 같은 메세지가 발생함 <br><br> <br><br>Mar 22 10:26:54 pmsalp03 kernel: sdd: unknown partition table<br><br>Mar 22 10:26:54 pmsalp03 systemd: Device dev-disk-by\x2did-scsi\x2d360060e8007c643000030c6430000100a.device appeared twice with different sysfs paths /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-3/target2:0:1/2:0:1:0/block/sdn and /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-2/target2:0:0/2:0:0:0/block/sdd<br><br>Mar 22 10:26:54 pmsalp03 systemd: Device dev-disk-by\x2did-wwn\x2d0x60060e8007c643000030c6430000100a.device appeared twice with different sysfs paths /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-3/target2:0:1/2:0:1:0/block/sdn and /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-2/target2:0:0/2:0:0:0/block/sdd<br><br>Mar 22 10:26:55 pmsalp03 kernel: sde: unknown partition table<br><br> <br><br>#strace -fvtTo /tmp/strace_sg_persist.out -s 1024 sg_persist -s --device=/dev/sdh 실행한 결과를  <br><br> strace_sg_persist.out  파일에 저장하였습니다. <br><br> <br><br>첨부파일 :strace_sg_persist.out  <br><br>첨부파일 : sosreport-pmsalp03.20160322-20160322102650.tar.xz  <br><br>첨부파일 : sosreport-pmsalp03.20160322-var_log.tar.bz2<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 3 (Normal)</b><br><br><br><folderNumber>74173</folderNumber><br><comment id="a0aA000000GlGaGIAV"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-03-24T02:27:10Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-03-24T02:27:10Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>아래와 같은 메시지는 3월 2일 부터 출력된 것으로 확인됩니다.<br>이와 같은 메시지는 이중화를 구성한 환경에서 dev-disk-by\x2did-scsi\x2d360060e8007c643000030c6430000100a 디바이스에 대응하는 패스가 한개 이상 존재하는것이 발견되어 찍히게 되는 메시지 입니다.<br>따라서 이중화 구성을 하신 서버에서 이와 같은 메시지가 찍히는것은 정상적인 현상인것으로 확인됩니다.<br><br>Mar  2 10:12:14 pmsalp03 systemd: Device dev-disk-by\x2did-scsi\x2d360060e8007c643000030c6430000100a.device appeared twice with different sysfs paths /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-2/target2:0:0/2:0:0:0/block/sdd and /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-3/target2:0:1/2:0:1:0/block/sdn<br><br>현재 해당 메시지가 서버에 영향이 없는것으로 확인되어 지속적으로 로그를 로그 파일에 남기는것을 방지하기 위하여 버그질라에 리포팅되어 추후 버전에서 디버깅 메시지로 변경될 예정입니다.<br><br>만일 해당 메시지가 해당 서버에 영향이 있는것으로 확인되면 바로 알려주시면 대단히 감사드립니다.<br><br>관련 버그:<br>Bug 1296249 - Message appearing ' &lt;xyz&gt;.device appeared twice with different sysfs paths' (edit) <br>https://bugzilla.redhat.com/show_bug.cgi?id=1296249<br><br>감사합니다.<br><br><publishedDate>2016-03-24T02:27:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GktleIAB"><br>======================<br><b>생성계정 : 이, 주호</b><br><b>생성날짜 : 2016-03-23T08:34:30Z</b><br><b>마지막 답변자 : 이, 주호</b><br><b>마지막 수정 일자 : 2016-03-23T08:34:30Z</b><br><br>sos report 첨부합니다.<br><br><publishedDate>2016-03-23T08:34:30Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GksS7IAJ"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-03-23T05:49:00Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-03-23T05:49:00Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>/usr/lib/udev/rules.d/99-systemd.rules 파일을 아래와 같이 복귀한 후에도 동일한 이슈가 발생되는지 확인 부탁드립니다.<br>또한 이슈 발생시와 발생되지 않을 때 sg_persist 관련 명령어를 실행시 출력결과를 업데이트 부탁 드립니다.<br>이슈가 발생이 되지 않을 경우 앞서 안내해 드린 버그에 대하여 엔지니어팀으로 확인 요청이 필요할 것으로 보입니다.<br><br>=============================================================================================================================<br># cat /usr/lib/udev/rules.d/99-systemd.rules <br>#  This file is part of systemd.<br>#<br>#  systemd is free software; you can redistribute it and/or modify it<br>#  under the terms of the GNU Lesser General Public License as published by<br>#  the Free Software Foundation; either version 2.1 of the License, or<br>#  (at your option) any later version.<br><br>ACTION==&quot;remove&quot;, GOTO=&quot;systemd_end&quot;<br><br>SUBSYSTEM==&quot;tty&quot;, KERNEL==&quot;tty[a-zA-Z]*|hvc*|xvc*|hvsi*|ttysclp*|sclp_line*|3270/tty[0-9]*&quot;, TAG+=&quot;systemd&quot;<br><br>KERNEL==&quot;vport*&quot;, TAG+=&quot;systemd&quot;<br><br>SUBSYSTEM==&quot;block&quot;, KERNEL!=&quot;ram*&quot;, TAG+=&quot;systemd&quot;<br>SUBSYSTEM==&quot;block&quot;, KERNEL!=&quot;ram*&quot;, ENV{DM_UDEV_DISABLE_OTHER_RULES_FLAG}==&quot;1&quot;, ENV{SYSTEMD_READY}=&quot;0&quot;<br><br># Ignore encrypted devices with no identified superblock on it, since<br># we are probably still calling mke2fs or mkswap on it.<br>SUBSYSTEM==&quot;block&quot;, KERNEL!=&quot;ram*&quot;, ENV{DM_UUID}==&quot;CRYPT-*&quot;, ENV{ID_PART_TABLE_TYPE}==&quot;&quot;, ENV{ID_FS_USAGE}==&quot;&quot;, ENV{SYSTEMD_READY}=&quot;0&quot;<br><br># Ignore raid devices that are not yet assembled and started<br>SUBSYSTEM==&quot;block&quot;, ENV{DEVTYPE}==&quot;disk&quot;, KERNEL==&quot;md*&quot;, TEST!=&quot;md/array_state&quot;, ENV{SYSTEMD_READY}=&quot;0&quot;<br>SUBSYSTEM==&quot;block&quot;, ENV{DEVTYPE}==&quot;disk&quot;, KERNEL==&quot;md*&quot;, ATTR{md/array_state}==&quot;|clear|inactive&quot;, ENV{SYSTEMD_READY}=&quot;0&quot;<br><br># Ignore loop devices that don't have any file attached<br>SUBSYSTEM==&quot;block&quot;, KERNEL==&quot;loop[0-9]*&quot;, ENV{DEVTYPE}==&quot;disk&quot;, TEST!=&quot;loop/backing_file&quot;, ENV{SYSTEMD_READY}=&quot;0&quot;<br><br># Ignore nbd devices in the &quot;add&quot; event, with &quot;change&quot; the nbd is ready<br>ACTION==&quot;add&quot;, SUBSYSTEM==&quot;block&quot;, KERNEL==&quot;nbd*&quot;, ENV{SYSTEMD_READY}=&quot;0&quot;<br><br># We need a hardware independent way to identify network devices. We<br># use the /sys/subsystem path for this. Current vanilla kernels don't<br># actually support that hierarchy right now, however upcoming kernels<br># will. HAL and udev internally support /sys/subsystem already, hence<br># it should be safe to use this here, too. This is mostly just an<br># identification string for systemd, so whether the path actually is<br># accessible or not does not matter as long as it is unique and in the<br># filesystem namespace.<br>#<br># http://cgit.freedesktop.org/systemd/systemd/tree/src/libudev/libudev-enumerate.c#n922<br><br>SUBSYSTEM==&quot;net&quot;, KERNEL!=&quot;lo&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_ALIAS}+=&quot;/sys/subsystem/net/devices/$name&quot;<br>SUBSYSTEM==&quot;bluetooth&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_ALIAS}+=&quot;/sys/subsystem/bluetooth/devices/%k&quot;<br><br>SUBSYSTEM==&quot;bluetooth&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_WANTS}+=&quot;bluetooth.target&quot;<br>ENV{ID_SMARTCARD_READER}==&quot;?*&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_WANTS}+=&quot;smartcard.target&quot;<br>SUBSYSTEM==&quot;sound&quot;, KERNEL==&quot;card*&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_WANTS}+=&quot;sound.target&quot;<br><br>SUBSYSTEM==&quot;printer&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_WANTS}+=&quot;printer.target&quot;<br>SUBSYSTEM==&quot;usb&quot;, KERNEL==&quot;lp*&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_WANTS}+=&quot;printer.target&quot;<br>SUBSYSTEM==&quot;usb&quot;, ENV{DEVTYPE}==&quot;usb_device&quot;, ENV{ID_USB_INTERFACES}==&quot;*:0701??:*&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_WANTS}+=&quot;printer.target&quot;<br><br># Apply sysctl variables to network devices (and only to those) as they appear.<br><br>ACTION==&quot;add&quot;, SUBSYSTEM==&quot;net&quot;, KERNEL!=&quot;lo&quot;, RUN+=&quot;/usr/lib/systemd/systemd-sysctl --prefix=/net/ipv4/conf/$name --prefix=/net/ipv4/neigh/$name --prefix=/net/ipv6/conf/$name --prefix=/net/ipv6/neigh/$name&quot;<br><br># Pull in backlight save/restore for all backlight devices and<br># keyboard backlights<br><br>SUBSYSTEM==&quot;backlight&quot;, TAG+=&quot;systemd&quot;, IMPORT{builtin}=&quot;path_id&quot;, ENV{SYSTEMD_WANTS}+=&quot;systemd-backlight@backlight:$name.service&quot;<br>SUBSYSTEM==&quot;leds&quot;, KERNEL==&quot;*kbd_backlight&quot;, TAG+=&quot;systemd&quot;, IMPORT{builtin}=&quot;path_id&quot;, ENV{SYSTEMD_WANTS}+=&quot;systemd-backlight@leds:$name.service&quot;<br><br># Pull in rfkill save/restore for all rfkill devices<br><br>SUBSYSTEM==&quot;rfkill&quot;, TAG+=&quot;systemd&quot;, IMPORT{builtin}=&quot;path_id&quot;, ENV{SYSTEMD_ALIAS}+=&quot;/sys/subsystem/rfkill/devices/%k&quot;, ENV{SYSTEMD_WANTS}+=&quot;systemd-rfkill@$name.service&quot;<br><br># Asynchronously mount file systems implemented by these modules as<br># soon as they are loaded.<br><br>SUBSYSTEM==&quot;module&quot;, KERNEL==&quot;fuse&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_WANTS}+=&quot;sys-fs-fuse-connections.mount&quot;<br>SUBSYSTEM==&quot;module&quot;, KERNEL==&quot;configfs&quot;, TAG+=&quot;systemd&quot;, ENV{SYSTEMD_WANTS}+=&quot;sys-kernel-config.mount&quot;<br><br>LABEL=&quot;systemd_end&quot;<br>=============================================================================================================================<br><br>감사합니다.<br><br><publishedDate>2016-03-23T05:49:00Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br> <br><br>https://access.redhat.com/support/cases/#/case/01576098 권고 사항대로 아래와 같이 변경후 sg_persist 명령어 실행후 메세지 발생 함<br><br> <br><br> <br><br> # sed -i '/DM_UDEV_DISABLE_OTHER_RULES_FLAG/s|.*|SUBSYSTEM==&quot;block&quot;, KERNEL!=&quot;ram*&quot;, ACTION==&quot;add&quot;, ENV{DM_UDEV_DISABLE_OTHER_RULES_FLAG}==&quot;1&quot;, ENV{SYSTEMD_READY}=&quot;0&quot;|' /usr/lib/udev/rules.d/99-systemd.rules <br><br> <br><br> <br><br>#sg_persist -s --device=/dev/sdxx ​실행 했을 경우 아래와 같은 메세지가 발생함 <br><br> <br><br>Mar 22 10:26:54 pmsalp03 kernel: sdd: unknown partition table<br><br>Mar 22 10:26:54 pmsalp03 systemd: Device dev-disk-by\x2did-scsi\x2d360060e8007c643000030c6430000100a.device appeared twice with different sysfs paths /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-3/target2:0:1/2:0:1:0/block/sdn and /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-2/target2:0:0/2:0:0:0/block/sdd<br><br>Mar 22 10:26:54 pmsalp03 systemd: Device dev-disk-by\x2did-wwn\x2d0x60060e8007c643000030c6430000100a.device appeared twice with different sysfs paths /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-3/target2:0:1/2:0:1:0/block/sdn and /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.1/host2/rport-2:0-2/target2:0:0/2:0:0:0/block/sdd<br><br>Mar 22 10:26:55 pmsalp03 kernel: sde: unknown partition table<br><br> <br><br>#strace -fvtTo /tmp/strace_sg_persist.out -s 1024 sg_persist -s --device=/dev/sdh 실행한 결과를  <br><br> strace_sg_persist.out  파일에 저장하였습니다. <br><br> <br><br>첨부파일 :strace_sg_persist.out  <br><br>첨부파일 : sosreport-pmsalp03.20160322-20160322102650.tar.xz  <br><br>첨부파일 : sosreport-pmsalp03.20160322-var_log.tar.bz2</issue><cep>false</cep><folderName>ERP-ALL</folderName></case>