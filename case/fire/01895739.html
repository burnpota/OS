======================<br><b>생성계정 : support os</b><br><b>생성날짜 : 2017-07-22T14:34:17Z</b><br><b>마지막 답변자 : Jake Jaewook Shin</b><br><b>마지막 수정 일자 : 2017-08-02T08:36:41Z</b><br><b>id : 500A000000XWKLyIAP</b><br>======================<br><br><b><font size=15>
제목  : It fails to execute hostnamectl(시스템의 호스트 명을 변경을 위해 hostnamectl set-hostname   HOSTNAME  명령 실행시 에러 발생)
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>호스트 명을 변경을 위해 작업을 진행하면 아래와 같은 메세지가 발생합니다.<br><br>[root@epsalp24:~]#hostnamectl set-hostname --static --transient epsalp09<br>Could not set property: Activation of org.freedesktop.hostname1 timed out<br>[root@epsalp24:~]#cat /etc/redhat-release<br>Red Hat Enterprise Linux Server release 7.2 (Maipo)<br>[root@epsalp24:~]#journal -xe<br>-bash: journal: command not found<br>[root@epsalp24:~]#journalctl -xe<br>-- The error number returned by this process is 116.<br>Jul 21 13:17:14 epsalp24 systemd[1]: systemd-hostnamed.service: main process exi<br>Jul 21 13:17:14 epsalp24 systemd[1]: Failed to start Hostname Service.<br>-- Subject: Unit systemd-hostnamed.service has failed<br>-- Defined-By: systemd<br>-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel<br>--<br>-- Unit systemd-hostnamed.service has failed.<br>--<br>-- The result is failed.<br>Jul 21 13:17:14 epsalp24 systemd[1]: Unit systemd-hostnamed.service entered fail<br>Jul 21 13:17:14 epsalp24 systemd[1]: systemd-hostnamed.service failed.<br>Jul 21 13:17:39 epsalp24 dbus-daemon[3407]: dbus[3407]: [system] Failed to activ<br>Jul 21 13:17:39 epsalp24 dbus[3407]: [system] Failed to activate service 'org.fr<br>Jul 21 13:17:39 epsalp24 polkitd[72118]: Unregistered Authentication Agent for u<br>lines 1099-1121/1121 (END)<br>-- The error number returned by this process is 116.<br>Jul 21 13:17:14 epsalp24 systemd[1]: systemd-hostnamed.service: main process exited, co<br>Jul 21 13:17:14 epsalp24 systemd[1]: Failed to start Hostname Service.<br>-- Subject: Unit systemd-hostnamed.service has failed<br>-- Defined-By: systemd<br>-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel<br>--<br>-- Unit systemd-hostnamed.service has failed.<br>--<br>-- The result is failed.<br>Jul 21 13:17:14 epsalp24 systemd[1]: Unit systemd-hostnamed.service entered failed stat<br>Jul 21 13:17:14 epsalp24 systemd[1]: systemd-hostnamed.service failed.<br>Jul 21 13:17:39 epsalp24 dbus-daemon[3407]: dbus[3407]: [system] Failed to activate ser<br>Jul 21 13:17:39 epsalp24 dbus[3407]: [system] Failed to activate service 'org.freedeskt<br>Jul 21 13:17:39 epsalp24 polkitd[72118]: Unregistered Authentication Agent for unix-pro<br><br><br>이후  systemctl   restart systemd-hostnamed.service 를 해보아도 동일한 결과가 나옵니다.<br><br>/etc/hostname 에 새로운 호스트 명을 입력하여 시스템 리부팅 후에 호스트 명이 변경되었습니다.<br><br>이러한 이유가 발생하는 원인은 무엇입니까?<br>/etc/hostname 를 변경하는 방법외  hostnamectl 로 하게 되면 왜 에러가 발생하는지요?<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Configuration issue</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 4 (Low)</b><br><hostname>[삼성화재][ERP][epsalp24] hostnamectl set-hostname  변경 error 문의</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>systemd</name></tag></tags><br><comment id="a0aA000000K79k0IAB"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-08-02T08:36:39Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-08-02T08:36:39Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>빠르게 피드백 주셔서 감사드립니다!<br>말씀에 따라 일단 해당 케이스는 close 처리하도록 하겠습니다.<br><br>케이스가 처리 완료되면 고객 설문조사 메일이 발송됩니다.<br>고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해,<br>소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-02T08:36:39Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K79LgIAJ"><br>======================<br><b>생성계정 : os, support</b><br><b>생성날짜 : 2017-08-02T08:00:06Z</b><br><b>마지막 답변자 : os, support</b><br><b>마지막 수정 일자 : 2017-08-02T08:00:06Z</b><br><br>네 해당 대상이 되는 장비 몇대를 기준으로<br><br>systemctl  restart systemd-hostnamed<br>systemctl status systemd-hostnamed<br><br>이렇게 확인해 해보았습니다.<br><br>정상장비는 문제되었던 장비 모두 지금은 정상적으로 running 상태로 된 후 종료가 됩니다.<br>시간상 모든 장비를 다 할 수가 없어서 일단은 해당 케이스는 close 하고<br><br> 차후에 다시 테스트 시 문제가 있을경우 <br>알려주신 strace 와 디버그 모드를 로그를 활성화 하여 다시 케이스를 오픈하기로 했습니다.<br>적극적으로 확인해 주셔서 감사합니다.<br><br><publishedDate>2017-08-02T08:00:06Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K791mIAB"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-08-02T07:32:37Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-08-02T07:32:36Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>어제 요청드린 status 확인 결과는 어떠신가요?<br>연계 바랍니다.<br><br>그리고  hostnamectl 로 변경시 에러가 발생하는 상황의<br>strace 수집이 있어야 명확하게 확인이 가능할 것 같습니다.<br><br>현재 기존 보고된 사례가 없는 것으로 보면 고객 환경의 보안관련 퍼미션 변경 등에<br>의존한 이슈의 가능성도 있어 보입니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-02T07:32:36Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K6pt0IAB"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-08-01T07:34:21Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-08-01T07:34:20Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>다음 커멘드 결과를 첨부해주시기 바랍니다.<br><br># strace -ftttT -s 1024 -o /tmp/systemd-hostnamed_`hostname`_strace systemctl restart systemd-hostnamed<br><br>감사합니다.<br><br><publishedDate>2017-08-01T07:34:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K6pXGIAZ"><br>======================<br><b>생성계정 : os, support</b><br><b>생성날짜 : 2017-08-01T07:04:37Z</b><br><b>마지막 답변자 : os, support</b><br><b>마지막 수정 일자 : 2017-08-01T07:04:36Z</b><br><br>디버그 로그를 활성화 시키기가 어려워서 동일하게 설치한 장비에서 에러가 나는서버와 나지 않는 서버의 sosreport 를 올려보내 드립니다.<br><br><publishedDate>2017-08-01T07:04:36Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K6p5lIAB"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-08-01T06:17:24Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-08-01T06:17:24Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>일단 업로드를 기다리도록 하겠습니다.<br>다만, 디버깅 로그도 없고 패키지 업데이트도 되지 않았다면<br>기존 유사 사례가 없어 추가 안내가 어려울 수 있습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-01T06:17:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K6mSpIAJ"><br>======================<br><b>생성계정 : os, support</b><br><b>생성날짜 : 2017-08-01T00:44:01Z</b><br><b>마지막 답변자 : os, support</b><br><b>마지막 수정 일자 : 2017-08-01T00:44:01Z</b><br><br>네 다시 확인 후에  올려드리겠습니다.<br><br><publishedDate>2017-08-01T00:44:01Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K6m66IAB"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-31T23:47:46Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-31T23:47:46Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>음, 올려주신 두 파일 모두 압축이 풀리지 않습니다.<br>재확인 후, 업로드바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-31T23:47:46Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K6h2WIAR"><br>======================<br><b>생성계정 : os, support</b><br><b>생성날짜 : 2017-07-31T16:13:28Z</b><br><b>마지막 답변자 : os, support</b><br><b>마지막 수정 일자 : 2017-07-31T16:13:28Z</b><br><br>아닙니다.  운영중이 시스템이기 때문에 디버깅 모드를 활성하기에 어려움이 있습니다.<br><br>비슷한시기에 동일한 설정을 하여 설치된 장비 중 정상적으로 hostname 이 변경되는 시스템과  문제가 발생하는 시스템의 sosreport 를 보내드립니다.<br><br><publishedDate>2017-07-31T16:13:28Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K6bGhIAJ"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-31T09:26:58Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-31T09:26:58Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>추가 디버깅 로그를 활성화하신 sosreport 인가요?<br>부연 설명 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-31T09:26:58Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JwtXSIAZ"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-25T00:41:33Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-25T00:41:33Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>내부 엔지니어링팀에도 협력을 요청하였으나 기존 보고된 사례가 없어<br>현재 있는 데이터만으로는 안내를 드리기 어려울 것 같습니다.<br><br>따라서, 추가적인 디버깅을 진행하기 위해 다음 절차를 안내드립니다.<br><br>1) 현재 사용하시는 systemd 패키지의 버젼이 낮습니다, 이를 최신으로 업데이트 후 이슈가 재현되는지 확인 바랍니다.<br><br>현재) systemd-219-19.el7_2.20.x86_64 <br>최신) systemd-219-30.el7_3.9.x86_64<br><br>2) 추가 분석을 위해 디버깅 로그를 활성화시켜 더 많은 로그를 수집하실 필요가 있어 보입니다.<br><br>How can I enable systemd debug logging while the system is online?<br>- https://access.redhat.com/solutions/2788121<br><br>How to enable additional debugging output for troubleshooting early boot issues in Systemd <br>- https://access.redhat.com/solutions/2774351<br><br>다만, systemd 에 버그가 있다고 해도 결국 버그 확인 및 픽스를 진행하기 위해서는 최신 systemd 로의 업데이트가 전제되어야 하는 점,<br>현재 대안으로 수동으로 hostname 을 변경시고 hostnamectl 로 변경이 불가하여도 서비스 운영에는 지장이 없는 점을 고려하면<br>정기점검 시간에 맞쳐 1) 안의 systemd 패키지 업데이트 및 이슈 개선 여부 확인이<br>가장 효율적인 방법으로 보입니다. 이 점 고려바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-25T00:41:33Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JweXrIAJ"><br>======================<br><b>생성계정 : os, support</b><br><b>생성날짜 : 2017-07-24T02:05:40Z</b><br><b>마지막 답변자 : os, support</b><br><b>마지막 수정 일자 : 2017-07-24T02:05:40Z</b><br><br>네 100% 재현되고 있습니다. 하지만 해당 시스템은 운영상태로 넘어간 다음이라 추가적인 작업을 할수가 없어서<br>/etc/hostname 으로 시스템 명을 수정하고 <br>sosreport 를 기준으로 원인 분석을 추적하고 싶습니다.<br>추가적인 정보 수집은 가능하지만 추가적인 테스트 일 경우 고객과 협의가 필요한 사항입니다.<br>sosreport 의 로그에는 해당 문제 발생시 로그가 남아 있습니다.<br><br><publishedDate>2017-07-24T02:05:40Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jwe8SIAR"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-24T00:56:52Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-24T01:09:35Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>연락처 확인 감사합니다.<br><br>올려주신 메세지와 관련해서 내부적으로 조사해보았으나<br>기존에 보고된 사례가 확인되지 않습니다.<br><br>해당 이슈가 100% 재현되고 있는지요?<br><br>감사합니다.<br><br><publishedDate>2017-07-24T00:56:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jwe4HIAR"><br>======================<br><b>생성계정 : os, support</b><br><b>생성날짜 : 2017-07-24T00:45:07Z</b><br><b>마지막 답변자 : os, support</b><br><b>마지막 수정 일자 : 2017-07-24T00:45:07Z</b><br><br>* 고객 정보 (필수) - 실제 레드햇 서브스크립션을 소유하고 시스템에 사용 중인 엔드 유저<br>    - 성함(직급) :손향준 선임<br>    - 회사명(부서명) :금융시스템그룹(금융/서비스)/삼성SDS<br>    - 전화번호 :+82-2-509-0318 <br>    - 메일주소 :h2014.son@samsung.com<br><br>* 파트너 정보 (옵션) - 실제 고객의 시스템을 유지보수하는 업체<br>    - 성함(직급) :이승훈 수석<br>    - 회사명(부서명) :타임게이트<br>    - 전화번호 :010-5493-0769<br>    - 메일주소 :sh.lee@time-gate.com<br><br><publishedDate>2017-07-24T00:45:07Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JwdxUIAR"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-24T00:21:32Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-24T00:21:31Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>기술 지원에 앞서 케이스의 원활한 지원을 위해 다음 템플릿을 작성하여 주십시요.<br>=======================================================================================<br>--- Template for Platform ------<br><br>- 성함(직급)<br>- 회사명(부서명)<br>- 전화번호 &lt;--- 연락가능한 핸드폰 번호 등<br>- 메일주소<br>=======================================================================================<br>앞으로도 케이스를 올리실 때는 케이스 작성자 확인을 위해 케이스 디스크립션에 상기 정보를 남겨주시기 바랍니다.<br>이후 해당 케이스 진행에 필요할 경우 남겨주신 핸드폰 번호로 연락드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-24T00:21:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JwdxAIAR"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-24T00:20:09Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-24T00:20:09Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>저는 신재욱 차장이라고 하며 앞으로 해당 케이스를 담당하게 되었습니다.<br><br>현재 케이스 내용을 살펴보는 중이며, 관련하여 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-24T00:20:09Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>[root@epsalp24:~]#hostnamectl set-hostname --static --transient epsalp09<br>Could not set property: Activation of org.freedesktop.hostname1 timed out<br>[root@epsalp24:~]#cat /etc/redhat-release<br>Red Hat Enterprise Linux Server release 7.2 (Maipo)<br>[root@epsalp24:~]#journal -xe<br>-bash: journal: command not found<br>[root@epsalp24:~]#journalctl -xe<br>-- The error number returned by this process is 116.<br>Jul 21 13:17:14 epsalp24 systemd[1]: systemd-hostnamed.service: main process exi<br>Jul 21 13:17:14 epsalp24 systemd[1]: Failed to start Hostname Service.<br>-- Subject: Unit systemd-hostnamed.service has failed<br>-- Defined-By: systemd<br>-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel<br>--<br>-- Unit systemd-hostnamed.service has failed.<br>--<br>-- The result is failed.<br>Jul 21 13:17:14 epsalp24 systemd[1]: Unit systemd-hostnamed.service entered fail<br>Jul 21 13:17:14 epsalp24 systemd[1]: systemd-hostnamed.service failed.<br>Jul 21 13:17:39 epsalp24 dbus-daemon[3407]: dbus[3407]: [system] Failed to activ<br>Jul 21 13:17:39 epsalp24 dbus[3407]: [system] Failed to activate service 'org.fr<br>Jul 21 13:17:39 epsalp24 polkitd[72118]: Unregistered Authentication Agent for u<br>lines 1099-1121/1121 (END)<br>-- The error number returned by this process is 116.<br>Jul 21 13:17:14 epsalp24 systemd[1]: systemd-hostnamed.service: main process exited, co<br>Jul 21 13:17:14 epsalp24 systemd[1]: Failed to start Hostname Service.<br>-- Subject: Unit systemd-hostnamed.service has failed<br>-- Defined-By: systemd<br>-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel<br>--<br>-- Unit systemd-hostnamed.service has failed.<br>--<br>-- The result is failed.<br>Jul 21 13:17:14 epsalp24 systemd[1]: Unit systemd-hostnamed.service entered failed stat<br>Jul 21 13:17:14 epsalp24 systemd[1]: systemd-hostnamed.service failed.<br>Jul 21 13:17:39 epsalp24 dbus-daemon[3407]: dbus[3407]: [system] Failed to activate ser<br>Jul 21 13:17:39 epsalp24 dbus[3407]: [system] Failed to activate service 'org.freedeskt<br>Jul 21 13:17:39 epsalp24 polkitd[72118]: Unregistered Authentication Agent for unix-pro<br><br><br>이후  systemctl   restart systemd-hostnamed.service 를 해보아도 동일한 결과가 나옵니다.<br><br>/etc/hostname 에 새로운 호스트 명을 입력하여 시스템 리부팅 후에 호스트 명이 변경되었습니다.<br><br>이러한 이유가 발생하는 원인은 무엇입니까?<br>/etc/hostname 를 변경하는 방법외  hostnamectl 로 하게 되면 왜 에러가 발생하는지요?</issue><cep>false</cep></case>