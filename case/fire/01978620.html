======================<br><b>생성계정 : Chang-An Song</b><br><b>생성날짜 : 2017-11-22T07:14:06Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2017-12-16T11:03:11Z</b><br><b>id : 500A000000Z3iOSIAZ</b><br>======================<br><br><b><font size=15>
제목  : 문의 주신 shared memory 계산식에 대한 케이스 입니다.
</font></b><br><br>======================<br><b>사전문의<br></b><br>문의 주신 shared memory 계산식에 대한 케이스 입니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 1596892</b><br><b>심각도  : 4 (Low)</b><br>======================<br><comment id="a0aA000000L5vosIAB"><br>======================<br><b>생성계정 : Song, Chang-An</b><br><b>생성날짜 : 2017-12-01T02:23:11Z</b><br><b>마지막 답변자 : Song, Chang-An</b><br><b>마지막 수정 일자 : 2017-12-01T02:23:11Z</b><br><br>안녕하세요? Red Hat 송 창 안 입니다.<br><br>문의 주신 내용에 대해서 답변 하도록 하겠습니다.<br>이전에 3.10 커널에서의 낮은 기본 설정 값에 대한 이슈가 있었으며, 향후 upstream에 shmall 값과 shmmax의 값에 대해서 상향 시키는 패치가 적용이 되었습니다.<br><br>ipc/shm.c: increase the defaults for SHMALL, SHMMAX<br>https://marc.info/?l=linux-mm-commits&amp;m=139829271821001&amp;w=2<br><br>그리하여, 패치로 인해 기존의 SHMALL 과 SHMMAX의 값에 대해서는 아래와 같이 변화가 되었습니다.<br>./include/uapi/linux/shm.h<br>/*<br> * SHMMAX, SHMMNI and SHMALL are upper limits are defaults which can<br> * be modified by sysctl.<br> */<br><br>#define SHMMIN 1                         /* min shared seg size (bytes) */<br>#define SHMMNI 4096                      /* max num of segs system wide */<br>#define SHMMAX (ULONG_MAX - (1L&lt;&lt;24))    /* max shared seg size (bytes) */<br>#define SHMALL (ULONG_MAX - (1L&lt;&lt;24))    /* max shm system wide (pages) */<br>#define SHMSEG SHMMNI                    /* max shared segs per process */<br><br>그리하여 현재 64bit에 저의 32GB 시스템에서는 현재 아래와 같은 최대 값을 확인 할 수 있습니다.<br><br># ./shm<br> ULONG_MAX = 18446744073709551615 <br> SHMMAX = 18446744073692774399 <br> SHMALL = 18446744073692774399 <br><br>이 값은 현재 RHEL7.2에서의 기본값으로 셋팅 되어 있습니다.<br>한가지 추가적으로 알려 드릴 내용은  6GB 이하의 시스템에서 테스트 한 결과, 아래와 같은 기본 값이 포함되는 것으로 확인 하였습니다.<br>1GB/2GB/4GB/5GB 까지 동일한 결과를 확인 할 수 있습니다.<br><br>/usr/lib/sysctl.d/00-system.conf<br>...<br># Controls the maximum shared segment size, in bytes<br>kernel.shmmax = 4294967295<br><br># Controls the maximum number of shared memory segments, in pages<br>kernel.shmall = 268435456<br><br>아래에 해당하는 내용은 7.1이상의 시스템에서 SHMMAX와 SHMALL이 같은 이유에 대해서 설명한 문서 이며,<br>위에서 설명한 내용이 포함되어 있습니다.<br><br>Why is SHMMAX and SHMALL on Red Hat Enterprise Linux 7.1 still set to the same value <br>https://access.redhat.com/solutions/1437883<br><br>또한, share memory 구하는 공식에 대해서는 요구하는 어플리케이션의 요구 사항에 맞추어서 계산이 되어야 하며,<br>각 어플리케이션 벤더에 따라서 요구하는 기본값이 달라 질수 있음을 알려 드립니다.<br><br>감사합니다.<br>송 창 안 드림.<br><br><publishedDate>2017-12-01T02:23:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000L5OojIAF"><br>======================<br><b>생성계정 : Song, Chang-An</b><br><b>생성날짜 : 2017-11-29T07:04:04Z</b><br><b>마지막 답변자 : Song, Chang-An</b><br><b>마지막 수정 일자 : 2017-11-29T07:04:04Z</b><br><br>안녕하세요? Red Hat 송 창 안 입니다.<br><br>문의 주신 내용에 대해서 정리중에 있습니다.정리가 후 업데이트 하도록 하겠습니다.<br><br>감사합니다.<br>송 창 안 드림.<br><br><publishedDate>2017-11-29T07:04:04Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000L4LiVIAV"><br>======================<br><b>생성계정 : Song, Chang-An</b><br><b>생성날짜 : 2017-11-23T04:51:17Z</b><br><b>마지막 답변자 : Song, Chang-An</b><br><b>마지막 수정 일자 : 2017-11-23T04:51:17Z</b><br><br>안녕하세요? Red Hat Technical Account Manager 송 창 안 입니다.<br><br>문의 주신 내용에 대해서는 확인 후 업데이트 하도록 하겠습니다.<br>감사합니다.<br><br>송 창 안 드림.<br><br><publishedDate>2017-11-23T04:51:17Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>