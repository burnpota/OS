======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2017-08-14T06:04:24Z</b><br><b>마지막 답변자 : Jake Jaewook Shin</b><br><b>마지막 수정 일자 : 2017-08-28T02:03:05Z</b><br><b>id : 500A000000Y6HO8IAN</b><br>======================<br><br><b><font size=15>
제목  : 공유 파일시스템을 resource로 가지고 RHCS(Active-Standby) 구성되어있는 서버들에서 resource에 등록된 공유 파일시스템 umount 시에 해당 resource만 다시 mount 시도가 가능한지 문의드리려고 합니다.
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>공유 파일시스템을 resource로 가지고 RHCS(Active-Standby) 구성되어있는 서버들에서 resource에 등록된 공유 파일시스템 umount 시에 해당 resource만 다시 mount 시도가 가능한지 문의드리려고 합니다.<br><br>해당 서버의 파일시스템 및 cluster config 정보는 아래와 같고<br>예를 들면 /dbadmin이나 /LOG 이런 파일시스템이 cluster resource의 config에서 on-fail에 대한 값을 restart로 하였을 때 umount가 되면 해당 노드에서 cluster가 restart가 되어버렸는데요.<br><br>/dbadmin이나 /LOG와 같은 부분은 일단 서비스에 직접적인 영향이 없어서 일단 아무 동작을 하지 않는 ignore로 변경하였습니다.<br><br>문의드릴 점은 공유 파일시스템 umount 시에 해당 resource만 다시 mount 시도를 수행할 수 있도록 하는  값이 있는지 문의드리려고 합니다.<br><br>root@SLPIBADL01 / # df -Ph<br>Filesystem                            Size  Used Avail Use% Mounted on<br>/dev/sda2                              30G  6.1G   24G  21% /<br>devtmpfs                               63G     0   63G   0% /dev<br>tmpfs                                  63G   54M   63G   1% /dev/shm<br>tmpfs                                  63G   18M   63G   1% /run<br>tmpfs                                  63G     0   63G   0% /sys/fs/cgroup<br>/dev/sda3                              20G  1.9G   19G  10% /var<br>/dev/sda1                            1016M  257M  759M  26% /boot<br>/dev/mapper/vg9-CRASH                 171G   33M  171G   1% /CRASH<br>/dev/mapper/vg0-home                   10G  150M  9.9G   2% /home<br>/dev/mapper/vg0-sysadmin               20G  9.7G   11G  49% /sysadmin<br>tmpfs                                  13G     0   13G   0% /run/user/0<br>tmpfs                                  13G     0   13G   0% /run/user/32762<br>/dev/mapper/SRPIBAARCVG-oraarch_PIBA  100G  1.5G   99G   2% /oraarch_PIBA<br>/dev/mapper/SRPIBADATVG-oradata_PIBA  300G   23G  278G   8% /oradata_PIBA<br>/dev/mapper/SRPIBAORAVG-CTM           100G   27G   74G  27% /CTM<br>/dev/mapper/SRPIBAORAVG-orasys_PIBA    20G  6.3G   14G  32% /orasys_PIBA<br>/dev/mapper/SRPIBAORAVG-oracle         30G  6.9G   24G  23% /oracle<br>/dev/mapper/SRPIBAORAVG-dbadmin        50G   12G   39G  24% /dbadmin<br>/dev/mapper/SRPIBAORAVG-LOG            20G  132M   20G   1% /LOG<br>tmpfs                                  13G     0   13G   0% /run/user/1021<br><br> - 공유 volume resource<br>/dev/mapper/SRPIBAARCVG-oraarch_PIBA  100G  1.5G   99G   2% /oraarch_PIBA<br>/dev/mapper/SRPIBADATVG-oradata_PIBA  300G   23G  278G   8% /oradata_PIBA<br>/dev/mapper/SRPIBAORAVG-CTM           100G   27G   74G  27% /CTM<br>/dev/mapper/SRPIBAORAVG-orasys_PIBA    20G  6.3G   14G  32% /orasys_PIBA<br>/dev/mapper/SRPIBAORAVG-oracle         30G  6.9G   24G  23% /oracle<br>/dev/mapper/SRPIBAORAVG-dbadmin        50G   12G   39G  24% /dbadmin<br>/dev/mapper/SRPIBAORAVG-LOG            20G  132M   20G   1% /LOG<br><br> - pcs config<br>root@SLPIBADL01 / # pcs config<br>Cluster Name: IBA_DB_cluster<br>Corosync Nodes:<br> SLPIBADL01-HB SLPIBADL02-HB<br>Pacemaker Nodes:<br> SLPIBADL01-HB SLPIBADL02-HB<br><br>Resources:<br> Group: PIBA_group<br>  Resource: VG_SRPIBAARCVG (class=ocf provider=heartbeat type=LVM)<br>   Attributes: volgrpname=SRPIBAARCVG exclusive=true<br>   Operations: stop interval=0s timeout=30 (VG_SRPIBAARCVG-stop-interval-0s)<br>               monitor interval=10 timeout=30 (VG_SRPIBAARCVG-monitor-interval-10)<br>               start interval=0s start-delay=5s (VG_SRPIBAARCVG-start-interval-0s)<br>  Resource: VG_SRPIBADATVG (class=ocf provider=heartbeat type=LVM)<br>   Attributes: volgrpname=SRPIBADATVG exclusive=true<br>   Operations: stop interval=0s timeout=30 (VG_SRPIBADATVG-stop-interval-0s)<br>               monitor interval=10 timeout=30 (VG_SRPIBADATVG-monitor-interval-10)<br>               start interval=0s start-delay=5s (VG_SRPIBADATVG-start-interval-0s)<br>  Resource: VG_SRPIBAORAVG (class=ocf provider=heartbeat type=LVM)<br>   Attributes: volgrpname=SRPIBAORAVG exclusive=true<br>   Operations: stop interval=0s timeout=30 (VG_SRPIBAORAVG-stop-interval-0s)<br>               monitor interval=10 timeout=30 (VG_SRPIBAORAVG-monitor-interval-10)<br>               start interval=0s start-delay=5s (VG_SRPIBAORAVG-start-interval-0s)<br>  Resource: LV_oraarch_PIBA (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPIBAARCVG-oraarch_PIBA directory=/oraarch_PIBA fstype=xfs run_fsck=no<br>   Operations: stop interval=0s timeout=60 (LV_oraarch_PIBA-stop-interval-0s)<br>               start interval=0s start-delay=5s (LV_oraarch_PIBA-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=ignore OCF_CHECK_LEVEL=10 (LV_oraarch_PIBA-monitor-interval-5s)<br>  Resource: LV_oradata_PIBA (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPIBADATVG-oradata_PIBA directory=/oradata_PIBA fstype=xfs run_fsck=no<br>   Operations: stop interval=0s timeout=60 (LV_oradata_PIBA-stop-interval-0s)<br>               start interval=0s start-delay=5s (LV_oradata_PIBA-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=ignore OCF_CHECK_LEVEL=10 (LV_oradata_PIBA-monitor-interval-5s)<br>  Resource: LV_CTM (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPIBAORAVG-CTM directory=/CTM fstype=xfs run_fsck=no<br>   Operations: stop interval=0s timeout=60 (LV_CTM-stop-interval-0s)<br>               start interval=0s start-delay=5s (LV_CTM-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=ignore OCF_CHECK_LEVEL=10 (LV_CTM-monitor-interval-5s)<br>  Resource: LV_orasys_PIBA (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPIBAORAVG-orasys_PIBA directory=/orasys_PIBA fstype=xfs run_fsck=no<br>   Operations: stop interval=0s timeout=60 (LV_orasys_PIBA-stop-interval-0s)<br>               start interval=0s start-delay=5s (LV_orasys_PIBA-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=ignore OCF_CHECK_LEVEL=10 (LV_orasys_PIBA-monitor-interval-5s)<br>  Resource: LV_oracle (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPIBAORAVG-oracle directory=/oracle fstype=xfs run_fsck=no<br>   Operations: stop interval=0s timeout=60 (LV_oracle-stop-interval-0s)<br>               start interval=0s start-delay=5s (LV_oracle-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=ignore OCF_CHECK_LEVEL=10 (LV_oracle-monitor-interval-5s)<br>  Resource: LV_dbadmin (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPIBAORAVG-dbadmin directory=/dbadmin fstype=xfs run_fsck=no<br>   Operations: stop interval=0s timeout=60 (LV_dbadmin-stop-interval-0s)<br>               start interval=0s start-delay=5s (LV_dbadmin-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=ignore OCF_CHECK_LEVEL=10 (LV_dbadmin-monitor-interval-5s)<br>  Resource: LV_LOG (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPIBAORAVG-LOG directory=/LOG fstype=xfs run_fsck=no<br>   Operations: stop interval=0s timeout=60 (LV_LOG-stop-interval-0s)<br>               start interval=0s start-delay=5s (LV_LOG-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=ignore OCF_CHECK_LEVEL=10 (LV_LOG-monitor-interval-5s)<br>  Resource: PIBA_VIP (class=ocf provider=heartbeat type=IPaddr2)<br>   Attributes: ip=100.254.145.178<br>   Operations: stop interval=0s timeout=20s (PIBA_VIP-stop-interval-0s)<br>               start interval=0s start-delay=3s (PIBA_VIP-start-interval-0s)<br>               monitor interval=5s start-delay=5s timeout=10s (PIBA_VIP-monitor-interval-5s)<br>  Resource: PIBA_script (class=ocf provider=status type=MySAP)<br>   Attributes: monitor=/etc/corosync/oracle_monitor start=/etc/corosync/oracle_start stop=/etc/corosync/oracle_stop<br>   Operations: stop interval=0s timeout=60 (PIBA_script-stop-interval-0s)<br>               monitor interval=60 timeout=60 (PIBA_script-monitor-interval-60)<br>               start interval=0s start-delay=3s (PIBA_script-start-interval-0s)<br> Clone: ping-clone<br>  Resource: ping (class=ocf provider=pacemaker type=ping)<br>   Attributes: dampen=5s multiplier=10 attempts=7 host_list=100.254.145.1<br>   Operations: start interval=0s timeout=60 (ping-start-interval-0s)<br>               stop interval=0s timeout=20 (ping-stop-interval-0s)<br>               monitor interval=5s (ping-monitor-interval-5s)<br><br>Stonith Devices:<br> Resource: kdump_stonith (class=stonith type=fence_kdump)<br>  Attributes: pcmk_host_check=static-list pcmk_monitor_action=metadata pcmk_status_action=metadata pcmk_reboot_action=off pcmk_host_list=&quot;SLPIBADL01-HB SLPIBADL02-HB&quot; pcmk_off_timeout=120s timeout=120s<br>  Operations: monitor interval=60s (kdump_stonith-monitor-interval-60s)<br> Resource: ipmilan_stonith1 (class=stonith type=fence_ipmilan)<br>  Attributes: pcmk_host_list=SLPIBADL01-HB ipaddr=172.18.24.105 login=Redhat passwd=nl!con00 lanplus=on auth=password delay=15 action=reboot<br>  Operations: monitor interval=60s (ipmilan_stonith1-monitor-interval-60s)<br> Resource: ipmilan_stonith2 (class=stonith type=fence_ipmilan)<br>  Attributes: pcmk_host_list=SLPIBADL02-HB ipaddr=172.18.24.106 login=Redhat passwd=nl!con00 lanplus=on auth=password delay=15 action=reboot<br>  Operations: monitor interval=60s (ipmilan_stonith2-monitor-interval-60s)<br>Fencing Levels:<br><br> Node: SLPIBADL01-HB<br>  Level 1 - kdump_stonith<br>  Level 2 - ipmilan_stonith1<br> Node: SLPIBADL02-HB<br>  Level 1 - kdump_stonith<br>  Level 2 - ipmilan_stonith2<br>Location Constraints:<br>  Resource: LV_CTM<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-LV_CTM-SLPIBADL01-HB-10)<br>  Resource: LV_LOG<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-LV_LOG-SLPIBADL01-HB-10)<br>  Resource: LV_dbadmin<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-LV_dbadmin-SLPIBADL01-HB-10)<br>  Resource: LV_oraarch_PIBA<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-LV_oraarch_PIBA-SLPIBADL01-HB-10)<br>  Resource: LV_oracle<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-LV_oracle-SLPIBADL01-HB-10)<br>  Resource: LV_oradata_PIBA<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-LV_oradata_PIBA-SLPIBADL01-HB-10)<br>  Resource: LV_orasys_PIBA<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-LV_orasys_PIBA-SLPIBADL01-HB-10)<br>  Resource: PIBA_VIP<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-PIBA_VIP-SLPIBADL01-HB-10)<br>    Constraint: location-PIBA_VIP<br>      Rule: score=-INFINITY boolean-op=or  (id:location-PIBA_VIP-rule)<br>        Expression: pingd lt 1  (id:location-PIBA_VIP-rule-expr)<br>        Expression: not_defined pingd  (id:location-PIBA_VIP-rule-expr-1)<br>  Resource: PIBA_group<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-PIBA_group-SLPIBADL01-HB-10)<br>  Resource: PIBA_script<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-PIBA_script-SLPIBADL01-HB-10)<br>  Resource: VG_SRPIBAARCVG<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-VG_SRPIBAARCVG-SLPIBADL01-HB-10)<br>  Resource: VG_SRPIBADATVG<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-VG_SRPIBADATVG-SLPIBADL01-HB-10)<br>  Resource: VG_SRPIBAORAVG<br>    Enabled on: SLPIBADL01-HB (score:10) (id:location-VG_SRPIBAORAVG-SLPIBADL01-HB-10)<br>  Resource: ipmilan_stonith1<br>    Disabled on: SLPIBADL01-HB (score:-INFINITY) (id:const_ipmilan1)<br>  Resource: ipmilan_stonith2<br>    Disabled on: SLPIBADL02-HB (score:-INFINITY) (id:const_ipmilan2)<br>Ordering Constraints:<br>  start VG_SRPIBAARCVG then start VG_SRPIBADATVG (kind:Mandatory) (id:order-VG_SRPIBAARCVG-VG_SRPIBADATVG-mandatory)<br>  start VG_SRPIBADATVG then start VG_SRPIBAORAVG (kind:Mandatory) (id:order-VG_SRPIBADATVG-VG_SRPIBAORAVG-mandatory)<br>  start VG_SRPIBAORAVG then start LV_oraarch_PIBA (kind:Mandatory) (id:order-VG_SRPIBAORAVG-LV_oraarch_PIBA-mandatory)<br>  start LV_oraarch_PIBA then start LV_oradata_PIBA (kind:Mandatory) (id:order-LV_oraarch_PIBA-LV_oradata_PIBA-mandatory)<br>  start LV_oradata_PIBA then start LV_CTM (kind:Mandatory) (id:order-LV_oradata_PIBA-LV_CTM-mandatory)<br>  start LV_CTM then start LV_orasys_PIBA (kind:Mandatory) (id:order-LV_CTM-LV_orasys_PIBA-mandatory)<br>  start LV_orasys_PIBA then start LV_oracle (kind:Mandatory) (id:order-LV_orasys_PIBA-LV_oracle-mandatory)<br>  start LV_oracle then start LV_dbadmin (kind:Mandatory) (id:order-LV_oracle-LV_dbadmin-mandatory)<br>  start LV_dbadmin then start LV_LOG (kind:Mandatory) (id:order-LV_dbadmin-LV_LOG-mandatory)<br>  start LV_LOG then start PIBA_VIP (kind:Mandatory) (id:order-LV_LOG-PIBA_VIP-mandatory)<br>  start PIBA_VIP then start PIBA_script (kind:Mandatory) (id:order-PIBA_VIP-PIBA_script-mandatory)<br>Colocation Constraints:<br><br>Resources Defaults:<br> resource-stickiness: 100<br> migration-threshold: 3<br>Operations Defaults:<br> No defaults set<br><br>Cluster Properties:<br> cluster-infrastructure: corosync<br> cluster-name: IBA_DB_cluster<br> dc-version: 1.1.13-10.el7_2.4-44eb2dd<br> have-watchdog: false<br> last-lrm-refresh: 1500804995<br> no-quorum-policy: stop<br> stonith-enabled: true<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPIBADL01/SLPIBADL02 (RHCS)</hostname><br><br><br><comment id="a0aA000000KSdJQIA1"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-08-28T02:03:03Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-08-28T02:03:03Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>해당 케이스는 마지막 안내 커멘트와 같이<br>별도의 케이스를 통해 기술지원이 진행중이므로<br>close 처리하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-28T02:03:03Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K9ukUIAR"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-08-16T08:42:22Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-08-16T08:42:22Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>타임게이트 담당분께서 남겨주신 것 처럼<br>해당 케이스의 경우 Clusterha 관련 서브스크립션을 소유하신 계정에 의해<br>작성된 케이스 번호 01911949 에서 조사가 진행되고 있음을 연계드립니다.<br><br>관련 안내도 해당 케이스를 통해 진행하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-16T08:42:22Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K9uaFIAR"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-08-16T08:19:18Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-08-16T08:19:18Z</b><br><br>해당 케이스는 기술 문의 케이스 01911949 번에서  진행중입니다<br>감사합니다<br><br><publishedDate>2017-08-16T08:19:18Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K9sXeIAJ"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-08-16T04:18:56Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-08-16T04:18:55Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>연락 감사드립니다.<br>일단 해당 케이스는 대기 상태로 두도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-16T04:18:55Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K9s7wIAB"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2017-08-16T02:56:06Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2017-08-16T02:56:06Z</b><br><br>안녕하세요 <br><br>네 Cluster HA 환경 서브스크립션 관련해서<br>다시 한번 확인해보겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-16T02:56:06Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K9OUzIAN"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-08-14T08:11:44Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-08-14T08:11:43Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>저는 신재욱 차장이라고 하며 해당 케이스를 담당하게 되었습니다.<br><br>다만, 케이스 진행에 앞서 소유하고 계신 서브스크립션을 확인한 결과,<br>해당 계정상에 Cluster HA 운영환경 지원에 대한 서브스크립션이 확인되지 않았습니다.<br><br>Cluster HA 서브스크립션을 구매하신 별도의 계정이 있을 것으로 추측되므로<br>기술지원을 진행하기 위해 해당 계정을 통해 다시 케이스를 올려주시기 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-14T08:11:43Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>