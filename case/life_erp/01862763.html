======================<br><b>생성계정 : 삼성생명 타임게이트</b><br><b>생성날짜 : 2017-06-03T02:56:25Z</b><br><b>마지막 답변자 : Meiyan Zheng</b><br><b>마지막 수정 일자 : 2017-06-29T02:09:20Z</b><br><b>id : 500A000000XMZOsIAP</b><br>======================<br><br><b><font size=15>
제목  : nic offload 기능에 대해서 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하십니까 타임게이트 오선우입니다<br><br>케이스 01862007 관련하여 시스템 모니터링을 하다가 궁금한 사항이 있어 문의드립니다<br><br>nic offload 기능은 제가 알고 있기로 간단하게 설명드려서 CPU의 의존하지 않고 nic의 기능으로 처리를 해서  cpu의 로드를 줄이고 cpu를 거치는 과정을 줄여서 속도 향상을 보겠다는 의미 같은데요.?<br><br>1. offload의 기능이 offload를 사용하는 즉 cpu를 의존하지 않고 nic만으로 기능동작하는것이 기본값인가요? <br><br>2. 아니면 NIC 하드웨어 내부에 설정된 값에 따라서 값이 변경이 되는것인가요? <br>     다시 말하자면 하드웨어의 내부 셋팅을 그대로 따라 가는것인가요?<br><br>3. offload의 메커니즘에서 on과 off 했을경우 정확히 어떠한 차이가 있는지 확인 부탁드립니다<br><br>감사합니다<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>bonding</name></tag></tags><br><comment id="a0aA000000JngydIAB"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-29T02:09:20Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-29T02:09:20Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용 해 주셔서 감사합니다.<br><br>케이스를 직접 클로즈 해 주셔서 대단히 감사드립니다. 그럼 본 케이스를 처리완료하도록 <br>하겠습니다. <br><br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다. <br><br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발송됩니다. 고객님께서 남기 신 <br>의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다. <br><br>향후 기술  지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드<br>리겠습니다. <br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-29T02:09:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JngF1IAJ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-29T00:17:59Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-29T00:17:59Z</b><br><br>확인 감사합니다.<br><br><publishedDate>2017-06-29T00:17:59Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jmts7IAB"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-26T02:12:49Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-26T02:12:49Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다.<br><br>물리 인터페이스의 LRO 설정 값을 맞는 값으로 보시면 됩니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-26T02:12:49Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JmtHOIAZ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-26T00:23:06Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-26T00:23:06Z</b><br><br>그렇다면 물리 인터페이스 또는 bond 인터페이스 둘중에 어떤값이 맞는 lro값이라 보면 되는지요?<br><br><publishedDate>2017-06-26T00:23:06Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jm1gEIAR"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-21T01:34:56Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-21T01:34:56Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>bonding 장비에서 LRO 설정이 Slave 설정이 다르게 보이는 현상에 대해 네트워크 <br>전문팀에서 받은 답변 내용을 아래와 같이 공유 드립니다. <br><br>++++++++++<br>bonding doesn't care about LRO at all. The flag is basically meaningless<br>on anything else than physical interfaces. Bonding forces LRO to be<br>disabled but doesn't very much care about itself.<br><br>Bonding will only disable LRO if any of the slaves in the bond<br>don't support LRO.  If they all support LRO and have it enabled, the Bond will<br>report LRO as being available and enabled.<br>++++++++++<br><br>즉 만약 slave 장비에서 LRO 기능이 지원 되면 LRO 의 설정 값과 관계 없이 LRO enabled <br>상태로 보이는게 정상적인 현상입니다. <br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-21T01:34:56Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JlmcoIAB"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-20T08:18:27Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-20T08:18:27Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>답변이 좀 늦어져서 죄송합니다. 지금 문의 주신 내용에 대해 네트워크 전문팀쪽으로 <br>확인 요청을 드렸으며 현재 계속 확인 중에 있다고 합니다. <br><br>네트워크 전문팀에서 회신 받은면 바로 공유 드리도록 하겠습니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-20T08:18:27Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JlmNPIAZ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-20T07:55:41Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-20T07:55:40Z</b><br><br>업데이트 사항 문의 드립니다.<br><br><publishedDate>2017-06-20T07:55:40Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JlDPAIA3"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-16T07:20:31Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-16T07:20:31Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>bonding 장비 또한 Slave의 LRO offload 설정이 다르게 보이는 이슈에 대해서 <br>계속 확인 중에 있으며 업데이트 사항이 있으면 바로 공유 드리도록 하겠습니다. <br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-16T07:20:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JgmCAIAZ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-15T08:32:52Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-15T08:32:52Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>fixed 로 표시 된 것은 변경 하실수 없으나 기타 offload 설정은 말씀 하신대로 <br>변경 하시면 됩니다. <br><br>기존 값:<br>tcp-segmentation-offload: on<br>generic-segmentation-offload: on<br>generic-receive-offload: on<br>large-receive-offload: off [fixed]<br><br><br>NIC 장비의 ifcfg 설정 파일을 수정후 네트워크 재기동 하여 설정 하신 내용을 <br>적용 하시면 offload 비활성화 될수 있습니다. <br><br>tcp-segmentation-offload: off<br>generic-segmentation-offload: off<br>generic-receive-offload: off<br>large-receive-offload: off [fixed] <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-15T08:32:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jgk9BIAR"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-15T04:44:11Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-15T04:44:11Z</b><br><br>답변 감사합니다.<br>결과적으로 offload의 기능은 <br>lro, gro, gso, tso의 값 모두 off로 하는게 맞다는 말씀이시죠?<br><br>설정은 본딩인터페이스 외 본딩된 물리인터페이스에만 아래와 같이 설정하면 되는지 여쭤봅니다.<br><br>vi /etc/sysconfig/network-scripts/ifcfg-xxxx<br>(추가부분)<br>ETHTOOL_OPTS=&quot;-K ${DEVICE} gso off gro off tso off lro off; -G ${DEVICE} rx 4096 tx 4096&quot;<br><br><publishedDate>2017-06-15T04:44:11Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JgjMEIAZ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-15T03:00:15Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-15T03:00:15Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>offload 를 활성화 시킬시 아래와 같은 이슈가 있었던 것으로 확인 되었습니다. <br>고객 환경이랑 완전히 동일한 환경은 아니지만 offload를 활성화 시키시면 이런 <br>이슈들 발생 할 가능성이 있어 보여 안정성을 위하신다면 offload를 비활성화 <br>시키시는게 더 좋을 것 같습니다. <br><br>NICs with RX acceleration (GRO/LRO/TPA/etc) may suffer from bad TCP performance<br>- https://access.redhat.com/solutions/20278<br><br>RHSA-2017:0086 Important: kernel security, bug fix, and enhancement update<br>- https://access.redhat.com/articles/2857831<br><br>~~~<br>Previously, the performance of Internet Protocol over InfiniBand (IPoIB) was suboptimal due to a conflict of IPoIB with Generic Receive Offload (GRO). This update moves the data cached by the IPoIB driver from a control block into the IPoIB hard header, thus avoiding the GRO problem and the corruption of IPoIB address information. As a result, the performance of IPoIB has been improved. BZ#1390668<br>~~~<br>When a change of some ethtool features, such as Transmission Control Protocol Segmentation Offload/Generic Segmentation Offload (TSO/GSO), was followed by unloading the i40e driver, a kernel crash sometimes occurred on systems with more than 127 online CPUs. This was happening because all interrupt vectors on i40e are allocated to transmitter/receiver queues and Flow Director SideBand (FD_SB) is kept disabled. Changing the ethtool features enables FD_SB without any vectors available. This update adds a check to verify whether the MSI-X vector is available after FD_SB has been enabled. As a result, the kernel no longer crashes under the described circumstances. BZ#1394708<br>~~~<br><br><br>bonding 장비 또한 Slave의 LRO offload 설정이 다르게 보이는 이슈에 대해서 <br>좀더 확인 하고 코멘트 남겨 드리겠습니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-15T03:00:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JgUVuIAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-14T07:31:27Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-14T07:31:27Z</b><br><br>결과적으로 offload를 비활성화 시키는것이 <br>안정성에  대해 더 좋다는 근거에 대해서 말씀 부탁드립니다.<br>그리고  lro관련은 지금까지 가용성테스트로 시스템 리부팅을 많이 해왔으며 <br>다른 서버에서도 똑같이 설정이 되어 있습니다.<br>확인 부탁드립니다. 감사합니다.<br><br><publishedDate>2017-06-14T07:31:27Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JgUAnIAN"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-14T06:58:13Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-14T07:08:41Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>offload 기능을 활성화 여부에 대해 특히 권장 드리는 값이 없으나 저희 <br>TAM 혀경 부장님과 이야기를 나누어 본 결과로는 비활성화 시키시는것이 <br>시스템 안정성에 대해 더 좋다는 의견이 있었습니다. <br><br>물론 offload 기능 비활성화로 인하여 시스템 성능저하가 될수 있다는 점을 <br>참고 하시기 바랍니다. <br><br>Slave 장비에서는 large-receive-offload 비활성화 되어있으나 <br>본딘 장비에서는 활성화로 되어있는 것으로 보이는 현상은 버그로 추정 되며 <br>해당 버그는 현재 사용 하고 계신 서버에서 픽스 된 것으로 보입니다. <br><br>가능 하시면 본딩 자비를 up/down 시켜 보시거나 네트워크 서비스를 재기동으로 <br>LRO 값이 일치 되는지 확인 부탁드립니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-14T06:58:13Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JgSsTIAV"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-14T04:24:41Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-14T04:24:41Z</b><br><br>생명쪽 커널버전은 3.10.0-327.44.2.el7.x86_64입니다.<br>저희쪽 커널이 높은데 픽스가 된건가요? 안된건가요?<br>그리고 결과적으로 offload의 디폴트 값은 어떻게 되는건가요?<br>아래의 값이 디폴트인가요? 그리고 bond일때 어떠한 lro값이 어떤것이 맞는지요?<br><br>lro - OFF<br>gro - ON<br>tso - ON<br>gso - ON<br><br><publishedDate>2017-06-14T04:24:41Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JgSRgIAN"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-14T03:14:30Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-14T03:14:30Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>안정적인 측면에서는 오프로드값을 비활성화 하는것이 더 좋다는 내용은 없습니다. <br>오프로드 값 변경시 ethtool 명령어를 통해 변경 하실수 있으며 서버를 재부팅 <br>시키실 필요가 없습니다. <br><br>또한, bonding 장비에서 LRO offload 값이 틀리게 보이는 것은 버그였으며 <br>아래와 같은 커널 버전에서 픽스 되었습니다. <br><br>Red Hat Enterprise Linux 6: RHBA-2016:0150 - kernel-2.6.32-573.18.1.el6<br>Red Hat Enterprise Linux 7: RHSA-2016:0185 - kernel-3.10.0-327.10.1.el7<br><br>참고 자료:<br>large-receive-offload is suddenly turned on in Red Hat Enterprise <br>Virtualization after a kernel update<br>- https://access.redhat.com/solutions/2168261<br>======================<br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-14T03:14:30Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JgSPBIA3"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-14T03:05:14Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-14T03:05:14Z</b><br><br>안녕하세요 송석중님,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>문의 주신 내용에 대해 좀더 확인 후 안내 해 드리도록 하겠습니다. <br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-14T03:05:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jg9PJIAZ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-13T02:23:33Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-13T02:23:33Z</b><br><br>아래 말씀 주신 offload 관련 버그리스트를 토대로  offload 기능을 활성화 여부에 대해서 문의 드립니다.<br>(이전 커넥션 리셋 관련과는 별개로 문의 드립니다.)<br>성능적인 측면으로 offload기능을 디폴트 값으로 사용하여 왔으나 안정적인 측면에서는 오프로드값을 <br>비활성화 하는것이 더 좋은지 확인 부탁드립니다. 또한 오프로드 값 변경시 서비스에 영향 없이 변경되는지<br>리부팅을 해야하는지 확인 부탁드립니다.<br><br><br>아울러 물리포트 설정은 lro가 off인데 bond설정에서는 on인 이유가 무엇인지 궁금합니다.<br><br><br>Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)<br><br>Bonding Mode: fault-tolerance (active-backup)<br>Primary Slave: None<br>Currently Active Slave: ens2f0<br>MII Status: up<br>MII Polling Interval (ms): 100<br>Up Delay (ms): 0<br>Down Delay (ms): 0<br><br>Slave Interface: ens2f0<br>MII Status: up<br>Speed: 10000 Mbps<br>Duplex: full<br>Link Failure Count: 0<br>Permanent HW addr: 00:11:0a:6b:27:bc<br>Slave queue ID: 0<br><br>Slave Interface: ens5f1<br>MII Status: up<br>Speed: 10000 Mbps<br>Duplex: full<br>Link Failure Count: 0<br>Permanent HW addr: 00:11:0a:6b:25:a1<br>Slave queue ID: 0<br><br># cat ethtool_-k_bond0 | grep offload<br>tcp-segmentation-offload: on<br>udp-fragmentation-offload: off [fixed]<br>generic-segmentation-offload: on<br>generic-receive-offload: on<br>large-receive-offload: on<br>rx-vlan-offload: on<br>tx-vlan-offload: on<br><br># cat ethtool_-k_ens2f0 | grep offload<br>tcp-segmentation-offload: on<br>udp-fragmentation-offload: off [fixed]<br>generic-segmentation-offload: on<br>generic-receive-offload: on<br>large-receive-offload: off<br>rx-vlan-offload: on<br>tx-vlan-offload: on<br><br># cat ethtool_-k_ens5f1 | grep offload<br>tcp-segmentation-offload: on<br>udp-fragmentation-offload: off [fixed]<br>generic-segmentation-offload: on<br>generic-receive-offload: on<br>large-receive-offload: off<br>rx-vlan-offload: on<br>tx-vlan-offload: on<br><br>- [netdrv] i40e: Be much more verbose about what we can and cannot offload (Stefan Assmann) [1433273 1383521]<br>- [netdrv] netvsc: fix incorrect receive checksum offloading (Vitaly Kuznetsov) [1391617 1388702]<br>- [netdrv] sfc: Define macro with EF10 offload feature (Jarod Wilson) [1368201]<br>- [netdrv] cxgb4/cxgb4vf: Fixes regression in perf when tx vlan offload is disabled (Sai Vemuri) [1319437]<br>- [net] udp_offload: put sk before returning (Florian Westphal) [1366515]<br>- [netdrv] cxgb4: large receive offload support (Sai Vemuri) [1211351]<br>- [infiniband] ib/core: Add IP to GID netlink offload (Honggang Li) [1309411 1342604]<br>- [net] udp_offload: Set encapsulation before inner completes (Jiri Benc) [1297504]<br>- [net] udp: Remove udp_offloads (Jiri Benc) [1297504]<br>- [net] tunnels: Remove encapsulation offloads on decap (Jiri Benc) [1297504]<br>- [netdrv] mlx4_en: Add support for inner IPv6 checksum offloads and TSO (kamal heib) [1192585]<br>- [netdrv] i40e: enable geneve offloading (Stefan Assmann) [1350780]<br>- [include] mlx5e: Add ethtool support for rxvlan-offload (vlan stripping) (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [include] mlx5_core: Introduce offload arithmetic hardware capabilities (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [infiniband] ib/mlx5: Implement UD QP offloads for IPoIB in the TX flow (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [include] ib/mlx5: Define interface bits for IPoIB offloads (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [netdrv] mlx5e: Add TX stateless offloads for tunneling (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [netdrv] be2net: allow offloading with the same port for IPv4 and IPv6 (Ivan Vecera) [1274911]<br>- [netdrv] be2net: Support vxlan offload stats in the driver (Ivan Vecera) [1274911]<br>- [netdrv] bnx2x: add vlan filtering offload (Michal Schmidt) [1275795]<br>- [net] udp: restrict offloads to one namespace (Lance Richardson) [1283886]<br>- [net] geneve: Add geneve udp port offload for ethernet devices (Lance Richardson) [1283886]<br>- [net] gro: Fix remcsum offload to deal with frags in GRO (Lance Richardson) [1283886]<br>- [netdrv] qede: Add vlan filtering offload support (Harish Patil) [1275807 1275811]<br>- [netdrv] qed: Lay infrastructure for vlan filtering offload (Harish Patil) [1275807 1275811]<br>- [netdrv] ibmvnic: enable RX checksum offload (Steve Best) [1332848]<br>- [net] team: Advertise tunneling offload features (Xin Long) [1302771]<br>- [netdrv] ixgbe: Add support for VXLAN RX offloads (Ken Cox) [1274174]<br>- [netdrv] ixgbe: Add support for UDP-encapsulated tx checksum offload (Ken Cox) [1274174]<br>- [netdrv] ixgbe: add VXLAN offload support for X550 devices (Ken Cox) [1274174]<br>- [netdrv] i40e/i40evf: Only offload VLAN tag if enabled (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Add support for IPIP and SIT offloads (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Handle IPv6 extension headers in checksum offload (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Drop outer checksum offload that was not requested (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Add a new offload for RSS PCTYPE V2 for X722 (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Add WB_ON_ITR offload support (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Only offload VLAN tag if enabled (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Add support for IPIP and SIT offloads (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e: Enable Geneve offload for FW API ver &gt; 1.4 for XL710/X710 devices (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Handle IPv6 extension headers in checksum offload (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Drop outer checksum offload that was not requested (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e: Enable Geneve offload for FW API ver &gt; 1.4 for XL710/X710 devices (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e: update features with right offload (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e: geneve tunnel offload support (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Add a new offload for RSS PCTYPE V2 for X722 (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Add WB_ON_ITR offload support (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [net] add tc offload feature flag (Ivan Vecera) [1268334]<br><br><publishedDate>2017-06-13T02:23:33Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfwBeIAJ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-12T09:20:03Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-12T09:20:03Z</b><br><br>안녕하세요 송석중님,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>Detected Tx Unit Hang 이슈 관련 하여 HP 쪽에서 제공 하고 있는 <br>ixgbe 버전에서 패치가 되어 있는지에 대해서는 HP 쪽으로 문의 요청을 <br>하셔서 확인 하셔야 합니다. <br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-12T09:20:03Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfvqBIAR"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-12T08:55:08Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-12T08:55:08Z</b><br><br>그리고 저희쪽은 어플리케이션 성격상 eus로 업데이트만 하여야 합니다.<br><br><publishedDate>2017-06-12T08:55:08Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfvoKIAR"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-12T08:52:30Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-12T08:52:30Z</b><br><br>레드햇의 ixgbe모듈이 아닌 hp에서 제공한 ixgbe모듈을 사용하고 있는데도 영향이 있는것인가요?<br>이런 사항을 hp에서 픽스되었는지 문의 할 필요가 있는지요?<br><br><publishedDate>2017-06-12T08:52:30Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfvdgIAB"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-12T08:39:15Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-12T08:39:15Z</b><br><br>안녕하세요 송석중님,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>Detected Tx Unit Hang 관련 버그는 z-stream 버그도 오픈 되었으나 <br>WONTFIX 상태로 클로즈 되었습니다. <br><br>Bug 1358405 - [ixgbe] 'Detected Tx Unit Hang' with adapter resets [rhel-7.2.z]<br><br>따라서 해당 버그에 대해 z-stream (EUS) 픽스 버전이 없으며 <br>kernel-3.10.0-514.el7 버전으로 업데이트 주셔야 합니다. <br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-12T08:39:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfuvdIAB"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-12T07:33:39Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-12T07:33:39Z</b><br><br>관련 이슈에 대한 적용 커널 버전은 아래와 같고 <br>kernel-3.10.0-514.el7버전이 <br><br>빌드 호스트<br>x86-039.build.eng.bos.redhat.com<br>빌드 날짜<br>2016-10-19 15:46:06 UTC<br><br><br>저희측은 eus버전으로 아래 버전을 사용하고 있습니다.<br>kernel-3.10.0-327.44.2<br><br>빌드 호스트<br>x86-034.build.eng.bos.redhat.com<br>빌드 날짜<br>2016-11-24 11:24:42 UTC<br><br>입니다. 해당 이슈에 대한 것이 적용 되었는 지 확인 부탁드립니다.<br><br><publishedDate>2017-06-12T07:33:39Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jfu2SIAR"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-12T05:57:14Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-12T05:57:14Z</b><br><br>안녕하세요 송석중님,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>유선상에서 이야기를 해드렸던 내용을 아래와 같이 정리 하여 보내 드립니다. <br><br>ixgbe reports &quot;Detected Tx Unit Hang&quot; in RHEL 7 and network connectivity is lost <br>- https://access.redhat.com/solutions/2070703'<br><br>일단 위와 같은 링크 내용은 이번 connection reset 내용에 해당 되지 않지만 <br>고객쪽에서 사용 하고 있는 환경에서 발생 할 가능성이 있으므로 proactive 를 <br>하기 위해 추가적으로 문의 주시는 것으로 인식 하였습니다. <br><br>윗 링크에서 언급한 버그를 회피 하시려면, 아래와 같이 두가지 조치 방안이 있습니다. <br> - 커널 업데이트 (영국적으로 픽스) <br> - scatter-gater offload disable (워크어라운드)<br><br>** 그중 커널 업데이트를 통해 조치를 하시는 것을 권장 해 드립니다. <br><br>참고로, 해당 이슈는 최초에 RHEV 환경에서 발생 한 이슈입니다. RHEL에서 <br>동일한 커널 버전을 사용 하고 있기 때문에 RHEL 환경에서도 발생 할 가능성이 <br>있습니다. 따라서 말씀 하신대로 proactive 조치를 하시는게 맞는 것 같습니다. <br><br><br>본 이슈와 관련 하여 추가적인 도움이 필요 하실 경우 다시 연락 주시기 바랍니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-12T05:57:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JftLqIAJ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-12T03:59:59Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-12T03:59:58Z</b><br><br>답변 감사합니다. <br>14시에 전화 통화 가능합니다.<br>송석중 수석보 <br>010-6313-3748 입니다.<br><br><publishedDate>2017-06-12T03:59:58Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JftGqIAJ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-12T03:35:47Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-12T03:35:47Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>ixgbe reports &quot;Detected Tx Unit Hang&quot; in RHEL 7 and network connectivity is lost <br>- https://access.redhat.com/solutions/2070703'<br><br>이와 같은 이슈는 패킷을 전송후 (transmit action) ixgbe 드라이버에서 <br>함수 ixgbe_clean_tx_irq() 에 의해 transmit hang 을 감지 하게 되면<br>Detected Tx Unit Hang 메시지 출력 됩니다. 그후 Adapter Reset 을 <br>시킵니다. <br><br>1139         if (check_for_tx_hang(tx_ring) &amp;&amp; ixgbe_check_tx_hang(tx_ring)) {<br>1140                 /* schedule immediate reset if we believe we hung */<br>1141                 struct ixgbe_hw *hw = &amp;adapter-&gt;hw;<br>1142                 e_err(drv, &quot;Detected Tx Unit Hang\n&quot;<br>1143                         &quot;  Tx Queue             &lt;%d&gt;\n&quot;<br>1144                         &quot;  TDH, TDT             &lt;%x&gt;, &lt;%x&gt;\n&quot;<br>1145                         &quot;  next_to_use          &lt;%x&gt;\n&quot;<br>1146                         &quot;  next_to_clean        &lt;%x&gt;\n&quot;<br>1147                         &quot;tx_buffer_info[next_to_clean]\n&quot;<br>1148                         &quot;  time_stamp           &lt;%lx&gt;\n&quot;<br>1149                         &quot;  jiffies              &lt;%lx&gt;\n&quot;,<br>1150                         tx_ring-&gt;queue_index,<br>1151                         IXGBE_READ_REG(hw, IXGBE_TDH(tx_ring-&gt;reg_idx)),<br>1152                         IXGBE_READ_REG(hw, IXGBE_TDT(tx_ring-&gt;reg_idx)),<br>1153                         tx_ring-&gt;next_to_use, i,<br>1154                         tx_ring-&gt;tx_buffer_info[i].time_stamp, jiffies);<br><br><br>이와 같은 이슈는 내부적인 버그 #1288237 통해 픽스 하였습니다. <br><br>scatter-gater offload 를 비활성화 시킨 것으로 해당 이슈를  <br>임시적으로 회피 할수 있다는 내용은 타 고객사에서 확인 된 내용입니다. <br><br>따라서 Detected Tx Unit Hang 이슈를 회피 하기 위하여 커널 <br>업그래이드 하시거나 워크어라운드로 scatter-gater offload 를 <br>비활성화 시키는 것은 맞습니다. <br><br>하지만, 말씀 하신 Connection reset 이슈 발생 시점에 <br>Detected Tx Unit Hang 라는 메시지가 없었습니다.  <br>따라서 드라이버 행 이슈가 발생 한 것으로 보여지지가 않으며 본 이슈에 <br>해당 되지 않는 것으로 판단이 됩니다. <br><br>혹시 오후에 시간이 되시면 통화 하고 싶은데 통화 가능한 시간대와 <br>연락처 알려 주시면 대단히 감사드리겠습니다.<br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-12T03:35:47Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfsP1IAJ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-12T00:19:55Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-12T00:19:55Z</b><br><br>아래는 설정되어 있는 오프로드 관련 값입니다.<br>말씀하신것이 scatter-gater:on 을 하면 ixgbe 에서 Detected Tx Unit Hang 메시지가 발생 하면서 네트워크 연결이 fail 되는 것이죠?<br>fail되는것은 지속되는것인지? 아니면 계속되는지 궁금합니다.<br>scatter-gater라는것이 무엇인지 설명 부탁드리고 이 기능을 켰을때와 껐을때의 기능에 대해서 설명 부탁드립니다.<br>또, 이를 해결하기위하여 커널 업그래이드 및 워크어라운드로 기능을 끄는것이 맞는것인지요? <br><br>현, offload관련 값.<br>scatter-gather: on<br><br>tx-scatter-gather: on<br><br>tx-scatter-gather-fraglist: off [fixed]<br>tcp-segmentation-offload: on<br><br>tx-tcp-segmentation: on<br><br>tx-tcp-ecn-segmentation: off [fixed]<br><br>tx-tcp6-segmentation: on<br>udp-fragmentation-offload: off [fixed]<br>generic-segmentation-offload: on<br>generic-receive-offload: on<br>large-receive-offload: off<br>rx-vlan-offload: on<br>tx-vlan-offload: on<br><br><publishedDate>2017-06-12T00:19:55Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfW0aIAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-09T04:51:48Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-09T04:51:48Z</b><br><br>offload 기능을 켜서 문제가 되는지 확인하는 과정입니다.<br><br>어떤 근거도 없었고 그렇게 말할수 있는 근거를 찾는 과정이었습니다.<br><br>ixgbe reports &quot;Detected Tx Unit Hang&quot; in RHEL 7 and network connectivity is lost <br>- https://access.redhat.com/solutions/2070703'<br><br> Reset Adapter 메시지가 없어 해당 되지 않는 것으로 보인다고 말씀하셨는데 통신의 끊김이나 리셋의 근거로 적합하지 않는것인지요?<br><br>아울러 proactive의 일환으로 위 문서에 대한 워크어라운드를 필히 적용해야 하는지 문의 드립니다.<br><br><publishedDate>2017-06-09T04:51:48Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfVAwIAN"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-09T02:17:24Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-09T02:17:24Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>지금 사용 하신 버전 기반으로 changelog 확인 결과로는 유사한 버그가 없었던 <br>것으로 보입니다. <br><br>혹시 offload 설정으로 connection reset 될 수 있다는 정보는 어디서 <br>받으셨는지 또한 어떤 근거로 connection reset 발생 할수 있다고 하셨는지 <br>같이 확인 해 주시기 바랍니다. 그러시면 이번 이슈에 해당 되는지에 대해 좀더 <br>확인 드릴수 있을것 같습니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-09T02:17:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfGzcIAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-08T07:26:32Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-08T07:26:32Z</b><br><br>결과적으로 tcp connection reset관련  offload 사용시 버그리스트는 따로 존재하지는 않는것이지요?<br><br><publishedDate>2017-06-08T07:26:32Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfETsIAN"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-08T01:39:40Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-08T01:39:40Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>해당 링크 내용은 Scatter-Gather offload가 활성화 될시 발생 할수 있는 <br>이슈가 맞습니다. <br><br>해당 이슈는 ixgbe 에서 Detected Tx Unit Hang 메시지가 발생 하면서 <br>네트워크 연결이 fail 되는 이슈입니다. <br><br>말씁하신 connection reset 이슈 발생 시 Detected Tx Unit Hang 라는 <br>메시지가 없었습니다. 따라서 이 링크 내용에 해당 되지 않는 것으로 봅니다. <br><br>앞서 커넥션 리셋의 원인이 오르로드의 기능을 활성화 될시 발생 할수 있다고 <br>하셔서 혹시 해당 링크 내용을 근거로 말씀 하신 것인지 확인 해 보려고 링크를 <br>첨부 해 드린 것입니다. <br><br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-08T01:39:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jf5X9IAJ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-07T14:55:33Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-07T14:55:33Z</b><br><br>ixgbe reports &quot;Detected Tx Unit Hang&quot; in RHEL 7 and network connectivity is lost <br>- https://access.redhat.com/solutions/2070703'<br><br>위 언급해 주신 부분이 offload on 되었을때 발생되는 이슈인것인가요?<br><br>위 이슈는 정확하게 어떠한 이슈를 말하는것인가요?<br><br><publishedDate>2017-06-07T14:55:33Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JezihIAB"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-07T07:52:08Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-07T07:52:08Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>네, 맞습니다. 리스트에서는 connection reset 관련 버그가 없었습니다. <br>ixgbe 드라이버 관련 하여 아래와 같은 이슈가 있었으나 보내 주신 sosreport<br>에서는 Reset Adapter 메시지가 없어 해당 되지 않는 것으로 보입니다. <br><br>ixgbe reports &quot;Detected Tx Unit Hang&quot; in RHEL 7 and network connectivity is lost <br>- https://access.redhat.com/solutions/2070703<br><br>전에 말씀하신 offload 활성화 되면 reset 이슈가 있었다는게 이 링크 내용을 <br>말씀 하시는게 맞는지요? <br><br><br>감사합니다.<br><br><publishedDate>2017-06-07T07:52:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JettYIAR"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-07T06:05:22Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-07T06:05:22Z</b><br><br>결과적으로 connection reset관련하여 어떠한 버그 리스트도 존재하지 않는걸로 이해하면 되는지요?<br>말씀 부탁드립니다.<br><br>그리고 아래 말씀주신 서비스 PECCAL01SL 네트워크 드라이버는 tg3이 아니라 ixgbe 드라이버 사용합니다. 재확인 부탁드립니다.<br><br><publishedDate>2017-06-07T06:05:22Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JesSQIAZ"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-07T02:16:44Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-07T02:16:44Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>드락박스로 업로드 주신 파일은 외부에서 접속 불가 하여 말씀 하신 파일을 <br>케이스로 첨부 해 드렸으며 확인 부탁드립니다. <br><br>그리고 나열 해 주신 버그들은 connection reset을 유발 하지 않아 이번 <br>이슈랑 연관성이 없어 보입니다. <br><br><br>감사합니다.<br><br><publishedDate>2017-06-07T02:16:44Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JeLTmIAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-05T08:46:29Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-05T08:46:29Z</b><br><br>전달해주신 커널 체인지로그에 하기의 내용이 <br>현재 시스템의  nic offload 설정에 영향을 받는것인지 무관한지 확인 부탁합니다.<br><br>[netdrv] ixgbe: Drop unnecessary call to rcu_barrier (John Greene) [1173786]<br><br>[net] gro: Fix remcsum offload to deal with frags in GRO (Lance Richardson) [1283886]<br>[net] gro: fix aggregation for skb using frag_list (Alexander Duyck) [1154239]<br><br><br>[net] ipv4: fix a potential use after free in gre_offload.c (Alexander Duyck) [1151886 1152368]<br>[net] gre_offload: fix sparse non static symbol warning (Thomas Graf) [1051111]<br>[net] gre: Fix MTU sizing check for gretap tunnels (Amerigo Wang) [992917]<br>[net] gre: fix a regression in ioctl (Amerigo Wang) [992917]<br>======================<br>##### 시스템  offload 상태 #####<br>lro - OFF<br>gro - ON<br>tso - ON<br>gso - ON<br><br>아울러, 아래 업로드 했던 드롭박스의 파일을 링크 부탁드립니다.<br>sosreport-PECCAL01SL-20170601220350.tar.xz<br>sosreport-PPOSAL01SL-20170601220232.tar.xz<br><br><publishedDate>2017-06-05T08:46:29Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JeKBoIAN"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-05T06:28:48Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-05T06:28:48Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>Current Kernel Version: 3.10.0-327.44.2.el7.x86_64<br>Latest Kernel Version: 3.10.0-514.21.1.el7.x86_64<br><br>사용 하신 드라이버: <br>PECCAL01SL: tg3<br>PPOSAL01SL: vmxnet3<br><br><br>현재 사용 하신 커널 버전 또한 최신 커널버전에서 픽스된 offload 관련 버그의 <br>리스트는 아래와 같습니다. <br><br># grep offload /tmp/kernel.chg <br>- [netdrv] i40e: Be much more verbose about what we can and cannot offload (Stefan Assmann) [1433273 1383521]<br>- [netdrv] netvsc: fix incorrect receive checksum offloading (Vitaly Kuznetsov) [1391617 1388702]<br>- [netdrv] sfc: Define macro with EF10 offload feature (Jarod Wilson) [1368201]<br>- [netdrv] cxgb4/cxgb4vf: Fixes regression in perf when tx vlan offload is disabled (Sai Vemuri) [1319437]<br>- [net] udp_offload: put sk before returning (Florian Westphal) [1366515]<br>- [netdrv] cxgb4: large receive offload support (Sai Vemuri) [1211351]<br>- [infiniband] ib/core: Add IP to GID netlink offload (Honggang Li) [1309411 1342604]<br>- [net] udp_offload: Set encapsulation before inner completes (Jiri Benc) [1297504]<br>- [net] udp: Remove udp_offloads (Jiri Benc) [1297504]<br>- [net] tunnels: Remove encapsulation offloads on decap (Jiri Benc) [1297504]<br>- [netdrv] mlx4_en: Add support for inner IPv6 checksum offloads and TSO (kamal heib) [1192585]<br>- [netdrv] i40e: enable geneve offloading (Stefan Assmann) [1350780]<br>- [include] mlx5e: Add ethtool support for rxvlan-offload (vlan stripping) (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [include] mlx5_core: Introduce offload arithmetic hardware capabilities (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [infiniband] ib/mlx5: Implement UD QP offloads for IPoIB in the TX flow (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [include] ib/mlx5: Define interface bits for IPoIB offloads (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [netdrv] mlx5e: Add TX stateless offloads for tunneling (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]<br>- [netdrv] be2net: allow offloading with the same port for IPv4 and IPv6 (Ivan Vecera) [1274911]<br>- [netdrv] be2net: Support vxlan offload stats in the driver (Ivan Vecera) [1274911]<br>- [netdrv] bnx2x: add vlan filtering offload (Michal Schmidt) [1275795]<br>- [net] udp: restrict offloads to one namespace (Lance Richardson) [1283886]<br>- [net] geneve: Add geneve udp port offload for ethernet devices (Lance Richardson) [1283886]<br>- [net] gro: Fix remcsum offload to deal with frags in GRO (Lance Richardson) [1283886]<br>- [netdrv] qede: Add vlan filtering offload support (Harish Patil) [1275807 1275811]<br>- [netdrv] qed: Lay infrastructure for vlan filtering offload (Harish Patil) [1275807 1275811]<br>- [netdrv] ibmvnic: enable RX checksum offload (Steve Best) [1332848]<br>- [net] team: Advertise tunneling offload features (Xin Long) [1302771]<br>- [netdrv] ixgbe: Add support for VXLAN RX offloads (Ken Cox) [1274174]<br>- [netdrv] ixgbe: Add support for UDP-encapsulated tx checksum offload (Ken Cox) [1274174]<br>- [netdrv] ixgbe: add VXLAN offload support for X550 devices (Ken Cox) [1274174]<br>- [netdrv] i40e/i40evf: Only offload VLAN tag if enabled (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Add support for IPIP and SIT offloads (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Handle IPv6 extension headers in checksum offload (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Drop outer checksum offload that was not requested (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Add a new offload for RSS PCTYPE V2 for X722 (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Add WB_ON_ITR offload support (Stefan Assmann) [1274177]<br>- [netdrv] i40e/i40evf: Only offload VLAN tag if enabled (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Add support for IPIP and SIT offloads (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e: Enable Geneve offload for FW API ver &gt; 1.4 for XL710/X710 devices (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Handle IPv6 extension headers in checksum offload (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Drop outer checksum offload that was not requested (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e: Enable Geneve offload for FW API ver &gt; 1.4 for XL710/X710 devices (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e: update features with right offload (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e: geneve tunnel offload support (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Add a new offload for RSS PCTYPE V2 for X722 (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [netdrv] i40e/i40evf: Add WB_ON_ITR offload support (Stefan Assmann) [1269238 1272322 1274176 1281279 1293277 1310436]<br>- [net] add tc offload feature flag (Ivan Vecera) [1268334]<br><br><br>하지만 드라이버 vmxnet3 또한 tg3 관련 버그는 없었던 것으로 보입니다. <br><br>본 이슈와 관련 하여 추가적인 문의 사항이 있으시면 다시 연락 주시기 바랍니다. <br><br><br>감사합니다.<br><br><publishedDate>2017-06-05T06:28:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JeJ3EIAV"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-05T03:39:32Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-05T03:39:32Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>말씀 하신대로 NIC offload 기능은 원래 CPU에서 처리 해야한 segmentation/checksum 등 <br>과정을 NIC 쪽에서 처리 하게 하고 CPU 부하를 줄이고 성능을 향상 시키는 것입니다. <br>관련 하여 참고 자료 [1]에서 확인 가능 하십니다. <br><br>NIC offload 관련 설정은 참고 자료 [2]에서 설명 되어 있으며 참고 부탁드립니다. <br><br>[1] https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Performance_Tuning_Guide/network-nic-offloads.html#idp9915088<br>[2] https://access.redhat.com/solutions/750943<br><br>말씀 하신 offload 관련 버그를 확인 후 다시 업데이트 드리도록 하겠습니다. <br><br>감사합니다. <br><br>Red Hat GSS<br>정미연 드림<br><br><publishedDate>2017-06-05T03:39:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JeIBgIAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-05T00:50:05Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-05T00:50:04Z</b><br><br>부하가 있는 상태에서 연결이 끊어지는 현상에 대한 시스템 측면에서 검토중에 있습니다. <br><br>네트워크 관련 오프로드 버그가 있는지 확인 부탁드려요<br><br><publishedDate>2017-06-05T00:50:04Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JeG3VIAV"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-04T00:39:24Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-04T00:39:24Z</b><br><br>아울러 보고된 버그리스트가 있는지 확인부탁드립니다. <br>커넥션 리셋의 원인이 오르로드의 기능을 켜서 그런것으로 이야기 한적이 있다합니다.<br><br><publishedDate>2017-06-04T00:39:24Z</publishedDate><createdByType>Customer</createdByType><br>======================<br></comments><br>