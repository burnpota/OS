======================<br><b>생성계정 : 타임 게이트</b><br><b>생성날짜 : 2017-02-26T00:30:07Z</b><br><b>마지막 답변자 : Ying Huang</b><br><b>마지막 수정 일자 : 2017-03-10T02:07:22Z</b><br><b>id : 500A000000WUpfRIAT</b><br>======================<br><br><b><font size=15>
제목  : rpcbind 서비스 자동 시작에 관한건
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요?<br>rear를 사용함으로 해서 nfs를 마운트하여 사용해야 하는데요 rpcbind가 enable되어 있음에도 불구하고<br>리부팅시 자동으로 rpcbind서비스가 시작되지 않는 증상이 발생됩니다. /var/log/message에서는 mask되어 있다고<br>메시지가 뿌려지는데 현 상황은 enable입니다. 혹시나 몰라 /etc/rc.d/rc.local도 보았으나 관련 내용은 없는것으로 <br>확인했습니다.<br><br>시스템 재시작시 자동으로 rpcbind를 구동하고자 한다면 어떻게 해야하는지요?<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000J2Lk2IAF"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-10T02:07:20Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-10T02:07:20Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>요청대로 본 케이스를 처리완료하도록 하겠습니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재 오픈 하실 수 있습니다.<br><br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발송됩니다. 고객님께서 남기 신 의견은<br>보다 나은 서비스를 위해 지속적으로 반영될 것입니다. 향후 기술 지원 서비스의 품질 향상을 위해,<br>소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-03-10T02:07:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000J2AWjIAN"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-03-09T12:35:54Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-03-09T12:35:54Z</b><br><br>답변 감사합니다. <br>해당 이슈는 CLOSED 하도록 하겠습니다.<br><br><publishedDate>2017-03-09T12:35:54Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J1oWEIAZ"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-08T01:57:18Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-08T01:57:18Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>&gt; rpcbind.service가 static 상태라면 rpcbind.service를 사용하지 않는 환경에서 inactive 상태가 맞고<br>&gt; nfs등에 서비스가 연결되면 active상태로 바뀌는것 같습니다<br><br>네, 맞게 이해하셨습니다. rpcbind.service는 해당 서비스를 사용하는 서비스가 있을 경우<br>rpcbind.socket 의하여 자동으로 active하게 됩니다.<br><br>감사합니다.<br><br><publishedDate>2017-03-08T01:57:18Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000J1W9AIAV"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-03-07T06:06:57Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-03-07T06:06:57Z</b><br><br>cron을 생성하여 이미지를 드리는 것은 우선 어려울것으로 보입니다<br><br>단지 제가 말씀드린 <br><br>하기 내용에 대해서 확인 부탁드립니다<br><br>rpcbind.service가 static 상태라면 rpcbind.service를 사용하지 않는 환경에서 inactive 상태가 맞고<br><br>nfs등에 서비스가 연결되면 active상태로 바뀌는것 같습니다<br><br>----------------------------------------------------------------------------<br><br>제가 다시 서버에 접속하여 확인한 결과 현재 rpcbind.service에 대한 부분이 static으로 되어 있는데요<br><br>만약에 static으로 되어 있다면 nfs접근이 있을경우 active상태가 되는것이 맞나요<br><br>맞다면 static으로 했을때랑 enabled상태일때는 무조건 active상태가 되는것이 맞는지 확인도 함께 부탁드립니다<br><br>감사합니다<br>--------------------------------------------------------------------------<br><br>감사합니다<br><br><publishedDate>2017-03-07T06:06:57Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J1V10IAF"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-07T03:08:56Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-07T03:08:55Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>저희 백업 엔지니업분과 논의한바에 의하면 systemd 일부 로그를 기록하지 않기 때문에 만일 rpcbind.service가<br>기동되지 않는것이 정상이라고 판단하면 이와 같이 판단된 원인을 기록하지 않을수 있습니다. <br>이슈가 발생되는 서버가 vmware위에 설치된 가상 시스템인것으로 확인됩니다. 가능하시다면 해당 가상 시스템을 clone하여<br>복제한 시스템에서 저희가 보내드린 디버깅 패키지를 설치하고 재부팅 작업을 진행하여 이슈 발생시 더 많은 디버깅 정보를<br>수집해 주실수 있는지 확인 부탁 드립니다. 아시겠지만 디버깅 패키지는 무조건 프로덕션 환경에 사용할수 없을 알립니다.<br>만일 테스트가 가능하시다면 관련 디버깅 패키지를 보내 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-03-07T03:08:55Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000J1EZpIAN"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-03-06T07:30:16Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-03-06T07:30:16Z</b><br><br>제가 다시 서버에 접속하여 확인한 결과 현재 rpcbind.service에 대한 부분이 static으로 되어 있는데요<br><br>만약에 static으로 되어 있다면 nfs접근이 있을경우 active상태가 되는것이 맞나요<br><br>맞다면 static으로 했을때랑 enabled상태일때는 무조건 active상태가 되는것이 맞는지 확인도 함께 부탁드립니다<br><br>감사합니다<br><br><publishedDate>2017-03-06T07:30:16Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J1DMCIA3"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-03-06T04:43:29Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-03-06T04:43:28Z</b><br><br>systemctl status rpcbind.service -l 해당 내용 보내드립니다<br><br>* rpcbind.service - RPC bind service<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.service; indirect; vendor preset: enabled)<br>   Active: active (running) since Wed 2017-03-01 17:46:01 KST; 1 day 21h ago<br>  Process: 66191 ExecStart=/sbin/rpcbind -w ${RPCBIND_ARGS} (code=exited, status=0/SUCCESS)<br> Main PID: 66192 (rpcbind)<br>   CGroup: /system.slice/rpcbind.service<br>           `-66192 /sbin/rpcbind -w<br>Warning: Journal has been rotated since unit was started. Log output is incomplete or unavailable.<br><br><publishedDate>2017-03-06T04:43:28Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000J1CdoIAF"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-06T02:26:09Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-06T02:26:09Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>&quot;journalctl_-ax&quot; 명령어 결과는 부팅후 바로 실행한것이 아니어서 부팅후의 정보가 확인이 되지 않고 있습니다.<br>부팅시 rpcbind 관련 로그를 위하여 다시 수집 부탁 드립니다.<br><br>가능하시다면 rpcbind 패키지를 재설치하여 이슈가 해소되는지 확인 부탁드립니다.<br>rpcbind 패키지를 재설치 시 서버에 있는 nfs-utils 패키지도 함께 삭제 되니 필요하시다면 다시 설치해주시기 바랍니다.<br><br># yum remove rpcbind<br># yum install rpcbind nfs-utils<br><br>감사합니다.<br><br><publishedDate>2017-03-06T02:26:09Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000J19uGIAR"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-03-05T04:45:56Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-03-05T04:45:56Z</b><br><br>안녕하십니까 <br><br># journalctl -ax &gt; /tmp/journalctl_-ax.out<br>위 파일 파일 첨부 드립니다<br>해당 파일 먼저 확인 부탁드립니다<br><br># systemctl status rpcbind.service -l<br>해당 파일은 파일에 문제가 생겨서 고객에게 다시 요청해놓은 상태입니다<br>업로드 되는데로 다시 전달드리겠습니다<br><br>감사합니다<br><br><publishedDate>2017-03-05T04:45:56Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Iwe82IAB"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-03-03T03:40:35Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-03-03T03:40:35Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>어제 제가 휴가중이고 전체 케이스 로드가 높다보니 답변이 늦었습니다. 죄송합니다.<br>빨리 해결되도록 최선을 다하여 돕겠습니다.<br><br>현재 올려주신 로그에 의하면 rpcbind.socket는 mask 되지 않고 정상적으로 기동이 되는것으로 확인 됩니다.<br><br>● rpcbind.socket - RPCbind Server Activation Socket<br>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.socket; enabled; vendor preset: enabled)<br>   Active: active (listening) since Tue 2017-02-28 17:53:18 KST; 5min ago<br>   Listen: /var/run/rpcbind.sock (Stream)<br><br>또한 관련 파일에도 문제가 없이 정상적으로 기동이 되는것으로 확인됩니다.<br>[    6.713855] systemd[1]: Installed new job rpcbind.socket/start as 188<br>[    6.755210] systemd-tmpfiles[634]: Reading config file &quot;/usr/lib/tmpfiles.d/rpcbind.conf&quot;.<br>[    6.757398] systemd-tmpfiles[634]: Entry &quot;/run/rpcbind&quot; does not match any include prefix, skipping.<br>[    7.692830] systemd-tmpfiles[838]: Reading config file &quot;/usr/lib/tmpfiles.d/rpcbind.conf&quot;.<br>[    7.702331] systemd-tmpfiles[838]: Running create action for entry D /run/rpcbind<br>[    7.702335] systemd-tmpfiles[838]: Created directory &quot;/run/rpcbind&quot;.<br>[    7.702338] systemd-tmpfiles[838]: &quot;/run/rpcbind&quot; has right mode 40700<br>[    7.702339] systemd-tmpfiles[838]: chown &quot;/run/rpcbind&quot; to 32.32<br>[    7.702343] systemd-tmpfiles[838]: Running remove action for entry D /run/rpcbind<br>[    7.702347] systemd-tmpfiles[838]: rm -rf &quot;/run/rpcbind&quot;<br>[    7.719126] systemd[1]: rpcbind.socket changed dead -&gt; listening<br>[    7.719129] systemd[1]: Job rpcbind.socket/start finished, result=done<br><br>다만 현재 rpcbind.service가 기동이 되어 있지 않고 있습니다.<br><br>  rpcbind.service                                                                                                loaded    inactive dead      RPC bind service<br><br>해당 서버스의 상태 및 에러 확인을 위하여 아래의 명령어 결과를 케이스에 업로드 부탁 드립니다.<br># systemctl status rpcbind.service -l<br><br>또한 RHEL7일 경우에는 로그가 journalctl에 의하여 저장되기 때문에 일부 정보는 /var/log/messsages<br>파일에서 확인이 되지 않고 있으니 아래의 파일 수집 및 업로드 부탁드립니다.<br><br># journalctl -ax &gt; /tmp/journalctl_-ax.out<br><br>감사합니다.<br><br><publishedDate>2017-03-03T03:40:35Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IwKA2IAN"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-03-02T01:11:19Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-03-02T01:11:19Z</b><br><br>추가 요청하신 파일 첨부드립니다<br>빠른 답변 부탁드립니다<br>감사합니다<br><br><publishedDate>2017-03-02T01:11:19Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IvouEIAR"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-02-28T08:03:29Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-02-28T08:03:29Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>현재 올려주신 파일 정보에 의하여 동일한 버전의 rpcbind, systemd, kernel 버전으로<br>이슈를 재현해 보려고 시도해보았으나 실패 하였습니다.<br><br>혹시 이슈 재현이 가능하시다면 아래 문서에서 안내된 커널 파라미터를 추가하여 부팅시 더<br>디테일한 정보를 수집하여 rpcbind가 실패된 원인을 분석해 보아야 됩니다.<br>작업 진행후 dmesg 파일과 &quot;systemctl status rpcbind.socket -l&quot; 결과를 알려주시기<br>바랍니다.<br><br>How to enable additional debugging output for troubleshooting early boot issues in Systemd<br>https://access.redhat.com/solutions/2774351<br><br>참고로 rpcbind.socket가 ipv6를 비활성화 할 경우 기동 실패되는 버그가 있는데 이는 RHEL7에서<br>제공하는 rpcbind 버전rpcbind-0.2.0-38.el7.x86_64에서 발생되며 현재 서버에 설치되어 있는 <br>rpcbind-0.2.0-32.el7.x86_64 에서는 발생이 되지 않는것으로 확인됩니다.<br><br>감사합니다.<br><br><publishedDate>2017-02-28T08:03:29Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IvmR0IAJ"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-02-28T02:19:34Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-02-28T02:19:34Z</b><br><br>파일 첨부드립니다<br>분석 부탁드립니다<br><br><publishedDate>2017-02-28T02:19:34Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IvZS1IAN"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-02-27T08:43:50Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-02-27T08:43:50Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>Feb 16 16:46:11 NONSAP systemd: Cannot add dependency job for unit rpcbind.socket, ignoring: Unit rpcbind.socket is masked.<br><br>상기 로그에 의하면 rpcbind.socket unit는 의존성 이슈로 기동 실패한것으로 보입니다.<br>다만 서버에서 디폴트로는 반드시 rpcbind.socket 전에 기동해야 되는 unit가 확인이 되지 않고 있습니다.<br><br>현재 서버에 custom unit들이 있는것으로 확인되는데 관련 설정이 있는지를 확인해 보기 위하여<br>현재 서버에 있는 unit 들의 설정 파일 업로드 부탁 드립니다.<br><br># tar cvf /tmp/systemctl_units.tar /usr/lib/systemd/system/ /etc/systemd/system/<br><br>감사합니다.<br><br><publishedDate>2017-02-27T08:43:50Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IvXhuIAF"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-02-27T05:30:03Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-02-27T05:30:03Z</b><br><br>안녕하십니가 타임게이트 오선우입니다<br><br>우선 답변 감사합니다<br><br>말씀해주신 unmask는 이미 실행해보았습니다<br><br>unmask를 실행하고 enabled와 start 되어 있는 상태에서 서버 리부팅만 하면 inactive상태가 됩니다<br><br>rpcbind.socket, rpcbind.service  모두 enable상태인데 리부팅후에 inactive되는 증상이 있습니다<br><br>다른 장비들도 동일한 설정인데 해당 서버만 이런 증상이 있습니다<br><br> 이런 경우가 어떠한 경우가 있는지요?<br>웹에서 검색해보면 centOS에서도 발생하는 것 같은데요 버그인것인지 버그라면 조치할수 있는 방법은 있는지요?<br>다시한번 확인 부탁드립니다<br>감사합니다<br><br><publishedDate>2017-02-27T05:30:03Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000IvWQ3IAN"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-02-27T01:41:08Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-02-27T01:41:07Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>mask된 서비스는 아래의 명령어로 unmask 하실수 있으십니다.<br># systemctl unmask rpcbind.socket<br><br>이외에 해당 서버에는 아래와 같은 서비스들이 mask되어 있는것으로 확인되었습니다.<br>필요하지 않는 서비스들인지를 확인해보시고 만일 유용한 서비스라면 unmask 작업을 <br>해주시기 바랍니다.<br><br>Feb 16 16:46:11 NONSAP systemd: Cannot add dependency job for unit alsa-state.service, ignoring: Unit alsa-state.service is masked.<br>Feb 16 16:46:11 NONSAP systemd: Cannot add dependency job for unit rpcbind.socket, ignoring: Unit rpcbind.socket is masked.<br>Feb 16 16:46:11 NONSAP systemd: Cannot add dependency job for unit alsa-restore.service, ignoring: Unit alsa-restore.service is masked.<br>Feb 16 16:46:11 NONSAP systemd: Cannot add dependency job for unit NetworkManager-wait-online.service, ignoring: Unit NetworkManager-wait-online.service is masked.<br>Feb 16 16:46:11 NONSAP systemd: Cannot add dependency job for unit rhsmcertd.service, ignoring: Unit rhsmcertd.service is masked.<br>Feb 16 16:46:11 NONSAP systemd: Cannot add dependency job for unit netcf-transaction.service, ignoring: Unit netcf-transaction.service is masked.<br>Feb 16 16:46:11 NONSAP systemd: Cannot add dependency job for unit irqbalance.service, ignoring: Unit irqbalance.service is masked.<br><br>감사합니다.<br><br><publishedDate>2017-02-27T01:41:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>