======================<br><b>생성계정 : 삼성생명 타임게이트</b><br><b>생성날짜 : 2017-07-29T23:28:12Z</b><br><b>마지막 답변자 : Workflow Integration</b><br><b>마지막 수정 일자 : 2017-08-03T13:18:39Z</b><br><b>id : 500A000000XX8noIAD</b><br>======================<br><br><b><font size=15>
제목  : root cause analysis for fencing issue on pacemaker, RHEL7.2(페이스 메이커 팬싱관련)
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요?<br>29일 새벽 4시 30분경 클러스터 FAILOVER로 인한 분석 요청 드립니다.<br>아래와 같은 에러메시지로 팬싱이 발생한 것 같습니다.<br>&lt;&lt;&lt; DCTAAL01SL COROSYNC LOG &gt;&gt;&gt;<br>Jul 29 04:30:59 [40901] DCTAAL01SL    pengine:  warning: unpack_rsc_op_failure: Processing failed op monitor for DCTA1_vip on DCTAAL01SL-HB: unknown error (1)<br>Jul 29 04:30:59 [40901] DCTAAL01SL    pengine:  warning: unpack_rsc_op_failure: Processing failed op monitor for LV_APP_con_ctmag1 on DCTAAL01SL-HB: unknown error (1)<br>Jul 29 04:31:01 [40901] DCTAAL01SL    pengine:  warning: pe_fence_node: Node DCTAAL01SL-HB will be fenced because of resource failure(s)<br>Jul 29 04:31:01 [40901] DCTAAL01SL    pengine:  warning: unpack_rsc_op_failure: Processing failed op monitor for LV_APP_con_ctmag901 on DCTAAL01SL-HB: unknown error (1)<br><br>[3개의 리소스 펜싱 원인 요소]<br>1. DCTA1_vip on DCTAAL01SL-HB FAIL<br>2. LV_APP_con_ctmag1 on DCTAAL01SL-HB<br>3. LV_APP_con_ctmag901 on DCTAAL01SL-HB<br><br>Q1) 위 3개의 요소로 인해서 팬싱된것이 맞는지요?<br><br>Q2) 위와 같은 요소로인하여 팬싱이 진행되었다면 무슨이유로 모니터링 체크 FAIL이 발생한것인지요?<br><br>Q3) 위 상황이 아니라면 어떤 요소로 팬싱이 진행되었는지?<br><br>cf) <br>1. 새벽 4시 30분경 run-q값이 5000이상 되었고 그 이후 failover된것으로 보입니다.<br>2. lvm 리소스 모니터 컨피그는 장애발생당시<br>monitor interval=5s timeout=10 on-fail=fence OCF_CHECK_LEVEL=10<br>였으나 일전에 권고 받은 값이 있어 <br>monitor interval=5s timeout=30 on-fail=restart OCF_CHECK_LEVEL=10<br>으로 변경하였습니다. <br><br>Q4) lvm 리소스 모니터 on-fail 옵션에서 restart라 하면 해당 파일시스템을 umount 후 mount하는 <br>       것인가요? 아니라면 어떠한 액션을 말하는것인가요?<br><br><br>---------------------------------------------------------------------------------------------------------------<br>&lt;&lt;&lt; DCTAAL01SL MESSAGES LOG &gt;&gt;&gt;<br>Jul 29 04:30:54 DCTAAL01SL lrmd[40899]: warning: LV_APP_con_ctmag1_monitor_5000 process (PID 61828) timed out<br>Jul 29 04:30:54 DCTAAL01SL lrmd[40899]: warning: LV_APP_con_ctmag1_monitor_5000:61828 - timed out after 10000ms<br>Jul 29 04:30:54 DCTAAL01SL crmd[40902]:   error: Operation LV_APP_con_ctmag1_monitor_5000: Timed Out (node=DCTAAL01SL-HB, call=76, timeout=10000ms)<br>Jul 29 04:30:54 DCTAAL01SL crmd[40902]:  notice: State transition S_IDLE -&gt; S_POLICY_ENGINE [ input=I_PE_CALC cause=C_FSA_INTERNAL origin=abort_transition_graph ]<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]: warning: Processing failed op monitor for DCTA1_vip on DCTAAL01SL-HB: unknown error (1)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]: warning: Processing failed op monitor for LV_APP_con_ctmag1 on DCTAAL01SL-HB: unknown error (1)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]: warning: Node DCTAAL01SL-HB will be fenced because of resource failure(s)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]: warning: Scheduling Node DCTAAL01SL-HB for STONITH<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Stop of failed resource LV_APP_con_ctmag1 is implicit after DCTAAL01SL-HB is fenced<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Move    VG_SRPCTAAP1VG#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Recover LV_APP_con_ctmag1#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Move    VG_SRPCTAAP3VG#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Move    LV_APP_con_ctmag901#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Move    DCTA1_vip#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Move    DCTA1_script#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Stop    ping:0#011(DCTAAL01SL-HB)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Move    kdump_stonith#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]:  notice: Stop    ipmilan_stonith2#011(DCTAAL01SL-HB)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]: warning: Calculated Transition 1204: /var/lib/pacemaker/pengine/pe-warn-0.bz2<br>Jul 29 04:30:54 DCTAAL01SL lrmd[40899]: warning: LV_APP_con_ctmag901_monitor_5000 process (PID 61829) timed out<br>Jul 29 04:30:54 DCTAAL01SL lrmd[40899]: warning: LV_APP_con_ctmag901_monitor_5000:61829 - timed out after 10000ms<br>Jul 29 04:30:54 DCTAAL01SL crmd[40902]:   error: Operation LV_APP_con_ctmag901_monitor_5000: Timed Out (node=DCTAAL01SL-HB, call=80, timeout=10000ms)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]: warning: Processing failed op monitor for DCTA1_vip on DCTAAL01SL-HB: unknown error (1)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]: warning: Processing failed op monitor for LV_APP_con_ctmag1 on DCTAAL01SL-HB: unknown error (1)<br>Jul 29 04:30:54 DCTAAL01SL pengine[40901]: warning: Node DCTAAL01SL-HB will be fenced because of resource failure(s)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]: warning: Scheduling Node DCTAAL01SL-HB for STONITH<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Stop of failed resource LV_APP_con_ctmag1 is implicit after DCTAAL01SL-HB is fenced<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Move    VG_SRPCTAAP1VG#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Recover LV_APP_con_ctmag1#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Move    VG_SRPCTAAP3VG#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Move    LV_APP_con_ctmag901#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Move    DCTA1_vip#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Move    DCTA1_script#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Stop    ping:0#011(DCTAAL01SL-HB)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Move    kdump_stonith#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]:  notice: Stop    ipmilan_stonith2#011(DCTAAL01SL-HB)<br>Jul 29 04:30:56 DCTAAL01SL pengine[40901]: warning: Calculated Transition 1205: /var/lib/pacemaker/pengine/pe-warn-1.bz2<br><br>Jul 29 04:30:59 DCTAAL01SL pengine[40901]: warning: Processing failed op monitor for DCTA1_vip on DCTAAL01SL-HB: unknown error (1)<br>Jul 29 04:30:59 DCTAAL01SL pengine[40901]: warning: Processing failed op monitor for LV_APP_con_ctmag1 on DCTAAL01SL-HB: unknown error (1)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]: warning: Node DCTAAL01SL-HB will be fenced because of resource failure(s)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]: warning: Processing failed op monitor for LV_APP_con_ctmag901 on DCTAAL01SL-HB: unknown error (1)<br> <br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]: warning: Scheduling Node DCTAAL01SL-HB for STONITH<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Stop of failed resource LV_APP_con_ctmag1 is implicit after DCTAAL01SL-HB is fenced<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Move    VG_SRPCTAAP1VG#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Recover LV_APP_con_ctmag1#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Move    VG_SRPCTAAP3VG#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Move    LV_APP_con_ctmag901#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Move    DCTA1_vip#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Move    DCTA1_script#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Stop    ping:0#011(DCTAAL01SL-HB)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Move    kdump_stonith#011(Started DCTAAL01SL-HB -&gt; DCTAAL02SL-HB)<br>Jul 29 04:31:01 DCTAAL01SL pengine[40901]:  notice: Stop    ipmilan_stonith2#011(DCTAAL01SL-HB)<br>Jul 29 04:31:01 DCTAAL01SL crmd[40902]:  notice: Executing reboot fencing operation (70) on DCTAAL01SL-HB (timeout=60000)<br><br><br>&lt;&lt;&lt;&lt; pcs config &gt;&gt;&gt;&gt;<br>root@DCTAAL01SL /tmp # pcs config<br>Cluster Name: CTA_AP_cluster<br>Corosync Nodes:<br> DCTAAL01SL-HB DCTAAL02SL-HB<br>Pacemaker Nodes:<br> DCTAAL01SL-HB DCTAAL02SL-HB<br>Resources:<br> Group: DCTA1_group<br>  Resource: VG_SRPCTAAP1VG (class=ocf provider=heartbeat type=LVM)<br>   Attributes: volgrpname=SRPCTAAP1VG exclusive=true<br>   Operations: stop interval=0s timeout=30 (VG_SRPCTAAP1VG-stop-interval-0s)<br>               monitor interval=10 timeout=30 (VG_SRPCTAAP1VG-monitor-interval-10)<br>               start interval=0s start-delay=5s (VG_SRPCTAAP1VG-start-interval-0s)<br>  Resource: LV_APP_con_ctmag1 (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPCTAAP1VG-APP_con_ctmag1 directory=/APP/controlm/ctmag1 fstype=xfs run_fsck=no force_unmount=safe<br>   Operations: stop interval=0s timeout=60 (LV_APP_con_ctmag1-stop-interval-0s)<br>               start interval=0s timeout=60 (LV_APP_con_ctmag1-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=restart OCF_CHECK_LEVEL=10 (LV_APP_con_ctmag1-monitor-interval-5s)<br>  Resource: VG_SRPCTAAP3VG (class=ocf provider=heartbeat type=LVM)<br>   Attributes: volgrpname=SRPCTAAP3VG exclusive=true<br>   Operations: stop interval=0s timeout=30 (VG_SRPCTAAP3VG-stop-interval-0s)<br>               monitor interval=10 timeout=30 (VG_SRPCTAAP3VG-monitor-interval-10)<br>               start interval=0s start-delay=5s (VG_SRPCTAAP3VG-start-interval-0s)<br>  Resource: LV_APP_con_ctmag901 (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPCTAAP3VG-APP_con_ctmag901 directory=/APP/controlm/ctmag901 fstype=xfs run_fsck=no<br>   Operations: stop interval=0s timeout=60 (LV_APP_con_ctmag901-stop-interval-0s)<br>               start interval=0s start-delay=5s (LV_APP_con_ctmag901-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=restart OCF_CHECK_LEVEL=10 (LV_APP_con_ctmag901-monitor-interval-5s)<br>  Resource: DCTA1_vip (class=ocf provider=heartbeat type=IPaddr2)<br>   Attributes: ip=100.253.142.53<br>   Operations: stop interval=0s timeout=20s (DCTA1_vip-stop-interval-0s)<br>               start interval=0s start-delay=3s (DCTA1_vip-start-interval-0s)<br>               monitor interval=5s start-delay=5s timeout=10s (DCTA1_vip-monitor-interval-5s)<br>  Resource: DCTA1_script (class=ocf provider=status type=MySAP)<br>   Attributes: monitor=/etc/corosync/ctmag1_monitor start=/etc/corosync/ctmag1_start stop=/etc/corosync/ctmag1_stop<br>   Operations: stop interval=0s timeout=120 (DCTA1_script-stop-interval-0s)<br>               monitor interval=60s enabled=false (DCTA1_script-monitor-interval-60s)<br>               start interval=0s timeout=120 (DCTA1_script-start-interval-0s)<br> Group: DCTA2_group<br>  Resource: VG_SRPCTAAP2VG (class=ocf provider=heartbeat type=LVM)<br>   Attributes: volgrpname=SRPCTAAP2VG exclusive=true<br>   Operations: stop interval=0s timeout=30 (VG_SRPCTAAP2VG-stop-interval-0s)<br>               monitor interval=10 timeout=30 (VG_SRPCTAAP2VG-monitor-interval-10)<br>               start interval=0s start-delay=5s (VG_SRPCTAAP2VG-start-interval-0s)<br>  Resource: LV_APP_con_ctmag2 (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPCTAAP2VG-APP_con_ctmag2 directory=/APP/controlm/ctmag2 fstype=xfs run_fsck=no force_unmount=safe<br>   Operations: stop interval=0s timeout=60 (LV_APP_con_ctmag2-stop-interval-0s)<br>               start interval=0s timeout=60 (LV_APP_con_ctmag2-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=restart OCF_CHECK_LEVEL=10 (LV_APP_con_ctmag2-monitor-interval-5s)<br>  Resource: VG_SRPCTAAP4VG (class=ocf provider=heartbeat type=LVM)<br>   Attributes: volgrpname=SRPCTAAP4VG exclusive=true<br>   Operations: stop interval=0s timeout=30 (VG_SRPCTAAP4VG-stop-interval-0s)<br>               monitor interval=10 timeout=30 (VG_SRPCTAAP4VG-monitor-interval-10)<br>               start interval=0s start-delay=5s (VG_SRPCTAAP4VG-start-interval-0s)<br>  Resource: LV_APP_con_ctmag902 (class=ocf provider=heartbeat type=Filesystem)<br>   Attributes: device=/dev/mapper/SRPCTAAP4VG-APP_con_ctmag902 directory=/APP/controlm/ctmag902 fstype=xfs run_fsck=no<br>   Operations: stop interval=0s timeout=60 (LV_APP_con_ctmag902-stop-interval-0s)<br>               start interval=0s start-delay=5s (LV_APP_con_ctmag902-start-interval-0s)<br>               monitor interval=5s timeout=30 on-fail=restart OCF_CHECK_LEVEL=10 (LV_APP_con_ctmag902-monitor-interval-5s)<br>  Resource: DCTA2_vip (class=ocf provider=heartbeat type=IPaddr2)<br>   Attributes: ip=100.253.142.54<br>   Operations: stop interval=0s timeout=20s (DCTA2_vip-stop-interval-0s)<br>               start interval=0s start-delay=3s (DCTA2_vip-start-interval-0s)<br>               monitor interval=5s start-delay=5s timeout=10s (DCTA2_vip-monitor-interval-5s)<br>  Resource: DCTA2_script (class=ocf provider=status type=MySAP)<br>   Attributes: monitor=/etc/corosync/ctmag2_monitor start=/etc/corosync/ctmag2_start stop=/etc/corosync/ctmag2_stop<br>   Operations: stop interval=0s timeout=120 (DCTA2_script-stop-interval-0s)<br>               monitor interval=60s enabled=false (DCTA2_script-monitor-interval-60s)<br>               start interval=0s timeout=120 (DCTA2_script-start-interval-0s)<br> Clone: ping-clone<br>  Resource: ping (class=ocf provider=pacemaker type=ping)<br>   Attributes: dampen=5s multiplier=10 host_list=100.253.142.1 attempts=7<br>   Operations: start interval=0s timeout=60 (ping-start-interval-0s)<br>               stop interval=0s timeout=20 (ping-stop-interval-0s)<br>               monitor interval=5s (ping-monitor-interval-5s)<br>Stonith Devices:<br> Resource: kdump_stonith (class=stonith type=fence_kdump)<br>  Attributes: pcmk_host_check=static-list pcmk_monitor_action=metadata pcmk_status_action=metadata pcmk_reboot_action=off pcmk_host_list=&quot;DCTAAL01SL-HB DCTAAL02SL-HB&quot; pcmk_off_timeout=120s timeout=120s<br>  Operations: monitor interval=60s (kdump_stonith-monitor-interval-60s)<br> Resource: ipmilan_stonith1 (class=stonith type=fence_ipmilan)<br>  Attributes: pcmk_host_list=DCTAAL01SL-HB ipaddr=172.19.24.103 login=Redhat passwd=nl!con00 lanplus=on auth=password delay=15 action=reboot<br>  Operations: monitor interval=60s (ipmilan_stonith1-monitor-interval-60s)<br> Resource: ipmilan_stonith2 (class=stonith type=fence_ipmilan)<br>  Attributes: pcmk_host_list=DCTAAL02SL-HB ipaddr=172.19.24.104 login=Redhat passwd=nl!con00 lanplus=on auth=password action=reboot<br>  Operations: monitor interval=60s (ipmilan_stonith2-monitor-interval-60s)<br>Fencing Levels:<br> Node: DCTAAL01SL-HB<br>  Level 1 - kdump_stonith<br>  Level 2 - ipmilan_stonith1<br> Node: DCTAAL02SL-HB<br>  Level 1 - kdump_stonith<br>  Level 2 - ipmilan_stonith2<br>Location Constraints:<br>  Resource: DCTA1_group<br>    Enabled on: DCTAAL01SL-HB (score:10) (id:location-DCTA1_group-DCTAAL01SL-HB-10)<br>  Resource: DCTA1_script<br>    Enabled on: DCTAAL01SL-HB (score:10) (id:location-DCTA1_script-DCTAAL01SL-HB-10)<br>  Resource: DCTA1_vip<br>    Enabled on: DCTAAL01SL-HB (score:10) (id:location-DCTA1_vip-DCTAAL01SL-HB-10)<br>    Constraint: location-DCTA1_vip<br>      Rule: score=-INFINITY boolean-op=or  (id:location-DCTA1_vip-rule)<br>        Expression: pingd lt 1  (id:location-DCTA1_vip-rule-expr)<br>        Expression: not_defined pingd  (id:location-DCTA1_vip-rule-expr-1)<br>  Resource: DCTA2_group<br>    Enabled on: DCTAAL02SL-HB (score:10) (id:location-DCTA2_group-DCTAAL02SL-HB-10)<br>  Resource: DCTA2_script<br>    Enabled on: DCTAAL02SL-HB (score:10) (id:location-DCTA2_script-DCTAAL02SL-HB-10)<br>  Resource: DCTA2_vip<br>    Enabled on: DCTAAL02SL-HB (score:10) (id:location-DCTA2_vip-DCTAAL02SL-HB-10)<br>    Constraint: location-DCTA2_vip<br>      Rule: score=-INFINITY boolean-op=or  (id:location-DCTA2_vip-rule)<br>        Expression: pingd lt 1  (id:location-DCTA2_vip-rule-expr)<br>        Expression: not_defined pingd  (id:location-DCTA2_vip-rule-expr-1)<br>  Resource: LV_APP_con_ctmag1<br>    Enabled on: DCTAAL01SL-HB (score:10) (id:location-LV_APP_con_ctmag1-DCTAAL01SL-HB-10)<br>  Resource: LV_APP_con_ctmag2<br>    Enabled on: DCTAAL02SL-HB (score:10) (id:location-LV_APP_con_ctmag2-DCTAAL02SL-HB-10)<br>  Resource: LV_APP_con_ctmag901<br>    Enabled on: DCTAAL01SL-HB (score:10) (id:location-LV_APP_con_ctmag901-DCTAAL01SL-HB-10)<br>  Resource: LV_APP_con_ctmag902<br>    Enabled on: DCTAAL02SL-HB (score:10) (id:location-LV_APP_con_ctmag902-DCTAAL02SL-HB-10)<br>  Resource: VG_SRPCTAAP1VG<br>    Enabled on: DCTAAL01SL-HB (score:10) (id:location-VG_SRPCTAAP1VG-DCTAAL01SL-HB-10)<br>  Resource: VG_SRPCTAAP2VG<br>    Enabled on: DCTAAL02SL-HB (score:10) (id:location-VG_SRPCTAAP2VG-DCTAAL02SL-HB-10)<br>  Resource: VG_SRPCTAAP3VG<br>    Enabled on: DCTAAL01SL-HB (score:10) (id:location-VG_SRPCTAAP3VG-DCTAAL01SL-HB-10)<br>  Resource: VG_SRPCTAAP4VG<br>    Enabled on: DCTAAL02SL-HB (score:10) (id:location-VG_SRPCTAAP4VG-DCTAAL02SL-HB-10)<br>  Resource: ipmilan_stonith1<br>    Disabled on: DCTAAL01SL-HB (score:-INFINITY) (id:const_ipmilan1)<br>  Resource: ipmilan_stonith2<br>    Disabled on: DCTAAL02SL-HB (score:-INFINITY) (id:const_ipmilan2)<br>Ordering Constraints:<br>  start DCTA1_vip then start DCTA1_script (kind:Mandatory) (id:order-DCTA1_vip-DCTA1_script-mandatory)<br>  start DCTA2_vip then start DCTA2_script (kind:Mandatory) (id:order-DCTA2_vip-DCTA2_script-mandatory)<br>  start VG_SRPCTAAP1VG then start LV_APP_con_ctmag1 (kind:Mandatory) (id:order-VG_SRPCTAAP1VG-LV_APP_con_ctmag1-mandatory)<br>  start LV_APP_con_ctmag1 then start VG_SRPCTAAP3VG (kind:Mandatory) (id:order-LV_APP_con_ctmag1-VG_SRPCTAAP3VG-mandatory)<br>  start VG_SRPCTAAP3VG then start LV_APP_con_ctmag901 (kind:Mandatory) (id:order-VG_SRPCTAAP3VG-LV_APP_con_ctmag901-mandatory)<br>  start LV_APP_con_ctmag901 then start DCTA1_vip (kind:Mandatory) (id:order-LV_APP_con_ctmag901-DCTA1_vip-mandatory)<br>  start VG_SRPCTAAP2VG then start LV_APP_con_ctmag2 (kind:Mandatory) (id:order-VG_SRPCTAAP2VG-LV_APP_con_ctmag2-mandatory)<br>  start LV_APP_con_ctmag2 then start VG_SRPCTAAP4VG (kind:Mandatory) (id:order-LV_APP_con_ctmag2-VG_SRPCTAAP4VG-mandatory)<br>  start VG_SRPCTAAP4VG then start LV_APP_con_ctmag902 (kind:Mandatory) (id:order-VG_SRPCTAAP4VG-LV_APP_con_ctmag902-mandatory)<br>  start LV_APP_con_ctmag902 then start DCTA2_vip (kind:Mandatory) (id:order-LV_APP_con_ctmag902-DCTA2_vip-mandatory)<br>Colocation Constraints:<br>Resources Defaults:<br> resource-stickiness: 100<br> migration-threshold: 3<br>Operations Defaults:<br> No defaults set<br>Cluster Properties:<br> cluster-infrastructure: corosync<br> cluster-name: CTA_AP_cluster<br> dc-version: 1.1.13-10.el7_2.4-44eb2dd<br> have-watchdog: false<br> last-lrm-refresh: 1472635398<br> maintenance-mode: false<br> no-quorum-policy: stop<br> stonith-enabled: true<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>DCTAAL01SL, DCTAAL02SL</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>clusterha</name></tag><tag><name>fencing</name></tag><tag><name>pacemaker</name></tag></tags><br><comment id="a0aA000000K7VSVIA3"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-08-03T13:18:38Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-08-03T13:18:38Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>해당 케이스에 대하여 직접 close 처리해주셔서 정말 감사합니다!<br><br>케이스가 처리 완료되면 고객 설문 및 만족도 조사 메일이 발송됩니다.<br>고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해,<br>소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-03T13:18:38Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K7Pj4IAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-08-03T04:57:48Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-08-03T04:57:48Z</b><br><br>답변 감사합니다. 케이스 종료하도록 하겠습니다.<br><br><publishedDate>2017-08-03T04:57:48Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K6bBhIAJ"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-31T09:20:10Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-31T09:20:10Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>전화상으로 말씀나눈 바와 같이 이슈 시점에 해당 시스템에 부하가 많았던 것은 확인됩니다.<br>다만 현재로서는 현상 확인 뿐 원인을 특정지을 데이터가 부족하므로<br>만약 해당 이슈가 빈번하게 발생한다면 다음 문서를 토대로 원인 분석을 위한 추가 시스템 정보 수집이 필요할 수 있습니다.<br><br>Collecting supplemental system utilization statistics for fence events or performance problems in RHEL High Availability or Resilient Storage clusters <br>- https://access.redhat.com/solutions/368393<br><br>업무에 참조되시기 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-31T09:20:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K6aUnIAJ"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-31T08:17:53Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-31T08:33:05Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>해당 케이스는 클러스터 전문 그룹의 엔지니어인 Ondrej 의 협력을 받아<br>처리하고 있습니다.<br><br>Q1,Q2,Q3 에 대해서 모아서 답변 드리면,<br><br>## 저희는 LV_APP_con_ctmag1 'monitor' 오퍼레이션이 타임아웃된 것을 볼 수 있습니다.<br>타임아웃은 일반적으로 일시적인 I/O 부하 등에 의해서 발생할 수 있으며,<br>말씀하신 restart 에 의해 넘어갈 수 있습니다.<br>~~~<br>Jul 29 04:30:54 [40899] DCTAAL01SL       lrmd:  warning: child_timeout_callback:        LV_APP_con_ctmag1_monitor_5000 process (PID 61828) timed out<br>Jul 29 04:30:54 [40899] DCTAAL01SL       lrmd:  warning: operation_finished:    LV_APP_con_ctmag1_monitor_5000:61828 - timed out after 10000ms<br>Jul 29 04:30:54 [40902] DCTAAL01SL       crmd:    error: process_lrm_event:     Operation LV_APP_con_ctmag1_monitor_5000: Timed Out (node=DCTAAL01SL-HB, call=76, timeout=10000ms)<br>~~~<br><br>## 이 때문에 펜싱이 스케쥴되었습니다.<br>~~~<br>Jul 29 04:30:54 [40901] DCTAAL01SL    pengine:  warning: unpack_rsc_op_failure: Processing failed op monitor for LV_APP_con_ctmag1 on DCTAAL01SL-HB: unknown error (1)<br>Jul 29 04:30:54 [40901] DCTAAL01SL    pengine:  warning: pe_fence_node: Node DCTAAL01SL-HB will be fenced because of resource failure(s)<br>~~~<br><br>## 기본적으로 'monitor' 액션은 펜싱을 야기하지 않습니다.<br>하지만, 리소스 정의로부터 'on-fail=fence' 옵션이 설정되어 있는 것을 볼 수 있습니다.<br>이 것은 기본값인 리소스를 재시작하는 대신 리소스가 노드를 펜싱하게 만들 것입니다.<br><br>&gt; Q4) lvm 리소스 모니터 on-fail 옵션에서 restart라 하면 해당 파일시스템을 umount 후 mount하는 <br>&gt;       것인가요? 아니라면 어떠한 액션을 말하는것인가요?<br><br>아닙니다, LVM 리소스는 filesystem 들을 핸들링하지 않습니다. Filesystem 리소스이 그 역할을 합니다.<br>여기서 자원 그룹의 자원 중 하나가 실패하면, 이 후에 모든 자원이 재시작될 것입니다.<br><br>감사합니다.<br><br>Jaewook &amp; Ondrej<br><br>GSS, APAC &amp; EMEA, Red Hat Inc<br><br><publishedDate>2017-07-31T08:17:53Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K6YqKIAV"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-31T05:14:44Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-31T05:14:44Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>요청에 따라 해당 케이스에서 이어서 기술 지원을 진행하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-31T05:14:44Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K6YaCIAV"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-31T04:37:18Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-31T04:37:18Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>신규 생성된 케이스를 확인하였습니다.<br>해당 이슈는 신규 생성된 케이스 01900733 에서 진행하고<br>본 케이스는 close 처리하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-31T04:37:18Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K6YScIAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-07-31T04:17:04Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-07-31T04:17:04Z</b><br><br>https://access.redhat.com/support/cases/#/case/01900733 <br>위 케이스 계정을 매핑 부탁드립니다.<br><br><publishedDate>2017-07-31T04:17:04Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K6Y01IAF"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-31T02:51:32Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-31T02:51:32Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>죄송한데, 확인해보니 해당 계정에 HA 서브스크립션이 확인되지 않습니다.<br>아마 다른 계정에 소유하고 계실 것으로 예상되므로<br>해당 서브스크립션을 소유한 계정으로 케이스를 다시 올려주시면 이어서 조사 및 안내를 진행하도록 하겠습니다.<br><br>확인 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-31T02:51:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K6XhEIAV"><br>======================<br><b>생성계정 : Shin, Jake Jaewook</b><br><b>생성날짜 : 2017-07-31T01:58:46Z</b><br><b>마지막 답변자 : Shin, Jake Jaewook</b><br><b>마지막 수정 일자 : 2017-07-31T01:58:46Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>저는 신재욱 차장이라고 하며 앞으로 해당 케이스를 담당하게 되었습니다.<br><br>현재 케이스 내용을 살펴보는 중이며, 관련하여 업데이트 드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-07-31T01:58:46Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>