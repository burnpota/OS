======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2016-01-14T07:22:08Z</b><br><b>마지막 답변자 : JINKOO HAN</b><br><b>마지막 수정 일자 : 2016-01-19T01:10:03Z</b><br><b>id : 500A000000TPka3IAD</b><br>======================<br><br><b><font size=15>
제목  : Hitachi Open-V Storage  Device Mapper Multipath 값 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>스토리지 볼륨 작업을 위해 효성에서 가이드 받은 Multipath 설정이 아래와 같습니다.<br><br>root@PECCCL01SL /root # cat /etc/multipath.conf | grep -v ^#<br><br>defaults {<br>        polling_interval        60<br>        user_friendly_names     yes<br>}<br>blacklist {<br>        wwid 3600508b1001cb2dadb5d8cb4cf57ddbb<br>        wwid HP_iLO_LUN_00_Media_0_000002660A01-0:0<br>        devnode &quot;^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*&quot;<br>        devnode &quot;^hda[1-9]&quot;<br>}<br><br>devices {<br>        device {<br>                vendor                  &quot;HITACHI&quot;<br>                product                 &quot;OPEN.*&quot;<br>                path_grouping_policy    multibus<br>                path_checker            tur<br>                failback                immediate<br>                features                &quot;1 queue_if_no_path&quot;<br>                no_path_retry           3<br>        }<br>}<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>레드햇 메뉴얼을 보니  queue_if_no_path 관한 문제에 대해 언급이 되어 있는데요,<br><br>위와 같이 설정했을때 페일오버시 문제영향도를 알고 싶습니다.<br><br>그리고 Polling_Interval 의 정확한 의미를 알고 싶습니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>multipath</name></tag></tags><br><comment id="a0aA000000G72S6IAJ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-19T01:10:02Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-19T01:10:01Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>업데이트 감사합니다.<br><br>본 케이스는 Close하도록 하겠습니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-01-19T01:10:01Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G6w3yIAB"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-01-18T13:23:36Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-01-18T13:23:36Z</b><br><br>안녕하세요.<br><br>polling_interval 값이 60으로 되어 있는 상황에서 HBA Cable 절체 -&gt; 복원 테스트를 진행하였습니다.<br><br>복원 시  health Check Time 의 간격이 길어 Active 되는 시간이 다소 오래 걸렸습니다.<br><br>이러한 문제로 우선은 저희 쪽 Default 값 (Polling_Interval : 5 / features : 0 / no_path_retry : fail) 으로 설정하여, <br><br>스토리지 벤더에 문제점 여부를 문의 할 계획입니다.<br><br>감사합니다.<br><br><publishedDate>2016-01-18T13:23:36Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000G1fbxIAB"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-15T05:20:48Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-15T05:22:07Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>Multipath 관련 문서에서 내용을 확인하였습니다. 아마 &quot;5.7. Issues with queue_if_no_path feature&quot; 부분일 것이라고 생각됩니다.<br><br><br>거기에 언급되었던 것은 queue_if_no_path 기능의 경우, 복구를 기다리다가 hang이 되는 현상이 나타날 수 있는 상황에 대한 부분으로 'no_path_retry' 값을 설정하시면 됩니다.<br><br>devices {<br>        device {<br>                [...]<br>                features                &quot;1 queue_if_no_path&quot;<br>                no_path_retry           3<br>        }<br>}<br><br><br>현재 효성의 권장설정 값을 보면, no_path_retry가 '3'으로 설정되어 path에 이상이 있을시에 3번의 시도 후, path가 fail-over됩니다.<br><br><br>&gt; 위와 같이 설정했을때 페일오버시 문제영향도를 알고 싶습니다.<br><br>위의 설정이 fail-over시에 특별한 문제 영향도는 없으나, 다만 현재 retry없이 즉시 fail-over를 고려하시고 계신것으로 알고 있는데, 현재의 설정은 그것이 반영되어 있지 않은 것 같습니다.<br><br><br>이와 관련되어서는 스토리지 벤더와 다시 한 번 의논해보시는 것을 권장 드립니다.<br>======================<br><br>&gt; 그리고 Polling_Interval 의 정확한 의미를 알고 싶습니다.<br><br>Polling_Interval은 일반적으로 path의 health-check interval이라고 보시면 됩니다. 일반적으로 Red HAt의 기본 polling_interval은 '5'로 설정되어지나, 효성의 경우 '60'을 권한 한 것으로 보입니다.<br>해당 값은 초에 해당됩니다.<br><br>참고로 polling_interval은 해당 값에 무조건 health-check를 하는 것은 아니고, 최대 4배의 초까지 발생할 수 있습니다. 즉, health-check가 '60' * 4배인 '240'초에 health-check가 될 수 있는 설정으로 보시면 됩니다.<br><br><br>이부분도 현재 삼성생명에서 원하는 형태인지와 또한 스토리지에서의 권장 부분에 있어서의 의논이 필요해 보입니다.<br>======================<br>업무에 참고하시기 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2016-01-15T05:20:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G1fX2IAJ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-15T05:03:29Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-15T05:03:28Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br><br>&gt; 레드햇 메뉴얼을 보니  queue_if_no_path 관한 문제에 대해 언급이 되어 있는데요,<br>&gt; 위와 같이 설정했을때 페일오버시 문제영향도를 알고 싶습니다.<br><br><br>관련 문제가 언급된 내용이 혹시 어떤 내용인지 link를 제공해주시면 검토해보도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-01-15T05:03:28Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G1dvoIAB"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-15T01:01:45Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-15T01:01:45Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>확인 후, 답변드리도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-01-15T01:01:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>