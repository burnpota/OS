======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-02-06T03:04:13Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-02-22T11:09:55Z</b><br><b>id : 500A000000ZgSXNIA3</b><br>======================<br><br><b><font size=15>
제목  : swap 사용 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br><br>SDS 김지민 선임입니다.<br><br>Redhat 6.4 버전에서 프로세스의 swap 사용 관련해서 문의를 드리려고 합니다.<br><br>SLPARTEL01 서버는 현재 16GB의 swap 중 6GB 정도를 사용 중입니다.<br><br>검색을 통해서<br>memory의 여유 공간이 free + buffers + cached 로 계산이 되어지는 것을 확인하였는데<br>그럼 memory 용량의 여유가 있지만 swap을 사용하는 것 처럼 보여서 혹시 swap 사용에 어떤 기준이 있는지 문의드리려고 합니다.<br><br>추가로 /proc/sys/vm/swappiness 정보도 첨부하였습니다.<br><br>더 필요하신 내역이있으시면 알려주시면 추가하겠습니다.<br><br>root@SLPARTEL01 /root # free -g<br>             total       used       free     shared    buffers     cached<br>Mem:           251        243          8          0          5        180<br>-/+ buffers/cache:         57        194<br>Swap:           15          6          9<br><br>root@SLPARTEL01 /root # cat /proc/sys/vm/swappiness<br>60<br><br> - top 정보<br>top - 11:26:30 up 267 days, 19:46,  1 user,  load average: 10.83, 7.19, 5.38<br>Tasks: 3105 total,   5 running, 3100 sleeping,   0 stopped,   0 zombie<br>Cpu(s): 14.1%us,  6.2%sy,  0.0%ni, 74.4%id,  4.7%wa,  0.0%hi,  0.6%si,  0.0%st<br>Mem:  264108896k total, 254135700k used,  9973196k free,  5760968k buffers<br>Swap: 16777208k total,  6882436k used,  9894772k free, 187960116k cached<br><br>  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  SWAP COMMAND<br>16524 mysql     20   0  144g  48g 4636 S 78.3 19.3 120152:28 6.3g mysqld<br> 7716 root      20   0  304m 8484 5144 S 33.9  0.0 129:02.87    0 Filed<br>12047 root      20   0  301m 6808 4444 S 20.0  0.0  46:08.36    0 Filed<br>13296 root      20   0  303m 9088 4916 R 20.0  0.0   0:27.99    0 Filed<br>41952 root      20   0  623m  23m  824 S 11.7  0.0   1066:13    0 ontuned<br> 6033 root      20   0  300m 5508 3932 S  8.2  0.0  12381:25    0 Filed<br>47773 root      20   0  316m  20m 4656 S  7.9  0.0  11:47.91    0 Filed<br>30001 root      20   0 17376 3664  936 R  4.8  0.0   0:05.06    0 top<br>40323 root      20   0  120m  13m 7932 D  4.1  0.0 128:53.33    0 bpbkar<br>21331 root      20   0  304m  10m 4492 S  2.2  0.0   0:37.13    0 Filed<br>40324 root      20   0  200m  35m  27m S  1.3  0.0  37:36.23    0 bptm<br>  105 root      20   0     0    0    0 S  0.6  0.0 224:50.09    0 kblockd/15<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPARTEL01</hostname><br><br><br><comment id="a0aA000000La5JxIAJ"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-06T07:41:24Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-06T07:41:23Z</b><br><br>리눅스 시스템에서의 buffer와 cache 메모리는 필요한 경우에 모두 반환이 가능한 메모리이기 때문에<br>사실상 free라고 생각하셔도됩니다. free 명령의 출력 결과에는 available로 표시하고 있습니다.<br><br>실제 사용가능한 메모리의 크기는 buffer와 cache를 포함한 available 크기 만큼입니다.<br><br>$ free -m<br>              total        used        free      shared  buff/cache   available<br>Mem:           7701        1580        1307         333        4813        5213<br>Swap:          7935          13        7922<br><br>허 경 드림.<br><br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-02-06T07:41:23Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000La58uIAB"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-06T07:24:21Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-06T07:24:21Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>sar -r data를 확인한 내역인데 혹시 아래와 같다면 실제 사용할 수 있는 여유 memory를 어떻게 해석해야하는지 문의드리려고 합니다.<br><br>free -g의 결과를 보고 계산하는 방식과 동일한 것인가요?<br><br>root@SLPARTEL01 /root # sar -r -s &quot;15:00:00&quot; -e &quot;16:00:00&quot;<br>Linux 2.6.32-358.23.2.el6.x86_64 (SLPARTEL01)   2018년 02월 06일        _x86_64_        (16 CPU)<br><br>            kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit<br>              7532484 256576412     97.15   5846744 189792360 232340588     82.72<br>              7432728 256676168     97.19   5847580 189891612 232167232     82.66<br>              7229488 256879408     97.26   5848348 190070392 232540616     82.79<br>              7172956 256935940     97.28   5848844 190112640 232772380     82.87<br>              7202132 256906764     97.27   5849328 190135608 232475776     82.77<br>              7114560 256994336     97.31   5849888 190183884 232603364     82.81<br>              7072828 257036068     97.32   5850452 190215784 232490244     82.77<br>              6768240 257340656     97.44   5851092 190501704 232404608     82.74<br>              6599068 257509828     97.50   5851828 190630632 232391916     82.74<br>              6579684 257529212     97.51   5852508 190681372 232597708     82.81<br>              6501656 257607240     97.54   5853128 190739164 232607204     82.81<br>              6336316 257772580     97.60   5853788 190781724 232808788     82.88<br>              6397040 257711856     97.58   5854428 190813848 232715776     82.85<br>              6333948 257774948     97.60   5855136 190868396 232821416     82.89<br>              6284564 257824332     97.62   5856148 190964308 232480544     82.77<br>              6218824 257890072     97.65   5856848 190994972 232897240     82.92<br>              6089996 258018900     97.69   5857588 191093844 232859784     82.90<br>              5744388 258364508     97.82   5858240 191398656 233170676     83.01<br>              5758392 258350504     97.82   5858776 191418700 233465248     83.12<br>Average:      6651015 257457881     97.48   5852668 190594189 232663743     82.83<br><br><publishedDate>2018-02-06T07:24:21Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000La4l9IAB"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-06T06:46:48Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-06T06:46:48Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>물리 메모리가 충분히 남아 있어도 swap이 사용되는 것은 리눅스 운영체제에서는 자연스러운 현상입니다.<br>vm.swappiness 값을 조정하여 swap 사용율을 간접적으로 조정할 수 있습니다. 다만, 조정하실 때에는 조금씩 증가 또는 감소 시켜서 시스템 성능에 영향을 확인하시는 것이 필요합니다. 0으로 설정할 경우 swap이 일어나지는 않지만, 메모리가 부족할 때 문제가 생길 수 있기 때문에 주의가 필요합니다.<br><br>아래 KBase 문서를 참고하시기 바랍니다.<br><br>Why does my system utilize swap space instead of freeing up cache and buffer memory?<br>https://access.redhat.com/solutions/3367<br><br>고맙습니다.<br>허 경 드림.<br><br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-02-06T06:46:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>