======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-01-18T07:02:40Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2018-06-15T05:08:20Z</b><br><b>id : 500A000000Zduc1IAB</b><br>======================<br><br><b><font size=15>
제목  : ssh 접속 시 hang 현상 관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>ssh 접속 시 hang 현상이 발생하여서 문의드리려고 합니다.<br>1번 서버에만 접속하려고 할 때 hang 현상이 발생하고 다른 서버의 경우는 정상 접속이 되는 상태입니다.<br><br>혹시 추가로 필요한 내역이 있으시면 알려주시면 추가하겠습니다.<br><br><br>root@SLDAFIDL01 /root # ssh (1번 서버 IP)<br>======================<br><br><br>^C<br><br>root@SLDAFIDL01 /root # ssh (2번 서버 IP)<br>                        *********** W A R N I N G ***********<br><br> This system is available to authorized personnels only of Samsung Life Insurance Co.,LTD.<br> Your all activities are being monitored and you can be penalized for<br> illegal access according to related regulations.<br><br>                        *************************************<br>root@(2번 서버 IP)'s password:<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLDAFIDL01</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000MsWlnIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-06-15T05:08:17Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-06-15T05:08:17Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>해결 방법을 공유해주셔서 감사드립니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 재개하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-06-15T05:08:17Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MsWfaIAF"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-06-15T04:55:18Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-06-15T04:55:18Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>업무 담당자쪽 답변을 기다리고 있었는데<br><br>해당 건 관련해서는 sftp를 scp로 수정 후 해결을 하였다는 답변을 받아서<br><br>추가적으로 확인은 안해도 될 것 같습니다.<br><br>감사합니다.<br><br><publishedDate>2018-06-15T04:55:18Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MsVVyIAN"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-06-15T02:28:52Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-06-15T02:28:51Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin,<br>Senior TSE, Brisbane, APAC<br>Red Hat Customer Experience and Engagement<br><br><publishedDate>2018-06-15T02:28:51Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MhO4kIAF"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-06-04T12:13:43Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-06-05T01:17:41Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>wireshark 버전을 확인해보시기 바랍니다.<br><br>rpm -qi wireshark<br><br>제가 쓰는 wireshark 버전은 아래와 같습니다.<br><br>Name        : wireshark<br>Version     : 1.10.14<br>Release     : 14.el7<br>Architecture: x86_64<br>Install Date: Wed 09 May 2018 05:27:25 PM CST<br>Group       : Applications/Internet<br>Size        : 70087529<br>License     : GPL+<br>Signature   : RSA/SHA256, Thu 04 May 2017 07:51:48 PM CST, Key ID 199e2f91fd431d51<br>Source RPM  : wireshark-1.10.14-14.el7.src.rpm<br>Build Date  : Thu 04 May 2017 07:04:51 PM CST<br>Build Host  : x86-039.build.eng.bos.redhat.com<br>Relocations : (not relocatable)<br>Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;<br>Vendor      : Red Hat, Inc.<br>URL         : http://www.wireshark.org/<br>Summary     : Network traffic analyzer<br>Description :<br>Wireshark is a network traffic analyzer for Unix-ish operating systems.<br><br>This package lays base for libpcap, a packet capture and filtering<br>library, contains command-line utilities, contains plugins and<br>documentation for wireshark. A graphical user interface is packaged<br>separately to GTK+ package.<br><br><publishedDate>2018-06-04T12:13:43Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MhJzpIAF"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-06-04T07:15:20Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-06-04T07:15:19Z</b><br><br>안녕하세요<br><br>문의 시점의 파일을 아래와 같이 tshark -r로 확인하였는데 <br>아래의 예를 보면 MTU 사이즈는 혹시 어떤 부분인지 문의드려도될까요?<br><br>   1   0.000000 100.253.45.211 -&gt; 100.252.201.240 TCP 33198 &gt; ssh [SYN] Seq=0 Win=26880 Len=0 MSS=8960 TSV=2552636814 TSER=0 WS=7<br><br>root@SLTTESTAL01 /data/work/180604 # tshark -r ./SLDAFIDL01-2018-01-19-17-36-49.pcap<br>Running as user &quot;root&quot; and group &quot;root&quot;. This could be dangerous.<br>  1   0.000000 100.253.45.211 -&gt; 100.252.201.240 TCP 33198 &gt; ssh [SYN] Seq=0 Win=26880 Len=0 MSS=8960 TSV=2552636814 TSER=0 WS=7<br>  2   0.001588 100.252.201.240 -&gt; 100.253.45.211 TCP ssh &gt; 33198 [SYN, ACK] Seq=0 Ack=1 Win=17896 Len=0 MSS=8960 TSV=2023447078 TSER=2552636814 WS=7<br>  3   0.001617 100.253.45.211 -&gt; 100.252.201.240 TCP 33198 &gt; ssh [ACK] Seq=1 Ack=1 Win=26880 Len=0 TSV=2552636816 TSER=2023447078<br>  4   0.002262 100.253.45.211 -&gt; 100.252.201.240 SSH Client Protocol: SSH-2.0-OpenSSH_6.6.1\r<br>  5   0.003046 100.252.201.240 -&gt; 100.253.45.211 TCP ssh &gt; 33198 [ACK] Seq=1 Ack=24 Win=17920 Len=0 TSV=2023447080 TSER=2552636817<br>  6   0.014763 100.252.201.240 -&gt; 100.253.45.211 SSHv2 Server Protocol: SSH-2.0-OpenSSH_5.3\r<br>  7   0.014812 100.253.45.211 -&gt; 100.252.201.240 TCP 33198 &gt; ssh [ACK] Seq=24 Ack=22 Win=26880 Len=0 TSV=2552636829 TSER=2023447092<br>  8   0.015065 100.253.45.211 -&gt; 100.252.201.240 SSHv2 Client: Key Exchange Init<br>  9   0.016302 100.252.201.240 -&gt; 100.253.45.211 SSHv2 Server: Key Exchange Init<br> 10   0.029372 100.252.201.240 -&gt; 100.253.45.211 TCP 41265 &gt; ssh [SYN] Seq=0 Win=17920 Len=0 MSS=8960 TSV=2023447106 TSER=0 WS=7<br> 11   0.029396 100.253.45.211 -&gt; 100.252.201.240 TCP ssh &gt; 41265 [SYN, ACK] Seq=0 Ack=1 Win=26844 Len=0 MSS=8960 TSV=2552636844 TSER=2023447106 WS=7<br> 12   0.030835 100.252.201.240 -&gt; 100.253.45.211 TCP 41265 &gt; ssh [ACK] Seq=1 Ack=1 Win=17920 Len=0 TSV=2023447108 TSER=2552636844<br> 13   0.042607 100.253.45.211 -&gt; 100.252.201.240 SSH Server Protocol: SSH-2.0-OpenSSH_6.6.1\r<br> 14   0.043506 100.252.201.240 -&gt; 100.253.45.211 TCP 41265 &gt; ssh [ACK] Seq=1 Ack=24 Win=17920 Len=0 TSV=2023447121 TSER=2552636857<br> 15   0.056044 100.253.45.211 -&gt; 100.252.201.240 TCP 33198 &gt; ssh [ACK] Seq=1992 Ack=862 Win=28672 Len=0 TSV=2552636871 TSER=2023447094<br> 16   0.061321 100.252.201.240 -&gt; 100.253.45.211 SSH Client Protocol: SSH-2.0-OpenSSH_5.3\r<br> 17   0.061368 100.253.45.211 -&gt; 100.252.201.240 TCP ssh &gt; 41265 [ACK] Seq=24 Ack=22 Win=26880 Len=0 TSV=2552636876 TSER=2023447139<br> 18   0.062219 100.252.201.240 -&gt; 100.253.45.211 SSHv2 Client: Key Exchange Init<br> 19   0.062235 100.253.45.211 -&gt; 100.252.201.240 TCP ssh &gt; 41265 [ACK] Seq=24 Ack=982 Win=28800 Len=0 TSV=2552636877 TSER=2023447139<br> 20   0.063846 100.253.45.211 -&gt; 100.252.201.240 SSHv2 Server: Key Exchange Init<br> 21   0.217045 100.253.45.211 -&gt; 100.252.201.240 SSHv2 Client: Diffie-Hellman GEX Request<br> 22   0.217916 100.252.201.240 -&gt; 100.253.45.211 TCP [TCP Dup ACK 9#1] ssh &gt; 33198 [ACK] Seq=862 Ack=24 Win=17920 Len=0 TSV=2023447295 TSER=2552636829 SLE=1992 SRE=2016<br> 23   0.219047 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Out-Of-Order] Client: Key Exchange Init<br> 24   0.264046 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Server: Key Exchange Init<br> 25   0.421048 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Client: Key Exchange Init<br> 26   0.465047 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Server: Key Exchange Init<br> 27   0.826046 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Encrypted request packet len=1968<br> 28   0.868049 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Encrypted response packet len=1640<br> 29   1.637044 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Encrypted request packet len=1968<br> 30   1.673050 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Encrypted response packet len=1640<br> 31   3.257045 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Encrypted request packet len=1968<br> 32   3.285047 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Encrypted response packet len=1640<br> 33   6.497047 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Encrypted request packet len=1968<br> 34   6.513049 100.253.45.211 -&gt; 100.252.201.240 SSHv2 [TCP Retransmission] Encrypted response packet len=1640<br><br>감사합니다.<br><br><publishedDate>2018-06-04T07:15:19Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MhJXWIA3"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-06-04T06:36:48Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-06-04T06:36:47Z</b><br><br>안녕하세요, 김지민 선임님<br><br>Red Hat Global Support Services 이성빈입니다. <br><br>tshark를 사용하신다면 별도의 옵션이 필요없으며,<br>아래와 같이 -r 옵션으로 파일을 읽어오면 디폴트로 MTU 사이즈가 확인이 됩니다.<br>혹은 wireshark 로 바로 확인 가능하십니다.<br><br>$ tshark -r SLDAFIDL01-2018-01-19-17-36-49.pcap <br><br>감사합니다.<br><br><publishedDate>2018-06-04T06:36:47Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MhJSgIAN"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-06-04T06:30:15Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-06-04T06:30:15Z</b><br><br>안녕하세요<br><br>다시 한번 질문드려서 죄송합니다.<br><br>100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init<br><br>혹시 tcpdump 받은 파일에서<br>위와 같이 2034 MTU 사이즈까지 결과로 확인해보려면 추가 옵션이 있는지 문의드리려고 합니다.<br><br>감사합니다.<br><br><publishedDate>2018-06-04T06:30:15Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MhJQfIAN"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-06-04T06:25:22Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-06-04T06:25:21Z</b><br><br>안녕하세요, 김지민 선임님<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>피드백 감사드립니다.<br><br>본 케이스와 연관되어 추가적으로 문의하실 사항이 있으신가요?<br><br>본 안내 후 일정기간 답변이 없다면 본 케이스는 자동으로 종료 상태가 됨을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하시다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2018-06-04T06:25:21Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MhJOPIA3"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-06-04T06:21:36Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-06-04T06:21:35Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br>빠른 답변 감사드립니다.<br><br>감사합니다.<br><br><publishedDate>2018-06-04T06:21:35Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MgxDYIAZ"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-06-01T06:17:31Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-06-01T06:17:31Z</b><br><br>안녕하세요, <br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>본 케이스 담당했던 이성빈이라고 합니다.<br>당시에 보내주신 패킷덤프 바이너리파일들은 tshark 명령을 통해 확인하였습니다.<br>명령을 통해 패킷의 정보를 확인하시려면 tshark 명령으로 아래와 같이 실행하시면 됩니다.<br><br>$ tshark -r SLDAFIDL01-2018-01-19-17-36-49.pcap <br><br>  1          0 100.253.45.211 -&gt; 100.252.201.240 TCP 74 33198 &gt; ssh [SYN] Seq=0 Win=26880 Len=0 MSS=8960 SACK_PERM=1 TSval=2552636814 TSecr=0 WS=128<br>  2          0 100.252.201.240 -&gt; 100.253.45.211 TCP 74 ssh &gt; 33198 [SYN, ACK] Seq=0 Ack=1 Win=17896 Len=0 MSS=8960 SACK_PERM=1 TSval=2023447078 TSecr=2552636814 WS=128<br>  3          0 100.253.45.211 -&gt; 100.252.201.240 TCP 66 33198 &gt; ssh [ACK] Seq=1 Ack=1 Win=26880 Len=0 TSval=2552636816 TSecr=2023447078<br>  4          0 100.253.45.211 -&gt; 100.252.201.240 SSH 89 Client Protocol: SSH-2.0-OpenSSH_6.6.1\r<br>  5          0 100.252.201.240 -&gt; 100.253.45.211 TCP 66 ssh &gt; 33198 [ACK] Seq=1 Ack=24 Win=17920 Len=0 TSval=2023447080 TSecr=2552636817<br>  6          0 100.252.201.240 -&gt; 100.253.45.211 SSHv2 87 Server Protocol: SSH-2.0-OpenSSH_5.3\r<br>  7          0 100.253.45.211 -&gt; 100.252.201.240 TCP 66 33198 &gt; ssh [ACK] Seq=24 Ack=22 Win=26880 Len=0 TSval=2552636829 TSecr=2023447092<br>  8          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 Client: Key Exchange Init<br>  9          0 100.252.201.240 -&gt; 100.253.45.211 SSHv2 906 Server: Key Exchange Init<br> 10          0 100.252.201.240 -&gt; 100.253.45.211 TCP 74 41265 &gt; ssh [SYN] Seq=0 Win=17920 Len=0 MSS=8960 SACK_PERM=1 TSval=2023447106 TSecr=0 WS=128<br> 11          0 100.253.45.211 -&gt; 100.252.201.240 TCP 74 ssh &gt; 41265 [SYN, ACK] Seq=0 Ack=1 Win=26844 Len=0 MSS=8960 SACK_PERM=1 TSval=2552636844 TSecr=2023447106 WS=128<br> 12          0 100.252.201.240 -&gt; 100.253.45.211 TCP 66 41265 &gt; ssh [ACK] Seq=1 Ack=1 Win=17920 Len=0 TSval=2023447108 TSecr=2552636844<br> 13          0 100.253.45.211 -&gt; 100.252.201.240 SSH 89 Server Protocol: SSH-2.0-OpenSSH_6.6.1\r<br> 14          0 100.252.201.240 -&gt; 100.253.45.211 TCP 66 41265 &gt; ssh [ACK] Seq=1 Ack=24 Win=17920 Len=0 TSval=2023447121 TSecr=2552636857<br> 15          0 100.253.45.211 -&gt; 100.252.201.240 TCP 66 33198 &gt; ssh [ACK] Seq=1992 Ack=862 Win=28672 Len=0 TSval=2552636871 TSecr=2023447094<br> 16          0 100.252.201.240 -&gt; 100.253.45.211 SSH 87 Client Protocol: SSH-2.0-OpenSSH_5.3\r<br> 17          0 100.253.45.211 -&gt; 100.252.201.240 TCP 66 ssh &gt; 41265 [ACK] Seq=24 Ack=22 Win=26880 Len=0 TSval=2552636876 TSecr=2023447139<br> 18          0 100.252.201.240 -&gt; 100.253.45.211 SSHv2 1026 Client: Key Exchange Init<br> 19          0 100.253.45.211 -&gt; 100.252.201.240 TCP 66 ssh &gt; 41265 [ACK] Seq=24 Ack=982 Win=28800 Len=0 TSval=2552636877 TSecr=2023447139<br> 20          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 1706 Server: Key Exchange Init<br> 21          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 90 Client: Diffie-Hellman GEX Request<br> 22          0 100.252.201.240 -&gt; 100.253.45.211 TCP 78 [TCP Dup ACK 9#1] ssh &gt; 33198 [ACK] Seq=862 Ack=24 Win=17920 Len=0 TSval=2023447295 TSecr=2552636829 SLE=1992 SRE=2016<br> 23          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Out-Of-Order] Client: Key Exchange Init<br> 24          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 1706 [TCP Retransmission] Server: Key Exchange Init<br> 25          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init<br> 26          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 1706 [TCP Retransmission] Server: Key Exchange Init<br> 27          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init<br> 28          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 1706 [TCP Retransmission] Server: Key Exchange Init<br> 29          1 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init<br> 30          1 100.253.45.211 -&gt; 100.252.201.240 SSHv2 1706 [TCP Retransmission] Server: Key Exchange Init<br> 31          3 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init<br> 32          3 100.253.45.211 -&gt; 100.252.201.240 SSHv2 1706 [TCP Retransmission] Server: Key Exchange Init<br> 33          6 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init<br> 34          6 100.253.45.211 -&gt; 100.252.201.240 SSHv2 1706 [TCP Retransmission] Server: Key Exchange Init<br><br><br>감사합니다.<br><br><publishedDate>2018-06-01T06:17:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MgwC0IAJ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-06-01T04:15:10Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-06-01T04:15:10Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>CASE 02014819에서 문의했었던<br>tcpdump 파일 (.pcap)을 확인을 해봤는데요.<br><br>아래와 같이 확인이되는데 분석 내용 부분 같이 TCP Out-Of-Order나 TCP Retransmission이 일어난 부분에 대한 정보가 보이지 않아서<br>혹시 특이한 옵션이 있는 것인지 문의드리려고 합니다.<br><br> - 분석 내용 부분<br>23          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Out-Of-Order] Client: Key Exchange Init<br> 25          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init   &lt;-------<br> <br> - 확인한 부분 (tcpdump -r)<br>root@SLDAFIDL01 /sysadmin/work/180119 # tcpdump -r ./SLDAFIDL01-2018-01-19-17-36-49.pcap<br>reading from file ./SLDAFIDL01-2018-01-19-17-36-49.pcap, link-type EN10MB (Ethernet)<br>17:37:54.709148 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [S], seq 612355270, win 26880, options [mss 8960,sackOK,TS val 2552636814 ecr 0,nop,wscale 7], length 0<br>17:37:54.710736 IP SLTTESTAL01.ssh &gt; SLDAFIDL01.33198: Flags [S.], seq 1686546211, ack 612355271, win 17896, options [mss 8960,sackOK,TS val 2023447078 ecr 2552636814,nop,wscale 7], length 0<br>17:37:54.710765 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [.], ack 1, win 210, options [nop,nop,TS val 2552636816 ecr 2023447078], length 0<br>17:37:54.711410 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [P.], seq 1:24, ack 1, win 210, options [nop,nop,TS val 2552636817 ecr 2023447078], length 23<br>17:37:54.712194 IP SLTTESTAL01.ssh &gt; SLDAFIDL01.33198: Flags [.], ack 24, win 140, options [nop,nop,TS val 2023447080 ecr 2552636817], length 0<br>17:37:54.723911 IP SLTTESTAL01.ssh &gt; SLDAFIDL01.33198: Flags [P.], seq 1:22, ack 24, win 140, options [nop,nop,TS val 2023447092 ecr 2552636817], length 21<br>17:37:54.723960 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [.], ack 22, win 210, options [nop,nop,TS val 2552636829 ecr 2023447092], length 0<br>17:37:54.724213 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [P.], seq 24:1992, ack 22, win 210, options [nop,nop,TS val 2552636830 ecr 2023447092], length 1968<br>17:37:54.725450 IP SLTTESTAL01.ssh &gt; SLDAFIDL01.33198: Flags [P.], seq 22:862, ack 24, win 140, options [nop,nop,TS val 2023447094 ecr 2552636829], length 840<br>17:37:54.738520 IP SLTTESTAL01.41265 &gt; SLDAFIDL01.ssh: Flags [S], seq 679678564, win 17920, options [mss 8960,sackOK,TS val 2023447106 ecr 0,nop,wscale 7], length 0<br>17:37:54.738544 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [S.], seq 1325967145, ack 679678565, win 26844, options [mss 8960,sackOK,TS val 2552636844 ecr 2023447106,nop,wscale 7], length 0<br>17:37:54.739983 IP SLTTESTAL01.41265 &gt; SLDAFIDL01.ssh: Flags [.], ack 1, win 140, options [nop,nop,TS val 2023447108 ecr 2552636844], length 0<br>17:37:54.751755 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [P.], seq 1:24, ack 1, win 210, options [nop,nop,TS val 2552636857 ecr 2023447108], length 23<br>17:37:54.752654 IP SLTTESTAL01.41265 &gt; SLDAFIDL01.ssh: Flags [.], ack 24, win 140, options [nop,nop,TS val 2023447121 ecr 2552636857], length 0<br>17:37:54.765192 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [.], ack 862, win 224, options [nop,nop,TS val 2552636871 ecr 2023447094], length 0<br>17:37:54.770469 IP SLTTESTAL01.41265 &gt; SLDAFIDL01.ssh: Flags [P.], seq 1:22, ack 24, win 140, options [nop,nop,TS val 2023447139 ecr 2552636857], length 21<br>17:37:54.770516 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [.], ack 22, win 210, options [nop,nop,TS val 2552636876 ecr 2023447139], length 0<br>17:37:54.771367 IP SLTTESTAL01.41265 &gt; SLDAFIDL01.ssh: Flags [P.], seq 22:982, ack 24, win 140, options [nop,nop,TS val 2023447139 ecr 2552636876], length 960<br>17:37:54.771383 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [.], ack 982, win 225, options [nop,nop,TS val 2552636877 ecr 2023447139], length 0<br>17:37:54.772994 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [P.], seq 24:1664, ack 982, win 225, options [nop,nop,TS val 2552636878 ecr 2023447139], length 1640<br>17:37:54.926193 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [P.], seq 1992:2016, ack 862, win 224, options [nop,nop,TS val 2552637032 ecr 2023447094], length 24<br>17:37:54.927064 IP SLTTESTAL01.ssh &gt; SLDAFIDL01.33198: Flags [.], ack 24, win 140, options [nop,nop,TS val 2023447295 ecr 2552636829,nop,nop,sack 1 {1992:2016}], length 0<br>17:37:54.928195 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [P.], seq 24:1992, ack 862, win 224, options [nop,nop,TS val 2552637034 ecr 2023447295], length 1968<br>17:37:54.973194 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [P.], seq 24:1664, ack 982, win 225, options [nop,nop,TS val 2552637079 ecr 2023447139], length 1640<br>17:37:55.130196 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [P.], seq 24:1992, ack 862, win 224, options [nop,nop,TS val 2552637236 ecr 2023447295], length 1968<br>17:37:55.174195 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [P.], seq 24:1664, ack 982, win 225, options [nop,nop,TS val 2552637280 ecr 2023447139], length 1640<br>17:37:55.535194 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [P.], seq 24:1992, ack 862, win 224, options [nop,nop,TS val 2552637641 ecr 2023447295], length 1968<br>17:37:55.577197 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [P.], seq 24:1664, ack 982, win 225, options [nop,nop,TS val 2552637683 ecr 2023447139], length 1640<br>17:37:56.346192 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [P.], seq 24:1992, ack 862, win 224, options [nop,nop,TS val 2552638452 ecr 2023447295], length 1968<br>17:37:56.382198 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [P.], seq 24:1664, ack 982, win 225, options [nop,nop,TS val 2552638488 ecr 2023447139], length 1640<br>17:37:57.966193 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [P.], seq 24:1992, ack 862, win 224, options [nop,nop,TS val 2552640072 ecr 2023447295], length 1968<br>17:37:57.994195 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [P.], seq 24:1664, ack 982, win 225, options [nop,nop,TS val 2552640100 ecr 2023447139], length 1640<br>17:38:01.206195 IP SLDAFIDL01.33198 &gt; SLTTESTAL01.ssh: Flags [P.], seq 24:1992, ack 862, win 224, options [nop,nop,TS val 2552643312 ecr 2023447295], length 1968<br>17:38:01.222197 IP SLDAFIDL01.ssh &gt; SLTTESTAL01.41265: Flags [P.], seq 24:1664, ack 982, win 225, options [nop,nop,TS val 2552643328 ecr 2023447139], length 1640<br><br>감사합니다.<br><br><publishedDate>2018-06-01T04:15:10Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LYI1gIAH"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-30T03:37:58Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-30T03:37:57Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service입니다.<br><br>마지막 안내후 일정기간동안 답변이 없으셔서 본 케이스를 close 처리 하려고 합니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.  <br>  <br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발생됩니다. <br>고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다. <br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.  <br>  <br>감사합니다.<br><br><publishedDate>2018-01-30T03:37:57Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LX4SZIA1"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-24T02:13:21Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-24T02:13:20Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services입니다.<br><br>피드백 감사합니다,<br>SSH hang 현상이 해소된 것으로 확인하고 본 케이스 close 처리해도 될가요?<br><br>감사합니다.<br><br><publishedDate>2018-01-24T02:13:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LWpxdIAD"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-23T09:24:41Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-23T09:24:41Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>확인 감사드립니다.<br><br><publishedDate>2018-01-23T09:24:41Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LWVGTIA5"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-22T07:12:34Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-22T07:12:34Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>추측하건대 이슈가 발생한 ssh 서버와 클라이언트 통신중 패킷이 보내지는 경로에 MTU가<br>2000보다 작은 장비가 있었을것으로 추측됩니다.<br>~~~~<br>100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init<br>~~~~<br>상기와 같이 재전송현상이 발생되었던 패킷의 length가 2034인 것으로 미루어 보면 전송중에 MTU가 <br>이보다 작은 장비를 거치게 되면서 장애가 발생된 것으로 보입니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-22T07:12:34Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LWUNdIAP"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-22T05:50:51Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-22T05:50:51Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>답변감사드립니다.<br><br>알려주신 내용 중 MTU 값을 확인해보니<br><br>SLDAFIDL01 (MTU=9000) / SLTTESTAL01 (MTU=9000) 이었는데<br><br>SLDAFIDL01의 MTU 값을 일단 1500으로 변경해서 통신이 되기는 하였습니다.<br><br>AS-IS<br>SLDAFIDL01 (MTU=9000) / SLTTESTAL01 (MTU=9000)  = ssh 실패<br>SLDAFIDL01 (MTU=1500) / SLTTESTAL01 (MTU=9000)  = ssh 성공<br><br>MTU 값이 원인인 것 같기는 한데 혹시 어떠한 차이 때문에 통신이 안되었는지를 문의드리려고 합니다.<br><br><publishedDate>2018-01-22T05:50:51Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LWTAEIA5"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-22T02:33:30Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-22T02:33:30Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>보내주신 tcpdump 파일을 확인해본 결과 아래와 같은 현상을 발견했습니다.<br><br>SLDAFIDL01 서버에서 SLTTESTAL01 로 ssh 연결 시도중, <br>client (SLDAFIDL01) 에서 보낸 패킷이 server (SLTTESTAL01) 로 도착하지 못하는 것으로 확인이 됩니다.<br><br>client:<br>~~<br>  1          0 100.253.45.211 -&gt; 100.252.201.240 TCP 74 33198 &gt; ssh [SYN] Seq=0 Win=26880 Len=0 MSS=8960 SACK_PERM=1 TSval=2552636814 TSecr=0 WS=128<br>  2          0 100.252.201.240 -&gt; 100.253.45.211 TCP 74 ssh &gt; 33198 [SYN, ACK] Seq=0 Ack=1 Win=17896 Len=0 MSS=8960 SACK_PERM=1 TSval=2023447078 TSecr=2552636814 WS=128<br>  3          0 100.253.45.211 -&gt; 100.252.201.240 TCP 66 33198 &gt; ssh [ACK] Seq=1 Ack=1 Win=26880 Len=0 TSval=2552636816 TSecr=2023447078<br>  4          0 100.253.45.211 -&gt; 100.252.201.240 SSH 89 Client Protocol: SSH-2.0-OpenSSH_6.6.1\r<br>  5          0 100.252.201.240 -&gt; 100.253.45.211 TCP 66 ssh &gt; 33198 [ACK] Seq=1 Ack=24 Win=17920 Len=0 TSval=2023447080 TSecr=2552636817<br>  6          0 100.252.201.240 -&gt; 100.253.45.211 SSHv2 87 Server Protocol: SSH-2.0-OpenSSH_5.3\r<br>  7          0 100.253.45.211 -&gt; 100.252.201.240 TCP 66 33198 &gt; ssh [ACK] Seq=24 Ack=22 Win=26880 Len=0 TSval=2552636829 TSecr=2023447092<br>  8          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 Client: Key Exchange Init<br>  9          0 100.252.201.240 -&gt; 100.253.45.211 SSHv2 906 Server: Key Exchange Init<br> 15          0 100.253.45.211 -&gt; 100.252.201.240 TCP 66 33198 &gt; ssh [ACK] Seq=1992 Ack=862 Win=28672 Len=0 TSval=2552636871 TSecr=2023447094<br> 21          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 90 Client: Diffie-Hellman GEX Request<br> 22          0 100.252.201.240 -&gt; 100.253.45.211 TCP 78 [TCP Dup ACK 9#1] ssh &gt; 33198 [ACK] Seq=862 Ack=24 Win=17920 Len=0 TSval=2023447295 TSecr=2552636829 SLE=1992 SRE=2016<br> 23          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Out-Of-Order] Client: Key Exchange Init<br> 25          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init   &lt;-------<br> 27          0 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init   &lt;-------<br> 29          1 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init   &lt;-------<br> 31          3 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init   &lt;-------<br> 33          6 100.253.45.211 -&gt; 100.252.201.240 SSHv2 2034 [TCP Retransmission] Client: Key Exchange Init   &lt;-------<br>~~<br><br>server:<br><br>~~<br>167         64 100.253.45.211 -&gt; 100.252.201.240 TCP 74 33198 &gt; ssh [SYN] Seq=0 Win=26880 Len=0 MSS=8960 SACK_PERM=1 TSval=2552636814 TSecr=0 WS=128<br>168         64 100.252.201.240 -&gt; 100.253.45.211 TCP 74 ssh &gt; 33198 [SYN, ACK] Seq=0 Ack=1 Win=17896 Len=0 MSS=8960 SACK_PERM=1 TSval=2023447078 TSecr=2552636814 WS=128<br>169         64 100.253.45.211 -&gt; 100.252.201.240 TCP 66 33198 &gt; ssh [ACK] Seq=1 Ack=1 Win=26880 Len=0 TSval=2552636816 TSecr=2023447078<br>170         64 100.253.45.211 -&gt; 100.252.201.240 SSH 89 Client Protocol: SSH-2.0-OpenSSH_6.6.1\r<br>171         64 100.252.201.240 -&gt; 100.253.45.211 TCP 66 ssh &gt; 33198 [ACK] Seq=1 Ack=24 Win=17920 Len=0 TSval=2023447080 TSecr=2552636817<br>172         64 100.252.201.240 -&gt; 100.253.45.211 SSHv2 87 Server Protocol: SSH-2.0-OpenSSH_5.3\r<br>173         64 100.253.45.211 -&gt; 100.252.201.240 TCP 66 33198 &gt; ssh [ACK] Seq=24 Ack=22 Win=26880 Len=0 TSval=2552636829 TSecr=2023447092<br>174         64 100.252.201.240 -&gt; 100.253.45.211 SSHv2 906 Server: Key Exchange Init<br>180         64 100.253.45.211 -&gt; 100.252.201.240 TCP 66 [TCP Previous segment not captured] 33198 &gt; ssh [ACK] Seq=1992 Ack=862 Win=28672 Len=0 TSval=2552636871 TSecr=2023447094<br>187         65 100.253.45.211 -&gt; 100.252.201.240 SSHv2 90 Client: Diffie-Hellman GEX Request<br>188         65 100.252.201.240 -&gt; 100.253.45.211 TCP 78 [TCP Dup ACK 174#1] ssh &gt; 33198 [ACK] Seq=862 Ack=24 Win=17920 Len=0 TSval=2023447295 TSecr=2552636829 SLE=1992 SRE=2016<br><br>(위에서 &quot;&lt;---&quot; 로 표시된 서버에서 보낸 패킷이 도착하지 못했음)<br>~~<br><br>따라서 현재 네트워크 이슈가 있는 것으로 보이며 먼저 네트워크에 MTU , firewall ,NAT 등 패킷전송에 장애가 될만한 <br>사항이 있는지 점검이 필요합니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-22T02:33:30Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LNlEgIAL"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-19T08:41:48Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-19T08:41:48Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>양쪽 서버에서 tcpdump 실행 후 ssh 시도해보고 해당 tcpdump upload 하였습니다.<br><br>SLDAFIDL01-2018-01-19-17-36-49.pcap<br>SLTTESTAL01-2018-01-19-17-36-49.pcap<br><br><br>감사합니다.<br><br><publishedDate>2018-01-19T08:41:48Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LNkr1IAD"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-19T08:06:12Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-19T08:06:12Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>양노드에서 아래와 같이 동시에 tcpdump 실행후 ssh 시도 해보시기 바랍니다.<br><br>tcpdump -n -s 0 -i &lt;interface&gt; -w /tmp/$(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;).pcap port 22  &lt;---- &lt;interface&gt; 를 적절한 인터페이스명으로 치환.<br><br>패킷 덤프 파일 첨부 부탁드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-19T08:06:12Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LNk85IAD"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-19T06:55:47Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-19T06:55:47Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>-vvv option 후 확인한 내역입니다.<br><br>root@SLDAFIDL01 /root # ssh -vvv (SLTTESTAL01 IP)<br>OpenSSH_6.6.1, OpenSSL 1.0.1e-fips 11 Feb 2013<br>debug1: Reading configuration data /etc/ssh/ssh_config<br>debug1: /etc/ssh/ssh_config line 56: Applying options for *<br>debug2: ssh_connect: needpriv 0<br>debug1: Connecting to (SLTTESTAL01 IP) [(SLTTESTAL01 IP)] port 22.<br>debug1: Connection established.<br>debug1: permanently_set_uid: 0/0<br>debug3: Incorrect RSA1 identifier<br>debug3: Could not load &quot;/root/.ssh/id_rsa&quot; as a RSA1 public key<br>debug1: identity file /root/.ssh/id_rsa type 1<br>debug1: identity file /root/.ssh/id_rsa-cert type -1<br>debug1: identity file /root/.ssh/id_dsa type -1<br>debug1: identity file /root/.ssh/id_dsa-cert type -1<br>debug1: identity file /root/.ssh/id_ecdsa type -1<br>debug1: identity file /root/.ssh/id_ecdsa-cert type -1<br>debug1: identity file /root/.ssh/id_ed25519 type -1<br>debug1: identity file /root/.ssh/id_ed25519-cert type -1<br>debug1: Enabling compatibility mode for protocol 2.0<br>debug1: Local version string SSH-2.0-OpenSSH_6.6.1<br>debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3<br>debug1: match: OpenSSH_5.3 pat OpenSSH_5* compat 0x0c000000<br>debug2: fd 3 setting O_NONBLOCK<br>debug3: load_hostkeys: loading entries for host &quot;100.252.201.240&quot; from file &quot;/root/.ssh/known_hosts&quot;<br>debug3: load_hostkeys: loaded 0 keys<br>debug1: SSH2_MSG_KEXINIT sent<br>debug1: SSH2_MSG_KEXINIT received<br>debug2: kex_parse_kexinit: curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1<br>debug2: kex_parse_kexinit: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ssh-ed25519-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-dss-cert-v00@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-ed25519,ssh-rsa,ssh-dss<br>debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-gcm@openssh.com,aes256-gcm@openssh.com,chacha20-poly1305@openssh.com,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se<br>debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-gcm@openssh.com,aes256-gcm@openssh.com,chacha20-poly1305@openssh.com,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se<br>debug2: kex_parse_kexinit: hmac-md5-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-ripemd160-etm@openssh.com,hmac-sha1-96-etm@openssh.com,hmac-md5-96-etm@openssh.com,hmac-md5,hmac-sha1,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96<br>debug2: kex_parse_kexinit: hmac-md5-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-ripemd160-etm@openssh.com,hmac-sha1-96-etm@openssh.com,hmac-md5-96-etm@openssh.com,hmac-md5,hmac-sha1,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96<br>debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib<br>debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib<br>debug2: kex_parse_kexinit:<br>debug2: kex_parse_kexinit:<br>debug2: kex_parse_kexinit: first_kex_follows 0<br>debug2: kex_parse_kexinit: reserved 0<br>debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1<br>debug2: kex_parse_kexinit: ssh-rsa,ssh-dss<br>debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se<br>debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se<br>debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96<br>debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96<br>debug2: kex_parse_kexinit: none,zlib@openssh.com<br>debug2: kex_parse_kexinit: none,zlib@openssh.com<br>debug2: kex_parse_kexinit:<br>debug2: kex_parse_kexinit:<br>debug2: kex_parse_kexinit: first_kex_follows 0<br>debug2: kex_parse_kexinit: reserved 0<br>debug2: mac_setup: setup hmac-md5<br>debug1: kex: server-&gt;client aes128-ctr hmac-md5 none<br>debug2: mac_setup: setup hmac-md5<br>debug1: kex: client-&gt;server aes128-ctr hmac-md5 none<br>debug1: kex: diffie-hellman-group-exchange-sha256 need=16 dh_need=16<br>debug1: kex: diffie-hellman-group-exchange-sha256 need=16 dh_need=16<br>debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024&lt;3072&lt;8192) sent<br>debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP<br><br><publishedDate>2018-01-19T06:55:47Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LNk5uIAD"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-19T06:51:35Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-19T06:51:35Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>pam_tally2 man 페이지를 보면 no_magic_root, reset 옵션이 없는 것으로 확인이 됩니다.<br><br># egrep &quot;magic_root|reset&quot; etc/pam.d/* -R<br>etc/pam.d/password-auth:auth        required      pam_tally2.so unlock_time=1800 deny=4 no_magic_root reset<br>etc/pam.d/password-auth:auth        required      pam_tally2.so no_magic_root reset<br>etc/pam.d/password-auth-ac:auth        required      pam_tally2.so unlock_time=1800 deny=4 no_magic_root reset<br>etc/pam.d/password-auth-ac:auth        required      pam_tally2.so no_magic_root reset<br>etc/pam.d/system-auth:auth        required      pam_tally2.so unlock_time=1800 deny=4 no_magic_root reset<br>etc/pam.d/system-auth:auth        required      pam_tally2.so no_magic_root reset<br>etc/pam.d/system-auth-ac:auth        required      pam_tally2.so unlock_time=1800 deny=4 no_magic_root reset<br>etc/pam.d/system-auth-ac:auth        required      pam_tally2.so no_magic_root reset<br><br>두 서버의 system-auth, password-auth 파일에서 해당 옵션을 삭제후 테스트 하시기 바랍니다.<br><br>그리고 SLTTESTAL01 서버로 ssh 로 접속시 -vvv 옵션을 추가하여 출력결과를 첨부 부탁드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-19T06:51:35Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LNiCtIAL"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-19T02:24:27Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-19T02:24:26Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>현재 문의 주신 내용을 자세히 살펴보고있는 중이며 답변이 정리되는 대로<br>코멘트로 남겨드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-19T02:24:26Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LNhMdIAL"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-19T00:31:38Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-19T00:31:38Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>dropbox.redhat.com 에 /incoming 디렉토리에<br><br>02014819-sosreport-SLTTESTAL01-20180119085102-5a99.tar.xz - source<br>02014819-sosreport-SLTTESTAL01-20180119085102-5a99.tar.xz - target<br><br>upload 하였습니다.<br><br><publishedDate>2018-01-19T00:31:38Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LNTmSIAX"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-18T10:00:55Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-18T10:00:55Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>추가 문의 사항은 systemctl status sshd.service 결과에서 <br>아래 2개와 같은 log가 있는데 해당 내용 관련해서도 문의를 드리려고 합니다.<br><br>Jan 18 13:02:34 SLDAFIDL01 sshd[2153]: pam_tally2(sshd:setcred): unknown option: no_magic_root<br>Jan 18 13:02:34 SLDAFIDL01 sshd[2153]: pam_tally2(sshd:setcred): unknown option: reset<br><br>root@SLDAFIDL01 /root # systemctl status sshd.service<br>* sshd.service - OpenSSH server daemon<br>   Loaded: loaded (/usr/lib/systemd/system/sshd.service; enabled; vendor preset: enabled)<br>   Active: active (running) since Sun 2017-04-16 15:15:24 KST; 9 months 3 days ago<br>     Docs: man:sshd(8)<br>           man:sshd_config(5)<br> Main PID: 4827 (sshd)<br>   CGroup: /system.slice/sshd.service<br>           `-4827 /usr/sbin/sshd -D<br><br>Jan 18 13:02:34 SLDAFIDL01 sshd[2153]: Accepted publickey for sliida from 100.254.180.54 port...9:90<br>Jan 18 13:02:34 SLDAFIDL01 sshd[2153]: pam_tally2(sshd:setcred): unknown option: no_magic_root<br>Jan 18 13:02:34 SLDAFIDL01 sshd[2153]: pam_tally2(sshd:setcred): unknown option: reset<br>Jan 18 15:11:03 SLDAFIDL01 systemd[1]: Reloaded OpenSSH server daemon.<br>Jan 18 15:11:03 SLDAFIDL01 sshd[4827]: Received SIGHUP; restarting.<br>Jan 18 15:11:03 SLDAFIDL01 sshd[4827]: Server listening on 0.0.0.0 port 22.<br>Jan 18 15:34:03 SLDAFIDL01 sshd[35679]: Connection closed by 100.252.201.240 [preauth]<br>Jan 18 15:34:22 SLDAFIDL01 sshd[35748]: Connection closed by 100.252.201.240 [preauth]<br>Jan 18 15:44:31 SLDAFIDL01 sshd[37852]: Connection closed by 100.253.142.21 [preauth]<br>Jan 18 15:47:13 SLDAFIDL01 sshd[38364]: Connection closed by 100.252.201.240 [preauth]<br>Hint: Some lines were ellipsized, use -l to show in full.<br><br><publishedDate>2018-01-18T10:00:55Z</publishedDate><createdByType>Customer</createdByType><br>======================<br></comments><br>