======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2015-12-14T12:36:48Z</b><br><b>마지막 답변자 : JINKOO HAN</b><br><b>마지막 수정 일자 : 2016-01-11T06:59:46Z</b><br><b>id : 500A000000T1tZWIAZ</b><br>======================<br><br><b><font size=15>
제목  : logrotate monthly 옵션 이상작동에 대한 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>VMWare 마스터 이미지의  /etc/logrotate.conf  설정을 아래와 같이 적용한 후 O/S 를 배포하였습니다.<br><br>=====================================================================<br> root@SLTCRMAL01 /root # cat /etc/logrotate.conf<br># see &quot;man logrotate&quot; for details<br># rotate log files weekly<br># weekly<br>monthly<br><br># keep 4 weeks worth of backlogs<br># rotate 4<br>rotate 12<br><br># create new (empty) log files after rotating old ones<br>create 0600 root root<br><br># use date as a suffix of the rotated file<br>dateext<br><br># uncomment this if you want your log files compressed<br>#compress<br><br># RPM packages drop log rotation information into this directory<br>include /etc/logrotate.d<br><br># no packages own wtmp and btmp -- we'll rotate them here<br>/var/log/wtmp {<br>    monthly<br>    create 0600 root utmp<br>        minsize 1M<br>    rotate 12<br>}<br><br>/var/log/btmp {<br>    missingok<br>    monthly<br>    create 0600 root utmp<br>    rotate 12<br>}<br><br># system-specific logs may be also be configured here.<br>=====================================================================<br><br>적용하려던 정책은 한달에 한번 총 12회 보관 즉, 1년 보관 정책을 적용하려 했으나,<br><br>모든 시스템에서 monthly 가 아닌 weekly rotate 로 로그가 보관되고 있습니다. (아래 결과 참고)<br><br>=====================================================================<br>root@SLTCRMAL01 /var/log # ls -al | grep messa<br>-rw-------   1 root         root    497464 Dec  8 16:51 messages<br>-rw-------.  1 root         root    382427 Jun 14 03:03 messages-20150614.gz<br>-rw-------   1 root         root    192789 Jun 21 03:43 messages-20150621.gz<br>-rw-------   1 root         root    180200 Jun 29 03:21 messages-20150629.gz<br>-rw-------   1 root         root     90223 Jul  5 03:26 messages-20150705.gz<br>-rw-------   1 root         root    105697 Jul 12 03:29 messages-20150712.gz<br>-rw-------   1 root         root    115703 Jul 20 03:42 messages-20150720.gz<br>-rw-------   1 root         root     85815 Jul 26 03:21 messages-20150726.gz<br>-rw-------   1 root         root    101498 Aug  2 03:27 messages-20150802.gz<br>-rw-------   1 root         root    102195 Aug  9 03:28 messages-20150809.gz<br>-rw-------   1 root         root    103155 Aug 16 03:32 messages-20150816.gz<br>-rw-------   1 root         root    103510 Aug 23 03:44 messages-20150823.gz<br>-rw-------   1 root         root    117110 Aug 31 03:23 messages-20150831.gz<br>-rw-------   1 root         root     87788 Sep  6 03:30 messages-20150906.gz<br>-rw-------   1 root         root    115516 Sep 14 03:50 messages-20150914.gz<br>-rw-------   1 root         root     87315 Sep 20 03:48 messages-20150920.gz<br>-rw-------   1 root         root    116633 Sep 28 03:24 messages-20150928.gz<br>-rw-------   1 root         root     88097 Oct  4 03:29 messages-20151004.gz<br>-rw-------   1 root         root    127548 Oct 12 03:50 messages-20151012.gz<br>-rw-------   1 root         root     88047 Oct 18 03:18 messages-20151018.gz<br>-rw-------   1 root         root    102477 Oct 25 03:23 messages-20151025.gz<br>-rw-------   1 root         root    103811 Nov  1 03:32 messages-20151101.gz<br>-rw-------   1 root         root    193660 Nov  8 03:47 messages-20151108.gz<br>-rw-------   1 root         root    117257 Nov 16 03:49 messages-20151116.gz<br>-rw-------   1 root         root     86971 Nov 22 03:41 messages-20151122.gz<br>-rw-------   1 root         root    118508 Nov 30 03:10 messages-20151130.gz<br>-rw-------   1 root         root   1168761 Dec  6 03:16 messages-20151206<br>root@SLTCRMAL01 /var/log # ls -al | grep wtmp<br>-rw-------.  1 root         utmp    375552 Dec  8 16:41 wtmp<br>root@SLTCRMAL01 /var/log # ls -al | grep utmp<br>-rw-------   1 root         utmp         0 Jul  1 03:31 btmp<br>-rw-------.  1 root         utmp      1152 Jun 11 13:24 btmp-20150701<br>-rw-------.  1 root         utmp    375552 Dec  8 16:41 wtmp<br>=====================================================================<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>적용한 시스템은 모두 RHEL7.1 x86_64 이며, 동일한 마스터 이미지로 가상머신이미지로 배포하여 모든 환경에서 동일하게 발생되고 있습니다.<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>위와 같은 현상은 최초 배포때부터 나타났을것으로 추측하고 있습니다.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>금주부터 마스터 이미지에 대한 재수정작업이 이루어 지므로, 유사사례 확인이 필요할 것으로 판단됩니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.1</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>rpm</name></tag></tags><br><comment id="a0aA000000G0m1xIAB"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-11T06:59:45Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-11T06:59:45Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>문제가 해결되셨으니, 해당 케이스는 Close 하도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-01-11T06:59:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G0jBLIAZ"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-01-10T05:33:38Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-01-10T05:33:38Z</b><br><br>안녕하세요. <br><br>문의 드렸던 내용은 /etc/logrotate.d/ 내의 gluster 파일에 전역으로 weekly 설정이 되어 있어 나왔던 문제여서 버전 업그레이드를 통해 해결되었습니다.<br><br>감사합니다.<br><br><publishedDate>2016-01-10T05:33:38Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000FUKSRIA5"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2015-12-16T01:36:06Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2015-12-16T01:36:06Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>우선 관련되어서 테스트를 진행하였으나, 말씀주신 것 처럼 테스트한 결과 정상적으로 동작하는 것을 확인하였습니다.<br><br>sosreport와 cron관련된 데이터들에 대한 자료를 수집하여 제공바랍니다.<br><br>1. # sosreport<br>2. 기타 자료 수집<br># mkdir -p /tmp/01554185/etc<br># cd /etc<br># cp anacrontab /tmp/01554185/etc/<br># cp crontab /tmp/01554185/etc/<br># cp cron.* /tmp/01554185/etc/<br># cp logrotate.conf /tmp/01554185/etc/<br># cp logrotate.d /tmp/01554185/etc/<br># tar -cvzf 01554185-etc.tar.gz /tmp/01554185/<br><br><br>감사합니다.<br><br><publishedDate>2015-12-16T01:36:06Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000FU78NIAT"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2015-12-15T02:32:04Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2015-12-15T02:32:04Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>문으 주신 내용에 대해서 접수를 하였으며, 관련되어 확인 후 답변드리도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2015-12-15T02:32:04Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>