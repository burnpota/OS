======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2016-05-11T04:06:59Z</b><br><b>마지막 답변자 : 우택 심</b><br><b>마지막 수정 일자 : 2016-06-08T01:15:06Z</b><br><b>id : 500A000000UBlhlIAD</b><br>======================<br><br><b><font size=15>
제목  : 여러 소스 서버에서 단일 타겟 서버에 sftp 동시 접속 시 실패 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요 저는 SDS 상암센터 김지민 선임입니다.<br><br>여러 소스 서버에서 단일 타겟의 서버에 sftp를 이용하여 file 전송을 수행하는 중 일부 sftp의 전송 실패 오류가 발생하였습니다.<br>현재 sftp 접속 관련 추가로 설정한 값은 없는 상태이고 혹시 sftp 동시 접속 수 관련 설정 default 값(max sessions / maxstartups 인것 같아보이긴 하였습니다.)과  증가시킬수 있는 방법이 있는지 문의드립니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 4 (Low)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000HHfYrIAL"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-06-08T01:14:55Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-06-08T01:14:55Z</b><br><br>안녕하세요.<br><br>동일문제 발생 시 다시 케이스를 열도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-06-08T01:14:55Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HHfXPIA1"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-06-08T01:09:55Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-06-08T01:09:55Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 혹시 추가 문의사항이 잇으시면 케이스에 업데이트 바라며, 없으시면 케이스를 close하도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-06-08T01:09:55Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HAzlCIAT"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-06-02T01:58:27Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-06-02T01:58:27Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>우선 MaxSessions는 connection당 허용하는 session의 최대값을 지정할 수 있습니다.<br>즉, sftp를 사용하실때 하나의 연결에서 세션을 얼마나 오픈할 수 있느지에 대한 설정으로 보시면 될 듯 합니다<br><br><br>두번째로 MaxStartups은 기본적으로 &quot;start:rate:full&quot;형태로 지정이 가능하며,<br>해당 값은 기본적으로 SSH에 연결을 시도할때 로그인을 하기 전까지의 단계의 연결의 수를 처리하는 수치입니다.<br><br>start는 처음 ssh 연결을 위해서 오픈하는 값이며<br>rate는 start시에 오픈된 connection이 가득 찼을 경우, 해당 rate로 비례적으로 증가하여 full 수치까지 증가해 나가는 비율 입니다. 해당 값은 퍼센테이지(%)로 보시며 됩니다.<br>======================<br>향후, 테스트를 진행 후 공유 바랍니다.<br><br><br>감사합니다.<br><br><publishedDate>2016-06-02T01:58:27Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HAj6vIAD"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-06-01T04:43:45Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-06-01T04:43:45Z</b><br><br>안녕하세요.<br><br>문의 드린 아래 설정 값을 올려서 테스트 하려고 합니다.<br><br>아래 설정 옵션의 의미와, 값의 단위를 정확히 알고 싶습니다. (*)<br><br>그리고 기본 값 변경 시 발생할 수 있는 예상되는 영향도가 있을지 문의 드립니다. (*)<br><br>MaxSessions, The default is 10. <br>MaxStartups, The default is 10:30:100.<br><br>우선 위 설정을 변경하고 아래 값도 설정 할 예정입니다.<br><br>@ 로그 설정<br><br>~~~<br># vi /etc/ssh/sshd_config<br><br># override default of no subsystems<br>#Subsystem      sftp    /usr/libexec/openssh/sftp-server<br>Subsystem       sftp    /usr/libexec/openssh/sftp-server -l DEBUG2   <br>~~~<br><br>and # systemctl restart sshd<br><br>테스트 후 추가로 코멘트 업데이트 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-06-01T04:43:45Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000H9XACIA3"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-25T01:16:02Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-25T01:16:02Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 추가 업데이트가 없어서 본 케이스는 Close하도록 하겠습니다.<br><br>추가 업데이트 사항이 있으시면 본 케이스를 재오픈하셔도 되며, 새로운 케이스를 오픈하시면 해당 케이스를 통해서 지원하도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-25T01:16:02Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H8merIAB"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-20T05:04:11Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-20T05:04:11Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 혹시 추가 문의사항이 잇으시면 케이스에 업데이트 바라며, 없으시면 케이스를 close하도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-20T05:04:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GEKO5IAP"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-11T05:36:03Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-11T05:36:02Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br><br>&gt; 여러 소스 서버에서 단일 타겟의 서버에 sftp를 이용하여 file 전송을 수행하는 중 일부 sftp의 전송 실패 오류가 발생하였습니다.<br><br>우선 말씀주신 부분으로만 본다면 connection을 시도하는 과정이 아닌 데이터를 upload하는 과정에서 에러가 발생한 것으로 유추됩니다. 그래서 단순히 max sessions / maxstartups 값을 증가하는 것으로 해결될지 의문입니다.<br><br><br>문의하신 두 값들의 default값은 아래와 같습니다.<br><br>MaxSessions, The default is 10.<br>MaxStartups, The default is 10:30:100.<br>======================<br>우선 문제가 무엇인지 알기위해서 몇 가지 문의 드립니다.<br><br>1. 현재 몇 개의 client가 하나의 서버에 연결을 하고 있는지요?<br>2. 하나의 client에서 보내는 파일의 갯수가 어느정도 되는지요?<br>3. sftp 서버는 Red Hat Enterprise Linux Server인지요? 사용중인 버젼은 무엇인지요?<br>4. sftp로 파일을 보내기 전에 connection을 하고 login 을 하게 될텐데요... 이 부분에서 이슈가 있는지요? 아니면.. 연결을 하고 나서 데이터를 보내는 과정에서 에러가 난 것인지요?<br>5. sftp server 쪽에 아래와 같이 log를 출력할 수 있도록 설정하시고 동일한 이슈 재현이 필요합니다. 그리고.. 이후에 sosreport를 수집하여 주시기 바랍니다.<br>======================<br>@ 로그 설정<br><br>~~~<br># vi /etc/ssh/sshd_config<br><br># override default of no subsystems<br>#Subsystem      sftp    /usr/libexec/openssh/sftp-server<br>Subsystem       sftp    /usr/libexec/openssh/sftp-server -l DEBUG2   <br>~~~<br><br>and # systemctl restart sshd<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-11T05:36:02Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>여러 소스 서버에서 단일 타겟의 서버에 sftp를 이용하여 file 전송을 수행하는 중 일부 sftp의 전송 실패 오류가 발생하였습니다.<br>현재 sftp 접속 관련 추가로 설정한 값은 없는 상태이고 혹시 sftp 동시 접속 수 관련 설정 default 값(max sessions / maxstartups 인것 같아보이긴 하였습니다.)과  증가시킬수 있는 방법이 있는지 문의드립니다.<br><br>감사합니다.</issue><cep>false</cep></case>