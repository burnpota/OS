======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-01-20T16:05:29Z</b><br><b>마지막 답변자 : Kyung Huh</b><br><b>마지막 수정 일자 : 2018-06-01T05:31:28Z</b><br><b>id : 500A000000ZeGAYIA3</b><br>======================<br><br><b><font size=15>
제목  : logrotate.conf 설정 동작 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>redhat 6.4 OS에서 logrotate.conf 설정 및 동작 관련 문의입니다.<br><br><br>아래와 같이 messages 파일에 관련하여 한달씩 12개월 보관하도록 설정이 되어있는데<br>어느 순간 부터는 동작하지 않는 것 같아서 문의드립니다.<br><br>아래 내용을 첨부하였고 혹시 추가 필요한 내역이 있으시면 알려주시면 추가하겠습니다.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;cat /etc/logrotate.conf<br># see &quot;man logrotate&quot; for details<br># rotate log files weekly<br>monthly<br><br># keep 4 weeks worth of backlogs<br>rotate 12<br><br># create new (empty) log files after rotating old ones<br>create<br><br># use date as a suffix of the rotated file<br>dateext<br><br># uncomment this if you want your log files compressed<br>#compress<br><br># RPM packages drop log rotation information into this directory<br>include /etc/logrotate.d<br><br># no packages own wtmp and btmp -- we'll rotate them here<br>/var/log/wtmp {<br>    monthly<br>    create 0664 root utmp<br>        minsize 1M<br>    rotate 12<br>}<br><br>/var/log/btmp {<br>    missingok<br>    monthly<br>    create 0600 root utmp<br>    rotate 12<br>}<br><br># system-specific logs may be also be configured here.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;ls -al | grep messages<br>-rw-------   1 root         root         1977992 Jan 21 00:20 messages<br>-rw-------   1 root         root           26670 Jul 31  2015 messages-20150801<br>-rw-------   1 root         root           36878 Aug 31  2015 messages-20150901<br>-rw-------   1 root         root          111901 Oct  1  2015 messages-20151001<br>-rw-------   1 root         root          113147 Oct 31  2015 messages-20151101<br>-rw-------   1 root         root          130304 Nov 30  2015 messages-20151201<br>-rw-------   1 root         root           35633 Dec 31  2015 messages-20160101<br>-rw-------   1 root         root           34743 Jan 31  2016 messages-20160201<br>-rw-------   1 root         root           32390 Feb 29  2016 messages-20160301<br>-rw-------   1 root         root          114535 Mar 31  2016 messages-20160401<br>-rw-------   1 root         root           34132 Apr 30  2016 messages-20160501<br>-rw-------   1 root         root          121249 May 31  2016 messages-20160601<br>-rw-------   1 root         root           32690 Jun 30  2016 messages-20160701<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.4</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>IBHPSTG1</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>rpm</name></tag></tags><br><comment id="a0aA000000MgwlyIAB"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-06-01T05:31:24Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-06-01T05:31:24Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>확인 감사드립니다. 문제가 해소된 것으로 이해하고 케이스를 종료하겠습니다.<br>문제가 다시 발생하거나, 추가로 궁금하신 사항이 있으시면 언제든지 다시 케이스를 열어서 진행할 수 있습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-06-01T05:31:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Mgw7UIAR"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-06-01T03:59:28Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-06-01T03:59:28Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br>/var/log/messages 파일 logrotate는 정상 수행 확인하였습니다.<br><br>감사합니다.<br><br> - 확인 내여<br>root@SLPAUSAL01 /var/log # ls -al | grep -i messages | tail<br>-rw-------   1 root         root          751936 Apr  8 03:44 messages-20180401.gz<br>-rw-------   1 root         root          748156 Apr 15 03:38 messages-20180408.gz<br>-rw-------   1 root         root          742797 Apr 22 03:30 messages-20180415.gz<br>-rw-------   1 root         root          734232 Apr 29 03:22 messages-20180422.gz<br>-rw-------   1 root         root          749127 May  6 03:31 messages-20180429.gz<br>-rw-------   1 root         root          747346 May 13 03:36 messages-20180506.gz<br>-rw-------   1 root         root          725547 May 20 03:39 messages-20180513.gz<br>-rw-------   1 root         root          736906 May 27 03:50 messages-20180520.gz<br>-rw-------   1 root         root        19518830 May 27 03:50 messages-20180527<br><br>-rw-------   1 root         root        14636213 Jun  1 03:35 messages-20180601 ← 수행 확인<br><br>감사합니다.<br><br><publishedDate>2018-06-01T03:59:28Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MfrZvIAJ"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-28T08:36:25Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-28T08:36:25Z</b><br><br>김지민 선임님,<br><br>업데이트 해주셔서 고맙습니다. 6월 1일 결과 기다리겠습니다.<br><br>허 경 드림.<br><br><publishedDate>2018-05-28T08:36:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Mfr6EIAR"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-05-28T07:59:17Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-05-28T07:59:17Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 알려주신 방법으로 수정하였고<br>6/1 확인해보겠습니다.<br><br>root@SLPAUSAL01 / # cat /etc/logrotate.d/glusterfs<br># Rotate client logs<br>/var/log/glusterfs/*.log {<br>  sharedscripts<br>  weekly<br>  rotate 52<br>  missingok<br>  compress<br>  delaycompress<br>  notifempty<br>  postrotate<br>  /usr/bin/killall -HUP glusterfs &gt; /dev/null 2&gt;&amp;1 || true<br>  /usr/bin/killall -HUP glusterd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br><br># Rotate server logs<br>/var/log/glusterfs/bricks/*.log {<br>  sharedscripts<br>  weekly<br>  rotate 52<br>  missingok<br>  compress<br>  delaycompress<br>  notifempty<br>  postrotate<br>  /usr/bin/killall -HUP glusterfsd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br><br>root@SLPAUSAL01 / # logrotate -d /etc/logrotate.conf<br>=== 생략 ===<br>rotating pattern: /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br> monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/cron<br>  log does not need rotating<br>considering log /var/log/maillog<br>  log does not need rotating<br>considering log /var/log/messages<br>  log does not need rotating<br>considering log /var/log/secure<br>  log does not need rotating<br>considering log /var/log/kernel<br>  log does not need rotating<br>considering log /var/log/vmtoolsd.log<br>  log does not need rotating<br>considering log /var/log/spooler<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br>=== 생략 ===<br><br><br>감사합니다.<br><br><publishedDate>2018-05-28T07:59:17Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MeKCsIAN"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-21T09:01:58Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-21T09:01:58Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>조치하신 후에 문제가 해결되시면 알려주시기 바랍니다.<br><br>고맙습니다.<br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-21T09:01:58Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MeHVGIA3"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-05-21T04:55:29Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-05-21T04:55:29Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>답변 감사드립니다.<br><br>5/27 아래와 같이 패키지 업데이트가 아닌 파일 수정 방법으로 하여 조치 후 확인해보겠습니다.<br><br> - 수정 전<br>root@SLDAUSAL01 &lt;ICT Suwon Center&gt;:/sysadmin/work/180521 # cat glusterfs.180521<br># perform the log rotate every week<br>weekly<br># keep the backup of 52 weeks<br>rotate 52<br>missingok<br><br># compress the logs, but from the .2 onwards<br>compress<br>delaycompress<br>notifempty<br><br># Rotate client logs<br>/var/log/glusterfs/*.log {<br>  sharedscripts<br>  postrotate<br>  /usr/bin/killall -HUP glusterfs &gt; /dev/null 2&gt;&amp;1 || true<br>  /usr/bin/killall -HUP glusterd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br><br># Rotate server logs<br>/var/log/glusterfs/bricks/*.log {<br>  sharedscripts<br>  postrotate<br>  /usr/bin/killall -HUP glusterfsd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br><br> - 수정 후<br>root@SLDAUSAL01 &lt;ICT Suwon Center&gt;:/etc/logrotate.d # cat glusterfs<br># Rotate client logs<br>/var/log/glusterfs/*.log {<br>  sharedscripts<br>  weekly<br>  rotate 52<br>  missingok<br>  compress<br>  delaycompress<br>  notifempty<br>  postrotate<br>  /usr/bin/killall -HUP glusterfs &gt; /dev/null 2&gt;&amp;1 || true<br>  /usr/bin/killall -HUP glusterd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br><br># Rotate server logs<br>/var/log/glusterfs/bricks/*.log {<br>  sharedscripts<br>  weekly<br>  rotate 52<br>  missingok<br>  compress<br>  delaycompress<br>  notifempty<br>  postrotate<br>  /usr/bin/killall -HUP glusterfsd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br><br>감사합니다.<br><br><publishedDate>2018-05-21T04:55:29Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MdwC8IAJ"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-18T06:04:59Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-18T06:04:58Z</b><br><br>보내주신 sosreport 파일을 살펴본 결과 glusterfs 패키제에서 제공하는 logrotate 설정 파일에 문제가 있는 것을 확인하였습니다.<br><br>/etc/logrotate.d/glusterfs 설정에서 global 설정에 해당하는 내용이 포함되어 weekly, rotate 53 missingok, compress, delaycompress, notifempty 옵션이 적용되는 문제가 있습니다. 이 문제는 이미 알려진 버그로[1] glusterfs-3.7.5-19.el6.x86_64 패키지에 수정되었습니다.<br><br>glusterfs 패키지를 업데이트 하시거나 설정 파일을 수정하시면 해결될 것으로 보입니다.<br>패키지 업데이트가 어려우시면 아래 내용 참고하셔서 파일을 수정하셔도 됩니다.<br><br>[1] https://bugzilla.redhat.com/show_bug.cgi?id=1171865<br><br>======================================<br>현재 적용되어 있는 glusterfs logrotate 설정<br>======================================<br>~~~<br># perform the log rotate every week<br>weekly<br># keep the backup of 52 weeks<br>rotate 52<br>missingok<br><br># compress the logs, but from the .2 onwards<br>compress<br>delaycompress<br>notifempty<br><br># Rotate client logs<br>/var/log/glusterfs/*.log {<br>  sharedscripts<br>  postrotate<br>  /usr/bin/killall -HUP glusterfs &gt; /dev/null 2&gt;&amp;1 || true<br>  /usr/bin/killall -HUP glusterd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br><br># Rotate server logs<br>/var/log/glusterfs/bricks/*.log {<br>  sharedscripts<br>  postrotate<br>  /usr/bin/killall -HUP glusterfsd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br><br>==============================<br> 수정된 glusterfs logrotate 설정 <br>==============================<br>~~~<br># Rotate client logs<br>/var/log/glusterfs/*.log {<br>  sharedscripts<br>  weekly<br>  rotate 52<br>  missingok<br>  compress<br>  delaycompress<br>  notifempty<br>  postrotate<br>  /usr/bin/killall -HUP glusterfs &gt; /dev/null 2&gt;&amp;1 || true<br>  /usr/bin/killall -HUP glusterd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br><br># Rotate server logs<br>/var/log/glusterfs/bricks/*.log {<br>  sharedscripts<br>  weekly<br>  rotate 52<br>  missingok<br>  compress<br>  delaycompress<br>  notifempty<br>  postrotate<br>  /usr/bin/killall -HUP glusterfsd &gt; /dev/null 2&gt;&amp;1 || true<br>  endscript<br>}<br>~~~<br><br>고맙습니다.<br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-18T06:04:58Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Mdv2oIAB"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-05-18T03:31:00Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-05-18T03:31:00Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>02016645-sosreport-SLPAUSAL01-20180518111631-b2a7.tar<br><br>파일명으로 dropbox.redhat.com 에 /incoming에 업로드하였습니다.<br><br>감사합니다.<br><br><publishedDate>2018-05-18T03:31:00Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MduOGIAZ"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-18T02:01:56Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-18T02:01:56Z</b><br><br>sosreport를 다시 한번 수집해서 전달해주시면 검토하여 알려드리겠습니다.<br><br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-18T02:01:56Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MdeR6IAJ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-05-17T08:20:48Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-05-17T08:20:48Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>답변 감사드립니다.<br><br>/etc/logrotate.d/syslog 부분은 따로 weekly 등이 설정된 부부은 없는 상태인데요. <br>혹시 추가로 확인해볼만한 부분이 있는지 문의드립니다.<br><br>root@SLPAUSAL01 /root # cat /etc/logrotate.d/syslog<br>/var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/spooler<br>{<br>    sharedscripts<br>    postrotate<br>        /bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true<br>    endscript<br>}<br><br>감사합니다.<br><br><publishedDate>2018-05-17T08:20:48Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MddZbIAJ"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-17T07:14:04Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-17T07:14:04Z</b><br><br>logrotate 명령 실행 출력 내용중에 아래와 같은 부분이 확인됩니다.<br><br>reading config file syslog<br>reading config info for /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/spooler<br><br>/etc/logrotate.d/syslog 파일에 해당 파일들에 대한 내용이 있고 여기에 weekly로 설정되어 있을 가능성이 있습니다.<br>/etc/logrotate.conf 파일에 monthly로 설정해도 다른 파일에서 다른 주기로 설정하면 각 로그 파일마다 다른 주기로 rotation이 이루어 집니다.<br><br>이점, 참고하셔서 확인하시기 바랍니다.<br><br>고맙습니다.<br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-17T07:14:04Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MdcMRIAZ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-05-17T05:20:44Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-05-17T05:20:44Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 /etc/logrotate.conf 파일은 설정되어있는데요.<br>logrotate -v /etc/logrotate.conf 를 수행해봤을 때 오류가 발생하는 부분은 없는 것 같은데요.<br><br>/var/log/messages 서버에 일주일 단위의 로그로 rotate가 되는 것 처럼 보여서 문의를 드리려고 합니다.<br><br>root@SLPAUSAL01 /etc/logrotate.d # cat /etc/logrotate.conf<br># see &quot;man logrotate&quot; for details<br># rotate log files weekly<br>monthly<br><br># keep 4 weeks worth of backlogs<br>rotate 12<br><br># create new (empty) log files after rotating old ones<br>create 0600 root root<br><br># use date as a suffix of the rotated file<br>dateext<br><br># uncomment this if you want your log files compressed<br>#compress<br><br># RPM packages drop log rotation information into this directory<br>include /etc/logrotate.d<br><br># no packages own wtmp and btmp -- we'll rotate them here<br>/var/log/wtmp {<br>    monthly<br>    create 0600 root utmp<br>        minsize 1M<br>    rotate 12<br>}<br><br>/var/log/btmp {<br>    missingok<br>    monthly<br>    create 0600 root utmp<br>    rotate 12<br>}<br><br># system-specific logs may be also be configured here.<br><br>root@SLPAUSAL01 /etc/logrotate.d # /usr/sbin/logrotate -v /etc/logrotate.conf<br>reading config file /etc/logrotate.conf<br>including /etc/logrotate.d<br>reading config file cups<br>reading config info for /var/log/cups/*_log<br>reading config file dracut<br>reading config info for /var/log/dracut.log<br>reading config file glusterfs<br>reading config info for /var/log/glusterfs/*.log<br>reading config info for /var/log/glusterfs/bricks/*.log<br>reading config file httpd<br>reading config info for /var/log/httpd/*log<br>reading config file iscsiuiolog<br>reading config info for /var/log/iscsiuio.log<br>reading config file mcelog<br>reading config info for /var/log/mcelog<br>reading config file mysqld<br>reading config file numad<br>reading config info for /var/log/numad.log<br>reading config file ppp<br>reading config info for /var/log/ppp/connect-errors<br>reading config file psacct<br>reading config info for /var/account/pacct<br>reading config file setroubleshoot<br>reading config info for /var/log/setroubleshoot/*.log<br>reading config file stap-server<br>reading config info for /var/log/stap-server/log<br>reading config file subscription-manager<br>reading config info for /var/log/rhsm/*.log<br>reading config file syslog<br>reading config info for /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/spooler<br><br>reading config file trace-cmd<br>reading config info for /var/log/trace-cmd.log<br>reading config file up2date<br>reading config info for /var/log/up2date<br>reading config file wpa_supplicant<br>reading config info for /var/log/wpa_supplicant.log<br>reading config file yum<br>reading config info for /var/log/yum.log<br>reading config info for /var/log/wtmp<br>reading config info for /var/log/btmp<br><br>Handling 20 logs<br><br>rotating pattern: /var/log/cups/*_log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/cups/*_log<br>  log /var/log/cups/*_log does not exist -- skipping<br><br>rotating pattern: /var/log/dracut.log  yearly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/dracut.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/glusterfs/*.log  weekly (52 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/glusterfs/*.log<br>  log /var/log/glusterfs/*.log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/glusterfs/bricks/*.log  weekly (52 rotations)<br>empty log files are not rotated, old logs are removed<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/httpd/*log  weekly (52 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/httpd/*log<br>  log /var/log/httpd/*log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/iscsiuio.log  weekly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/iscsiuio.log<br>  log /var/log/iscsiuio.log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/mcelog  2097152 bytes (99 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/mcelog<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/numad.log  1048576 bytes (5 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/numad.log<br>  log /var/log/numad.log does not exist -- skipping<br><br>rotating pattern: /var/log/ppp/connect-errors  after 1 days (5 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/ppp/connect-errors<br>  log /var/log/ppp/connect-errors does not exist -- skipping<br><br>rotating pattern: /var/account/pacct  after 1 days (31 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/account/pacct<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/setroubleshoot/*.log  weekly (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/setroubleshoot/setroubleshootd.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/stap-server/log  30720 bytes (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/stap-server/log<br>  log does not need rotating<br><br>rotating pattern: /var/log/rhsm/*.log  weekly (52 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/rhsm/rhsmcertd.log<br>  log does not need rotating<br>considering log /var/log/rhsm/rhsm.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/spooler<br> weekly (52 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/cron<br>  log does not need rotating<br>considering log /var/log/maillog<br>  log does not need rotating<br>considering log /var/log/messages<br>  log does not need rotating<br>considering log /var/log/secure<br>  log does not need rotating<br>considering log /var/log/kernel<br>  log does not need rotating<br>considering log /var/log/spooler<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/trace-cmd.log  10485760 bytes (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/trace-cmd.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/up2date  weekly (52 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/up2date<br>  log does not need rotating<br><br>rotating pattern: /var/log/wpa_supplicant.log  30720 bytes (52 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/wpa_supplicant.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/yum.log  yearly (52 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/yum.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/wtmp  monthly (12 rotations)<br>empty log files are not rotated, only log files &gt;= 1048576 bytes are rotated, old logs are removed<br>considering log /var/log/wtmp<br>  log does not need rotating<br><br>rotating pattern: /var/log/btmp  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/btmp<br>  log does not need rotating<br><br>-rw-------   1 root         root          736927 Mar 25 03:16 messages-20180318.gz<br>-rw-------   1 root         root         1390812 Apr  1 03:30 messages-20180325.gz<br>-rw-------   1 root         root          751936 Apr  8 03:44 messages-20180401.gz<br>-rw-------   1 root         root          748156 Apr 15 03:38 messages-20180408.gz<br>-rw-------   1 root         root          742797 Apr 22 03:30 messages-20180415.gz<br>-rw-------   1 root         root          734232 Apr 29 03:22 messages-20180422.gz<br>-rw-------   1 root         root          749127 May  6 03:31 messages-20180429.gz<br>-rw-------   1 root         root          747346 May 13 03:36 messages-20180506.gz<br>-rw-------   1 root         root        19527195 May 13 03:36 messages-20180513<br><br>감사합니다.<br><br><publishedDate>2018-05-17T05:20:44Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000La4cBIAR"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-06T06:31:33Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-06T06:31:33Z</b><br><br>확인 감사합니다.<br>추가로 도움이 필요하시면 알려주시기 바랍니다.<br><br>허 경 드림.<br><br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><br>(In reply to kim, jimin)<br>&gt; 안녕하세요 <br>&gt; <br>&gt; SDS 김지민 선임입니다.<br>&gt; <br>&gt; 확인해보니 rsyslog.conf에 기록이 안되어있었던 것 같습니다.<br>&gt; <br>&gt; 이 부분은 어떻게 할지는 제가 확인해보겠습니다.<br>&gt; <br>&gt; 감사합니다.<br>&gt; <br>&gt; root@IBHPSTG1&lt;ICT Suwon Center&gt;:/etc &gt;cat rsyslog.conf<br>&gt; === 생략 ===<br>&gt; <br>&gt; #### RULES ####<br>&gt; <br>&gt; # Log all kernel messages to the console.<br>&gt; # Logging much else clutters up the screen.<br>&gt; #kern.*                                                 /dev/console<br>&gt; === 생략 ===<br><br><publishedDate>2018-02-06T06:31:33Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000La2poIAB"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-06T02:39:37Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-06T02:39:37Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>확인해보니 rsyslog.conf에 기록이 안되어있었던 것 같습니다.<br><br>이 부분은 어떻게 할지는 제가 확인해보겠습니다.<br><br>감사합니다.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/etc &gt;cat rsyslog.conf<br>=== 생략 ===<br><br>#### RULES ####<br><br># Log all kernel messages to the console.<br># Logging much else clutters up the screen.<br>#kern.*                                                 /dev/console<br>=== 생략 ===<br><br><publishedDate>2018-02-06T02:39:37Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000La2BFIAZ"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-06T01:19:41Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-06T01:19:41Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>문제가 해결되어서 다행입니다. <br><br>/var/log/kernel 로그 파일의 경우 몇 가지를 확인해봐야할 것 같습니다.<br>/etc/rsyslog.conf 설정에 로그 규칙에 /var/log/kernel 파일에 로그를 기록하는 설정이 있는지 먼저 확인하시기 바랍니다.<br><br>1. 해당 설정이 없는 경우에는 logrotation 설정에서 제외하셔도 됩니다.<br>  /etc/rsyslog.conf /etc/rsyslog.d/*.conf 파일들의 내용을 확인하시기 바랍니다.<br><br>2. 해당 설정이 있는 경우에도 로그파일에 기록되는 사항이 없다면 커널 관련 이벤트가 발생하지 않아서 기록되지 않을 수 있습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><br>(In reply to kim, jimin)<br>&gt; 안녕하세요 <br>&gt; <br>&gt; SDS 김지민 선임입니다.<br>&gt; <br>&gt; 아래와 같이 logrotate는 정상적으로 수행된 것 같습니다.<br>&gt; 감사합니다.<br>&gt; <br>&gt; 한가지 문의드릴 점은 /var/log/kernel에 대한 부분인데 평상시에는 기록이 안되는 것이 맞는지 문의드리려고 합니다.<br>&gt; <br>&gt; root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;head -5 ./messages<br>&gt; Feb  6 03:25:03 IBHPSTG1 rsyslogd: [origin software=&quot;rsyslogd&quot; swVersion=&quot;5.8.10&quot; x-pid=&quot;2000&quot; x-info=&quot;http://www.rsyslog.com&quot;] rsyslogd was HUPed<br>&gt; Feb  6 03:25:04 IBHPSTG1 rhsmd: In order for Subscription Manager to provide your system with updates, your system must be registered with the Customer Portal. Please enter your Red Hat login to ensure your system is up-to-date.<br>&gt; Feb  6 03:48:23 IBHPSTG1 rc_pam_acl[115231]: session opened for user 'security'(from 100.252.201.138) with service 'sshd' [#1]<br>&gt; Feb  6 03:48:24 IBHPSTG1 rc_pam_acl[115258]: session opened for user 'security'(from 100.252.201.138) with service 'sshd' [#1]<br>&gt; Feb  6 03:48:24 IBHPSTG1 rc_pam_acl[115550]: session opened for user 'security'(from 100.252.201.138) with service 'sshd' [#1]<br>&gt; <br>&gt; root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;<br><br><publishedDate>2018-02-06T01:19:41Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000La1lgIAB"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-06T00:24:12Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-06T00:24:12Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 logrotate는 정상적으로 수행된 것 같습니다.<br>감사합니다.<br><br>한가지 문의드릴 점은 /var/log/kernel에 대한 부분인데 평상시에는 기록이 안되는 것이 맞는지 문의드리려고 합니다.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;head -5 ./messages<br>Feb  6 03:25:03 IBHPSTG1 rsyslogd: [origin software=&quot;rsyslogd&quot; swVersion=&quot;5.8.10&quot; x-pid=&quot;2000&quot; x-info=&quot;http://www.rsyslog.com&quot;] rsyslogd was HUPed<br>Feb  6 03:25:04 IBHPSTG1 rhsmd: In order for Subscription Manager to provide your system with updates, your system must be registered with the Customer Portal. Please enter your Red Hat login to ensure your system is up-to-date.<br>Feb  6 03:48:23 IBHPSTG1 rc_pam_acl[115231]: session opened for user 'security'(from 100.252.201.138) with service 'sshd' [#1]<br>Feb  6 03:48:24 IBHPSTG1 rc_pam_acl[115258]: session opened for user 'security'(from 100.252.201.138) with service 'sshd' [#1]<br>Feb  6 03:48:24 IBHPSTG1 rc_pam_acl[115550]: session opened for user 'security'(from 100.252.201.138) with service 'sshd' [#1]<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;ls -al | grep -i messages<br>-rw-------   1 root         root             881 Feb  6 04:39 messages<br>-rw-------   1 root         root           26670 Jul 31  2015 messages-20150801<br>-rw-------   1 root         root           36878 Aug 31  2015 messages-20150901<br>-rw-------   1 root         root          111901 Oct  1  2015 messages-20151001<br>-rw-------   1 root         root          113147 Oct 31  2015 messages-20151101<br>-rw-------   1 root         root          130304 Nov 30  2015 messages-20151201<br>-rw-------   1 root         root           35633 Dec 31  2015 messages-20160101<br>-rw-------   1 root         root           34743 Jan 31  2016 messages-20160201<br>-rw-------   1 root         root           32390 Feb 29  2016 messages-20160301<br>-rw-------   1 root         root          114535 Mar 31  2016 messages-20160401<br>-rw-------   1 root         root           34132 Apr 30  2016 messages-20160501<br>-rw-------   1 root         root          121249 May 31  2016 messages-20160601<br>-rw-------   1 root         root           32690 Jun 30  2016 messages-20160701<br>-rw-------   1 root         root         2238545 Feb  5 18:48 messages-20180206<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;ls -al | grep -i kernel<br>-rw-r-----   1 root         root               0 Feb  6 03:25 kernel<br>-rw-r-----   1 root         root               0 Feb  2 16:29 kernel-20180203<br>-rw-r-----   1 root         root               0 Feb  3 03:28 kernel-20180206<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;ls -al | grep -i vmtools<br>-rw-r--r--   1 root         root             109 Feb  2 16:28 vmtoolsd.1.log<br>-rw-r--r--   1 root         root             746 Feb  2 16:28 vmtoolsd.2.log<br>-rw-r--r--   1 root         root               0 Feb  6 03:25 vmtoolsd.log<br>-rw-r--r--   1 root         root          866087 Feb  6 09:20 vmtoolsd.log-20180203<br>-rw-r--r--   1 root         root               0 Feb  3 03:28 vmtoolsd.log-20180206<br><br>감사합니다.<br><br><publishedDate>2018-02-06T00:24:12Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LZmb6IAD"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-05T07:42:36Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-05T07:42:36Z</b><br><br>안녕하세요<br><br>김지민 선임입니다.<br><br>아래와 같이 수정 후 일단 crond reload하였습니다.<br>내일 바로 확인해보겠습니다.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/etc/logrotate.d &gt;cat syslog<br>/var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br>{<br>    daily<br>    rotate 30<br>    sharedscripts<br>    postrotate<br>        /bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true<br>    endscript<br>}<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/etc/logrotate.d &gt;service crond reload<br>Reloading crond:                                           [  OK  ]<br><br><publishedDate>2018-02-05T07:42:36Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LZmR1IAL"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-05T07:23:50Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-05T07:23:50Z</b><br><br>전체를 daily로 적용하시는 것 보다는 문제가 되고 있는 /etc/logrotate.d/syslog 설정에 daily를 적용하셔서 /etc/logrotate.d/syslog에 해당하는 파일들을 daily로 적용하여 작동시킬 수 있습니다. 빠른 결과를 확인하고 싶으시면 일부 로그 파일의 rotation주기를 짧게하여 확인하실 수 있다는 뜻입니다.<br><br>아래 예제를 참고하시기 바랍니다.<br># cat /etc/logrotate.d/syslog<br><br>/var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/spooler<br>{<br>    daily<br>    rotate 30<br>    maxsize 1k<br>    sharedscripts<br>    postrotate<br><br>/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true<br>    endscript<br>}<br><br>현재 로그가 많은 편이 아니어서 3월까지 기다려 보는 것도 상관없습니다.<br>일단 말씀하신데로 3월에 초에 확인하시는 것으로 알고 있겠습니다.<br><br>허 경 드림.<br><br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><br>(In reply to kim, jimin)<br>&gt; 안녕하세요<br>&gt; <br>&gt; SDS 김지민 선임입니다.<br>&gt; <br>&gt; 3월로 생각하였는데 혹시 daily로 알려주신부분은<br>&gt; <br>&gt; 아래 /etc/logrotate.conf 부분을 daily로 수정하여 test하는 것인가요?<br>&gt; <br>&gt; =================================================<br>&gt; root@IBHPSTG1&lt;ICT Suwon Center&gt;:/root &gt;cat /etc/logrotate.conf<br>&gt; # see &quot;man logrotate&quot; for details<br>&gt; # rotate log files weekly<br>&gt; monthly<br>&gt; <br>&gt; # keep 4 weeks worth of backlogs<br>&gt; rotate 12<br>&gt; <br>&gt; # create new (empty) log files after rotating old ones<br>&gt; create 0600 root root<br>&gt; <br>&gt; # use date as a suffix of the rotated file<br>&gt; dateext<br>&gt; <br>&gt; # uncomment this if you want your log files compressed<br>&gt; #compress<br>&gt; =================================================<br><br><publishedDate>2018-02-05T07:23:50Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LZmMaIAL"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-05T07:15:35Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-05T07:15:35Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>3월로 생각하였는데 혹시 daily로 알려주신부분은<br><br>아래 /etc/logrotate.conf 부분을 daily로 수정하여 test하는 것인가요?<br><br>=================================================<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/root &gt;cat /etc/logrotate.conf<br># see &quot;man logrotate&quot; for details<br># rotate log files weekly<br>monthly<br><br># keep 4 weeks worth of backlogs<br>rotate 12<br><br># create new (empty) log files after rotating old ones<br>create 0600 root root<br><br># use date as a suffix of the rotated file<br>dateext<br><br># uncomment this if you want your log files compressed<br>#compress<br>=================================================<br><br><publishedDate>2018-02-05T07:15:35Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LZmKKIA1"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-05T07:11:35Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-05T07:11:35Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>추후라고 하시는 것이 monthly rotation이 수행되는 때를 말씀하시는건가요?<br>대략적인 시점을 알려주시면 고맙겠습니다.<br><br>허 경 드림.<br><br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><br>(In reply to kim, jimin)<br>&gt; 안녕하세요<br>&gt; <br>&gt; SDS 김지민 선임입니다.<br>&gt; <br>&gt; 추후 logrotation 정상 수행 확인 후 <br>&gt; <br>&gt; 다시 한번 결과를 업데이트 드리겠습니다.<br>&gt; <br>&gt; 감사합니다.<br><br><publishedDate>2018-02-05T07:11:35Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LZm84IAD"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-05T06:49:14Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-05T06:49:14Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>추후 logrotation 정상 수행 확인 후 <br><br>다시 한번 결과를 업데이트 드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-02-05T06:49:14Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LZhQRIA1"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-04T14:15:29Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-05T01:12:19Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>우선, 최근에 전달해주신 내용의 출력 결과를 보면 postrotate 부분이 정상적으로 진행된 것으로 보입니다.<br>/var/log/kernel과 /var/log/vmtoolsd.log 파일이 없을 때에는 postrotate 부분이 실행되지 않았습니다.<br><br>renaming /var/log/kernel to /var/log/kernel-20180202<br>creating new /var/log/kernel mode = 0640 uid = 0 gid = 0<br>renaming /var/log/vmtoolsd.log to /var/log/vmtoolsd.log-20180202<br>creating new /var/log/vmtoolsd.log mode = 0644 uid = 0 gid = 0<br>running postrotate script<br>running script with arg /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br>: &quot;<br>        /bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true<br>&quot;<br><br>logrotate를 수행한 시간에 postrotate script에 따라 /var/log/messages에 아래와 같이 rsyslogd가 재시작된 내용이 있는지 확인해보시기 바랍니다.<br>rsyslogd 데몬이 정상적으로 kill -HUP 신호를 받아 재시작되었다면 문제는 해소되었을 것으로 판단됩니다.<br><br>rotation시 생성되는 로그 예<br>Feb  3 03:35:01 hp-dl160g8-6 rsyslogd: [origin software=&quot;rsyslogd&quot; swVersion=&quot;5.8.10&quot; x-pid=&quot;49253&quot; x-info=&quot;http://www.rsyslog.com&quot;] rsyslogd was HUPed<br><br>다만, 현재 monthly로 되어 있기 때문에 확인을 위해서는 한 달 후에 가능할 것으로 보입니다.<br>좀 더 빠른 확인이 필요하다면 monthly를 daily로 변경하셔서 정상으로 진행되는지 확인할 필요가 있습니다.<br>만약, rotation이 여전히 일어나지 않는다면 /var/run/syslogd.pid 값이 현재 작동중인 rsyslogd 프로세스의 pid 값으로 정확히 보이는지 확인해봐야 할 것 같습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-02-04T14:15:29Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LZLYGIA5"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-02T07:34:22Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-02T07:34:22Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다. <br><br>추가로 조치 후 다시 확인한 내역 보내드립니다.<br> - monthly 부분<br> monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/cron<br>  log does not need rotating<br>considering log /var/log/maillog<br>  log does not need rotating<br>considering log /var/log/messages<br>  log does not need rotating<br>considering log /var/log/secure<br>  log does not need rotating<br>considering log /var/log/kernel<br>  log needs rotating<br>considering log /var/log/vmtoolsd.log<br>  log needs rotating<br>considering log /var/log/spooler<br>  log does not need rotating<br>rotating log /var/log/kernel, log-&gt;rotateCount is 12<br>dateext suffix '-20180202'<br>glob pattern '-[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'<br>glob finding old rotated logs failed<br>rotating log /var/log/vmtoolsd.log, log-&gt;rotateCount is 12<br>dateext suffix '-20180202'<br>glob pattern '-[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'<br>glob finding old rotated logs failed<br>renaming /var/log/kernel to /var/log/kernel-20180202<br>creating new /var/log/kernel mode = 0640 uid = 0 gid = 0<br>renaming /var/log/vmtoolsd.log to /var/log/vmtoolsd.log-20180202<br>creating new /var/log/vmtoolsd.log mode = 0644 uid = 0 gid = 0<br>running postrotate script<br>running script with arg /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br><br> - 전체 수행 내역<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;/usr/sbin/logrotate -d /etc/logrotate.conf<br>reading config file /etc/logrotate.conf<br>including /etc/logrotate.d<br>reading config file bmc-watchdog<br>reading config info for /var/log/freeipmi/bmc-watchdog.log<br>reading config file conman<br>reading config info for /var/log/conman/*<br>olddir is now /var/log/conman.old/<br>reading config file cups<br>reading config info for /var/log/cups/*_log<br>reading config file dracut<br>reading config info for /var/log/dracut.log<br>reading config file httpd<br>reading config info for /var/log/httpd/*log<br>reading config file iptraf<br>reading config info for /var/log/iptraf/*.log<br>reading config file iscsiuiolog<br>reading config info for /var/log/iscsiuio.log<br>reading config file mgetty<br>reading config info for /var/log/mgetty.log.tty /var/log/mgetty.log.unknown /var/log/mgetty.callback<br>reading config file ppp<br>reading config info for /var/log/ppp/connect-errors<br>reading config file psacct<br>reading config info for /var/account/pacct<br>reading config file setroubleshoot<br>reading config info for /var/log/setroubleshoot/*.log<br>reading config file stap-server<br>reading config info for /var/log/stap-server/log<br>reading config file subscription-manager<br>reading config info for /var/log/rhsm/*.log<br>reading config file syslog<br>reading config info for /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br><br>reading config file trace-cmd<br>reading config info for /var/log/trace-cmd.log<br>reading config file up2date<br>reading config info for /var/log/up2date<br>reading config file vsftpd<br>reading config info for /var/log/vsftpd.log<br>reading config info for /var/log/xferlog<br>reading config file wpa_supplicant<br>reading config info for /var/log/wpa_supplicant.log<br>reading config file yum<br>reading config info for /var/log/yum.log<br>reading config info for /var/log/wtmp<br>reading config info for /var/log/btmp<br><br>Handling 22 logs<br><br>rotating pattern: /var/log/freeipmi/bmc-watchdog.log  after 1 days (21 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/freeipmi/bmc-watchdog.log<br>  log /var/log/freeipmi/bmc-watchdog.log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/conman/*  weekly (4 rotations)<br>olddir is /var/log/conman.old/, empty log files are not rotated, old logs are removed<br>considering log /var/log/conman/*<br>  log /var/log/conman/* does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/cups/*_log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/cups/*_log<br>  log /var/log/cups/*_log does not exist -- skipping<br><br>rotating pattern: /var/log/dracut.log  yearly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/dracut.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/httpd/*log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/httpd/*log<br>  log /var/log/httpd/*log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/iptraf/*.log  monthly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/iptraf/*.log<br>  log /var/log/iptraf/*.log does not exist -- skipping<br><br>rotating pattern: /var/log/iscsiuio.log  weekly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/iscsiuio.log<br>  log /var/log/iscsiuio.log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/mgetty.log.tty /var/log/mgetty.log.unknown /var/log/mgetty.callback  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/mgetty.log.tty<br>  log /var/log/mgetty.log.tty does not exist -- skipping<br>considering log /var/log/mgetty.log.unknown<br>  log /var/log/mgetty.log.unknown does not exist -- skipping<br>considering log /var/log/mgetty.callback<br>  log /var/log/mgetty.callback does not exist -- skipping<br><br>rotating pattern: /var/log/ppp/connect-errors  after 1 days (5 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/ppp/connect-errors<br>  log /var/log/ppp/connect-errors does not exist -- skipping<br><br>rotating pattern: /var/account/pacct  after 1 days (31 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/account/pacct<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/setroubleshoot/*.log  weekly (2 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/setroubleshoot/setroubleshootd.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/stap-server/log  30720 bytes (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/stap-server/log<br>  log does not need rotating<br><br>rotating pattern: /var/log/rhsm/*.log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/rhsm/rhsmcertd.log<br>  log does not need rotating<br>considering log /var/log/rhsm/rhsm.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br> monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/cron<br>  log does not need rotating<br>considering log /var/log/maillog<br>  log does not need rotating<br>considering log /var/log/messages<br>  log does not need rotating<br>considering log /var/log/secure<br>  log does not need rotating<br>considering log /var/log/kernel<br>  log needs rotating<br>considering log /var/log/vmtoolsd.log<br>  log needs rotating<br>considering log /var/log/spooler<br>  log does not need rotating<br>rotating log /var/log/kernel, log-&gt;rotateCount is 12<br>dateext suffix '-20180202'<br>glob pattern '-[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'<br>glob finding old rotated logs failed<br>rotating log /var/log/vmtoolsd.log, log-&gt;rotateCount is 12<br>dateext suffix '-20180202'<br>glob pattern '-[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'<br>glob finding old rotated logs failed<br>renaming /var/log/kernel to /var/log/kernel-20180202<br>creating new /var/log/kernel mode = 0640 uid = 0 gid = 0<br>renaming /var/log/vmtoolsd.log to /var/log/vmtoolsd.log-20180202<br>creating new /var/log/vmtoolsd.log mode = 0644 uid = 0 gid = 0<br>running postrotate script<br>running script with arg /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br>: &quot;<br>        /bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true<br>&quot;<br><br>rotating pattern: /var/log/trace-cmd.log  10485760 bytes (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/trace-cmd.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/up2date  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/up2date<br>  log /var/log/up2date does not exist -- skipping<br><br>rotating pattern: /var/log/vsftpd.log  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/vsftpd.log<br>  log /var/log/vsftpd.log does not exist -- skipping<br><br>rotating pattern: /var/log/xferlog  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/xferlog<br>  log /var/log/xferlog does not exist -- skipping<br><br>rotating pattern: /var/log/wpa_supplicant.log  30720 bytes (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/wpa_supplicant.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/yum.log  yearly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/yum.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/wtmp  monthly (12 rotations)<br>empty log files are rotated, only log files &gt;= 1048576 bytes are rotated, old logs are removed<br>considering log /var/log/wtmp<br>  log does not need rotating<br><br>rotating pattern: /var/log/btmp  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/btmp<br>  log does not need rotating<br><br><publishedDate>2018-02-02T07:34:22Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LZJTFIA5"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-02T02:59:02Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-02T02:59:02Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>확인 감사드립니다.<br><br>추가 문의드릴 점은 <br><br>IBHPSTG1 서버에서 확인해보니 vmtools의 log 설정파일에 toos.conf로 명명이 잘못되어있었습니다.<br>tools.conf로 변경을 하면 될 것 같은데 /var/log/kernel의 경우에 linux kernel log가 기록이되는 것 같은데 touch로 생성만 하여도 되는지 문의드립니다.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/etc/vmware-tools &gt;cat toos.conf<br>[logging]<br>log = true<br>vmtoolsd.level = debug<br>vmtoolsd.handler = file<br>vmtoolsd.data = /var/log/vmtoolsd.log<br><br>감사합니다.<br><br><publishedDate>2018-02-02T02:59:02Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LZ5wUIAT"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-01T12:27:39Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-02T01:48:13Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>logrotate 과정에서 error가 발생할 경우 rotation이 안되는 경우가 있음을 확인하였습니다.<br><br>https://access.redhat.com/solutions/32831<br><br>지난 번 알려주신 logrotate 를 수동으로 실행할 때 출력 내용 중에 아래와 같은 내용이 있습니다.<br>이 error 메시지의 영향으로 logrotate가 수행되지 않았을 가능성이 있습니다.<br><br>considering log /var/log/kernel<br>error: stat of /var/log/kernel failed: No such file or directory<br>considering log /var/log/vmtoolsd.log<br>error: stat of /var/log/vmtoolsd.log failed: No such file or directory<br><br>수동으로 /var/log/kernel /var/log/vmtoolsd.log 파일을 생성합니다.<br><br># touch /var/log/kernel /var/log/vmtoolsd.log<br><br>그런 다음, 아래 명령을 실행하여 /tmp/logrotate.debug 파일에 에러 메시지가 없어지는지 확인합니다.<br><br># /usr/sbin/logrotate -d /etc/logrotate.conf 2&gt; /tmp/logrotate.debug<br><br>/tmp/logrotate.debug 파일 내용이 error 메시지가 없이 생성된다면 다시 한번 수동으로 logrotate를 수행하여 정상으로 rotation이 진행되는지 확인하시기 바랍니다.<br><br># /usr/sbin/logrotate -v /etc/logrotate.conf<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-02-01T12:27:38Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LZ0PqIAL"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-01T04:03:06Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-01T04:03:06Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>보내주신 파일은 잘 받았습니다. 분석 후 업데이트 드리겠습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br>(In reply to kim, jimin)<br>&gt; 안녕하세요<br>&gt; <br>&gt; 김지민 선임입니다.<br>&gt; <br>&gt; dropbox 통해서 02016645- 명명으로 messages와 secure, sosreport 보내드렸습니다.<br>&gt; <br>&gt; 감사합니다.<br><br><publishedDate>2018-02-01T04:03:06Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LYzbeIAD"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-01T02:11:32Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-01T02:11:32Z</b><br><br>안녕하세요<br><br>김지민 선임입니다.<br><br>dropbox 통해서 02016645- 명명으로 messages와 secure, sosreport 보내드렸습니다.<br><br>감사합니다.<br><br><publishedDate>2018-02-01T02:11:32Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LYzP4IAL"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-01T02:03:51Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-01T02:03:51Z</b><br><br>안녕하세요<br><br>김지민 선임입니다.<br><br>요청하신 내역 보내드립니다.<br><br>1. /usr/sbin/logrotate -v /etc/logrotate.conf<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/root &gt;date<br>Thu Feb  1 11:00:46 KST 2018<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/root &gt;/usr/sbin/logrotate -v /etc/logrotate.conf<br>reading config file /etc/logrotate.conf<br>including /etc/logrotate.d<br>reading config file bmc-watchdog<br>reading config info for /var/log/freeipmi/bmc-watchdog.log<br>reading config file conman<br>reading config info for /var/log/conman/*<br>olddir is now /var/log/conman.old/<br>reading config file cups<br>reading config info for /var/log/cups/*_log<br>reading config file dracut<br>reading config info for /var/log/dracut.log<br>reading config file httpd<br>reading config info for /var/log/httpd/*log<br>reading config file iptraf<br>reading config info for /var/log/iptraf/*.log<br>reading config file iscsiuiolog<br>reading config info for /var/log/iscsiuio.log<br>reading config file mgetty<br>reading config info for /var/log/mgetty.log.tty /var/log/mgetty.log.unknown /var/log/mgetty.callback<br>reading config file ppp<br>reading config info for /var/log/ppp/connect-errors<br>reading config file psacct<br>reading config info for /var/account/pacct<br>reading config file setroubleshoot<br>reading config info for /var/log/setroubleshoot/*.log<br>reading config file stap-server<br>reading config info for /var/log/stap-server/log<br>reading config file subscription-manager<br>reading config info for /var/log/rhsm/*.log<br>reading config file syslog<br>reading config info for /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br><br>reading config file trace-cmd<br>reading config info for /var/log/trace-cmd.log<br>reading config file up2date<br>reading config info for /var/log/up2date<br>reading config file vsftpd<br>reading config info for /var/log/vsftpd.log<br>reading config info for /var/log/xferlog<br>reading config file wpa_supplicant<br>reading config info for /var/log/wpa_supplicant.log<br>reading config file yum<br>reading config info for /var/log/yum.log<br>reading config info for /var/log/wtmp<br>reading config info for /var/log/btmp<br><br>Handling 22 logs<br><br>rotating pattern: /var/log/freeipmi/bmc-watchdog.log  after 1 days (21 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/freeipmi/bmc-watchdog.log<br>  log /var/log/freeipmi/bmc-watchdog.log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/conman/*  weekly (4 rotations)<br>olddir is /var/log/conman.old/, empty log files are not rotated, old logs are removed<br>considering log /var/log/conman/*<br>  log /var/log/conman/* does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/cups/*_log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/cups/*_log<br>  log /var/log/cups/*_log does not exist -- skipping<br><br>rotating pattern: /var/log/dracut.log  yearly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/dracut.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/httpd/*log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/httpd/*log<br>  log /var/log/httpd/*log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/iptraf/*.log  monthly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/iptraf/*.log<br>  log /var/log/iptraf/*.log does not exist -- skipping<br><br>rotating pattern: /var/log/iscsiuio.log  weekly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/iscsiuio.log<br>  log /var/log/iscsiuio.log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/mgetty.log.tty /var/log/mgetty.log.unknown /var/log/mgetty.callback  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/mgetty.log.tty<br>  log /var/log/mgetty.log.tty does not exist -- skipping<br>considering log /var/log/mgetty.log.unknown<br>  log /var/log/mgetty.log.unknown does not exist -- skipping<br>considering log /var/log/mgetty.callback<br>  log /var/log/mgetty.callback does not exist -- skipping<br><br>rotating pattern: /var/log/ppp/connect-errors  after 1 days (5 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/ppp/connect-errors<br>  log /var/log/ppp/connect-errors does not exist -- skipping<br><br>rotating pattern: /var/account/pacct  after 1 days (31 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/account/pacct<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/setroubleshoot/*.log  weekly (2 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/setroubleshoot/setroubleshootd.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/stap-server/log  30720 bytes (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/stap-server/log<br>  log does not need rotating<br><br>rotating pattern: /var/log/rhsm/*.log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/rhsm/rhsmcertd.log<br>  log does not need rotating<br>considering log /var/log/rhsm/rhsm.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br> monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/cron<br>  log does not need rotating<br>considering log /var/log/maillog<br>  log does not need rotating<br>considering log /var/log/messages<br>  log does not need rotating<br>considering log /var/log/secure<br>  log does not need rotating<br>considering log /var/log/kernel<br>error: stat of /var/log/kernel failed: No such file or directory<br>considering log /var/log/vmtoolsd.log<br>error: stat of /var/log/vmtoolsd.log failed: No such file or directory<br>considering log /var/log/spooler<br>  log does not need rotating<br><br>rotating pattern: /var/log/trace-cmd.log  10485760 bytes (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/trace-cmd.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/up2date  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/up2date<br>  log /var/log/up2date does not exist -- skipping<br><br>rotating pattern: /var/log/vsftpd.log  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/vsftpd.log<br>  log /var/log/vsftpd.log does not exist -- skipping<br><br>rotating pattern: /var/log/xferlog  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/xferlog<br>  log /var/log/xferlog does not exist -- skipping<br><br>rotating pattern: /var/log/wpa_supplicant.log  30720 bytes (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/wpa_supplicant.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/yum.log  yearly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/yum.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/wtmp  monthly (12 rotations)<br>empty log files are rotated, only log files &gt;= 1048576 bytes are rotated, old logs are removed<br>considering log /var/log/wtmp<br>  log does not need rotating<br><br>rotating pattern: /var/log/btmp  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/btmp<br>  log does not need rotating<br><br>2. /etc/logrotate.d/*.conf, /etc/logrotate.conf<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/etc/logrotate.d &gt;ls<br>bmc-watchdog  cups    httpd   iscsiuiolog  ppp     setroubleshoot  subscription-manager  trace-cmd  vsftpd          yum<br>conman        dracut  iptraf  mgetty       psacct  stap-server     syslog                up2date    wpa_supplicant<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/etc/logrotate.d &gt;cat /etc/logrotate.conf<br># see &quot;man logrotate&quot; for details<br># rotate log files weekly<br>monthly<br><br># keep 4 weeks worth of backlogs<br>rotate 12<br><br># create new (empty) log files after rotating old ones<br>create<br><br># use date as a suffix of the rotated file<br>dateext<br><br># uncomment this if you want your log files compressed<br>#compress<br><br># RPM packages drop log rotation information into this directory<br>include /etc/logrotate.d<br><br># no packages own wtmp and btmp -- we'll rotate them here<br>/var/log/wtmp {<br>    monthly<br>    create 0664 root utmp<br>        minsize 1M<br>    rotate 12<br>}<br><br>/var/log/btmp {<br>    missingok<br>    monthly<br>    create 0600 root utmp<br>    rotate 12<br>}<br><br># system-specific logs may be also be configured here.<br><br>3. stat /var/log/messages<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/root &gt;stat /var/log/messages<br>  File: `/var/log/messages'<br>  Size: 2223423         Blocks: 4352       IO Block: 4096   regular file<br>Device: 803h/2051d      Inode: 262374      Links: 1<br>Access: (0600/-rw-------)  Uid: (    0/    root)   Gid: (    0/    root)<br>Access: 2018-02-01 04:41:23.901725151 +0900<br>Modify: 2018-02-01 04:41:23.576727934 +0900<br>Change: 2018-02-01 04:41:23.576727934 +0900<br><br>/var/log/messages, /var/log/secure와 sosreport는 dropbox 통해서 보내드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-02-01T02:03:51Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LYyk6IAD"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-01T00:36:44Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-01T00:36:44Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>지난 번에 설정을 확인하기 위해서 logrotate 명령을 수동으로 실행했을 때 /var/log/messages 파일의 경우 rotating이 필요 없다는 메시지가 나왔습니다.<br>monthly 설정에 의한 것으로 생각되었는데, 혹시 다른 설정으로 인해서 rotating이 이루어지지 않았을 수 도 있습니다.<br><br>considering log /var/log/messages<br>  log does not need rotating<br><br>지난 번에 실행하신 것처럼 시스템 부하가 적을 때 아래 명령을 수행하셔서 수동으로 rotation이 되는지 확인을 해주셨으면 합니다.<br>/usr/sbin/logrotate -v /etc/logrotate.conf<br><br>또한, logrotate 설정에 포함되는 모든 파일의 내용을 확인해야할 필요가 있습니다.<br><br>아래 파일들을 수집해주시면 좋겠습니다.<br>/etc/logrotate.d/*.conf<br>/etc/logrotate.conf <br>/var/log/messages<br>/var/log/secure<br><br>아울러, /var/log/messages 파일의 메타데이터를 확인할 수 있도록 아래 명령 수행 결과도 함께 알려주시기 바랍니다.<br>stat /var/log/messages <br><br>가능하시다면, sosreport 파일도 함께 전달해주시면 영향을 줄 가능성이 있는 다른 부분도 함께 확인해보겠습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-02-01T00:36:44Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LYyTYIA1"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-31T23:59:27Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-31T23:59:27Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;ls -al | grep -i messages<br>-rw-------   1 root         root         2223423 Feb  1 04:41 messages<br>-rw-------   1 root         root           26670 Jul 31  2015 messages-20150801<br>-rw-------   1 root         root           36878 Aug 31  2015 messages-20150901<br>-rw-------   1 root         root          111901 Oct  1  2015 messages-20151001<br>-rw-------   1 root         root          113147 Oct 31  2015 messages-20151101<br>-rw-------   1 root         root          130304 Nov 30  2015 messages-20151201<br>-rw-------   1 root         root           35633 Dec 31  2015 messages-20160101<br>-rw-------   1 root         root           34743 Jan 31  2016 messages-20160201<br>-rw-------   1 root         root           32390 Feb 29  2016 messages-20160301<br>-rw-------   1 root         root          114535 Mar 31  2016 messages-20160401<br>-rw-------   1 root         root           34132 Apr 30  2016 messages-20160501<br>-rw-------   1 root         root          121249 May 31  2016 messages-20160601<br>-rw-------   1 root         root           32690 Jun 30  2016 messages-20160701<br><br>2월 1일에 확인한 내역인데 messages 파일의 logrotate가 수행되지 않은 것 처럼보여서<br>추가로 확인해야될 부분이 있는지 문의드립니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-31T23:59:27Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LYaqNIAT"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-31T02:47:38Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-31T02:47:38Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>cron 프로세스는 확인하였습니다.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/root &gt;service crond status<br>crond (pid  2324) is running...<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/root &gt;ps -ef | grep -i crond<br>root       2324      1  0 Jan21 ?        00:00:05 crond<br>root      96249  96209  0 11:45 pts/1    00:00:00 grep -i crond<br><br>logrotation 결과도 확인 후 알려드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-31T02:47:38Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LXhOXIA1"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-01-26T08:20:42Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-01-26T08:20:42Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>보내주신 명령 출력 결과로 보면 logrotate 설정에는 문제가 없어 보입니다.<br>logrotate는 cron에 의해서 수행되도록 되어 있습니다. 따라서 cron 데몬이 정상 작동하고 있는지 확인 부탁드립니다.<br>2월 1일에 logrotation이 정상으로 동작하는지 확인하셔서 결과 알려주시기 바랍니다.<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-01-26T08:20:42Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LXUwSIAX"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-25T13:54:06Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-25T13:54:06Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>답변 감사드립니다.<br><br>해당 서버에 대해서 2/1에 한번 확인해보겠습니다.<br><br>감사합니다.<br><br> - root@IBHPSTG1&lt;ICT Suwon Center&gt;:/root &gt;/usr/sbin/logrotate -v /etc/logrotate.conf<br>reading config file /etc/logrotate.conf<br>including /etc/logrotate.d<br>reading config file bmc-watchdog<br>reading config info for /var/log/freeipmi/bmc-watchdog.log<br>reading config file conman<br>reading config info for /var/log/conman/*<br>olddir is now /var/log/conman.old/<br>reading config file cups<br>reading config info for /var/log/cups/*_log<br>reading config file dracut<br>reading config info for /var/log/dracut.log<br>reading config file httpd<br>reading config info for /var/log/httpd/*log<br>reading config file iptraf<br>reading config info for /var/log/iptraf/*.log<br>reading config file iscsiuiolog<br>reading config info for /var/log/iscsiuio.log<br>reading config file mgetty<br>reading config info for /var/log/mgetty.log.tty /var/log/mgetty.log.unknown /var/log/mgetty.callback<br>reading config file ppp<br>reading config info for /var/log/ppp/connect-errors<br>reading config file psacct<br>reading config info for /var/account/pacct<br>reading config file setroubleshoot<br>reading config info for /var/log/setroubleshoot/*.log<br>reading config file stap-server<br>reading config info for /var/log/stap-server/log<br>reading config file subscription-manager<br>reading config info for /var/log/rhsm/*.log<br>reading config file syslog<br>reading config info for /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br><br>reading config file trace-cmd<br>reading config info for /var/log/trace-cmd.log<br>reading config file up2date<br>reading config info for /var/log/up2date<br>reading config file vsftpd<br>reading config info for /var/log/vsftpd.log<br>reading config info for /var/log/xferlog<br>reading config file wpa_supplicant<br>reading config info for /var/log/wpa_supplicant.log<br>reading config file yum<br>reading config info for /var/log/yum.log<br>reading config info for /var/log/wtmp<br>reading config info for /var/log/btmp<br><br>Handling 22 logs<br><br>rotating pattern: /var/log/freeipmi/bmc-watchdog.log  after 1 days (21 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/freeipmi/bmc-watchdog.log<br>  log /var/log/freeipmi/bmc-watchdog.log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/conman/*  weekly (4 rotations)<br>olddir is /var/log/conman.old/, empty log files are not rotated, old logs are removed<br>considering log /var/log/conman/*<br>  log /var/log/conman/* does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/cups/*_log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/cups/*_log<br>  log /var/log/cups/*_log does not exist -- skipping<br><br>rotating pattern: /var/log/dracut.log  yearly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/dracut.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/httpd/*log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/httpd/*log<br>  log /var/log/httpd/*log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/iptraf/*.log  monthly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/iptraf/*.log<br>  log /var/log/iptraf/*.log does not exist -- skipping<br><br>rotating pattern: /var/log/iscsiuio.log  weekly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/iscsiuio.log<br>  log /var/log/iscsiuio.log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/mgetty.log.tty /var/log/mgetty.log.unknown /var/log/mgetty.callback  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/mgetty.log.tty<br>  log /var/log/mgetty.log.tty does not exist -- skipping<br>considering log /var/log/mgetty.log.unknown<br>  log /var/log/mgetty.log.unknown does not exist -- skipping<br>considering log /var/log/mgetty.callback<br>  log /var/log/mgetty.callback does not exist -- skipping<br><br>rotating pattern: /var/log/ppp/connect-errors  after 1 days (5 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/ppp/connect-errors<br>  log /var/log/ppp/connect-errors does not exist -- skipping<br><br>rotating pattern: /var/account/pacct  after 1 days (31 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/account/pacct<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/setroubleshoot/*.log  weekly (2 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/setroubleshoot/setroubleshootd.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/stap-server/log  30720 bytes (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/stap-server/log<br>  log does not need rotating<br><br>rotating pattern: /var/log/rhsm/*.log  monthly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/rhsm/rhsmcertd.log<br>  log does not need rotating<br>considering log /var/log/rhsm/rhsm.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br> monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/cron<br>  log does not need rotating<br>considering log /var/log/maillog<br>  log does not need rotating<br>considering log /var/log/messages<br>  log does not need rotating<br>considering log /var/log/secure<br>  log does not need rotating<br>considering log /var/log/kernel<br>error: stat of /var/log/kernel failed: No such file or directory<br>considering log /var/log/vmtoolsd.log<br>error: stat of /var/log/vmtoolsd.log failed: No such file or directory<br>considering log /var/log/spooler<br>  log does not need rotating<br><br>rotating pattern: /var/log/trace-cmd.log  10485760 bytes (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/trace-cmd.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/up2date  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/up2date<br>  log /var/log/up2date does not exist -- skipping<br><br>rotating pattern: /var/log/vsftpd.log  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/vsftpd.log<br>  log /var/log/vsftpd.log does not exist -- skipping<br><br>rotating pattern: /var/log/xferlog  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/xferlog<br>  log /var/log/xferlog does not exist -- skipping<br><br>rotating pattern: /var/log/wpa_supplicant.log  30720 bytes (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/wpa_supplicant.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/yum.log  yearly (12 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/yum.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/wtmp  monthly (12 rotations)<br>empty log files are rotated, only log files &gt;= 1048576 bytes are rotated, old logs are removed<br>considering log /var/log/wtmp<br>  log does not need rotating<br><br>rotating pattern: /var/log/btmp  monthly (12 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/btmp<br>  log does not need rotating<br><br><publishedDate>2018-01-25T13:54:06Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LXQcpIAH"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-01-25T08:35:15Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-01-25T08:35:15Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>보내주신 파일의 내용으로는 문제는 없어 보입니다.<br>현재 logrotate가 monthly 기준이기 때문에 정상적으로 작동한다면 다음 달 1일에 rotation 이 수행되어야 합니다.<br><br>/etc/cron.daily/logrotate 파일을 아래와 같이 수정한 후 다시 한번 실행하셔서 logrotate 설정이 정확히 적용되는지 확인 하실 수 있습니다.<br>shell 명령 실행시 -x 옵션과 logrotate 명령 실행시 -v 옵션을 적용하는 것으로 아래와 같이 일부 내용을 수정하시면 됩니다.<br><br>#!/bin/sh -x<br>          ~~~<br>/usr/sbin/logrotate -v /etc/logrotate.conf<br>                    ~~~<br><br>이 명령을 수행하면 아래와 같은 형태로 출력이 나오게 됩니다.<br>수정한 내용으로 다시 한번 명령을 수행하셔서 아래 예제를 참고하여 비교하시면 원인을 찾는데 도움이 될 것으로 생각합니다.<br><br>아래 내용을 테스트 시스템에서 수행한 결과입니다. 참고 자료로 보시기 바랍니다.<br>실행하신 결과가 아래 예제와 다르게 의심이 되는 부분이 나타나면 해당 내용을 전달해주시면 고맙겠습니다.<br><br>설정 파일들이 읽히는지와 각각의 로그 파일들의 rotation 여부에 대한 정보를 확인하실 수 있습니다.<br><br>+ /usr/sbin/logrotate -v /etc/logrotate.conf<br>reading config file /etc/logrotate.conf<br>including /etc/logrotate.d<br>reading config file cups<br>reading config info for /var/log/cups/*_log<br>reading config file dracut<br>reading config info for /var/log/dracut.log<br>reading config file mcelog<br>reading config info for /var/log/mcelog<br>reading config file numad<br>reading config info for /var/log/numad.log<br>reading config file psacct<br>reading config info for /var/account/pacct<br>reading config file sssd<br>reading config info for /var/log/sssd/*.log<br>reading config file subscription-manager<br>reading config info for /var/log/rhsm/*.log<br>reading config file syslog<br>reading config info for /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/spooler<br><br>reading config file up2date<br>reading config info for /var/log/up2date<br>reading config file yum<br>reading config info for /var/log/yum.log<br>reading config info for /var/log/wtmp<br>reading config info for /var/log/btmp<br><br>Handling 12 logs<br><br>rotating pattern: /var/log/cups/*_log  weekly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/cups/*_log<br>  log /var/log/cups/*_log does not exist -- skipping<br><br>rotating pattern: /var/log/dracut.log  1048576 bytes (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/dracut.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/mcelog  2097152 bytes (99 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/mcelog<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/numad.log  1048576 bytes (5 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/numad.log<br>  log /var/log/numad.log does not exist -- skipping<br><br>rotating pattern: /var/account/pacct  after 1 days (31 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/account/pacct<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/sssd/*.log  weekly (2 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/sssd/*.log<br>  log /var/log/sssd/*.log does not exist -- skipping<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/rhsm/*.log  weekly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/rhsm/rhsmcertd.log<br>  log does not need rotating<br>considering log /var/log/rhsm/rhsm.log<br>  log does not need rotating<br><br>rotating pattern: /var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/spooler<br> weekly (4 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/cron<br>  log does not need rotating<br>considering log /var/log/maillog<br>  log does not need rotating<br>considering log /var/log/messages<br>  log does not need rotating<br>considering log /var/log/secure<br>  log does not need rotating<br>considering log /var/log/spooler<br>  log does not need rotating<br>not running postrotate script, since no logs were rotated<br><br>rotating pattern: /var/log/up2date  weekly (4 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/up2date<br>  log /var/log/up2date does not exist -- skipping<br><br>rotating pattern: /var/log/yum.log  yearly (4 rotations)<br>empty log files are not rotated, old logs are removed<br>considering log /var/log/yum.log<br>  log /var/log/yum.log does not exist -- skipping<br><br>rotating pattern: /var/log/wtmp  monthly (1 rotations)<br>empty log files are rotated, only log files &gt;= 1048576 bytes are rotated, old logs are removed<br>considering log /var/log/wtmp<br>  log does not need rotating<br><br>rotating pattern: /var/log/btmp  monthly (1 rotations)<br>empty log files are rotated, old logs are removed<br>considering log /var/log/btmp<br>  log does not need rotating<br>set default create context<br>+ EXITVALUE=0<br>+ '[' 0 '!=' 0 ']'<br>+ exit 0<br><br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-01-25T08:35:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LXMbJIAX"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-25T00:29:17Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-25T00:29:16Z</b><br><br>안녕하세요 SDS 김지민 선임입니다.<br><br>요청하신 내역 보내드립니다.<br><br><br>1. logroate 상태 파일 확인 <br># cat /var/lib/logrotate.status<br># ls -l /var/log/messages*<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/ &gt;cat /var/lib/logrotate.status<br>logrotate state -- version 2<br>&quot;/var/log/iptraf/*.log&quot; 2014-7-24<br>&quot;/var/log/kernel&quot; 2016-7-17<br>&quot;/var/log/yum.log&quot; 2018-1-1<br>&quot;/var/log/up2date&quot; 2014-7-24<br>&quot;/var/log/dracut.log&quot; 2018-1-22<br>&quot;/var/log/setroubleshoot/setroubleshootd.log&quot; 2018-1-21<br>&quot;/var/log/freeipmi/bmc-watchdog.log&quot; 2014-7-24<br>&quot;/var/log/httpd/*log&quot; 2014-7-24<br>&quot;/var/log/mgetty.log.unknown&quot; 2014-7-24<br>&quot;/var/log/wtmp&quot; 2017-1-16<br>&quot;/var/log/spooler&quot; 2018-1-1<br>&quot;/var/log/vmtoolsd.log&quot; 2016-7-17<br>&quot;/var/log/mgetty.callback&quot; 2014-7-24<br>&quot;/var/log/stap-server/log&quot; 2014-7-24<br>&quot;/var/log/btmp&quot; 2018-1-1<br>&quot;/var/log/trace-cmd.log&quot; 2014-7-24<br>&quot;/var/log/conman/*&quot; 2014-7-24<br>&quot;/var/log/rhsm/rhsmcertd.log&quot; 2014-9-1<br>&quot;/var/log/xferlog&quot; 2014-7-24<br>&quot;/var/log/iscsiuio.log&quot; 2014-7-24<br>&quot;/var/log/mgetty.log.tty&quot; 2014-7-24<br>&quot;/var/log/maillog&quot; 2018-1-1<br>&quot;/var/log/cups/*_log&quot; 2014-7-24<br>&quot;/var/log/wpa_supplicant.log&quot; 2014-7-24<br>&quot;/var/log/secure&quot; 2018-1-1<br>&quot;/var/log/ppp/connect-errors&quot; 2014-7-24<br>&quot;/var/log/rhsm/rhsm.log&quot; 2017-7-1<br>&quot;/var/log/messages&quot; 2018-1-1<br>&quot;/var/account/pacct&quot; 2014-7-24<br>&quot;/var/log/cron&quot; 2018-1-1<br>&quot;/var/log/vsftpd.log&quot; 2014-7-24<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/ &gt;ls -l /var/log/messages*<br>-rw------- 1 root root 2202422 Jan 25 05:01 /var/log/messages<br>-rw------- 1 root root   26670 Jul 31  2015 /var/log/messages-20150801<br>-rw------- 1 root root   36878 Aug 31  2015 /var/log/messages-20150901<br>-rw------- 1 root root  111901 Oct  1  2015 /var/log/messages-20151001<br>-rw------- 1 root root  113147 Oct 31  2015 /var/log/messages-20151101<br>-rw------- 1 root root  130304 Nov 30  2015 /var/log/messages-20151201<br>-rw------- 1 root root   35633 Dec 31  2015 /var/log/messages-20160101<br>-rw------- 1 root root   34743 Jan 31  2016 /var/log/messages-20160201<br>-rw------- 1 root root   32390 Feb 29  2016 /var/log/messages-20160301<br>-rw------- 1 root root  114535 Mar 31  2016 /var/log/messages-20160401<br>-rw------- 1 root root   34132 Apr 30  2016 /var/log/messages-20160501<br>-rw------- 1 root root  121249 May 31  2016 /var/log/messages-20160601<br>-rw------- 1 root root   32690 Jun 30  2016 /var/log/messages-20160701<br><br>2. logrotate 수행 <br># /etc/cron.daily/logroate<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/ &gt;cat /etc/cron.daily/logrotate<br>#!/bin/sh<br><br>/usr/sbin/logrotate /etc/logrotate.conf &gt;/dev/null 2&gt;&amp;1<br>EXITVALUE=$?<br>if [ $EXITVALUE != 0 ]; then<br>    /usr/bin/logger -t logrotate &quot;ALERT exited abnormally with [$EXITVALUE]&quot;<br>fi<br>exit 0<br><br>3. logrotate 상태 파일 확인 <br># cat /var/lib/logrotate.status<br># ls -l /var/log/messages*<br><br>1번과 3번은 돌일하게 보입니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-25T00:29:16Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LX8OLIA1"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-01-24T08:41:59Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-01-24T08:41:59Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>보내주신 설정 파일에 특이사항은 없는 것 같습니다.<br>수동으로 logrotate를 수행하여 작동 여부를 확인해 봤으면 합니다.<br><br>아래 절차로 수동으로 logrotate를 수행하여 결과를 확인해주시기 바랍니다.<br><br>1. logroate 상태 파일 확인 <br># cat /var/lib/logrotate.status<br># ls -l /var/log/messages*<br><br>2. logrotate 수행 <br># /etc/cron.daily/logroate<br><br>3. logrotate 상태 파일 확인 <br># cat /var/lib/logrotate.status<br># ls -l /var/log/messages*<br><br>각 단계별로 실행하신 출력 결과를 알려주시면 그 내용을 바탕으로 추가 분석을 진행하겠습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-01-24T08:41:59Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LWpzZIAT"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-23T09:26:22Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-23T09:26:22Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다. <br><br>요청하신 내역 보내드립니다.<br><br> - /etc/logrotate.d/syslog 파일이 있는지 확인하시고 있는 경우 그 내용을 전달해주시기 바랍니다.<br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/root &gt;cat /etc/logrotate.d/syslog<br>/var/log/cron<br>/var/log/maillog<br>/var/log/messages<br>/var/log/secure<br>/var/log/kernel<br>/var/log/vmtoolsd.log<br>/var/log/spooler<br>{<br>    sharedscripts<br>    postrotate<br>        /bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true<br>    endscript<br>}<br><br>감사합니다.<br><br><publishedDate>2018-01-23T09:26:22Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LWVRRIA5"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-01-22T07:30:11Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-01-22T07:30:11Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>/etc/logrotate.d/syslog 파일에 /var/log/messages 파일에 대한 logrotate 설정 내용이 들어가는 것이 기본값입니다.<br>/etc/logrotate.d/syslog 파일이 있는지 확인하시고 있는 경우 그 내용을 전달해주시기 바랍니다.<br>혹시 해당 파일에 /var/log/messages 에 대한 설정 내용이 없는 경우 /etc/logrotate.d/에 있는 파일중에 /var/log/messages 파일에 대한 내용이 있을 수도 있으니 다른 파일의 내용도 함께 확인해보시기 바랍니다.<br><br>허 경 드림.<br><br><publishedDate>2018-01-22T07:30:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LWSTmIAP"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-01-22T00:31:53Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-01-22T00:31:53Z</b><br><br>안녕하세요?<br><br>Senior Technical Account Manager 허경입니다.<br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>문의하신 내용에 대해서 확인한 후 업데이트 드리겠습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-01-22T00:31:53Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>SDS 김지민 선임입니다.<br><br>redhat 6.4 OS에서 logrotate.conf 설정 및 동작 관련 문의입니다.<br><br><br>아래와 같이 messages 파일에 관련하여 한달씩 12개월 보관하도록 설정이 되어있는데<br>어느 순간 부터는 동작하지 않는 것 같아서 문의드립니다.<br><br>아래 내용을 첨부하였고 혹시 추가 필요한 내역이 있으시면 알려주시면 추가하겠습니다.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;cat /etc/logrotate.conf<br># see &quot;man logrotate&quot; for details<br># rotate log files weekly<br>monthly<br><br># keep 4 weeks worth of backlogs<br>rotate 12<br><br># create new (empty) log files after rotating old ones<br>create<br><br># use date as a suffix of the rotated file<br>dateext<br><br># uncomment this if you want your log files compressed<br>#compress<br><br># RPM packages drop log rotation information into this directory<br>include /etc/logrotate.d<br><br># no packages own wtmp and btmp -- we'll rotate them here<br>/var/log/wtmp {<br>    monthly<br>    create 0664 root utmp<br>        minsize 1M<br>    rotate 12<br>}<br><br>/var/log/btmp {<br>    missingok<br>    monthly<br>    create 0600 root utmp<br>    rotate 12<br>}<br><br># system-specific logs may be also be configured here.<br><br>root@IBHPSTG1&lt;ICT Suwon Center&gt;:/var/log &gt;ls -al | grep messages<br>-rw-------   1 root         root         1977992 Jan 21 00:20 messages<br>-rw-------   1 root         root           26670 Jul 31  2015 messages-20150801<br>-rw-------   1 root         root           36878 Aug 31  2015 messages-20150901<br>-rw-------   1 root         root          111901 Oct  1  2015 messages-20151001<br>-rw-------   1 root         root          113147 Oct 31  2015 messages-20151101<br>-rw-------   1 root         root          130304 Nov 30  2015 messages-20151201<br>-rw-------   1 root         root           35633 Dec 31  2015 messages-20160101<br>-rw-------   1 root         root           34743 Jan 31  2016 messages-20160201<br>-rw-------   1 root         root           32390 Feb 29  2016 messages-20160301<br>-rw-------   1 root         root          114535 Mar 31  2016 messages-20160401<br>-rw-------   1 root         root           34132 Apr 30  2016 messages-20160501<br>-rw-------   1 root         root          121249 May 31  2016 messages-20160601<br>-rw-------   1 root         root           32690 Jun 30  2016 messages-20160701</issue><cep>false</cep></case>