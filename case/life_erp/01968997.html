======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2017-11-08T05:25:01Z</b><br><b>마지막 답변자 : Xingbin Li</b><br><b>마지막 수정 일자 : 2017-11-24T02:14:31Z</b><br><b>id : 500A000000Z27AEIAZ</b><br>======================<br><br><b><font size=15>
제목  : transparent_hugepage 값에 대해서 never 설정 관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>보험 ERP FS-PM AP 서버 중 1대는<br> transparent_hugepage 설정 부분이 always로 되어있는 상태입니다.<br><br>root@PPMSAL09SL /root # cat /sys/kernel/mm/transparent_hugepage/enabled<br>[always] madvise never<br><br>transparent_hugepage 부분을 원래 never로 설정하여 사용하지 않도록 설정을 하는데<br>해당 서버가 누락된 것 같아서 <br>echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled 통해서 never 설정 적용을 하려고 합니다.<br><br>online 적용은 되는 것으로 알고있는데 application이 구동 중이어서 혹시 적용 전에 확인해야될 부분이 있는지 문의드리려고 합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>PPMSAL09SL</hostname><br><br><br><comment id="a0aA000000L4VceIAF"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-24T02:14:28Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-24T02:14:28Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service입니다.<br><br>마지막 안내후 일정기간동안 답변이 없으셔서 본 케이스를 close 처리 하려고 합니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.  <br>  <br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발생됩니다. <br>고객님께서 남기 신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다. <br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.  <br>  <br>감사합니다.<br><br><publishedDate>2017-11-24T02:14:28Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000L463HIAR"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-22T06:28:57Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-22T06:28:57Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 추가적으로 문의하실 사항이 있으신가요?<br><br>본 안내 후 일정기간 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하시다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2017-11-22T06:28:57Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KxDwKIAV"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-09T08:15:30Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-09T08:15:30Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>네 맞습니다. 해당 명령어로 Huge Page 를 사용하는 프로세스를 확인하실수 있습니다 .<br><br>감사합니다.<br><br><publishedDate>2017-11-09T08:15:30Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KxDhkIAF"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2017-11-09T07:50:52Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2017-11-09T07:50:52Z</b><br><br>첨부로 주신 내역 중에서<br><br>grep -e AnonHugePages  /proc/*/smaps | awk  '{ if($2&gt;4) print $0} ' |  awk -F &quot;/&quot;  '{print $0; system(&quot;ps -fp &quot; $3)} '<br><br>위의 부분으로 확인을 해보면 되는 것인가요?<br><br><publishedDate>2017-11-09T07:50:52Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KxDXkIAN"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2017-11-09T07:35:29Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2017-11-09T07:35:29Z</b><br><br>안녕하세요 <br><br>아직 비활성화 시키지는 않은 상태입니다.<br><br>추가로 THP 를 사용하는 프로세스나 그런 부분을 혹시 확인하는 방법이 있는지 문의드려도될까요?<br><br>감사합니다.<br><br><publishedDate>2017-11-09T07:35:29Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KxCM7IAN"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-09T05:26:42Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-09T05:26:42Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>이것은 THP 비활성화 전 할당된 Hugepage로 추측됩니다..해당 페이지들은 run time 비활성화 적용후에도 여전히 존재할수 있다고 아래 문서에 나와 있습니다.<br><br>~~~~~~<br>Running the above commands will stop only creation and usage of the new THP. The THP which were created and used at the moment the above commands were run would not be disassembled into the regular memory pages. To get rid of THP completely the system should be rebooted with THP disabled at boot time.<br>~~~~~~<br>https://access.redhat.com/solutions/46111<br><br>혹시 THP 비활성화후에도 해당 수치가 커지고 있는 상황이신가요?<br><br>감사합니다.<br><br><publishedDate>2017-11-09T05:26:42Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KxCFzIAN"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2017-11-09T05:15:00Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2017-11-09T05:15:00Z</b><br><br>안녕하세요<br><br>김지민 선임입니다.<br><br>아래와 같은 상황이면 AnonHugePages:  101412864 kB hugepages를 사용하고 있는 상황으로 보면 될까요?<br><br>root@PPMSAL09SL /root # cat /proc/meminfo<br>MemTotal:       1056525396 kB<br>MemFree:        473112692 kB<br>MemAvailable:   715562812 kB<br>Buffers:           32612 kB<br>Cached:         426041400 kB<br>SwapCached:            0 kB<br>Active:         394481960 kB<br>Inactive:       141559796 kB<br>Active(anon):   281452836 kB<br>Inactive(anon): 19342420 kB<br>Active(file):   113029124 kB<br>Inactive(file): 122217376 kB<br>Unevictable:       15976 kB<br>Mlocked:           15976 kB<br>SwapTotal:      201326588 kB<br>SwapFree:       201326588 kB<br>Dirty:              1424 kB<br>Writeback:            28 kB<br>AnonPages:      109983736 kB<br>Mapped:         168970836 kB<br>Shmem:          190821688 kB<br>Slab:            8060384 kB<br>SReclaimable:    7457036 kB<br>SUnreclaim:       603348 kB<br>KernelStack:       47440 kB<br>PageTables:     28567840 kB<br>NFS_Unstable:          0 kB<br>Bounce:                0 kB<br>WritebackTmp:          0 kB<br>CommitLimit:    729589284 kB<br>Committed_AS:   719493396 kB<br>VmallocTotal:   34359738367 kB<br>VmallocUsed:     2055232 kB<br>VmallocChunk:   34357473184 kB<br>HardwareCorrupted:     0 kB<br>AnonHugePages:  101412864 kB<br>HugePages_Total:       0<br>HugePages_Free:        0<br>HugePages_Rsvd:        0<br>HugePages_Surp:        0<br>Hugepagesize:       2048 kB<br>DirectMap4k:      644096 kB<br>DirectMap2M:    107241472 kB<br>DirectMap1G:    967835648 kB<br><br><publishedDate>2017-11-09T05:15:00Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KwvvWIAR"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-08T08:29:25Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-08T08:29:25Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>특별히 확인하실 사항은 없는 것으로 확인하였습니다.<br>다만 온라인 적용전 사용되고 있던 hugepage는 해제되지 않고 계속 사용됨을 알려드립니다.<br><br>완전히 Hugepage 사용을 중지하시려면 cmdline에 관련 파라메터를 추가하고 재부팅하시면 됩니다.<br><br>How to disable transparent hugepages (THP) on Red Hat Enterprise Linux 7<br>-https://access.redhat.com/solutions/1320153<br><br>감사합니다.<br><br><publishedDate>2017-11-08T08:29:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KwuLaIAJ"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2017-11-08T05:45:54Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2017-11-08T05:45:54Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>현재 문의 주신 내용을 자세히 살펴보고 있는 중이며 답변이 정리되는 대로 <br>코멘트를 업데이트 해드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-11-08T05:45:54Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>