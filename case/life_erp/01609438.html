======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-03-31T07:37:11Z</b><br><b>마지막 답변자 : Meiyan Zheng</b><br><b>마지막 수정 일자 : 2016-08-26T08:29:54Z</b><br><b>id : 500A000000U5hfhIAB</b><br>======================<br><br><b><font size=15>
제목  : NFS timeo, retrans 값 문의 드립니다.
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>NFS 가용성 테스트 시 발생했던 Failover 지연에 대해 NFS Mount 옵션 중 timeo 값과 연관 하여 분석을 진행하고 있습니다.<br><br>현재 설정되어 있는 값은 아래와 같습니다.<br><br>vers=3,proto=tcp,intr,hard,timeo=600,retrans=2,wsize=65536,rsize=65536,_netdev<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>timeo=600 (60초) 값을 300으로 줄였을 경우 failover 시간 단축에 영향을 주는 것으로 판단하고 있습니다.<br><br>그렇다면, NAS 스토리지  컨트롤러 1번이 다운 된 시점부터 복원 될 때까지 timeo , retrans 값이 해주는 역할이 궁금합니다.<br><br>https://access.redhat.com/support/cases/#/case/01607328 케이스를 참고하여 확인 하였으나, <br><br>정확히 이해가 안되어 반영을 못하고 있으니, 확인 부탁드립니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000Gp7IyIAJ"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-04-07T02:01:04Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-04-07T02:01:04Z</b><br><br>감사합니다.<br><br>많은 도움이 되었습니다.<br><br>케이스는 Close 하도록 하겠습니다.<br><br><publishedDate>2016-04-07T02:01:04Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GmobOIAR"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2016-04-01T03:10:08Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2016-04-01T03:10:08Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>현재 NFS 서버가 다운 될 경우 timeo 또한 retrans 옵션을 지정 하셨을 때 어떻게 작동 하고 있는지를 <br>문의 하고 있는 것으로 인식 되고 있습니다. <br><br>timeo값은 매번 클라이언트에서 retransmission을 보냈을 때 서버의 회신을 대기 하는 최대 시간을 의미 <br>하고  있습니다. 클라이언트에서 서버 회신에 대한 대기 시간은 매번 retransmission 보낼때 마다 증가 <br>되지만 최대로 timeo로 지정 된 시간으로 증가 될수 있습니다. 즉 처음 부터 timeo로 지정 된 시간을 <br>서버의 회신을 대기 하는게 아닙니다. <br> <br>retrans 값은 NFS 서버가 fail 되는 것으로 인식 될때 까지 클라이언트에서 retransmission 을 보내는 <br>횟 수를 지정 하게 됩니다. 예를 들어서, 해당 값을 2로 지정 하실 경우, 만약 retransmission을 2번 <br>보낸후 서버에서 계속 회신이 없으면 fail 되고 로그 파일에 &quot;server not responding&quot; 메시지가 찍히게<br>됩니다. 이후, 만약 soft 옵션으로 마운트 될 경우 클라이언트에서 error를 return 하고 파일 시스템에 <br>에러가 발생 했다는 것을 애플리케이션에 알리게 됩니다. 만약 hard 옵션으로 마운트 되고 있다면 서버가 <br>복구 될때 까지 계속 retransmission을 보내게 됩니다. <br><br>따라서, 만약에 서버의 다운 시간이 길지 않다면, 예를 들어서 10내에 서버 복구 될수 있다면 timeo 값을 <br>줄여도 효과 크게 보이지 않는 것으로 생각 됩니다. 만약 서버 다운 시간이 매우 길게 되어 있다면, timeo<br>값을 30초로 줄이셔도 60초로 설정 될 경우 보다 30초 더 빨리 복구 될수 있을 뿐입니다.<br><br><br>윗 부분 내용은 # man nfs에서도 확인 가능 하십니다. <br>만약 관련 해서 추가적인 문의 사항이 있으시면 다시 연락 주시기 바랍니다. <br>======================<br>감사합니다. <br><br>Red Hat GSS<br>정미연<br><br><publishedDate>2016-04-01T03:10:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>NFS 가용성 테스트 시 발생했던 Failover 지연에 대해 NFS Mount 옵션 중 timeo 값과 연관 하여 분석을 진행하고 있습니다.<br><br>현재 설정되어 있는 값은 아래와 같습니다.<br><br>vers=3,proto=tcp,intr,hard,timeo=600,retrans=2,wsize=65536,rsize=65536,_netdev</issue><environment>timeo=600 (60초) 값을 300으로 줄였을 경우 failover 시간 단축에 영향을 주는 것으로 판단하고 있습니다.<br><br>그렇다면, NAS 스토리지  컨트롤러 1번이 다운 된 시점부터 복원 될 때까지 timeo , retrans 값이 해주는 역할이 궁금합니다.<br><br>https://access.redhat.com/support/cases/#/case/01607328 케이스를 참고하여 확인 하였으나, <br><br>정확히 이해가 안되어 반영을 못하고 있으니, 확인 부탁드립니다.<br><br>감사합니다.</environment><cep>false</cep></case>