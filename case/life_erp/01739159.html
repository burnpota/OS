======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-11-13T14:30:59Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-12-06T11:02:16Z</b><br><b>id : 500A000000VmTNaIAN</b><br>======================<br><br><b><font size=15>
제목  : QIASAL01SL 일시적 시스템 서비스 중단(Hang) 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>프로젝트 품질계 시스템 중 QIASAL01SL 에서 11월 12일 02:03:47 경 시스템 서비스가 일시적으로 중단되는 문제가 발견 되었습니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>로그를 확인 해 보니 해당 시간대에 아래와 같은 로그가 기록 된 것을 확인 하였습니다.<br><br>Nov 12 02:03:47 QIASAL01SL kernel: hrtimer: interrupt took 1631989086 ns<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2: lost interrupt (Status 0x58)<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2: drained 65536 bytes to clear DRQ<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2.00: exception Emask 0x0 SAct 0x0 SErr 0x0 action 0x6 frozen<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2.00: cmd a0/00:00:00:08:00/00:00:00:00:00/a0 tag 0 pio 16392 in#012         Get event status notification 4a 01 00 00 10 00 00 00 08 00res 40/00:02:00:08:00/00:00:00:00:00/a0 Emask 0x4 (timeout)<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2.00: status: { DRDY }<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2: soft resetting link<br>Nov 12 02:03:55 QIASAL01SL journal: Runtime journal is using 56.0M (max allowed 1.5G, trying to leave 2.3G free of 15.3G available ?F~R current limit 1.5G).<br>Nov 12 02:03:55 QIASAL01SL journal: Runtime journal is using 56.0M (max allowed 1.5G, trying to leave 2.3G free of 15.3G available ?F~R current limit 1.5G).<br>Nov 12 02:03:55 QIASAL01SL kernel: ata2.00: configured for UDMA/33<br>Nov 12 02:03:55 QIASAL01SL kernel: ata2: EH complete<br>Nov 12 02:03:55 QIASAL01SL journal: Journal started<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[32784]: BS5 Basis System: The buffer synchronization has not been called for 307 seconds<br>Nov 12 02:03:55 QIASAL01SL vmsvc[1061]: [ warning] [vmsvc] SOCKET failed to create socket, error 97: Address family not supported by protocol<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: BY4 Database: Database error -10108 with FET access to table RZLLICLASS<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: BY0 Database: &gt; Session has been reconnected.<br>Nov 12 02:03:55 QIASAL01SL crond[105652]: pam_systemd(crond:session): Failed to create session: Message did not receive a reply (timeout by message bus)<br>Nov 12 02:03:55 QIASAL01SL CROND[105671]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Nov 12 02:03:55 QIASAL01SL systemd: systemd-journald.service watchdog timeout (limit 1min)!<br>Nov 12 02:03:55 QIASAL01SL systemd: systemd-logind.service: main process exited, code=killed, status=6/ABRT<br>Nov 12 02:03:55 QIASAL01SL systemd: Unit systemd-logind.service entered failed state.<br>Nov 12 02:03:55 QIASAL01SL systemd: systemd-logind.service failed.<br>Nov 12 02:03:55 QIASAL01SL systemd: Cannot add dependency job for unit alsa-restore.service, ignoring: Unit alsa-restore.service is masked.<br>Nov 12 02:03:55 QIASAL01SL systemd: Cannot add dependency job for unit alsa-state.service, ignoring: Unit alsa-state.service is masked.<br>Nov 12 02:03:55 QIASAL01SL dbus[1013]: [system] Activating via systemd: service name='org.freedesktop.login1' unit='dbus-org.freedesktop.login1.service'<br>Nov 12 02:03:55 QIASAL01SL systemd: Cannot add dependency job for unit alsa-restore.service, ignoring: Unit alsa-restore.service is masked.<br>Nov 12 02:03:55 QIASAL01SL systemd: Cannot add dependency job for unit alsa-state.service, ignoring: Unit alsa-state.service is masked.<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: AB0 Basis System: Runtime error &quot;DBSQL_SQL_ERROR&quot; occurred.<br>Nov 12 02:03:55 QIASAL01SL dbus[1013]: [system] Successfully activated service 'org.freedesktop.login1'<br>Nov 12 02:03:55 QIASAL01SL systemd-logind: New seat seat0.<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: AB1 Basis System: &gt; Short dump &quot;161112 020355 QIASAL01SL_QIA_00 SAPSYS &quot; created.<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: D01 Basis System: Transaction Canceled 00 671 ( DBSQL_SQL_ERROR 20161112020355QIASAL01SL_QIA_00 SAPSYS 000 )<br>Nov 12 02:03:55 QIASAL01SL systemd-logind: Watching system buttons on /dev/input/event0 (Power Button)<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>해당 시스템은 작년에 구축 된 개발/품질계 군 이며, VMWare 가상화 환경에서 운영 중입니다.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>분석에 필요한 데이터를 dropbox.redhat.com 에 아래 파일명으로 업로드 하였습니다.<br><br>sosreport-QIASAL01SL-20161112090924.tar.xz<br>sosreport-LOG-QIASAL01SL-20161112090924.tar.xz<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><br><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-11-21T09:06:11Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-11-21T09:06:11Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 앞서서 안내드렸던 부분은 확인을 해보셨는지요?<br><br>@ https://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=2013184<br><br><br>Resolution<br>VMware is aware of this issue.<br><br>To work around this issue, enable the Security Profile in the CIM server.<br> <br>To enable the Security Profile in the CIM server:<br><br>    Log in to vCenter Server as an administrator from the vSphere Client.<br>    Select the ESXi host you want to create or update a host profile from the inventory.<br>    Click the Configuration tab.<br>    Click the Security Profile link.<br>    Click Properties.<br>    Click CIM Server &gt; Options.<br>    Select Start and Stop with host if it is not set this way by default.<br>    Click Restart.<br>    Click Start &gt; OK. <br>======================<br>감사합니다.<br><br><publishedDate>2016-11-21T09:06:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IH52wIAD"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-11-15T06:17:53Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-11-15T06:17:52Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>보내주신 로그들을 분석한 결과를 아래와 같이 안내 드립니다.<br><br>우선 아래의 메시지는 VMware virtual CD-ROM drive에 WRITE SCSI command를 보냈으나 timeout발생으로 발생된 로그로 확인됩니다.<br><br><br>Nov 12 02:03:47 QIASAL01SL kernel: ata2: lost interrupt (Status 0x58)<br><br>Nov 12 02:03:47 QIASAL01SL kernel: ata2: drained 65536 bytes to clear DRQ<br><br>Nov 12 02:03:47 QIASAL01SL kernel: ata2.00: exception Emask 0x0 SAct 0x0 SErr 0x0 action 0x6 frozen<br><br>Nov 12 02:03:47 QIASAL01SL kernel: ata2.00: cmd a0/00:00:00:08:00/00:00:00:00:00/a0 tag 0 pio 16392 in#012         Get event status notification 4a 01 00 00 10 00 00 00 08 00res 40/00:02:00:08:00/00:00:00:00:00/a0 Emask 0x4 (timeout)<br><br>Nov 12 02:03:47 QIASAL01SL kernel: ata2.00: status: { DRDY }<br><br>Nov 12 02:03:47 QIASAL01SL kernel: ata2: soft resetting link<br><br>Nov 12 02:03:55 QIASAL01SL kernel: ata2.00: configured for UDMA/33<br><br>Nov 12 02:03:55 QIASAL01SL kernel: ata2: EH complete<br><br>[...]<br><br>추가적으로 아래와 메시지가 발생되었으나 정확한 원인을 알수는 없지만.. SAP의 메시지를 확인해보면 아래와 같습니다.<br><br><br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: BY4 Database: Database error -10108 with FET access to table RZLLICLASS<br><br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: BY0 Database: &gt; Session has been reconnected.<br><br>[...]<br><br><br>The SAP Database error code of 10108 in above logs is defined as below:<br>======================<br><br>-10108:<br><br><br>This error means that the HANA client software (SAP application server <br><br><br>side) has re-established a DB connection to the HANA server, which <br><br><br>somehow disconnected/terminated from 'outside' of the client, so the <br><br><br>HANA server or on the network devices (NICs, routers. switches), the <br><br><br>network infrastructure in between.<br><br><br>그리고 아래의 메시지는 VMware 쪽에서의 변화가 있었던 것이 아닌가 싶습니다.<br><br>Nov 12 02:03:55 QIASAL01SL vmsvc[1061]: [ warning] [vmsvc] SOCKET failed to create socket, error 97: Address family not supported by protocol<br><br>[...]<br><br>참고로 아래 문서를 첨부드립니다.<br><br>https://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=2013184<br>======================<br>감사합니다.<br><br><publishedDate>2016-11-15T06:17:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000IGvkgIAD"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-11-14T15:21:11Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-11-14T15:21:10Z</b><br><br>안녕하세요.<br><br>일시적 중단이라 함은 Hang 상태와 비슷하게 O/S 접속 등이 멈춘 상태입니다.<br><br>실제로 같은 시간대에 로그가 있었음을 확인하였습니다.<br><br><publishedDate>2016-11-14T15:21:10Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000ICdOLIA1"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-11-14T06:16:15Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-11-14T06:16:15Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>현재 보내주신 데이터를 확인중에 있습니다.<br><br>그런데 질문이 있어서 문의 드립니다.<br><br>&gt; 프로젝트 품질계 시스템 중 QIASAL01SL 에서 11월 12일 02:03:47 경 시스템 서비스가 일시적으로 중단되는 문제가 발견 되었습니다.<br><br><br>일시적으로 중단이라는 것이 어떤 현상이 발생했는지 조금 구체적인 설명 및 어떻게 복구를 하신 것인지에 대한 상황에 대한 추가 설명 바랍니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-11-14T06:16:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000ICbnBIAT"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-11-14T01:32:22Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-11-14T01:32:22Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>현재 올려주신 sosreport를 다운로드 중에 있으며, 다운로드 후 내용을 검토하여 업데이트 드리도록 하겠습니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-11-14T01:32:22Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>프로젝트 품질계 시스템 중 QIASAL01SL 에서 11월 12일 02:03:47 경 시스템 서비스가 일시적으로 중단되는 문제가 발견 되었습니다.</issue><environment>로그를 확인 해 보니 해당 시간대에 아래와 같은 로그가 기록 된 것을 확인 하였습니다.<br><br>Nov 12 02:03:47 QIASAL01SL kernel: hrtimer: interrupt took 1631989086 ns<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2: lost interrupt (Status 0x58)<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2: drained 65536 bytes to clear DRQ<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2.00: exception Emask 0x0 SAct 0x0 SErr 0x0 action 0x6 frozen<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2.00: cmd a0/00:00:00:08:00/00:00:00:00:00/a0 tag 0 pio 16392 in#012         Get event status notification 4a 01 00 00 10 00 00 00 08 00res 40/00:02:00:08:00/00:00:00:00:00/a0 Emask 0x4 (timeout)<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2.00: status: { DRDY }<br>Nov 12 02:03:47 QIASAL01SL kernel: ata2: soft resetting link<br>Nov 12 02:03:55 QIASAL01SL journal: Runtime journal is using 56.0M (max allowed 1.5G, trying to leave 2.3G free of 15.3G available ?F~R current limit 1.5G).<br>Nov 12 02:03:55 QIASAL01SL journal: Runtime journal is using 56.0M (max allowed 1.5G, trying to leave 2.3G free of 15.3G available ?F~R current limit 1.5G).<br>Nov 12 02:03:55 QIASAL01SL kernel: ata2.00: configured for UDMA/33<br>Nov 12 02:03:55 QIASAL01SL kernel: ata2: EH complete<br>Nov 12 02:03:55 QIASAL01SL journal: Journal started<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[32784]: BS5 Basis System: The buffer synchronization has not been called for 307 seconds<br>Nov 12 02:03:55 QIASAL01SL vmsvc[1061]: [ warning] [vmsvc] SOCKET failed to create socket, error 97: Address family not supported by protocol<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: BY4 Database: Database error -10108 with FET access to table RZLLICLASS<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: BY0 Database: &gt; Session has been reconnected.<br>Nov 12 02:03:55 QIASAL01SL crond[105652]: pam_systemd(crond:session): Failed to create session: Message did not receive a reply (timeout by message bus)<br>Nov 12 02:03:55 QIASAL01SL CROND[105671]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Nov 12 02:03:55 QIASAL01SL systemd: systemd-journald.service watchdog timeout (limit 1min)!<br>Nov 12 02:03:55 QIASAL01SL systemd: systemd-logind.service: main process exited, code=killed, status=6/ABRT<br>Nov 12 02:03:55 QIASAL01SL systemd: Unit systemd-logind.service entered failed state.<br>Nov 12 02:03:55 QIASAL01SL systemd: systemd-logind.service failed.<br>Nov 12 02:03:55 QIASAL01SL systemd: Cannot add dependency job for unit alsa-restore.service, ignoring: Unit alsa-restore.service is masked.<br>Nov 12 02:03:55 QIASAL01SL systemd: Cannot add dependency job for unit alsa-state.service, ignoring: Unit alsa-state.service is masked.<br>Nov 12 02:03:55 QIASAL01SL dbus[1013]: [system] Activating via systemd: service name='org.freedesktop.login1' unit='dbus-org.freedesktop.login1.service'<br>Nov 12 02:03:55 QIASAL01SL systemd: Cannot add dependency job for unit alsa-restore.service, ignoring: Unit alsa-restore.service is masked.<br>Nov 12 02:03:55 QIASAL01SL systemd: Cannot add dependency job for unit alsa-state.service, ignoring: Unit alsa-state.service is masked.<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: AB0 Basis System: Runtime error &quot;DBSQL_SQL_ERROR&quot; occurred.<br>Nov 12 02:03:55 QIASAL01SL dbus[1013]: [system] Successfully activated service 'org.freedesktop.login1'<br>Nov 12 02:03:55 QIASAL01SL systemd-logind: New seat seat0.<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: AB1 Basis System: &gt; Short dump &quot;161112 020355 QIASAL01SL_QIA_00 SAPSYS &quot; created.<br>Nov 12 02:03:55 QIASAL01SL SAPQIA_00[28550]: D01 Basis System: Transaction Canceled 00 671 ( DBSQL_SQL_ERROR 20161112020355QIASAL01SL_QIA_00 SAPSYS 000 )<br>Nov 12 02:03:55 QIASAL01SL systemd-logind: Watching system buttons on /dev/input/event0 (Power Button)</environment><periodicityOfIssue>해당 시스템은 작년에 구축 된 개발/품질계 군 이며, VMWare 가상화 환경에서 운영 중입니다.</periodicityOfIssue><timeFramesAndUrgency>분석에 필요한 데이터를 dropbox.redhat.com 에 아래 파일명으로 업로드 하였습니다.<br><br>sosreport-QIASAL01SL-20161112090924.tar.xz<br>sosreport-LOG-QIASAL01SL-20161112090924.tar.xz<br><br>감사합니다.</timeFramesAndUrgency><cep>false</cep></case>