======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-05-15T07:46:38Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-06-07T10:06:06Z</b><br><b>id : 500A000000arap4IAA</b><br>======================<br><br><b><font size=15>
제목  : I/O Elevator 관련 문ㅇ
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>I/O Elevator 관련해서 문의를 드리려고 합니다.<br><br>아래와 같이 I/O Elevator가 cfq로 설정이 되어있는 서버가 있습니다.<br><br>root@FLPTRSD01 /var/log # cat /etc/redhat-release<br>Red Hat Enterprise Linux Server release 6.4 (Santiago)<br><br>root@FLPTRSD01 /sys/block/sdm/queue # cat scheduler<br>noop anticipatory deadline [cfq]<br><br>검색을 통해서 좀 확인해봤을 때 아래와 같이 확인을 하였는데요.<br><br>1. noop 스케줄러<br>- No Operation. 아무것도 하지 않는 스케줄러.<br>- 주로 지능형 RAID 컨트롤러있거나, SSD사용하거나, <br>반도체 디스크 등 성능 좋은 디스크를 사용할 경우 선택되어지는 스케줄러로 <br>커널은 아무것도 하지 않는 것이 부하를 줄일 수 있다는 생각이 기저에 있다.<br><br>2. anticipatory(as) 스케줄러<br>- 발생되는 I/O 요청에서 향후 발생되는 I/O 요청의 위치를 예측하고 <br>위치 떨어진 I/O 요청 처리를 중지하고 위치 가까운 I/O 요청을 처리하는 방식이다.<br>- 지연 시간을 줄이고 처리량을 향상하는 것.<br>- 전통적인 하드 디스크와 비슷한 구조이다.<br>- 입출력을 기다려 모아서 처리하는 성질이 있어 지연 시간은 나쁘게 될 가능성도 있다.<br><br>3. deadline 스케줄러<br>- I/O 대기 시간의 한계점(deadline)을 마련하고, 그것이 가까워 온 것부터 먼저 처리한다.<br>- 처리량보다 지연에 최적화된 스케줄링을 한다.<br>- 읽기 및 쓰기를 모두 균형있게 처리한다.<br>- 몇몇 프로세스가 많은 수의 I/O를 발생시키는 환경에 적합하다.<br>- 데이터 베이스의 파일 시스템에 많이 사용된다.<br><br>4. cfq(Completely Fair Queuing) 스케줄러<br>- 프로세스마다 I/O 대기열을 가지고 최대한 균등하게 예약을 한다.<br>- 많은 프로세스들이 세세한 I/O를 많이 발생시킬 때 사용하면 좋다.<br>- Fedora Core 커널 패키지의 기본이다.<br><br>현재 주기적으로는 해당 서버에서 multipath쪽 I/O가 가끔식 지연이 되서<br>아래와 같은 메세지가 발생하는데요.<br><br>May  1 06:05:35 FLPTRSD01 kernel: qla2xxx [0000:42:00.0]-801c:3: Abort command issued nexus=3:0:3 --  1 2002.<br>May  1 06:05:35 FLPTRSD01 multipathd: sdg: hds prio: SCSI error<br>May  1 06:05:35 FLPTRSD01 multipathd: ext3: load table [0 1048576000 multipath 0 0 2 2 round-robin 0 1 1 8:96 1 round-robin 0 1 1 8:192 1]<br>May  1 06:05:40 FLPTRSD01 rgmanager[30903]: [script] Executing /etc/cluster/init.oracle status<br>May  1 06:05:58 FLPTRSD01 multipathd: ext3: load table [0 1048576000 multipath 0 0 2 1 round-robin 0 1 1 8:192 1 round-robin 0 1 1 8:96 1]<br><br>혹시 deadline 스케쥴러 설정을 통해서 위의 현상에 대해서 개선이 가능할지에 대해서 문의드리려고 합니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>FLPTRSD01</hostname><br><br><br><comment id="a0aA000000MdIc0IAF"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-16T05:31:23Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-16T05:31:23Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>abort command issued 메시지는 이미 커널에서 요청한 IO를 스토리지 장치 또는 스토리지의 상태에 따라 드라이버가 Abort(중단)시키는 것이기 때문에 IO 스케쥴러를 변경으로 직접적인 문제를 해소하기는 어려워 보입니다. <br>따라서, 스토리지 스위치, 케이블, 스토리지 어레이 등에 대한 확인을 하시는 것이 필요합니다.<br><br>관련 KCS 문서들을 참고하시기 바랍니다.<br><br>https://access.redhat.com/solutions/221713<br><br>&quot;qla2xxx Abort command issued&quot; is not an error. It is a status message indicating that the driver aborted a command at the kernels request (some upper level service) ~or~ in response to a fabric or end storage device status received.<br><br>https://access.redhat.com/solutions/27624<br><br>These errors indicate an error condition being returned from the SAN.<br>Try to verify if there are any issues present from the FC switch, FC cabling, zoning or Storage array.<br>It would also be advised to engage the storage vendor to review the switch logs to verify if there are any error counters, CRC errors in FC switch logs.<br><br>허 경 드림.<br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-16T05:31:23Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MdI8bIAF"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-16T04:28:29Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-16T04:28:28Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>문의하신 내용 확인 후 업데이트 드리겠습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-16T04:28:28Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>