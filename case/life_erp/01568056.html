======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-01-17T14:36:09Z</b><br><b>마지막 답변자 : JINKOO HAN</b><br><b>마지막 수정 일자 : 2016-02-17T00:26:12Z</b><br><b>id : 500A000000TQ4zCIAT</b><br>======================<br><br><b><font size=15>
제목  : [BZ] /tmp 디렉토리 tmpfs 마운트 현상에 대한 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>1월16일 기존 개발/품질 시스템에 대한 전체 업그레이드 작업이 진행되었습니다.<br><br>작업완료 후 AP 가동시 특정 시스템에서 아래와 같은 문제가 발견되었습니다.<br><br>df -h 로 디스크 상태를 조회한 결과 /tmp 가 tmpfs 로 remount 되어 있는 문제인데요.<br><br>systemctl status tmp.mount 서비스는 모두 disable 된 상태인데, 어떤 시점에서 tmpfs 로 변경이 되었습니다.<br><br>리부팅 후 다시 정상으로 돌아왔는데, /var/log/messages 를 조회한 결과 2회 이상 같은 현상이 발견되었습니다.<br><br>그리고 RHEL7 의 경우 /run/user 부분도 tmpfs 로 마운트 된 것을 여러개 발견할 수 있는데요. <br><br>이 용도가 성능향상을 위한 RHEL7 의 기본 제공 기능인지 궁금합니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br># cat /var/log/messages<br>...<br>Jan 16 17:03:13 SLQMDGAL01 systemd: Cannot add dependency job for unit rpcbind.socket, ignoring: Unit rpcbind.socket is masked.<br>Jan 16 17:03:13 SLQMDGAL01 systemd: Cannot add dependency job for unit alsa-restore.service, ignoring: Unit alsa-restore.service is masked.<br>Jan 16 17:03:13 SLQMDGAL01 systemd: Cannot add dependency job for unit alsa-state.service, ignoring: Unit alsa-state.service is masked.<br>Jan 16 17:03:13 SLQMDGAL01 ntpd[1076]: ntpd exiting on signal 15<br>Jan 16 17:03:13 SLQMDGAL01 systemd: Stopping Network Time Service...<br>Jan 16 17:03:13 SLQMDGAL01 systemd: tmp.mount: Directory /tmp to mount over is not empty, mounting anyway.<br>Jan 16 17:03:13 SLQMDGAL01 systemd: Mounting Temporary Directory...<br>Jan 16 17:03:13 SLQMDGAL01 systemd: Mounted Temporary Directory.<br>Jan 16 17:03:13 SLQMDGAL01 systemd: Starting Network Time Service...<br>Jan 16 17:03:13 SLQMDGAL01 ntpd[8037]: ntpd 4.2.6p5@1.2349-o Fri Oct 16 08:51:50 UTC 2015 (1)<br>Jan 16 17:03:13 SLQMDGAL01 systemd: Started Network Time Service.<br>Jan 16 17:03:13 SLQMDGAL01 ntpd[8038]: proto: precision = 0.046 usec<br>Jan 16 17:03:13 SLQMDGAL01 ntpd[8038]: 0.0.0.0 c01d 0d kern kernel time sync enabled<br>Jan 16 17:03:13 SLQMDGAL01 polkitd[8008]: Unregistered Authentication Agent for unix-process:8027:488809 (system bus name :1.231, object path /org/freedesktop/PolicyKit1/AuthenticationAgent, locale C) (disconnected from bus)<br>Jan 16 17:03:13 SLQMDGAL01 ntpd[8038]: ntp_io: estimated max descriptors: 1024, initial socket boundary: 16<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 4 (Low)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>systemd</name></tag></tags><br><comment id="a0aA000000GYINrIAP"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-02-17T00:26:11Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-02-17T00:26:11Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>패치가 적용되어 관련 Errata 링크를 아래 보내드립니다.<br><br>Errata: https://rhn.redhat.com/errata/RHBA-2016-0199.html<br>======================<br>감사합니다.<br><br><publishedDate>2016-02-17T00:26:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G7999IAB"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-01-19T14:58:10Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-01-19T14:58:10Z</b><br><br>안녕하세요.<br><br>우선 답변주신 tmp.mount mask 처리로 VM Template 및 가동 물리시스템에 대해 적용을 완료 했습니다.<br><br>비슷한 증상이 많이 발생하지 않아 상황을 지속적으로 모니터링 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-01-19T14:58:10Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000G72Y0IAJ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-19T01:30:40Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-19T01:30:40Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>/tmp가 마운트되는 것은 systemd 의존성 ordering에 대한 버그가 있어서 발생하는 현상으로 파악이 됩니다.<br>해당 버그(#1298109)는 현재 QA 상태로써, 향후 release될때 같이 패치가 release될 것으로 보입니다.<br><br>향후 Errata Release에 대한 업데이트를 드릴 수 있도록 하겠습니다.<br>======================<br>그리고. 현재 workaround로써는 &quot;tmp.mount&quot;를 mask 처리하고 시스템을 재부팅하는 방법을 제공하고 있습니다.<br>======================<br>업무에 참고하시기 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2016-01-19T01:30:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G6vuSIAR"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-01-18T13:07:06Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-01-18T13:07:06Z</b><br><br>안녕하세요.<br><br>dropbox.redhat.com/incoming 디렉토리에  sosreport-01568056.tar.xz 파일명으로 업로드 하였습니다.<br><br>확인 부탁드립니다. 감사합니다.<br><br><publishedDate>2016-01-18T13:07:06Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000G6rLCIAZ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-18T03:21:32Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-18T03:21:31Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>좀 더 확인을 위해서 sosreport를 제공해주실 수 있을런지요?<br><br>케이스에 업데이트 바라며, 해당 테스트를 위해서 리부팅 시점을 알고 계시면 같이 기재 바랍니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-01-18T03:21:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>