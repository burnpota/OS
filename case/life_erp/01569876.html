======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-01-20T12:43:51Z</b><br><b>마지막 답변자 : 우택 심</b><br><b>마지막 수정 일자 : 2016-02-11T05:56:22Z</b><br><b>id : 500A000000TQNihIAH</b><br>======================<br><br><b><font size=15>
제목  : SAN Storage 환경 Multipath -&gt; LVM 생성 후 Duplicate of PV 메세지 문의드립니다.
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>Hitachi 스토리지에서 할당 받은 LUN 을 이용하여 Multipath 설정 후, 시스템에 필요한 dump, sap 관련 LVM 을 생성하였습니다.<br><br>생성했던 당시에는 문제가 없었으나, 리부팅 후 PV Duplicate 에러가 지속적으로 발생하였습니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>이와 같은 문제를 해결하기 위해 /etc/lvm/lvm.conf 에 Filter 를 아래와 같이 적용하였습니다.<br><br># cat /etc/lvm/lvm.conf<br>. . .<br>        filter = [ &quot;a|/dev/mapper/DMP*|&quot;, &quot;a|/dev/mapper/SAP*|&quot;, &quot;a|/dev/mapper/CLU*|&quot;, &quot;a|/dev/sda[1-9]|&quot;, &quot;r|.*/|&quot; ]     &lt;== 필터 설정 부분<br>        # global_filter = [ &quot;a|.*/|&quot; ]<br>. . .<br><br>설정한 내용을 요약하자면, Multipath 에서 생성 된 mapper device 인 DMP* / SAP* / CLU* 가 모두 LVM PV 므로 a 로 설정하였고, <br>시스템 Internal disk /dev/sda6 도 LVM PV 로 사용되므로 a 로 설정하였습니다.<br>이를 제외한 나머지는 모두 r 로 제거하였습니다.<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>위와 같이 설정을 하였으나, 재부팅 하면 또 다시 아래와 같은 메세지가 지속적으로 출력되고 있습니다.<br><br># pvscan<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:16<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:48<br>  Duplicate of PV ekOBcN-8eAx-BPwe-A7TT-Ozs7-DGL2-PUPS8u dev /dev/mapper/DMP100G005 exists on unknown device 8:208<br>  Duplicate of PV JOc8kI-LyBP-SnXG-tR9g-3AFd-llB9-4hZw5R dev /dev/mapper/DMP100G004 exists on unknown device 8:176<br>  Duplicate of PV I0MYJG-PdCq-4eNw-JV2f-vZKU-2O20-q8f6Ox dev /dev/mapper/DMP100G003 exists on unknown device 8:144<br>  Duplicate of PV iIfPRJ-cH5I-xIFz-XeGN-K3ZN-bBva-JoEZW8 dev /dev/mapper/DMP100G002 exists on unknown device 8:112<br>  Duplicate of PV WtfUkc-xwzy-WUOe-BgDJ-ughL-7gh9-Jyy2yE dev /dev/mapper/DMP100G001 exists on unknown device 8:80<br>  Duplicate of PV aKzrKm-Z3rS-5Ozn-HUvm-Xo9c-uzVo-VDEcD0 dev /dev/mapper/DMP100G014 exists on unknown device 66:0<br>  Duplicate of PV 8FjTk8-kAq3-tOOz-wm74-vzgD-xKgD-boS8cl dev /dev/mapper/DMP100G013 exists on unknown device 65:224<br>  Duplicate of PV s79fXa-pVYx-2Lbg-1nzm-R3KF-I00e-C91dQT dev /dev/mapper/DMP100G009 exists on unknown device 65:96<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:64<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:48<br>  Duplicate of PV lYUsuu-JBld-vHKn-DiMQ-eMS4-vZ1O-dS6gtE dev /dev/mapper/DMP100G010 exists on unknown device 65:128<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:32<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:16<br>  Duplicate of PV lvSXHn-11cB-oVQv-plN0-sVgc-OZcx-ts9U4s dev /dev/mapper/DMP100G006 exists on unknown device 65:0<br>  Duplicate of PV ekOBcN-8eAx-BPwe-A7TT-Ozs7-DGL2-PUPS8u dev /dev/mapper/DMP100G005 exists on unknown device 8:208<br>  Duplicate of PV JOc8kI-LyBP-SnXG-tR9g-3AFd-llB9-4hZw5R dev /dev/mapper/DMP100G004 exists on unknown device 8:176<br>  Duplicate of PV I0MYJG-PdCq-4eNw-JV2f-vZKU-2O20-q8f6Ox dev /dev/mapper/DMP100G003 exists on unknown device 8:144<br>  Duplicate of PV iIfPRJ-cH5I-xIFz-XeGN-K3ZN-bBva-JoEZW8 dev /dev/mapper/DMP100G002 exists on unknown device 8:112<br>  Duplicate of PV WtfUkc-xwzy-WUOe-BgDJ-ughL-7gh9-Jyy2yE dev /dev/mapper/DMP100G001 exists on unknown device 8:80<br>  Duplicate of PV aKzrKm-Z3rS-5Ozn-HUvm-Xo9c-uzVo-VDEcD0 dev /dev/mapper/DMP100G014 exists on unknown device 66:0<br>  Duplicate of PV 8FjTk8-kAq3-tOOz-wm74-vzgD-xKgD-boS8cl dev /dev/mapper/DMP100G013 exists on unknown device 65:224<br>  Duplicate of PV s79fXa-pVYx-2Lbg-1nzm-R3KF-I00e-C91dQT dev /dev/mapper/DMP100G009 exists on unknown device 65:96<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:64<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:48<br>  Duplicate of PV lYUsuu-JBld-vHKn-DiMQ-eMS4-vZ1O-dS6gtE dev /dev/mapper/DMP100G010 exists on unknown device 65:128<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:32<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:16<br>  Duplicate of PV lvSXHn-11cB-oVQv-plN0-sVgc-OZcx-ts9U4s dev /dev/mapper/DMP100G006 exists on unknown device 65:0<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:16<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:48<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:48<br>  Duplicate of PV JOc8kI-LyBP-SnXG-tR9g-3AFd-llB9-4hZw5R dev /dev/mapper/DMP100G004 exists on unknown device 8:176<br>  Duplicate of PV WtfUkc-xwzy-WUOe-BgDJ-ughL-7gh9-Jyy2yE dev /dev/mapper/DMP100G001 exists on unknown device 8:80<br>  Duplicate of PV ekOBcN-8eAx-BPwe-A7TT-Ozs7-DGL2-PUPS8u dev /dev/mapper/DMP100G005 exists on unknown device 8:208<br>  Duplicate of PV lvSXHn-11cB-oVQv-plN0-sVgc-OZcx-ts9U4s dev /dev/mapper/DMP100G006 exists on unknown device 65:0<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:16<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:64<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:48<br>  Duplicate of PV lYUsuu-JBld-vHKn-DiMQ-eMS4-vZ1O-dS6gtE dev /dev/mapper/DMP100G010 exists on unknown device 65:128<br>  Duplicate of PV s79fXa-pVYx-2Lbg-1nzm-R3KF-I00e-C91dQT dev /dev/mapper/DMP100G009 exists on unknown device 65:96<br>  Duplicate of PV I0MYJG-PdCq-4eNw-JV2f-vZKU-2O20-q8f6Ox dev /dev/mapper/DMP100G003 exists on unknown device 8:144<br>  Duplicate of PV 8FjTk8-kAq3-tOOz-wm74-vzgD-xKgD-boS8cl dev /dev/mapper/DMP100G013 exists on unknown device 65:224<br>  Duplicate of PV aKzrKm-Z3rS-5Ozn-HUvm-Xo9c-uzVo-VDEcD0 dev /dev/mapper/DMP100G014 exists on unknown device 66:0<br>  Duplicate of PV iIfPRJ-cH5I-xIFz-XeGN-K3ZN-bBva-JoEZW8 dev /dev/mapper/DMP100G002 exists on unknown device 8:112<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:32<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:16<br>  PV /dev/sda6                VG vg0          lvm2 [36.43 GiB / 6.43 GiB free]<br>  PV /dev/mapper/DMP100G005   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G004   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G003   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G002   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G001   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G014   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G013   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G012   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G009   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G011   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G008   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G010   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G007   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/DMP100G006   VG vg9          lvm2 [100.00 GiB / 0    free]<br>  PV /dev/mapper/SAP100G001   VG LLECCSAPVG   lvm2 [100.00 GiB / 17.99 GiB free]<br>  PV /dev/mapper/SAP100G002   VG LLECCSAPVG   lvm2 [100.00 GiB / 0    free]<br>  Total: 17 [1.60 TiB] / in use: 17 [1.60 TiB] / in no VG: 0 [0   ]<br><br># pvs<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:48<br>  Duplicate of PV JOc8kI-LyBP-SnXG-tR9g-3AFd-llB9-4hZw5R dev /dev/mapper/DMP100G004 exists on unknown device 8:176<br>  Duplicate of PV WtfUkc-xwzy-WUOe-BgDJ-ughL-7gh9-Jyy2yE dev /dev/mapper/DMP100G001 exists on unknown device 8:80<br>  Duplicate of PV ekOBcN-8eAx-BPwe-A7TT-Ozs7-DGL2-PUPS8u dev /dev/mapper/DMP100G005 exists on unknown device 8:208<br>  Duplicate of PV lvSXHn-11cB-oVQv-plN0-sVgc-OZcx-ts9U4s dev /dev/mapper/DMP100G006 exists on unknown device 65:0<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:16<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:64<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:48<br>  Duplicate of PV lYUsuu-JBld-vHKn-DiMQ-eMS4-vZ1O-dS6gtE dev /dev/mapper/DMP100G010 exists on unknown device 65:128<br>  Duplicate of PV s79fXa-pVYx-2Lbg-1nzm-R3KF-I00e-C91dQT dev /dev/mapper/DMP100G009 exists on unknown device 65:96<br>  Duplicate of PV I0MYJG-PdCq-4eNw-JV2f-vZKU-2O20-q8f6Ox dev /dev/mapper/DMP100G003 exists on unknown device 8:144<br>  Duplicate of PV 8FjTk8-kAq3-tOOz-wm74-vzgD-xKgD-boS8cl dev /dev/mapper/DMP100G013 exists on unknown device 65:224<br>  Duplicate of PV aKzrKm-Z3rS-5Ozn-HUvm-Xo9c-uzVo-VDEcD0 dev /dev/mapper/DMP100G014 exists on unknown device 66:0<br>  Duplicate of PV iIfPRJ-cH5I-xIFz-XeGN-K3ZN-bBva-JoEZW8 dev /dev/mapper/DMP100G002 exists on unknown device 8:112<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:32<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:16<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:16<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:48<br>  Duplicate of PV ekOBcN-8eAx-BPwe-A7TT-Ozs7-DGL2-PUPS8u dev /dev/mapper/DMP100G005 exists on unknown device 8:208<br>  Duplicate of PV JOc8kI-LyBP-SnXG-tR9g-3AFd-llB9-4hZw5R dev /dev/mapper/DMP100G004 exists on unknown device 8:176<br>  Duplicate of PV I0MYJG-PdCq-4eNw-JV2f-vZKU-2O20-q8f6Ox dev /dev/mapper/DMP100G003 exists on unknown device 8:144<br>  Duplicate of PV iIfPRJ-cH5I-xIFz-XeGN-K3ZN-bBva-JoEZW8 dev /dev/mapper/DMP100G002 exists on unknown device 8:112<br>  Duplicate of PV WtfUkc-xwzy-WUOe-BgDJ-ughL-7gh9-Jyy2yE dev /dev/mapper/DMP100G001 exists on unknown device 8:80<br>  Duplicate of PV aKzrKm-Z3rS-5Ozn-HUvm-Xo9c-uzVo-VDEcD0 dev /dev/mapper/DMP100G014 exists on unknown device 66:0<br>  Duplicate of PV 8FjTk8-kAq3-tOOz-wm74-vzgD-xKgD-boS8cl dev /dev/mapper/DMP100G013 exists on unknown device 65:224<br>  Duplicate of PV s79fXa-pVYx-2Lbg-1nzm-R3KF-I00e-C91dQT dev /dev/mapper/DMP100G009 exists on unknown device 65:96<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:64<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:48<br>  Duplicate of PV lYUsuu-JBld-vHKn-DiMQ-eMS4-vZ1O-dS6gtE dev /dev/mapper/DMP100G010 exists on unknown device 65:128<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:32<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:16<br>  Duplicate of PV lvSXHn-11cB-oVQv-plN0-sVgc-OZcx-ts9U4s dev /dev/mapper/DMP100G006 exists on unknown device 65:0<br>  PV                     VG         Fmt  Attr PSize   PFree<br>  /dev/mapper/DMP100G001 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G002 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G003 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G004 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G005 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G006 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G007 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G008 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G009 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G010 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G011 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G012 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G013 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G014 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/SAP100G001 LLECCSAPVG lvm2 a--  100.00g 17.99g<br>  /dev/mapper/SAP100G002 LLECCSAPVG lvm2 a--  100.00g     0<br>  /dev/sda6              vg0        lvm2 a--   36.43g  6.43g<br><br>한가지 특이한 점은 재부팅 후 위와 같이 나오더라도 <br><br>/etc/lvm/lvm.conf 에서 기존에 설정했던 filter 를 다시 주석 처리하고 global_filter = [ &quot;r|.*/|&quot; ] 만 활성화해서 pvscan 한 다음,<br>다시 filter 를 추가하고 pvscan 하면 정상적으로 Duplicate 메세지가 사라집니다.<br><br>위와 같은 현상에 대해 확인 부탁 드립니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000GX6sFIAT"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-02-11T02:08:36Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-02-11T02:08:35Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 추가 업데이트가 있으시면 케이스에 업데이트 바랍니다.<br>또한, 문제가 해결된 경우에는 해당 케이스를 'Close'해주시면 됩니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-02-11T02:08:35Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G8KL0IAN"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-26T10:35:00Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-26T10:35:00Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>금일 본 케이스와 관련되어 아래와 같이 dracut으로 multipath를 넣는 것에 대한 명령어를 아래 드립니다.<br><br># dracut --force --add multipath --include /etc/multipath<br><br><br>위와 같이 생성할 수 있으며, 생성 후에 cpio로 열거나 lsinitrd /boot/initramfs-고객파일.img 명령어로 확인해보시기 바랍니다.<br>======================<br>업데이트 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2016-01-26T10:35:00Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G84osIAB"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-01-25T07:58:21Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-01-25T07:58:21Z</b><br><br>안녕하세요.<br><br>오늘 운영 물리머신에서  LVM PV Duplicate 관련 재현테스트를 진행하였습니다.<br><br>테스트 하면서 발견 된 사항은<br><br># pvscan --cache 명령을 이용하면 바로 Duplicate 메세지가 사라지고 정상화 되며, 리부팅 후에 다시 원래대로 메세지가 발생한다는 것 입니다.<br><br>그래서 systemctl disable lvm2-monitor.service 를 통해 부팅시 서비스 비활성화를 하니 문제가 해결되었습니다.<br><br>SAN + Multipath 환경에서의 PV Duplicate 메세지가 lvm2-monitor.service 와 어떤 연관관계가 있는지 이유를 알고 싶습니다.<br><br>감사합니다.<br><br><publishedDate>2016-01-25T07:58:21Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000G7i0TIAR"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-22T02:16:45Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-22T02:16:45Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>우선 좀 더 확인을 위해서 아래의 정보를 수집하여 케이스에 업로드 바랍니다.<br><br>1. sosreport<br>2. initramfs<br>3. # tar -cvzf etc-lvm.tar.gz /etc/lvm  &lt;&lt;- etc-lvm.tar.gz 파일 <br><br><br>감사합니다.<br><br><publishedDate>2016-01-22T02:16:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G7hiwIAB"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2016-01-22T01:17:12Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2016-01-22T01:17:12Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 /etc/lvm/lvm.conf 내역을 수정 후 다시 테스트를 진행하였는데요.<br><br>동일하게 duplicate 관련 warning이 발생하여 일단 log를 첨부하였습니다.<br><br>root@PECCAL02SL /etc/lvm # cd /boot<br>root@PECCAL02SL /boot # ls<br>config-3.10.0-229.el7.x86_64                             initramfs-3.10.0-327.el7.x86_64kdump.img.old<br>config-3.10.0-327.el7.x86_64                             initrd-plymouth.img<br>grub2                                                    symvers-3.10.0-229.el7.x86_64.gz<br>initramfs-0-rescue-975f63d3e1ce485a9090dc9f3b3c720a.img  symvers-3.10.0-327.el7.x86_64.gz<br>initramfs-3.10.0-229.el7.x86_64.img                      System.map-3.10.0-229.el7.x86_64<br>initramfs-3.10.0-229.el7.x86_64kdump.img                 System.map-3.10.0-327.el7.x86_64<br>initramfs-3.10.0-327.el7.x86_64.img                      vmlinuz-0-rescue-975f63d3e1ce485a9090dc9f3b3c720a<br>initramfs-3.10.0-327.el7.x86_64.img.160121.bak           vmlinuz-3.10.0-229.el7.x86_64<br>initramfs-3.10.0-327.el7.x86_64kdump.img                 vmlinuz-3.10.0-327.el7.x86_64<br>root@PECCAL02SL /boot # cp ./initramfs-3.10.0-327.el7.x86_64.img ./initramfs-3.10.0-327.el7.x86_64.img.160122.bak<br>root@PECCAL02SL /boot # ls -al<br>total 238612<br>dr-xr-xr-x.  3 root root     4096 Jan 22 09:56 .<br>dr-xr-xr-x. 21 root root     4096 Jan 21 17:37 ..<br>-rw-r--r--.  1 root root   123838 Jan 30  2015 config-3.10.0-229.el7.x86_64<br>-rw-r--r--   1 root root   126426 Oct 30 06:32 config-3.10.0-327.el7.x86_64<br>drwx------.  6 root root      104 Dec 31 15:49 grub2<br>-rw-r--r--.  1 root root 43538652 Dec 17 17:19 initramfs-0-rescue-975f63d3e1ce485a9090dc9f3b3c720a.img<br>-rw-------   1 root root 28578380 Dec 21 11:20 initramfs-3.10.0-229.el7.x86_64.img<br>-rw-------   1 root root 17083014 Dec 21 11:21 initramfs-3.10.0-229.el7.x86_64kdump.img<br>-rw-------   1 root root 28771271 Jan 21 17:28 initramfs-3.10.0-327.el7.x86_64.img<br>-rw-------   1 root root 28634576 Jan 21 17:27 initramfs-3.10.0-327.el7.x86_64.img.160121.bak<br>-rw-------   1 root root 28771271 Jan 22 09:56 initramfs-3.10.0-327.el7.x86_64.img.160122.bak<br>-rw-------   1 root root 19715605 Jan 21 17:37 initramfs-3.10.0-327.el7.x86_64kdump.img<br>-rw-------   1 root root 17200226 Dec 23 15:11 initramfs-3.10.0-327.el7.x86_64kdump.img.old<br>-rw-r--r--.  1 root root 10191076 Dec 21 11:21 initrd-plymouth.img<br>-rw-r--r--.  1 root root   240039 Jan 30  2015 symvers-3.10.0-229.el7.x86_64.gz<br>-rw-r--r--   1 root root   252612 Oct 30 06:35 symvers-3.10.0-327.el7.x86_64.gz<br>-rw-------.  1 root root  2881257 Jan 30  2015 System.map-3.10.0-229.el7.x86_64<br>-rw-------   1 root root  2963044 Oct 30 06:32 System.map-3.10.0-327.el7.x86_64<br>-rwxr-xr-x.  1 root root  5026624 Dec 17 17:19 vmlinuz-0-rescue-975f63d3e1ce485a9090dc9f3b3c720a<br>-rwxr-xr-x.  1 root root  5026624 Jan 30  2015 vmlinuz-3.10.0-229.el7.x86_64<br>-rw-r--r--.  1 root root      166 Jan 30  2015 .vmlinuz-3.10.0-229.el7.x86_64.hmac<br>-rwxr-xr-x   1 root root  5154912 Oct 30 06:32 vmlinuz-3.10.0-327.el7.x86_64<br>-rw-r--r--   1 root root      166 Oct 30 06:32 .vmlinuz-3.10.0-327.el7.x86_64.hmac<br>root@PECCAL02SL /boot # cd /etc/lvm.conf<br>-bash: cd: /etc/lvm.conf: No such file or directory<br>root@PECCAL02SL /boot # cat /etc/lvm/lvm.conf | grep DMP<br>        filter = [ &quot;a|/dev/mapper/DMP.*|&quot;, &quot;a|/dev/mapper/SAP.*|&quot;, &quot;a|/dev/mapper/CLU.*|&quot;, &quot;a|/dev/sda[1-9]|&quot;, &quot;r|.*/|&quot; ] ◀ 정규 표현식을 수정해보았습니다.<br><br>root@PECCAL02SL / # dracut -f -v<br>Executing: /usr/sbin/dracut -f -v<br>dracut module 'busybox' will not be installed, because command 'busybox' could not be found!<br>dracut module 'nbd' will not be installed, because command 'nbd-client' could not be found!<br>dracut module 'busybox' will not be installed, because command 'busybox' could not be found!<br>dracut module 'nbd' will not be installed, because command 'nbd-client' could not be found!<br>*** Including module: bash ***<br>*** Including module: nss-softokn ***<br>*** Including module: i18n ***<br>*** Including module: network ***<br>*** Including module: ifcfg ***<br>*** Including module: drm ***<br>*** Including module: plymouth ***<br>*** Including module: kernel-modules ***<br>*** Including module: fcoe ***<br>*** Including module: resume ***<br>*** Including module: rootfs-block ***<br>*** Including module: terminfo ***<br>*** Including module: udev-rules ***<br>Skipping udev rule: 91-permissions.rules<br>*** Including module: biosdevname ***<br>*** Including module: systemd ***<br>*** Including module: usrmount ***<br>*** Including module: base ***<br>*** Including module: fs-lib ***<br>*** Including module: shutdown ***<br>*** Including modules done ***<br>*** Installing kernel module dependencies and firmware ***<br>*** Installing kernel module dependencies and firmware done ***<br>*** Resolving executable dependencies ***<br>*** Resolving executable dependencies done***<br>*** Hardlinking files ***<br>*** Hardlinking files done ***<br>*** Stripping files ***<br>*** Stripping files done ***<br>*** Generating early-microcode cpio image ***<br>*** Constructing GenuineIntel.bin ****<br>*** Store current command line parameters ***<br>*** Creating image file ***<br>*** Creating image file done ***<br>root@PECCAL02SL / # date<br>Fri Jan 22 09:58:08 KST 2016<br>root@PECCAL02SL / # init 6<br>root@PECCAL02SL /root # date<br>Fri Jan 22 10:07:07 KST 2016<br>root@PECCAL02SL /root # pvs<br>  Duplicate of PV 4LnGuU-cIcB-mvI2-6uHT-vO4O-hAuB-J0feu7 dev /dev/mapper/DMP100G011 exists on unknown device 65:224<br>  Duplicate of PV 4LnGuU-cIcB-mvI2-6uHT-vO4O-hAuB-J0feu7 dev /dev/mapper/DMP100G011 exists on unknown device 65:208<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:128<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:112<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:64<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:48<br>  Duplicate of PV JOc8kI-LyBP-SnXG-tR9g-3AFd-llB9-4hZw5R dev /dev/mapper/DMP100G004 exists on unknown device 8:240<br>  Duplicate of PV JOc8kI-LyBP-SnXG-tR9g-3AFd-llB9-4hZw5R dev /dev/mapper/DMP100G004 exists on unknown device 65:0<br>  Duplicate of PV WtfUkc-xwzy-WUOe-BgDJ-ughL-7gh9-Jyy2yE dev /dev/mapper/DMP100G001 exists on unknown device 8:160<br>  Duplicate of PV WtfUkc-xwzy-WUOe-BgDJ-ughL-7gh9-Jyy2yE dev /dev/mapper/DMP100G001 exists on unknown device 8:144<br>  Duplicate of PV ekOBcN-8eAx-BPwe-A7TT-Ozs7-DGL2-PUPS8u dev /dev/mapper/DMP100G005 exists on unknown device 65:32<br>  Duplicate of PV ekOBcN-8eAx-BPwe-A7TT-Ozs7-DGL2-PUPS8u dev /dev/mapper/DMP100G005 exists on unknown device 65:16<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:96<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:80<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:32<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:16<br>  Duplicate of PV lvSXHn-11cB-oVQv-plN0-sVgc-OZcx-ts9U4s dev /dev/mapper/DMP100G006 exists on unknown device 65:64<br>  Duplicate of PV lvSXHn-11cB-oVQv-plN0-sVgc-OZcx-ts9U4s dev /dev/mapper/DMP100G006 exists on unknown device 65:48<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:128<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:112<br>  Duplicate of PV lYUsuu-JBld-vHKn-DiMQ-eMS4-vZ1O-dS6gtE dev /dev/mapper/DMP100G010 exists on unknown device 65:192<br>  Duplicate of PV lYUsuu-JBld-vHKn-DiMQ-eMS4-vZ1O-dS6gtE dev /dev/mapper/DMP100G010 exists on unknown device 65:176<br>  Duplicate of PV s79fXa-pVYx-2Lbg-1nzm-R3KF-I00e-C91dQT dev /dev/mapper/DMP100G009 exists on unknown device 65:160<br>  Duplicate of PV s79fXa-pVYx-2Lbg-1nzm-R3KF-I00e-C91dQT dev /dev/mapper/DMP100G009 exists on unknown device 65:144<br>  Duplicate of PV I0MYJG-PdCq-4eNw-JV2f-vZKU-2O20-q8f6Ox dev /dev/mapper/DMP100G003 exists on unknown device 8:224<br>  Duplicate of PV I0MYJG-PdCq-4eNw-JV2f-vZKU-2O20-q8f6Ox dev /dev/mapper/DMP100G003 exists on unknown device 8:208<br>  Duplicate of PV 8FjTk8-kAq3-tOOz-wm74-vzgD-xKgD-boS8cl dev /dev/mapper/DMP100G013 exists on unknown device 66:32<br>  Duplicate of PV 8FjTk8-kAq3-tOOz-wm74-vzgD-xKgD-boS8cl dev /dev/mapper/DMP100G013 exists on unknown device 66:16<br>  Duplicate of PV 5cUV4v-ob9V-BgnQ-FPfS-mQhz-p3zz-0Qq2yW dev /dev/mapper/DMP100G012 exists on unknown device 65:240<br>  Duplicate of PV 5cUV4v-ob9V-BgnQ-FPfS-mQhz-p3zz-0Qq2yW dev /dev/mapper/DMP100G012 exists on unknown device 66:0<br>  Duplicate of PV aKzrKm-Z3rS-5Ozn-HUvm-Xo9c-uzVo-VDEcD0 dev /dev/mapper/DMP100G014 exists on unknown device 66:64<br>  Duplicate of PV aKzrKm-Z3rS-5Ozn-HUvm-Xo9c-uzVo-VDEcD0 dev /dev/mapper/DMP100G014 exists on unknown device 66:48<br>  Duplicate of PV iIfPRJ-cH5I-xIFz-XeGN-K3ZN-bBva-JoEZW8 dev /dev/mapper/DMP100G002 exists on unknown device 8:192<br>  Duplicate of PV iIfPRJ-cH5I-xIFz-XeGN-K3ZN-bBva-JoEZW8 dev /dev/mapper/DMP100G002 exists on unknown device 8:176<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:96<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:80<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:96<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:80<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:32<br>  Duplicate of PV tu4b1q-pnbV-yfdX-zCTc-Mlpj-uPeb-11peat dev /dev/mapper/SAP100G001 exists on unknown device 8:16<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:128<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:112<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:64<br>  Duplicate of PV BHZpet-GcKu-91xF-pRXp-dp3A-fSfL-hH973p dev /dev/mapper/SAP100G002 exists on unknown device 8:48<br>  Duplicate of PV ekOBcN-8eAx-BPwe-A7TT-Ozs7-DGL2-PUPS8u dev /dev/mapper/DMP100G005 exists on unknown device 65:32<br>  Duplicate of PV ekOBcN-8eAx-BPwe-A7TT-Ozs7-DGL2-PUPS8u dev /dev/mapper/DMP100G005 exists on unknown device 65:16<br>  Duplicate of PV JOc8kI-LyBP-SnXG-tR9g-3AFd-llB9-4hZw5R dev /dev/mapper/DMP100G004 exists on unknown device 8:240<br>  Duplicate of PV JOc8kI-LyBP-SnXG-tR9g-3AFd-llB9-4hZw5R dev /dev/mapper/DMP100G004 exists on unknown device 65:0<br>  Duplicate of PV I0MYJG-PdCq-4eNw-JV2f-vZKU-2O20-q8f6Ox dev /dev/mapper/DMP100G003 exists on unknown device 8:224<br>  Duplicate of PV I0MYJG-PdCq-4eNw-JV2f-vZKU-2O20-q8f6Ox dev /dev/mapper/DMP100G003 exists on unknown device 8:208<br>  Duplicate of PV iIfPRJ-cH5I-xIFz-XeGN-K3ZN-bBva-JoEZW8 dev /dev/mapper/DMP100G002 exists on unknown device 8:192<br>  Duplicate of PV iIfPRJ-cH5I-xIFz-XeGN-K3ZN-bBva-JoEZW8 dev /dev/mapper/DMP100G002 exists on unknown device 8:176<br>  Duplicate of PV WtfUkc-xwzy-WUOe-BgDJ-ughL-7gh9-Jyy2yE dev /dev/mapper/DMP100G001 exists on unknown device 8:160<br>  Duplicate of PV WtfUkc-xwzy-WUOe-BgDJ-ughL-7gh9-Jyy2yE dev /dev/mapper/DMP100G001 exists on unknown device 8:144<br>  Duplicate of PV aKzrKm-Z3rS-5Ozn-HUvm-Xo9c-uzVo-VDEcD0 dev /dev/mapper/DMP100G014 exists on unknown device 66:64<br>  Duplicate of PV aKzrKm-Z3rS-5Ozn-HUvm-Xo9c-uzVo-VDEcD0 dev /dev/mapper/DMP100G014 exists on unknown device 66:48<br>  Duplicate of PV 8FjTk8-kAq3-tOOz-wm74-vzgD-xKgD-boS8cl dev /dev/mapper/DMP100G013 exists on unknown device 66:32<br>  Duplicate of PV 8FjTk8-kAq3-tOOz-wm74-vzgD-xKgD-boS8cl dev /dev/mapper/DMP100G013 exists on unknown device 66:16<br>  Duplicate of PV 5cUV4v-ob9V-BgnQ-FPfS-mQhz-p3zz-0Qq2yW dev /dev/mapper/DMP100G012 exists on unknown device 65:240<br>  Duplicate of PV 5cUV4v-ob9V-BgnQ-FPfS-mQhz-p3zz-0Qq2yW dev /dev/mapper/DMP100G012 exists on unknown device 66:0<br>  Duplicate of PV s79fXa-pVYx-2Lbg-1nzm-R3KF-I00e-C91dQT dev /dev/mapper/DMP100G009 exists on unknown device 65:160<br>  Duplicate of PV s79fXa-pVYx-2Lbg-1nzm-R3KF-I00e-C91dQT dev /dev/mapper/DMP100G009 exists on unknown device 65:144<br>  Duplicate of PV 4LnGuU-cIcB-mvI2-6uHT-vO4O-hAuB-J0feu7 dev /dev/mapper/DMP100G011 exists on unknown device 65:224<br>  Duplicate of PV 4LnGuU-cIcB-mvI2-6uHT-vO4O-hAuB-J0feu7 dev /dev/mapper/DMP100G011 exists on unknown device 65:208<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:128<br>  Duplicate of PV wXhaAa-o8If-aHIG-EAKL-1b7s-BQdp-cc8GQT dev /dev/mapper/DMP100G008 exists on unknown device 65:112<br>  Duplicate of PV lYUsuu-JBld-vHKn-DiMQ-eMS4-vZ1O-dS6gtE dev /dev/mapper/DMP100G010 exists on unknown device 65:192<br>  Duplicate of PV lYUsuu-JBld-vHKn-DiMQ-eMS4-vZ1O-dS6gtE dev /dev/mapper/DMP100G010 exists on unknown device 65:176<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:96<br>  Duplicate of PV 22l6O2-j26A-psgc-o9Ph-rdOY-qJDJ-gxyQxi dev /dev/mapper/DMP100G007 exists on unknown device 65:80<br>  Duplicate of PV lvSXHn-11cB-oVQv-plN0-sVgc-OZcx-ts9U4s dev /dev/mapper/DMP100G006 exists on unknown device 65:64<br>  Duplicate of PV lvSXHn-11cB-oVQv-plN0-sVgc-OZcx-ts9U4s dev /dev/mapper/DMP100G006 exists on unknown device 65:48<br>  PV                     VG         Fmt  Attr PSize   PFree<br>  /dev/mapper/DMP100G001 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G002 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G003 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G004 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G005 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G006 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G007 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G008 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G009 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G010 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G011 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G012 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G013 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/DMP100G014 vg9        lvm2 a--  100.00g     0<br>  /dev/mapper/SAP100G001 LLECCSAPVG lvm2 a--  100.00g 17.99g<br>  /dev/mapper/SAP100G002 LLECCSAPVG lvm2 a--  100.00g     0<br>  /dev/sda6              vg0        lvm2 a--   36.43g  6.43g<br><br><publishedDate>2016-01-22T01:17:12Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000G7hWMIAZ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-22T00:35:11Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-22T00:35:11Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>유선으로 이야기 드리고 comment에 남겨드렸듯이 현재  lvm.conf의 filter 정규표현식 이상합니다.<br><br># cat lvm.conf<br>        #filter = [ &quot;a|/dev/mapper/DMP*|&quot;, &quot;a|/dev/mapper/SAP*|&quot;, &quot;a|/dev/mapper/CLU*|&quot;, &quot;a|/dev/sda[1-9]|&quot;, &quot;r|.*/|&quot; ]  &lt;&lt;----- 기존부분<br>        filter = [ &quot;a|/dev/mapper/DMP.*|&quot;, &quot;a|/dev/mapper/SAP.*|&quot;, &quot;a|/dev/mapper/CLU.*|&quot;, &quot;a|/dev/sda[1-9]|&quot;, &quot;r|.*/|&quot; ]  &lt;&lt;----- 수정부분<br><br><br>보시다시피 &quot;DMP*&quot; -&gt; &quot;DMP.*&quot; 로 '.'을 추가해야 합니다.<br><br><br>그리고 initramfs 생성을 위한 dracut 명령어를 수행해주시면 됩니다.<br><br># dracut -f -v<br>======================<br>위와 같이 fileter를 수정후, 다시 테스트 바랍니다.<br><br><br>감사합니다.<br><br><publishedDate>2016-01-22T00:35:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G7XALIA3"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2016-01-21T11:01:23Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2016-01-21T11:01:23Z</b><br><br>안녕하세요<br><br>SDS 상암센터 김지민 선임입니다.<br><br>Duplicate of PV 관련 가이드해주신 방법으로 조치를 하였으나 아직은 발생하여 혹시 문의드립니다.<br><br>아래는 제가 확인한 내역을 첨부합니다.<br><br>root@PECCAL02SL /etc/lvm # cat lvm.conf | grep filter<br>        # is used to drive LVM filtering like MD component detection, multipath<br>        # Configuration option devices/filter.<br>        # Run vgscan after changing the filter to regenerate the cache.<br>        # See the use_lvmetad comment for a special case regarding filters.<br>        # filter = [ &quot;a|.*/|&quot; ]<br>        # filter = [ &quot;r|/dev/cdrom|&quot; ]<br>        # filter = [ &quot;a|loop|&quot;, &quot;r|.*|&quot; ]<br>        # filter = [ &quot;a|loop|&quot;, &quot;r|/dev/hdc|&quot;, &quot;a|/dev/ide|&quot;, &quot;r|.*|&quot; ]<br>        # filter = [ &quot;a|^/dev/hda8$|&quot;, &quot;r|.*/|&quot; ]<br>        # filter = [ &quot;a|.*/|&quot; ]<br>        filter = [ &quot;a|/dev/mapper/DMP*|&quot;, &quot;a|/dev/mapper/SAP*|&quot;, &quot;a|/dev/mapper/CLU*|&quot;, &quot;a|/dev/sda[1-9]|&quot;, &quot;r|.*/|&quot; ]  ◀ 필터 적용 부분<br>        # Configuration option devices/global_filter.<br>        # Because devices/filter may be overridden from the command line, it is<br>        # not suitable for system-wide device filtering, e.g. udev and lvmetad.<br>        # Use global_filter to hide devices from these LVM system components.<br>        # The syntax is the same as devices/filter. Devices rejected by<br>        # global_filter are not opened by LVM.<br>        # global_filter = [ &quot;a|.*/|&quot; ]<br>        # The results of filtering are cached on disk to avoid rescanning dud<br>        # This is a quick way of filtering out block devices that are not<br>        # by pvscan --cache), devices/filter is ignored and all devices are<br>        # scanned by default. lvmetad always keeps unfiltered information<br>        # which is provided to LVM commands. Each LVM command then filters<br>        # based on devices/filter. This does not apply to other, non-regexp,<br>        # filtering settings: component filters such as multipath and MD<br>        # are checked during pvscan --cache. To filter a device and prevent<br>        # devices/global_filter.<br>        # Configuration option activation/mlock_filter.<br>        # mlock_filter = [ &quot;locale/locale-archive&quot;, &quot;gconv/gconv-modules.cache&quot; ]<br>root@PECCAL02SL /boot # ls<br>config-3.10.0-229.el7.x86_64                             initrd-plymouth.img<br>config-3.10.0-327.el7.x86_64                             symvers-3.10.0-229.el7.x86_64.gz<br>grub2                                                    symvers-3.10.0-327.el7.x86_64.gz<br>initramfs-0-rescue-975f63d3e1ce485a9090dc9f3b3c720a.img  System.map-3.10.0-229.el7.x86_64<br>initramfs-3.10.0-229.el7.x86_64.img                      System.map-3.10.0-327.el7.x86_64<br>initramfs-3.10.0-229.el7.x86_64kdump.img                 vmlinuz-0-rescue-975f63d3e1ce485a9090dc9f3b3c720a<br>initramfs-3.10.0-327.el7.x86_64.img                      vmlinuz-3.10.0-229.el7.x86_64<br>initramfs-3.10.0-327.el7.x86_64kdump.img                 vmlinuz-3.10.0-327.el7.x86_64<br>initramfs-3.10.0-327.el7.x86_64kdump.img.old<br>root@PECCAL02SL /boot # cp ./initramfs-3.10.0-327.el7.x86_64.img ./initramfs-3.10.0-327.el7.x86_64.img.160121.bak ◀ initramfs backup 수행<br>root@PECCAL02SL /boot # ls -al<br>total 210376<br>dr-xr-xr-x.  3 root root     4096 Jan 21 17:27 .<br>dr-xr-xr-x. 21 root root     4096 Jan 21 13:43 ..<br>-rw-r--r--.  1 root root   123838 Jan 30  2015 config-3.10.0-229.el7.x86_64<br>-rw-r--r--   1 root root   126426 Oct 30 06:32 config-3.10.0-327.el7.x86_64<br>drwx------.  6 root root      104 Dec 31 15:49 grub2<br>-rw-r--r--.  1 root root 43538652 Dec 17 17:19 initramfs-0-rescue-975f63d3e1ce485a9090dc9f3b3c720a.img<br>-rw-------   1 root root 28578380 Dec 21 11:20 initramfs-3.10.0-229.el7.x86_64.img<br>-rw-------   1 root root 17083014 Dec 21 11:21 initramfs-3.10.0-229.el7.x86_64kdump.img<br>-rw-------   1 root root 28634576 Dec 21 11:22 initramfs-3.10.0-327.el7.x86_64.img<br>-rw-------   1 root root 28634576 Jan 21 17:27 initramfs-3.10.0-327.el7.x86_64.img.160121.bak<br>-rw-------   1 root root 19716140 Jan 20 16:13 initramfs-3.10.0-327.el7.x86_64kdump.img<br>-rw-------   1 root root 17200226 Dec 23 15:11 initramfs-3.10.0-327.el7.x86_64kdump.img.old<br>-rw-r--r--.  1 root root 10191076 Dec 21 11:21 initrd-plymouth.img<br>-rw-r--r--.  1 root root   240039 Jan 30  2015 symvers-3.10.0-229.el7.x86_64.gz<br>-rw-r--r--   1 root root   252612 Oct 30 06:35 symvers-3.10.0-327.el7.x86_64.gz<br>-rw-------.  1 root root  2881257 Jan 30  2015 System.map-3.10.0-229.el7.x86_64<br>-rw-------   1 root root  2963044 Oct 30 06:32 System.map-3.10.0-327.el7.x86_64<br>-rwxr-xr-x.  1 root root  5026624 Dec 17 17:19 vmlinuz-0-rescue-975f63d3e1ce485a9090dc9f3b3c720a<br>-rwxr-xr-x.  1 root root  5026624 Jan 30  2015 vmlinuz-3.10.0-229.el7.x86_64<br>-rw-r--r--.  1 root root      166 Jan 30  2015 .vmlinuz-3.10.0-229.el7.x86_64.hmac<br>-rwxr-xr-x   1 root root  5154912 Oct 30 06:32 vmlinuz-3.10.0-327.el7.x86_64<br>-rw-r--r--   1 root root      166 Oct 30 06:32 .vmlinuz-3.10.0-327.el7.x86_64.hmac<br>root@PECCAL02SL /boot # uname -r<br>3.10.0-327.el7.x86_64<br>root@PECCAL02SL /boot # man dracut<br>root@PECCAL02SL /boot # man dracut<br>root@PECCAL02SL /boot # cd /<br>root@PECCAL02SL / # dracut -f -v ◀ 명령 수행 dracut 명령은 initrmfs를 재생성하는 명령인 것인가요?<br>Executing: /usr/sbin/dracut -f -v<br>dracut module 'busybox' will not be installed, because command 'busybox' could not be <br><br>found!<br>dracut module 'nbd' will not be installed, because command 'nbd-client' could not be <br><br>found!<br>dracut module 'busybox' will not be installed, because command 'busybox' could not be <br><br>found!<br>dracut module 'nbd' will not be installed, because command 'nbd-client' could not be <br><br>found!<br>*** Including module: bash ***<br>*** Including module: nss-softokn ***<br>*** Including module: i18n ***<br>*** Including module: network ***<br>*** Including module: ifcfg ***<br>*** Including module: drm ***<br>*** Including module: plymouth ***<br>*** Including module: kernel-modules ***<br>*** Including module: fcoe ***<br>*** Including module: resume ***<br>*** Including module: rootfs-block ***<br>*** Including module: terminfo ***<br>*** Including module: udev-rules ***<br>Skipping udev rule: 91-permissions.rules<br>*** Including module: biosdevname ***<br>*** Including module: systemd ***<br>*** Including module: usrmount ***<br>*** Including module: base ***<br>*** Including module: fs-lib ***<br>*** Including module: shutdown ***<br>*** Including modules done ***<br>*** Installing kernel module dependencies and firmware ***<br>*** Installing kernel module dependencies and firmware done ***<br>*** Resolving executable dependencies ***<br>*** Resolving executable dependencies done***<br>*** Hardlinking files ***<br>*** Hardlinking files done ***<br>*** Stripping files ***<br>*** Stripping files done ***<br>*** Generating early-microcode cpio image ***<br>*** Constructing GenuineIntel.bin ****<br>*** Store current command line parameters ***<br>*** Creating image file ***<br>*** Creating image file done ***<br><br>완료 후 재부팅을 수행 후 pvs를 하였을 때 아직 duplicate 관련 warning이 발생하였습니다.<br><br><publishedDate>2016-01-21T11:01:23Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000G7TPLIA3"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-21T01:36:05Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-21T01:36:05Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>혹시 필터 적용후, dracut을 재 생성하셨는지요?<br><br>아래와 같이 필터를 수정한 후에, dracut를 실행하시고 재부팅을 수행해보시기 바랍니다.<br><br><br>filter = [ &quot;a|/dev/mapper/DMP.*|&quot;, &quot;a|/dev/mapper/SAP.*|&quot;, &quot;a|/dev/mapper/CLU.*|&quot;, &quot;a|/dev/sda[1-9]|&quot;, &quot;r|.*/|&quot; ]<br>======================<br>* Rebuilding the initramfs (RHEL 6, 7)<br><br>$ cp /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.$(date +%m-%d-%H%M%S).bak<br>$ dracut -f -v<br>======================<br>감사합니다.<br><br><publishedDate>2016-01-21T01:36:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>