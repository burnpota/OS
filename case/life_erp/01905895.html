======================<br><b>생성계정 : 삼성생명 타임게이트</b><br><b>생성날짜 : 2017-08-07T08:33:57Z</b><br><b>마지막 답변자 : Jack, Jong Young Moon</b><br><b>마지막 수정 일자 : 2017-08-09T08:49:01Z</b><br><b>id : 500A000000Y5WQUIA3</b><br>======================<br><br><b><font size=15>
제목  : ping  LSCOLOR관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요?<br>보내드린 2대의 sosreport를 보시면 양쪽모두 /bin/ping의 퍼미션이 755이지만 <br>한쪽에서는 컬러 속성이 진보라 바탕에 검은색 글씨(30,41 : capability)이고<br>다른 한쪽에서는 컬러 속성이 검은색 바탕에 연두색 글씨(1.32 : exec)입니다.<br>타 다른 서버들은 모두 진보라 바탕에 검은색 글씨로 되어 있으나 <br>유독 문제 있는 PPMSAL09SL은 검은색 바탕에 연두색 글씨입니다.<br><br>이 호스트에서 일반계정으로 접속을 하여 ping localhost 명령을 치면<br>icmp open socket : operation not permition 이란 메시지가 송출됩니다.<br>이에 setuid를 설정하면 정상적으로 되나 다른 시스템은 setuid가 없더라도 정상적으로 실행이 됩니다.<br>왜 유독 이 PPMSAL09SL만 컬러 속성이 틀린지 왜 이런 증상이 발생되는지 확인 부탁드립니다.<br><br>sosreport 는 드롭 박스에 업로드 하였으며 업로드된 파일은 현페이지에 링크 부탁드립니다.<br>sosreport-PPMSAL09SL-20170807162432.tar.xz<br>sosreport-PPMSAL01SL-20170807162441.tar.xz<br><br>PPMSAL09SL 비정상<br>PPMSAL01SL 정상 입니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Configuration issue</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>PPMSAL09SL</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000K8XbKIAV"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-08-09T08:48:29Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-08-09T08:48:29Z</b><br><br>안녕하세요.<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>먼저, 케이스를 직접 종료해주셔서 감사드리며 문제가 잘 해소가 되셨다니 다행입니다. 요청하신것과 같이 본 케이스는 처리완료하도록 하겠습니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재 오픈 하실 수 있습니다.<br><br>케이스가 처리 완료되면 고객 설문조사 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-09T08:48:29Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K8XTaIAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-08-09T08:37:34Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-08-09T08:37:33Z</b><br><br>정상적인 측에는 아래와 같아서 똑같이 진행하였습니다.<br>getcap /bin/ping<br>/bin/ping = cap_net_admin,cap_net_raw+p<br><br>setcap cap_net_admin,cap_net_raw+p /bin/ping <br><br>그리고 정상적으로 ping이 되는것을 확인하였습니다.<br><br>신경써주셔서 감사합니다.<br><br>해당 케이스 closed하겠습니다.<br><br><publishedDate>2017-08-09T08:37:33Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K8XHVIA3"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-08-09T08:17:15Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-08-09T08:17:15Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>유선상으로 말씀드린것과 같이 현재 직면하신 이슈는 /bin/ping 의 퍼미션이 755 인데도 불구하고 일반사용자가 실행할 수 없는 원인은<br>파일의 속성권한으로 인해서 나타날 수 있습니다. 아래의 참고문서[1]의 예제와 같이 정상적인 시스템과 비정상적인 시스템의 /bin/ping<br>의 속성확인을 위해서 아래의 명령어를 실행한 결과를 케이스에 업로드해주시길 부탁드립니다.<br><br>$ lsattr /bin/ping<br>$ getcap /bin/ping<br><br>또한, 말씀하신 Linux Capabilities 글을 아래의 참고문서[2]에서 확인하여서 자체적으로 테스트를 해보았는데 이와 관련이 있을수 있다는<br>것도 확인하였습니다. 간략하게 설명을 드리자면, Linux Capabilities 는 프로세스 또는 쓰레드가 실행할 수 있는 것들을 권한을 분류하여<br>통제하는 기능을 제공하는 도구입니다. 전통적으로 root 와 non-root 라는 두가지 권한이 있는데 root 나 superuser 로서 실행된 프로세<br>스들은 시스템내에서 대부분의 것들을 실행할 수 있는 반면에 non-root 는 허가된 권한만 제어가 가능합니다.<br><br>현재 문제의 시스템내의 /bin/ping 은 cap_net_raw 로 불리우는 capability 가 주어진것으로서 일반 사용자가 실행가 될수 있는 Permitted<br>플래그가 비활성화 상태일 수 도 있습니다.<br><br>그래서, 아래의 setcap 명령을 실행해서 일반 사용자가 ping 을 정상적으로 수행할 수 있는지 확인해보시길 바랍니다.<br>$ setcap cap_net_raw+p /bin/ping<br><br><br>[ 참고문서 ]<br><br>[1]  What are file attributes and how do I set them? <br>- https://access.redhat.com/articles/1774<br><br>[2] Linux Capabilities and Ping<br>- http://unixetc.co.uk/2016/05/30/linux-capabilities-and-ping/#more-1418<br><br>감사합니다.<br><br><publishedDate>2017-08-09T08:17:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K8WfeIAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-08-09T07:20:02Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-08-09T07:20:02Z</b><br><br>저도 sosreport를 보려고 합니다. 링크 부탁드리구요...<br>송석중 01063133748입니다.<br><br><publishedDate>2017-08-09T07:20:02Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K8WSQIA3"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-08-09T07:01:30Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-08-09T07:01:30Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>올려주신 sosreport 들은 저희 dropbox 에서 다운로드 해서 확인을 해보았습니다만, 이슈와 관련한 로그나 단서들을 찾지 못했습니다.<br>연락이 가능한 전화번호를 케이스에 남겨주시면 전화지원을 하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-09T07:01:30Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K8WIhIAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-08-09T06:46:41Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-08-09T06:46:41Z</b><br><br>-rwxr-xr-x. 1 root root 44896 Jun  5  2015 /bin/ping 입니다.<br>그리고 ppmadm계정입니다.<br>sosreport 링크 부탁드립니다.<br><br><publishedDate>2017-08-09T06:46:41Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000K8GWXIA3"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-08-08T07:54:53Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-08-08T07:54:53Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>올려주신 sosreport 에서는 ping 파일에 대한 권한이 남겨지지 않기 때문에 저희가 확인할 수가 없는 상태입니다. <br>일반적으로 ping 명령어의 사용권한을 확인해보기 위해서 아래의 명령을 두 시스템에서 실행한 결과를 케이스에<br>업로드 부탁드립니다.<br><br>$ ls -l `which ping`<br><br>그리고, ping 을 실행한 각 시스템의 사용자의 정보들을 케이스에 남겨주시기를 바랍니다. 특히, /etc/passwd 나<br>/etc/group 에 기술된 사용자들의 정보확인이 필요할 거 같습니다. 파일의 전체를 올려주실 필요는 없습니다.<br>단순히 ping 을 실행한 각 사용자의 user 나 group id 정보 및 별도의 설정이 있는지 확인을 해보기 위함이니 보안<br>적인 위험은 없을것입니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-08T07:54:53Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000K8EKJIA3"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-08-08T03:30:07Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-08-08T03:30:07Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>현재 올려주신 문의내용을 자세히 살펴보고 있는중이며, 확인이 되는대로 업데이트를 남기도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-08-08T03:30:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>