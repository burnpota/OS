======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-02-27T08:11:26Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-03-16T10:05:42Z</b><br><b>id : 500A000000ZrQMNIA3</b><br>======================<br><br><b><font size=15>
제목  : Meltdown/Spectre 패치 대비 H/W 및 OS에서 준비 사항 관련
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>오늘 세미나 마지막 부분에 잠깐 나와서<br>CPU Meltdown/Spectre 패치 대비 H/W 및 OS에서 준비 사항 관련해서 확인한 내역입니다.<br><br>따로 테스트를 진행하지는 않았지만 CPU 성능 저하가 예상이되기 때문에 <br>현재 구성된 서버(Redhat 물리 서버 기준)에서 CPU의 P-state / C-state 조정을 통해서 <br>극대화 시킨 후 패치를 통해서 사전/사후 테스트를 해봐야할 것 같은데요.<br>(대비라기 보다는 절전 기능을 모두 없애는 것으로 보면 될 것 같습니다.)<br><br>혹시 추가적으로 Redhat에서 CPU 성능 저하에 대비해서 OS에서 준비해야하는 방안이 있을지 문의드립니다.<br><br>아래는 삼성생명 DR ECC 서버의 P-state와 C-state부분을 다른 서버와 비교한 내역입니다.<br><br><br>root@DECCAL01SL /root # cat /proc/cpuinfo | grep -i e7<br>model name      : Intel(R) Xeon(R) CPU E7-8891 v3 @ 2.80GHz<br>=== 생략 ===<br>root@DECCAL01SL /root # turbostat<br>     CPU Avg_MHz   %Busy Bzy_MHz TSC_MHz     SMI  CPU%c1  CPU%c3  CPU%c6  CPU%c7 CoreTmp  PkgTmp PkgWatt RAMWatt   PKG_%   RAM_%<br>       -     238    8.50               2795    2795       0   91.50    0.00    0.00    0.00      34      40  271.47   32.10    0.00    0.00<br>       0      30    1.06               2796    2796      40   98.94    0.00    0.00    0.00      26      34   64.02    8.03    0.00    0.00<br>      40      32    1.14               2796    2796      40   98.86<br>=== 생략 ===<br><br>root@DECCAL01SL /root # cat /proc/cmdline<br>BOOT_IMAGE=/vmlinuz-3.10.0-327.53.1.el7.x86_64 root=UUID=10ccc68b-f9d0-4e60-8c02-c1a95dbe79e3 ro crashkernel=512M rhgb quiet LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=deadline rdloaddriver=hpsa rdloaddriver=qla2xxx nosoftlockup intel_idle.max_cstate=0 processor.max_cstate=1 intel_pstate=disable mce=ignore_ce<br><br>root@DECCAL01SL /root # cat /etc/sysconfig/cpupower<br># See 'cpupower help' and cpupower(1) for more info<br>CPUPOWER_START_OPTS=&quot;frequency-set -g performance --min 2800000 --max 2800000&quot;<br>CPUPOWER_STOP_OPTS=&quot;frequency-set -g ondemand&quot;<br><br>root@DECCAL01SL /root # systemctl status cpupower.service<br>* cpupower.service - Configure CPU power related settings<br>   Loaded: loaded (/usr/lib/systemd/system/cpupower.service; enabled; vendor preset: disabled)<br>   Active: active (exited) since Sun 2018-01-21 18:25:52 KST; 1 months 6 days ago<br>  Process: 2248 ExecStart=/usr/bin/cpupower $CPUPOWER_START_OPTS (code=exited, status=0/SUCCESS)<br> Main PID: 2248 (code=exited, status=0/SUCCESS)<br>   CGroup: /system.slice/cpupower.service<br><br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 70<br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 71<br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 72<br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 73<br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 74<br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 75<br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 76<br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 77<br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 78<br>Jan 21 18:25:52 DECCAL01SL cpupower[2248]: Setting cpu: 79<br><br> - 비교 대상 서버<br>root@SLPAFIDL01 /root # cat /proc/cpuinfo | grep -i e5<br>model name      : Intel(R) Xeon(R) CPU E5-2623 v3 @ 3.00GHz<br>=== 생략 ===<br>root@SLPAFIDL01 /root # turbostat<br>     CPU Avg_MHz   %Busy Bzy_MHz TSC_MHz     SMI  CPU%c1  CPU%c3  CPU%c6  CPU%c7 CoreTmp  PkgTmp PkgWatt RAMWatt   PKG_%   RAM_%<br>       -     314   14.46              2169    3000       0   13.76   11.35   60.43    0.00      42      46   52.72   11.88    0.00    0.00<br>       0      79    6.22               1263    3000       0    9.92   14.13   69.72    0.00      35      41   23.85    5.96    0.00    0.00<br>       2      67    5.32               1257    3000       0    8.68   13.16   72.83    0.00      34<br>=== 생략 ===<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>DECCAL01SL</hostname><br><br><br><comment id="a0aA000000LrXcTIAV"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-28T01:19:15Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-28T01:19:15Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>패치의 내용이 kernel과 관련 영향을 받는 일부 패키지이기 때문에 패치 작업 자체에 따른 특별한 준비는 필요 없을 것 같습니다.<br>다만, 우려하시는 바와 같이 성능에 영향을 줄 수 있기 때문에 현재 사용하는 업무 성격과 유사한 벤치마크 도구를 이용하여 패치 전후의 수치를 비교하시는 것이 바람직해보입니다. <br><br>관련 보안 이슈 공식 페이지[1]와 점검 도구 [2]를 활용하시기 바랍니다.<br><br>[1] https://access.redhat.com/security/vulnerabilities/speculativeexecution<br>[2] https://access.redhat.com/labs/speculativeexecution<br><br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-02-28T01:19:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>