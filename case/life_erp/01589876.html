======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-02-25T06:36:58Z</b><br><b>마지막 답변자 : 우택 심</b><br><b>마지막 수정 일자 : 2016-03-14T04:33:05Z</b><br><b>id : 500A000000TdRAGIA3</b><br>======================<br><br><b><font size=15>
제목  : SAP Filesystem 구성 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>삼성생명,화재 모두 프로젝트 초기 아키텍쳐 회의 후 파일시스템 디자인을 한 후 현재 구축을 진행 중에 있는데요,<br><br>주요  Mount Point 에 대해 Shared 또는 Local Volume 구성에 대해 문의 드립니다.<br><br>현재 ASCS / ERS 업무는 RHCS 2node HA (Active/Standby) 로 구성하는데, /usr/sap/SID/ 밑에 있는 ASCS/ERS 디렉토리를 아래와 같이 생성하였습니다.<br><br>- 1번 node<br> /dev/mapper/LRECCSAPVG-usr_sap_PEC_ERS55    50G   33M   50G   1% /usr/sap/PEC/ERS55<br>/dev/mapper/LRECCSAPVG-usr_sap_PEC_ASCS50   50G   39G   12G  78% /usr/sap/PEC/ASCS50<br><br> - 2번 node<br>/dev/mapper/LLECCSAPVG-usr_sap_PEC_ASCS50   50G   38G   13G  76% /usr/sap/PEC/ASCS50<br>/dev/mapper/LLECCSAPVG-usr_sap_PEC_ERS55    50G  821M   50G   2% /usr/sap/PEC/ERS55<br><br>위 마운트 포인트 볼륨에 대해 NFS 또는 HALVM 형식의 공유 타입으로 해야 하는지 아니면 현재와 같이 Local Filesystem 으로 해도 문제가 없는지 문의 드립니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>Deploying Highly Available SAP NetWeaver-based Servers Using Red Hat Enterprise Linux HA add-on with Pacemaker 문서 내용을 보면 아래와 같이 나와 있습니다.<br><br>3.3 File Systems<br>The following different types of file systems are used in a SAP environment:<br><br>Shared Storage File systems<br>The following file systems should be created on a shared SAN LUN:<br>• /db2<br>• /usr/sap/&lt;SID&gt;/DVEBMGS0<br>• /usr/sap/&lt;SID&gt;/&lt;InstanceNo&gt;<br>for production environments the directories below /db2 should reside each on a separate LUN<br>for performance reasons. Please refer to the S A P I n s t a l l a t i o n G u i d e for details.<br>Since these file systems should always only be accessed from one cluster node it is recommended to create these file systems as HA-LVM volumes. Please refer to What is a Highly Available LVM (HA-LVM) configuration and how do I implement it? For instructions on how to setup a HA-LVM.<br><br>Local File Systems<br>The following directories can be created locally on each node.<br>• /usr/sap<br>• /sapmnt<br>• /db2<br>• /usr/sap/&lt;SID&gt;/SYS (linking directory, that can also reside locally. Provides links to /sapmnt/&lt;SID&gt;)<br>• /usr/sap/&lt;SID&gt;/SYS (directory to all cluster nodes)<br>• /usr/sap/tmp<br><br>문서 중간부분에 <br><br>5 Example Configuration<br><br>5.2.4 File System Setup<br><br>Shared SAN volumes for DB filesystem and SAP PAS instance filesystem<br>(as separate VGs/LVs with EXT4 filesystems)<br>• /dev/vg_db/lv_db mounted as /db2 (80GB)<br>• /dev/vg_sap/lv_sap mounted as /usr/sap/RH2/DVEBMGS01 (10GB)<br><br>NFS shares<br>The following SAP global file systems are mounted via NFS on all cluster nodes:<br>• nfsserver:/shares/lnxha-sapmnt mounted as /samnt<br>• nfsserver:/shares/lnxha-usr-sap-trans mounted as /usr/sap/trans<br><br>Local File Systems<br>Instance filesystems for ASCS (/usr/sap/RH2/ASCS00) and ERS (/usr/sap/RH2/ERS10) are local on both cluster nodes<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>빠른 확인 부탁 드립니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000GizlxIAB"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-03-14T04:32:43Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-03-14T04:32:43Z</b><br><br>안녕하세요.<br><br>현재 NAS(nfs) 를 이용하여 구성을 완료 하였습니다.<br><br>추가로 궁금한 점은 케이스를 다시 오픈하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-03-14T04:32:43Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Gbx6MIAR"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-03-03T02:03:17Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-03-03T02:03:17Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>두 노드 각각에 NFS filesystem으로 마운트하여 구성하는 방안은 구성 가능합니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-03-03T02:03:17Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GbjVNIAZ"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-03-02T03:46:16Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-03-02T03:46:15Z</b><br><br>안녕하세요.<br><br>답변 주신 내용은 Local Filesystem 을 권고한다고 하셨는데요,<br><br>Local Filesystem 외 다른 방안으로 NAS(NFS) 를 이용하여 2Node 에 모두  Mount 해서 사용해도 가능한지 추가 문의 드립니다.<br><br>확인 부탁 드립니다.<br><br>감사합니다.<br><br><publishedDate>2016-03-02T03:46:15Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GbiPTIAZ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-03-02T02:08:11Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-03-02T02:08:11Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스에서 문의주셨던 '/usr/sap/{ERS,ASCS}xxx' 디렉토리 구성에 대한 Red Hat 권고사항은 해당 디렉토리는 Local Filesystems 사용을 권고하고 있습니다.<br><br>해당 디렉토리의 sub-directory에 Log디렉토리를 제외하고는 일반적으로 변경이 없는 데이터들로써 Local Filesystems 사용을 권장하고 있습니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-03-02T02:08:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GaZIbIAN"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-02-26T02:08:14Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-02-26T02:08:14Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>해당 이슈와 관련되어서는 우선적으로 SAP의 권고사항을 따르는 것이 저희는 1차적으로 권장합니다.<br><br>다만 추가적으로 해당 디렉토리 /usr/sap/SID/{ERS,ACSC}들의 디렉토리는 Shared Storage 공유파일시스템 사용하는 것은 물론 각 노드에 Local Filesystems 모두 사용하는 것에 큰 이슈가 없는 것으로 현재까지 내용을 정리드립니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-02-26T02:08:14Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GaON2IAN"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-02-25T08:06:57Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-02-25T08:06:57Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>우선 문의주신 내용에 대해서 저희 SAP 엔지니어들의 의견을 확인해보도록 하겠습니다.<br><br>다만, 해당 Directory를 Shared로 하는 것과 로컬로 사용하는 것중 어느것이 더욱좋은가에 대해서는 SAP측에서의 SAP를 운영하는데 있어서 Best Practice 의견을 받아보시는 것을 권장드립니다.<br><br>저희 문서는 참고적인 자료로, 구성하실때 참고를 위해서 작성된 문서입니다.<br>======================<br>앞서 말씁드린 것 처럼, 우선 내용에 대해서 확인해보고 다시 업데이트 드리도록 하겠습니다.<br><br><br>감사합니다.<br><br><publishedDate>2016-02-25T08:06:57Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>삼성생명,화재 모두 프로젝트 초기 아키텍쳐 회의 후 파일시스템 디자인을 한 후 현재 구축을 진행 중에 있는데요,<br><br>주요  Mount Point 에 대해 Shared 또는 Local Volume 구성에 대해 문의 드립니다.<br><br>현재 ASCS / ERS 업무는 RHCS 2node HA (Active/Standby) 로 구성하는데, /usr/sap/SID/ 밑에 있는 ASCS/ERS 디렉토리를 아래와 같이 생성하였습니다.<br><br>- 1번 node<br> /dev/mapper/LRECCSAPVG-usr_sap_PEC_ERS55    50G   33M   50G   1% /usr/sap/PEC/ERS55<br>/dev/mapper/LRECCSAPVG-usr_sap_PEC_ASCS50   50G   39G   12G  78% /usr/sap/PEC/ASCS50<br><br> - 2번 node<br>/dev/mapper/LLECCSAPVG-usr_sap_PEC_ASCS50   50G   38G   13G  76% /usr/sap/PEC/ASCS50<br>/dev/mapper/LLECCSAPVG-usr_sap_PEC_ERS55    50G  821M   50G   2% /usr/sap/PEC/ERS55<br><br>위 마운트 포인트 볼륨에 대해 NFS 또는 HALVM 형식의 공유 타입으로 해야 하는지 아니면 현재와 같이 Local Filesystem 으로 해도 문제가 없는지 문의 드립니다.</issue><environment>Deploying Highly Available SAP NetWeaver-based Servers Using Red Hat Enterprise Linux HA add-on with Pacemaker 문서 내용을 보면 아래와 같이 나와 있습니다.<br><br>3.3 File Systems<br>The following different types of file systems are used in a SAP environment:<br><br>Shared Storage File systems<br>The following file systems should be created on a shared SAN LUN:<br>• /db2<br>• /usr/sap/&lt;SID&gt;/DVEBMGS0<br>• /usr/sap/&lt;SID&gt;/&lt;InstanceNo&gt;<br>for production environments the directories below /db2 should reside each on a separate LUN<br>for performance reasons. Please refer to the S A P I n s t a l l a t i o n G u i d e for details.<br>Since these file systems should always only be accessed from one cluster node it is recommended to create these file systems as HA-LVM volumes. Please refer to What is a Highly Available LVM (HA-LVM) configuration and how do I implement it? For instructions on how to setup a HA-LVM.<br><br>Local File Systems<br>The following directories can be created locally on each node.<br>• /usr/sap<br>• /sapmnt<br>• /db2<br>• /usr/sap/&lt;SID&gt;/SYS (linking directory, that can also reside locally. Provides links to /sapmnt/&lt;SID&gt;)<br>• /usr/sap/&lt;SID&gt;/SYS (directory to all cluster nodes)<br>• /usr/sap/tmp<br><br>문서 중간부분에 <br><br>5 Example Configuration<br><br>5.2.4 File System Setup<br><br>Shared SAN volumes for DB filesystem and SAP PAS instance filesystem<br>(as separate VGs/LVs with EXT4 filesystems)<br>• /dev/vg_db/lv_db mounted as /db2 (80GB)<br>• /dev/vg_sap/lv_sap mounted as /usr/sap/RH2/DVEBMGS01 (10GB)<br><br>NFS shares<br>The following SAP global file systems are mounted via NFS on all cluster nodes:<br>• nfsserver:/shares/lnxha-sapmnt mounted as /samnt<br>• nfsserver:/shares/lnxha-usr-sap-trans mounted as /usr/sap/trans<br><br>Local File Systems<br>Instance filesystems for ASCS (/usr/sap/RH2/ASCS00) and ERS (/usr/sap/RH2/ERS10) are local on both cluster nodes</environment><periodicityOfIssue>빠른 확인 부탁 드립니다.</periodicityOfIssue><cep>false</cep></case>