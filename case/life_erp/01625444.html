======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-04-28T07:29:47Z</b><br><b>마지막 답변자 : 우택 심</b><br><b>마지막 수정 일자 : 2016-05-23T06:05:06Z</b><br><b>id : 500A000000U44QuIAJ</b><br>======================<br><br><b><font size=15>
제목  : VMWare VM CPU 100% 점유 이슈 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>지난번 문의 드렸던 ksoftirq cpu 100% 점유 이슈 (https://access.redhat.com/support/cases/#/case/01604188) 와 비슷한 문제가 다시 발생하였습니다.<br><br>이번에 발생한 시스템은 예전에 VMCI Disable 을 한 VM 이며, 증상은 기존에 나왔던 문제가 비슷하게 보입니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>이번에는 다행히 vmcore 생성이 되어 별도로 dropbox 에 업로드를 하겠습니다.<br><br>몇 가지 로그를 수집했는데, 아래와 같습니다.<br><br>Apr 27 11:30:21 QBISAL01SL kernel: BUG: scheduling while atomic: swapper/0/0/0x10000100<br>Apr 27 11:30:21 QBISAL01SL kernel: Modules linked in: RedCastle(POE) iptable_filter vmw_vsock_vmci_transport vsock coretemp crc32_pclmul ghash_clmulni_intel ppdev vmw_balloon aesni_intel lrw gf128mul glue_helper ablk_helper cryptd pcspkr dm_mod sg i2c_pi<br>ix4 vmw_vmci shpchp parport_pc parport nfsd auth_rpcgss nfs_acl lockd grace sunrpc binfmt_misc ip_tables xfs libcrc32c sd_mod sr_mod crc_t10dif cdrom crct10dif_generic ata_generic pata_acpi crct10dif_pclmul crct10dif_common crc32c_intel vmwgfx serio_raw<br>drm_kms_helper vmxnet3 vmw_pvscsi ttm drm ata_piix libata i2c_core [last unloaded: RedCastle]<br>Apr 27 11:30:21 QBISAL01SL kernel: CPU: 0 PID: 0 Comm: swapper/0 Tainted: P           OE  ------------   3.10.0-327.el7.x86_64 #1<br>Apr 27 11:30:21 QBISAL01SL kernel: Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 09/21/2015<br>Apr 27 11:30:21 QBISAL01SL kernel: ffffffff8193c000 177c7a6c76706e53 ffff88081e603bb8 ffffffff816351f1<br>Apr 27 11:30:21 QBISAL01SL kernel: ffff88081e603bc8 ffffffff8162f322 ffff88081e603c28 ffffffff8163a7ad<br>Apr 27 11:30:21 QBISAL01SL kernel: ffffffff81951440 ffffffff8193ffd8 ffffffff8193ffd8 ffffffff8193ffd8<br>Apr 27 11:30:21 QBISAL01SL kernel: Call Trace:<br>Apr 27 11:30:21 QBISAL01SL kernel: &lt;IRQ&gt;  [&lt;ffffffff816351f1&gt;] dump_stack+0x19/0x1b<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8162f322&gt;] __schedule_bug+0x4d/0x5b<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8163a7ad&gt;] __schedule+0x7cd/0x900<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810b5ea6&gt;] __cond_resched+0x26/0x30<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8163abaa&gt;] _cond_resched+0x3a/0x50<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8163abef&gt;] wait_for_completion+0x2f/0x170<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81124820&gt;] ? __call_rcu+0x2c0/0x2c0<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810a26ab&gt;] wait_rcu_gp+0x5b/0x80<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810a2630&gt;] ? ftrace_raw_output_rcu_utilization+0x50/0x50<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810b8bd3&gt;] ? wake_up_process+0x23/0x40<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff811240cb&gt;] synchronize_sched+0x3b/0x50<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa03969d0&gt;] vmci_event_unsubscribe+0x70/0xb0 [vmw_vmci]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa041f611&gt;] vmci_transport_destruct+0x21/0xe0 [vmw_vsock_vmci_transport]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa0404867&gt;] vsock_sk_destruct+0x17/0x60 [vsock]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81514bdf&gt;] __sk_free+0x1f/0x170<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81514d51&gt;] sk_free+0x21/0x30<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa04202bb&gt;] vmci_transport_recv_stream_cb+0x1fb/0x2e0 [vmw_vsock_vmci_transport]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa0395f1c&gt;] vmci_datagram_invoke_guest_handler+0xbc/0xf0 [vmw_vmci]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa0396e6f&gt;] vmci_dispatch_dgs+0xcf/0x230 [vmw_vmci]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8108495d&gt;] tasklet_action+0x7d/0x140<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81084b0f&gt;] __do_softirq+0xef/0x280<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8164721c&gt;] call_softirq+0x1c/0x30<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81016fc5&gt;] do_softirq+0x65/0xa0<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81084ea5&gt;] irq_exit+0x115/0x120<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81647db8&gt;] do_IRQ+0x58/0xf0<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8163d0ed&gt;] common_interrupt+0x6d/0x6d<br>Apr 27 11:30:21 QBISAL01SL kernel: &lt;EOI&gt;  [&lt;ffffffff81058e96&gt;] ? native_safe_halt+0x6/0x10<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8101dbcf&gt;] default_idle+0x1f/0xc0<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8101e4d6&gt;] arch_cpu_idle+0x26/0x30<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810d6305&gt;] cpu_startup_entry+0x245/0x290<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81624e07&gt;] rest_init+0x77/0x80<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8d057&gt;] start_kernel+0x429/0x44a<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8ca37&gt;] ? repair_env_string+0x5c/0x5c<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8c120&gt;] ? early_idt_handlers+0x120/0x120<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8c5ee&gt;] x86_64_start_reservations+0x2a/0x2c<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8c742&gt;] x86_64_start_kernel+0x152/0x175<br><br>==================================================================================================<br><br>Apr 28 10:25:24 QBISAL01SL kernel: INFO: rcu_sched detected stalls on CPUs/tasks: { 0} (detected by 1, t=82502754 jiffies, g=127003306, c=127003305, q=0)<br>Apr 28 10:25:24 QBISAL01SL kernel: sending NMI to all CPUs:<br>Apr 28 10:25:24 QBISAL01SL kernel: NMI backtrace for cpu 1<br>Apr 28 10:25:24 QBISAL01SL kernel: CPU: 1 PID: 0 Comm: swapper/1 Tainted: P        W  OE  ------------   3.10.0-327.el7.x86_64 #1<br>Apr 28 10:25:24 QBISAL01SL kernel: Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 09/21/2015<br>Apr 28 10:25:24 QBISAL01SL kernel: task: ffff8808124c8b80 ti: ffff8808124d0000 task.ti: ffff8808124d0000<br>Apr 28 10:25:24 QBISAL01SL kernel: RIP: 0010:[&lt;ffffffff81058d5a&gt;]  [&lt;ffffffff81058d5a&gt;] native_write_msr_safe+0xa/0x10<br>Apr 28 10:25:24 QBISAL01SL kernel: RSP: 0018:ffff88081e623d78  EFLAGS: 00000046<br>Apr 28 10:25:24 QBISAL01SL kernel: RAX: 0000000000000400 RBX: 0000000000000001 RCX: 0000000000000830<br>Apr 28 10:25:24 QBISAL01SL kernel: RDX: 0000000000000001 RSI: 0000000000000400 RDI: 0000000000000830<br>Apr 28 10:25:24 QBISAL01SL kernel: RBP: ffff88081e623d78 R08: ffffffff81a658e0 R09: 000000000002d5cf<br>Apr 28 10:25:24 QBISAL01SL kernel: R10: 61206f7420494d4e R11: 3a73555043206c6c R12: ffffffff81a658e0<br>Apr 28 10:25:24 QBISAL01SL kernel: R13: 0000000000000001 R14: 000000000000a022 R15: 0000000000000002<br>Apr 28 10:25:24 QBISAL01SL kernel: FS:  0000000000000000(0000) GS:ffff88081e620000(0000) knlGS:0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b<br>Apr 28 10:25:24 QBISAL01SL kernel: CR2: 00007f46383012f8 CR3: 0000000806b6a000 CR4: 00000000001407e0<br>Apr 28 10:25:24 QBISAL01SL kernel: DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400<br>Apr 28 10:25:24 QBISAL01SL kernel: Stack:<br>Apr 28 10:25:24 QBISAL01SL kernel: ffff88081e623dc8 ffffffff8104fa22 0000000000000096 0000000000000002<br>Apr 28 10:25:24 QBISAL01SL kernel: 000800001e623da8 0000000000000001 0000000000000001 0000000000000080<br>Apr 28 10:25:24 QBISAL01SL kernel: ffff88081e62df80 ffffffff819a6880 ffff88081e623dd8 ffffffff8104fac3<br>Apr 28 10:25:24 QBISAL01SL kernel: Call Trace:<br>Apr 28 10:25:24 QBISAL01SL kernel: &lt;IRQ&gt;<br>Apr 28 10:25:24 QBISAL01SL kernel:<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8104fa22&gt;] __x2apic_send_IPI_mask+0xb2/0xe0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8104fac3&gt;] x2apic_send_IPI_mask+0x13/0x20<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8104b2ad&gt;] arch_trigger_all_cpu_backtrace+0x11d/0x130<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8112695d&gt;] rcu_check_callbacks+0x5bd/0x610<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810e0620&gt;] ? tick_sched_handle.isra.14+0x60/0x60<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8108e8c7&gt;] update_process_times+0x47/0x80<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810e05e5&gt;] tick_sched_handle.isra.14+0x25/0x60<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810e0661&gt;] tick_sched_timer+0x41/0x70<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810a9d42&gt;] __hrtimer_run_queues+0xd2/0x260<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810aa2e0&gt;] hrtimer_interrupt+0xb0/0x1e0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81049537&gt;] local_apic_timer_interrupt+0x37/0x60<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81647e8f&gt;] smp_apic_timer_interrupt+0x3f/0x60<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8164655d&gt;] apic_timer_interrupt+0x6d/0x80<br>Apr 28 10:25:24 QBISAL01SL kernel: &lt;EOI&gt;<br>Apr 28 10:25:24 QBISAL01SL kernel:<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81058e96&gt;] ? native_safe_halt+0x6/0x10<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8101dbcf&gt;] default_idle+0x1f/0xc0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8101e4d6&gt;] arch_cpu_idle+0x26/0x30<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810d6305&gt;] cpu_startup_entry+0x245/0x290<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810475fa&gt;] start_secondary+0x1ba/0x230<br>Apr 28 10:25:24 QBISAL01SL kernel: Code: 00 55 89 f9 48 89 e5 0f 32 31 c9 89 c0 48 c1 e2 20 89 0e 48 09 c2 48 89 d0 5d c3 66 0f 1f 44 00 00 55 89 f0 89 f9 48 89 e5 0f 30 &lt;31&gt; c0 5d c3 66 90 55 89 f9 48 89 e5 0f 33 89 c0 48 c1 e2 20 48<br>Apr 28 10:25:24 QBISAL01SL kernel: NMI backtrace for cpu 0<br>Apr 28 10:25:24 QBISAL01SL kernel: CPU: 0 PID: 3 Comm: ksoftirqd/0 Tainted: P        W  OE  ------------   3.10.0-327.el7.x86_64 #1<br>Apr 28 10:25:24 QBISAL01SL kernel: Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 09/21/2015<br>Apr 28 10:25:24 QBISAL01SL kernel: task: ffff880812e21700 ti: ffff880812ea8000 task.ti: ffff880812ea8000<br>Apr 28 10:25:24 QBISAL01SL kernel: RIP: 0010:[&lt;ffffffff8108497d&gt;]  [&lt;ffffffff8108497d&gt;] tasklet_action+0x9d/0x140<br>Apr 28 10:25:24 QBISAL01SL kernel: RSP: 0018:ffff880812eabdd8  EFLAGS: 00000283<br>Apr 28 10:25:24 QBISAL01SL kernel: RAX: ffff88081e60d900 RBX: ffff880810409f08 RCX: 0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: RDX: 00000001c6442b22 RSI: 0000000000000246 RDI: ffffffff819430b0<br>Apr 28 10:25:24 QBISAL01SL kernel: RBP: ffff880812eabdf0 R08: 0000000000000246 R09: 0000000180240010<br>Apr 28 10:25:24 QBISAL01SL kernel: R10: ffffffff81416b77 R11: ffffea001459c200 R12: ffff880810409f10<br>Apr 28 10:25:24 QBISAL01SL kernel: R13: 0000000000000000 R14: ffffffff819430b0 R15: 0000000000000001<br>Apr 28 10:25:24 QBISAL01SL kernel: FS:  0000000000000000(0000) GS:ffff88081e600000(0000) knlGS:0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b<br>Apr 28 10:25:24 QBISAL01SL kernel: CR2: 00007ffc254a1000 CR3: 000000040f054000 CR4: 00000000001407f0<br>Apr 28 10:25:24 QBISAL01SL kernel: DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400<br>Apr 28 10:25:24 QBISAL01SL kernel: Stack:<br>Apr 28 10:25:24 QBISAL01SL kernel: 0000000000000006 0000000000000006 ffffffff81979800 ffff880812eabe60<br>Apr 28 10:25:24 QBISAL01SL kernel: ffffffff81084b0f ffff880812eabfd8 0000000a04208040 00000001c6442b24<br>Apr 28 10:25:24 QBISAL01SL kernel: 0000000000000006 ffff880812eabfd8 ffff880812eabfd8 0000010000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: Call Trace:<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81084b0f&gt;] __do_softirq+0xef/0x280<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81084cd0&gt;] run_ksoftirqd+0x30/0x50<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810ae52f&gt;] smpboot_thread_fn+0xff/0x1a0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8163a909&gt;] ? schedule+0x29/0x70<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810ae430&gt;] ? lg_double_unlock+0x90/0x90<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810a5aef&gt;] kthread+0xcf/0xe0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810a5a20&gt;] ? kthread_create_on_node+0x140/0x140<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81645858&gt;] ret_from_fork+0x58/0x90<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810a5a20&gt;] ? kthread_create_on_node+0x140/0x140<br>Apr 28 10:25:24 QBISAL01SL kernel: Code: bf 00 00 00 48 8b 7b 20 ff 53 18 e8 fe a3 02 00 f0 41 80 24 24 fd 4d 85 ed 74 53 4c 89 eb 4c 8b 2b 4c 8d 63 08 f0 0f ba 6b 08 01 &lt;19&gt; c0 85 c0 74 b5 fa 66 0f 1f 44 00 00 48 c7 03 00 00 00 00 65<br><br>==================================================================================================<br><br>Linux 3.10.0-327.el7.x86_64 (QBISAL01SL)        04/27/16        _x86_64_        (2 CPU)<br><br>14:00:01        CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>14:01:01        all      3.08      0.00      2.09      0.00      0.00      0.00      0.00      0.00      0.00     94.83<br>14:02:01        all      3.50      0.00      2.36      0.00      0.00      0.00      0.02      0.00      0.00     94.13<br>14:03:01        all      3.15      0.00      2.04      0.02      0.00      0.00      0.02      0.00      0.00     94.78<br>14:04:02        all      3.25      0.00      2.19      0.00      0.00      0.00      0.00      0.00      0.00     94.56<br>14:05:01        all      3.25      0.00      2.25      0.00      0.00      0.00      0.00      0.00      0.00     94.50<br>14:06:01        all      3.25      0.00      1.94      0.00      0.00      0.00      0.02      0.00      0.00     94.79<br>14:07:01        all      6.35      0.00      2.23      0.00      0.00      0.00      0.02      0.00      0.00     91.41<br>14:08:01        all      3.53      0.00      2.31      0.02      0.00      0.00      0.02      0.00      0.00     94.12<br>14:09:01        all      3.17      0.00      2.19      0.00      0.00      0.00      0.00      0.00      0.00     94.64<br>14:10:01        all      3.12      0.00      2.01      0.00      0.00      0.00      0.02      0.00      0.00     94.86<br>14:11:01        all      5.14      0.00      4.17      0.00      0.00      0.00      0.02      0.00      0.00     90.67<br>14:12:01        all      3.22      0.00      2.12      0.02      0.00      0.00      0.00      0.00      0.00     94.64<br>14:13:01        all      3.10      0.00      2.23      0.00      0.00      0.00      0.00      0.00      0.00     94.68<br>14:14:01        all      4.75      0.00      2.13      0.00      0.00      0.00      0.02      0.00      0.00     93.10<br>14:15:01        all      3.40      0.00      2.19      0.00      0.00      0.00      0.02      0.00      0.00     94.39<br>14:16:01        all      3.62      0.00      2.74      0.02      0.00      0.00      0.00      0.00      0.00     93.62<br>14:17:01        all      3.63      0.00      3.10     70.98      0.00      0.00      0.02      0.00      0.00     22.27<br>14:18:01        all      3.17      0.00      2.25     94.59      0.00      0.00      0.00      0.00      0.00      0.00<br>14:19:01        all      3.35      0.00      2.23     94.41      0.00      0.00      0.02      0.00      0.00      0.00<br>14:20:01        all      3.55      0.00      2.46     93.97      0.00      0.00      0.02      0.00      0.00      0.00<br>14:21:01        all      3.03      0.00      2.16     94.81      0.00      0.00      0.00      0.00      0.00      0.00<br>14:22:01        all      3.16      0.00      2.21     94.63      0.00      0.00      0.00      0.00      0.00      0.00<br>14:23:01        all      3.38      0.00      2.26     94.35      0.00      0.00      0.00      0.00      0.00      0.00<br>14:24:01        all      3.18      0.00      2.21     94.59      0.00      0.00      0.02      0.00      0.00      0.00<br>14:25:01        all      3.06      0.00      2.24     94.69      0.00      0.00      0.00      0.00      0.00      0.00<br>14:26:01        all      3.41      0.00      2.56     94.03      0.00      0.00      0.00      0.00      0.00      0.00<br>14:27:01        all      3.12      0.00      2.26     94.62      0.00      0.00      0.00      0.00      0.00      0.00<br>14:28:01        all      3.15      0.00      2.23     94.61      0.00      0.00      0.02      0.00      0.00      0.00<br>14:29:01        all      3.62      0.00      2.73     93.63      0.00      0.00      0.02      0.00      0.00      0.00<br>14:30:01        all      3.25      0.00      2.19     94.56      0.00      0.00      0.00      0.00      0.00      0.00<br>14:31:01        all      3.11      0.00      2.21     94.68      0.00      0.00      0.00      0.00      0.00      0.00<br>14:32:01        all      3.38      0.00      2.39     94.21      0.00      0.00      0.02      0.00      0.00      0.00<br>14:33:01        all      3.03      0.00      2.31     94.64      0.00      0.00      0.02      0.00      0.00      0.00<br>14:34:01        all      3.27      0.00      2.21     94.52      0.00      0.00      0.00      0.00      0.00      0.00<br>14:35:01        all      3.48      0.00      2.35     94.15      0.00      0.00      0.02      0.00      0.00      0.00<br>14:36:01        all      3.15      0.00      2.13     94.73      0.00      0.00      0.00      0.00      0.00      0.00<br>14:37:01        all      3.03      0.00      2.08     94.87      0.00      0.00      0.02      0.00      0.00      0.00<br>14:38:02        all      3.45      0.00      2.24     94.29      0.00      0.00      0.02      0.00      0.00      0.00<br>14:39:01        all      6.44      0.00      2.20     91.36      0.00      0.00      0.00      0.00      0.00      0.00<br>14:40:01        all      3.21      0.00      2.21     94.56      0.00      0.00      0.02      0.00      0.00      0.00<br>14:41:01        all      3.38      0.00      2.34     94.28      0.00      0.00      0.00      0.00      0.00      0.00<br>14:42:01        all      3.13      0.00      2.26     94.59      0.00      0.00      0.02      0.00      0.00      0.00<br>14:43:01        all      3.02      0.00      2.21     94.76      0.00      0.00      0.02      0.00      0.00      0.00<br>14:44:01        all      3.35      0.00      2.29     94.34      0.00      0.00      0.02      0.00      0.00      0.00<br>14:45:01        all      3.13      0.00      2.21     94.66      0.00      0.00      0.00      0.00      0.00      0.00<br>14:46:01        all      3.08      0.00      2.11     94.81      0.00      0.00      0.00      0.00      0.00      0.00<br>14:47:01        all      3.57      0.00      2.23     94.17      0.00      0.00      0.03      0.00      0.00      0.00<br>14:48:01        all      3.05      0.00      2.26     94.70      0.00      0.00      0.00      0.00      0.00      0.00<br>14:49:01        all      3.08      0.00      2.24     94.67      0.00      0.00      0.00      0.00      0.00      0.00<br>14:50:01        all      3.45      0.00      2.38     94.14      0.00      0.00      0.03      0.00      0.00      0.00<br>14:51:01        all      3.69      0.00      2.11     94.20      0.00      0.00      0.00      0.00      0.00      0.00<br>14:52:01        all      3.18      0.00      2.16     94.66      0.00      0.00      0.00      0.00      0.00      0.00<br>14:53:01        all      3.62      0.00      2.28     94.09      0.00      0.00      0.02      0.00      0.00      0.00<br>14:54:01        all      3.35      0.00      2.18     94.46      0.00      0.00      0.02      0.00      0.00      0.00<br>14:55:01        all      3.08      0.00      2.19     94.72      0.00      0.00      0.00      0.00      0.00      0.00<br>14:56:01        all      3.63      0.00      2.71     93.64      0.00      0.00      0.02      0.00      0.00      0.00<br>14:57:01        all      3.00      0.00      2.26     94.74      0.00      0.00      0.00      0.00      0.00      0.00<br>14:58:01        all      3.06      0.00      2.14     94.80      0.00      0.00      0.00      0.00      0.00      0.00<br>14:59:01        all      3.62      0.00      2.64     93.73      0.00      0.00      0.02      0.00      0.00      0.00<br>Average:        all      3.44      0.00      2.30     68.39      0.00      0.00      0.01      0.00      0.00     25.86<br><br>==================================================================================================<br><br>Linux 3.10.0-327.el7.x86_64 (QBISAL01SL)        04/27/16        _x86_64_        (2 CPU)<br><br>14:00:01    kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty<br>14:01:01      1065916  31342868     96.71         0  14995212  17823764     17.91  13910988  10296680      4544<br>14:02:01      1061364  31347420     96.73         0  14967052  17818752     17.91  13909668  10268672      4596<br>14:03:01      1035816  31372968     96.80         0  14967072  17818700     17.91  13909176  10268676      4616<br>14:04:02      1009584  31399200     96.88         0  14967096  17818704     17.91  13909436  10268684      4640<br>14:05:01       978440  31430344     96.98         0  14967148  17819344     17.91  13910064  10268688      4692<br>14:06:01       952432  31456352     97.06         0  14967164  17819360     17.91  13909720  10268692      4708<br>14:07:01       931084  31477700     97.13         0  14960740  17819684     17.91  13910188  10262248      4740<br>14:08:01       894200  31514584     97.24         0  14960848  17827944     17.91  13912912  10262272      4812<br>14:09:01       859968  31548816     97.35         0  14960868  17835124     17.92  13918752  10262276      4832<br>14:10:01       832736  31576048     97.43         0  14960912  17835124     17.92  13918568  10262276      4876<br>14:11:01       800340  31608444     97.53         0  14960964  17835172     17.92  13918960  10262288      5148<br>14:12:01       774752  31634032     97.61         0  14960988  17835120     17.92  13918732  10262288      5180<br>14:13:01       748532  31660252     97.69         0  14961220  17834528     17.92  13918416  10262288      5196<br>14:14:01       718560  31690224     97.78         0  14960472  17834776     17.92  13919056  10261568      5240<br>14:15:01       691120  31717664     97.87         0  14959816  17834728     17.92  13918676  10261036      5276<br>14:16:01       644128  31764656     98.01         0  14959892  17866600     17.95  13926592  10261028      5308<br>14:17:01       613236  31795548     98.11        24  14940880  17888300     17.98  13934204  10240700      5380<br>14:18:01       658352  31750432     97.97        24  14868032  17888248     17.98  13933840  10167932      5408<br>14:19:01       686396  31722388     97.88        24  14812292  17888252     17.98  13933720  10112172      5436<br>14:20:01       691772  31717012     97.87        24  14772332  17873320     17.96  13932712  10072156      5488<br>14:21:01       668684  31740100     97.94        24  14770248  17871008     17.96  13932296  10070060      5504<br>14:22:01       735400  31673384     97.73        24  14684712  17862316     17.95  13924920   9984464      5524<br>14:23:01       805956  31602828     97.51        24  14583556  17862364     17.95  13925072   9883260      5564<br>14:24:01       810560  31598224     97.50        24  14552660  17862292     17.95  13924940   9852364      5576<br>14:25:01       857024  31551760     97.36        24  14477284  17865664     17.95  13926196   9777028      5584<br>14:26:01       941976  31466808     97.09        24  14356740  17862956     17.95  13925524   9656172      5636<br>14:27:01       921824  31486960     97.16        24  14348608  17862908     17.95  13925368   9648084      5640<br>14:28:01       919912  31488872     97.16        24  14322924  17865952     17.95  13926340   9622252      5652<br>14:29:01       983216  31425568     96.97        24  14216000  17862360     17.95  13925360   9515244      5688<br>14:30:01      1019396  31389388     96.85        24  14153240  17862316     17.95  13925388   9452616      5716<br>14:31:01      1048128  31360656     96.77        24  14097020  17862316     17.95  13925292   9396240      5720<br>14:32:01      1059260  31349524     96.73        24  14052632  17862364     17.95  13925684   9351812      5764<br>14:33:01      1032552  31376232     96.81        24  14052632  17862316     17.95  13925508   9351812      5764<br>14:34:01      1005916  31402868     96.90        24  14052640  17862316     17.95  13925308   9351812      5776<br>14:35:01      1020268  31388516     96.85        24  14052684  17814752     17.90  13879312   9351816      5820<br>14:36:01       995976  31412808     96.93        24  14050772  17814704     17.90  13879304   9349896      5832<br>14:37:01       969940  31438844     97.01        24  14050780  17814704     17.90  13879016   9349892      5840<br>14:38:02       937436  31471348     97.11        24  14050820  17814752     17.90  13879312   9349896      5880<br>14:39:01       909760  31499024     97.19        24  14050976  17815560     17.90  13880248   9349964      6080<br>14:40:01       884708  31524076     97.27        24  14049076  17815560     17.90  13880044   9348040      6104<br>14:41:01       850880  31557904     97.37        24  14049112  17815604     17.90  13880480   9348032      6140<br>14:42:01       821788  31586996     97.46        24  14049440  17819212     17.91  13882800   9348032      6148<br>14:43:01       797976  31610808     97.54        24  14047532  17819212     17.91  13882720   9345960      6164<br>14:44:01       765808  31642976     97.64        24  14047564  17819256     17.91  13883124   9345960      6196<br>14:45:01       737920  31670864     97.72        24  14047572  17819212     17.91  13882780   9345956      6208<br>14:46:01       710520  31698264     97.81        24  14047588  17819276     17.91  13882780   9345956      6224<br>14:47:01       676020  31732764     97.91        24  14047624  17816408     17.90  13881604   9345956      6272<br>14:48:01       653540  31755244     97.98        24  14047636  17811580     17.90  13877972   9345984      6284<br>14:49:01       626400  31782384     98.07        24  14047648  17811580     17.90  13878076   9345984      6296<br>14:50:01       594488  31814296     98.17        24  14045776  17811628     17.90  13878244   9344060      6348<br>14:51:01       566872  31841912     98.25        24  14045788  17811580     17.90  13878652   9344060      6360<br>14:52:01       542960  31865824     98.32        24  14045812  17803400     17.89  13876132   9344064      6388<br>14:53:01       515912  31892872     98.41        24  14045836  17793668     17.88  13872628   9344048      6444<br>14:54:01       490252  31918532     98.49        24  14045876  17793656     17.88  13872456   9344060      6484<br>14:55:01       466360  31942424     98.56        24  14042036  17797432     17.88  13872752   9340216      6488<br>14:56:01       425504  31983280     98.69        24  14042080  17793112     17.88  13872540   9340084      6536<br>14:57:01       417076  31991708     98.71        24  14024824  17793016     17.88  13872116   9322708      6556<br>14:58:01       485080  31923704     98.50        24  13927752  17796220     17.88  13873336   9225800      6564<br>14:59:01       506772  31902012     98.44        24  13861572  17793700     17.88  13872676   9159716      6608<br>Average:       793708  31615076     97.55        17  14413832  17832776     17.92  13903198   9713423      5686<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>일단 2016-04-27 11:30 경 최초 Call Trace 로그가 발생했으며, 이후 2016-04-27 14:17 경부터 CPU 에 여유가 없는 것으로 판단됩니다.<br><br>오늘 아예 시스템 접근이 불가 하여 NMI 로 Crash 하여 Reboot/Core 생성 하였습니다.<br><br>최대한 빨리 로그를 업로드 하도록 하겠습니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags><tag><name>vmware</name></tag></tags><br><comment id="a0aA000000H95lHIAR"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-05-23T06:04:54Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-05-23T06:04:53Z</b><br><br>안녕하세요.<br><br>우선 rcupdate 관련 파라미터를 모두 적용하였으며, VMware 환경의 경우 VM의 VMCI 옵션도 Disable 처리 하였습니다.<br><br>모니터링 후 향 후 비슷한 문제가 다시 발생하면 재 오픈 하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-05-23T06:04:53Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000H8meDIAR"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-20T05:03:21Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-20T05:03:21Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 혹시 추가 문의사항이 잇으시면 케이스에 업데이트 바라며, 없으시면 케이스를 close하도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-20T05:03:21Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GDzGUIA1"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-10T04:40:39Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-10T04:40:39Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>앞서서 저희 커널 전문엔지니어가 vmcore를 분석한 내용을 공유 드렸습니다.<br><br>간략하게 설명을 드린다면, vmci가 켜져있음에 따라 계속 수케줄에 영향을 주었고, 그때 RCU 메모리 버퍼에 performance 영향을 줌으로써 결국 softirqd가 오랬동안 동작하였으며,<br>이에 따라 시스템이 hang까지 왔던 것으로 보입니다.<br><br>그래서 저희 엔지니어는 추가적으로 아래와 같은 설정을 통해서 이와같은 이슈를 해결할 수 있다고 합니다.<br><br>echo 1 &gt; /sys/module/rcupdate/parameters/rcu_cpu_stall_suppress<br>======================<br>더불이, 향후 wmci 기능을 끔으로써 해당 이슈가 발행되는 현상이 해소될 것으로 보이기는 하나, 향후의 RCU 메모리와 관련된 영향이 잇을 수 있으므로, 위의 설정또한 적용하여 주시기 바랍니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-05-10T04:40:39Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H5amAIAR"><br>======================<br><b>생성계정 : Kwon, Daniel</b><br><b>생성날짜 : 2016-05-10T01:05:18Z</b><br><b>마지막 답변자 : Kwon, Daniel</b><br><b>마지막 수정 일자 : 2016-05-10T01:05:18Z</b><br><br>Hi,<br><br>This is Daniel Kwon from Kernel team. I'm working with Jinkoo to support your case.<br><br>As you are aware, the CPU was busy on ksoftirqd. Below shows that ksoftirqd/0  was on CPU 0 for more than 356 seconds.<br><br>------------------------------------------------------------------------------<br>crash&gt; runq -t | grep CPU | awk 'BEGIN {max=0; min=9999999999999999999999} { if ($3 &gt; max) { max=$3; max_cpu=$2 }  if ($3 &lt; min) {min=$3; min_cpu=$2}} END { print &quot;Max = CPU &quot;, max_cpu, max; print &quot;Min = CPU &quot;, min_cpu, min}'<br>Max = CPU  1: 3348788902967053<br>Min = CPU  0: 3348432312078932<br>crash&gt; pd (3348788902967053-3348432312078932)/1000000000<br>$8 = 356<br><br>crash&gt; bt<br>PID: 3      TASK: ffff880812e21700  CPU: 0   COMMAND: &quot;ksoftirqd/0&quot;<br> #0 [ffff88081e605d18] machine_kexec at ffffffff81051beb<br> #1 [ffff88081e605d78] crash_kexec at ffffffff810f2542<br> #2 [ffff88081e605e48] panic at ffffffff8162ea73<br> #3 [ffff88081e605ec8] do_nmi at ffffffff8163e5db<br> #4 [ffff88081e605ef0] end_repeat_nmi at ffffffff8163d771<br>    [exception RIP: __do_softirq+216]<br>    RIP: ffffffff81084af8  RSP: ffff880812eabe00  RFLAGS: 00000206<br>    RAX: 0000000000000006  RBX: 0000000000000006  RCX: 0000000000000100<br>    RDX: ffff88081e600000  RSI: 0000000000000000  RDI: 0000000000000000<br>    RBP: ffff880812eabe60   R8: ffff88080cb8d0e0   R9: 0000000000000000<br>    R10: ffffffff81517cf7  R11: ffff88080cb8c8c0  R12: 0000000000000006<br>    R13: ffffffff81979800  R14: ffffffff819430b0  R15: 0000000000000001<br>    ORIG_RAX: ffffffffffffffff  CS: 0010  SS: 0018<br>--- &lt;NMI exception stack&gt; ---<br> #5 [ffff880812eabe00] __do_softirq at ffffffff81084af8<br> #6 [ffff880812eabe68] run_ksoftirqd at ffffffff81084cd0<br> #7 [ffff880812eabe80] smpboot_thread_fn at ffffffff810ae52f<br> #8 [ffff880812eabec8] kthread at ffffffff810a5aef<br> #9 [ffff880812eabf50] ret_from_fork at ffffffff81645858<br>------------------------------------------------------------------------------<br><br>This process was blocked in handling softirq routines.<br> <br>------------------------------------------------------------------------------<br>/usr/src/debug/kernel-3.10.0-327.el7/linux-3.10.0-327.el7.x86_64/kernel/softirq.c: 245<br>0xffffffff81084ae5 &lt;__do_softirq+197&gt;:  sar    $0x3,%r12<br>/usr/src/debug/kernel-3.10.0-327.el7/linux-3.10.0-327.el7.x86_64/kernel/softirq.c: 246<br>0xffffffff81084ae9 &lt;__do_softirq+201&gt;:  mov    -0x3fbc(%rax),%eax<br>/usr/src/debug/kernel-3.10.0-327.el7/linux-3.10.0-327.el7.x86_64/kernel/softirq.c: 245<br>0xffffffff81084aef &lt;__do_softirq+207&gt;:  mov    %r12d,%ebx<br>/usr/src/debug/kernel-3.10.0-327.el7/linux-3.10.0-327.el7.x86_64/kernel/softirq.c: 246<br>0xffffffff81084af2 &lt;__do_softirq+210&gt;:  mov    %eax,-0x2c(%rbp)<br>/usr/src/debug/kernel-3.10.0-327.el7/linux-3.10.0-327.el7.x86_64/include/linux/kernel_stat.h: 86<br>0xffffffff81084af5 &lt;__do_softirq+213&gt;:  mov    %r12d,%eax<br>0xffffffff81084af8 &lt;__do_softirq+216&gt;:  mov    %rax,-0x48(%rbp)<br><br>241   h = softirq_vec;<br>242 <br>243   do {<br>244     if (pending &amp; 1) {<br>245       unsigned int vec_nr = h - softirq_vec;<br>246       int prev_count = preempt_count();<br>247 <br>248       kstat_incr_softirqs_this_cpu(vec_nr);<br><br><br>RBX: 0000000000000006<br><br>crash&gt; irq -b<br>SOFTIRQ_VEC      ACTION     <br>    [0]     ffffffff810847a0  &lt;tasklet_hi_action&gt;<br>    [1]     ffffffff8108db60  &lt;run_timer_softirq&gt;<br>    [2]     ffffffff81529e50  &lt;net_tx_action&gt;<br>    [3]     ffffffff8152ae50  &lt;net_rx_action&gt;<br>    [4]     ffffffff812d1610  &lt;blk_done_softirq&gt;<br>    [5]     ffffffff812d1ea0  &lt;blk_iopoll_softirq&gt;<br>    [6]     ffffffff810848e0  &lt;tasklet_action&gt;           &lt;----- tasklet_action<br>    [7]     ffffffff810c5d70  &lt;run_rebalance_domains&gt;<br>    [9]     ffffffff81125200  &lt;rcu_process_callbacks&gt;<br>------------------------------------------------------------------------------<br><br>Above is confirming that the softirq was about to handle 'tasklet_action()'. tasklet list had not may tasklets to call. There's only one - vmci_dispatch_dsg.<br>    <br>------------------------------------------------------------------------------<br>crash&gt; tasklet_vec<br>PER-CPU DATA TYPE:<br>  struct tasklet_head tasklet_vec;<br>PER-CPU ADDRESSES:<br>  [0]: ffff88081e60d900<br>  [1]: ffff88081e62d900<br><br>crash&gt; tasklet_head.head ffff88081e60d900<br>  head = 0xffff880810409f08<br>crash&gt; tasklet_struct 0xffff880810409f08<br>struct tasklet_struct {<br>  next = 0x0, <br>  state = 3, <br>  count = {<br>    counter = 0<br>  }, <br>  func = 0xffffffffa0396da0 &lt;vmci_dispatch_dgs&gt;, <br>  data = 18446612166946627288<br>}<br>------------------------------------------------------------------------------<br><br>The concern here is the 'state' in tasklet_struct. It has value 3.<br><br>------------------------------------------------------------------------------<br>enum<br>{<br>  TASKLET_STATE_SCHED,  /* Tasklet is scheduled for execution */   &lt;--- 1<br>  TASKLET_STATE_RUN /* Tasklet is running (SMP only) */            &lt;--- 2<br>};<br><br>crash&gt; eval -b 0x3<br>hexadecimal: 3  <br>    decimal: 3  <br>      octal: 3<br>     binary: 0000000000000000000000000000000000000000000000000000000000000011<br>   bits set: 1 0 <br>------------------------------------------------------------------------------<br><br>It mean that both 'TASKLET_STATE_SCHED' and 'TASKLET_STATE_RUN' was on. It means it's scheduled, but as it's already running it's not able to start a new one and it was repeated which caused of high CPU load.<br><br>------------------------------------------------------------------------------<br>    if (tasklet_trylock(t)) {<br>      if (!atomic_read(&amp;t-&gt;count)) {<br>        if (!test_and_clear_bit(TASKLET_STATE_SCHED, &amp;t-&gt;state))<br>          BUG();<br>        t-&gt;func(t-&gt;data);<br>        tasklet_unlock(t);<br>        continue;<br>      }<br>      tasklet_unlock(t);<br>    }<br>    <br>static inline int tasklet_trylock(struct tasklet_struct *t)<br>{<br>  return !test_and_set_bit(TASKLET_STATE_RUN, &amp;(t)-&gt;state);<br>}<br><br>static inline void tasklet_unlock(struct tasklet_struct *t)<br>{<br>  smp_mb__before_clear_bit();<br>  clear_bit(TASKLET_STATE_RUN, &amp;(t)-&gt;state);<br>}<br>------------------------------------------------------------------------------<br><br>I have checked in which process it's running this tasklet - vmci_dispatch_dsg() - and could see that it's 'swapper/0' and this process went to sleep for really long time.<br><br>------------------------------------------------------------------------------<br>crash&gt; bt ffffffff81951440<br>PID: 0      TASK: ffffffff81951440  CPU: 0   COMMAND: &quot;swapper/0&quot;<br> #0 [ffff88081e603b98] schedule at ffffffff8163a909<br> #1 [ffff88081e603ba8] schedule_timeout at ffffffff816385f9<br> #2 [ffff88081e603c58] wait_for_completion at ffffffff8163acd6<br> #3 [ffff88081e603cb8] wait_rcu_gp at ffffffff810a26ab<br> #4 [ffff88081e603d18] synchronize_sched at ffffffff811240cb<br> #5 [ffff88081e603d28] vmci_event_unsubscribe at ffffffffa03969d0 [vmw_vmci]<br> #6 [ffff88081e603d48] vmci_transport_destruct at ffffffffa041f611 [vmw_vsock_vmci_transport]<br> #7 [ffff88081e603d60] vsock_sk_destruct at ffffffffa0404867 [vsock]<br> #8 [ffff88081e603d78] __sk_free at ffffffff81514bdf<br> #9 [ffff88081e603da0] sk_free at ffffffff81514d51<br>#10 [ffff88081e603db0] vmci_transport_recv_stream_cb at ffffffffa04202bb [vmw_vsock_vmci_transport]<br>#11 [ffff88081e603e28] vmci_datagram_invoke_guest_handler at ffffffffa0395f1c [vmw_vmci]<br>#12 [ffff88081e603e50] vmci_dispatch_dgs at ffffffffa0396e6f [vmw_vmci]<br>#13 [ffff88081e603e90] tasklet_action at ffffffff8108495d<br>#14 [ffff88081e603eb8] __do_softirq at ffffffff81084b0f<br>#15 [ffff88081e603f28] call_softirq at ffffffff8164721c<br>#16 [ffff88081e603f40] do_softirq at ffffffff81016fc5<br>#17 [ffff88081e603f60] irq_exit at ffffffff81084ea5<br>#18 [ffff88081e603f78] do_IRQ at ffffffff81647db8<br>--- &lt;IRQ stack&gt; ---<br>#19 [ffffffff8193fdf8] ret_from_intr at ffffffff8163d0ed<br>    [exception RIP: native_safe_halt+6]<br>    RIP: ffffffff81058e96  RSP: ffffffff8193fea0  RFLAGS: 00000286<br>    RAX: 00000000ffffffed  RBX: 000b868a59156380  RCX: 0100000000000000<br>    RDX: 0000000000000000  RSI: 0000000000000000  RDI: 0000000000000046<br>    RBP: ffffffff8193fea0   R8: 0000000000000000   R9: 0000000000000000<br>    R10: 0000000000000000  R11: 0000000000000000  R12: 0000000000000000<br>    R13: 000b868a59156380  R14: ffff88081e60dbc0  R15: 177c7a6c76706e53<br>    ORIG_RAX: ffffffffffffff5b  CS: 0010  SS: 0018<br>#20 [ffffffff8193fea8] default_idle at ffffffff8101dbcf<br>#21 [ffffffff8193fec8] arch_cpu_idle at ffffffff8101e4d6<br>#22 [ffffffff8193fed8] cpu_startup_entry at ffffffff810d6305<br>#23 [ffffffff8193ff30] rest_init at ffffffff81624e07<br>#24 [ffffffff8193ff40] start_kernel at ffffffff81a8d057<br>#25 [ffffffff8193ff88] x86_64_start_reservations at ffffffff81a8c5ee<br>#26 [ffffffff8193ff98] x86_64_start_kernel at ffffffff81a8c742<br><br><br>crash&gt; ps -m ffffffff81951440<br>[38 18:07:12.312] [UN]  PID: 0      TASK: ffffffff81951440  CPU: 0   COMMAND: &quot;swapper/0&quot;<br>------------------------------------------------------------------------------<br><br>It's caused as the function - vmci_dispatch_dgs() - was blocked awaiting RCU to be completed. The issue is if there's RCU stall, it'll print out the warning messages in the log buffer in kernel and if it's already full, it'll not have enough time to clean this before the RCU stall timeout happens. This RCU was introduced in RHEL7 for the first and sometimes, it's causing the issue by itself which is printing out the error continuously. In this case, it's even worse as a tasklet was blocked and another one was scheduled after that which made it to be in loop continuously. we can avoid this situation by disable RCU warning messages by run the below. It'll stop printing out the call trace from each CPUs that is causing high load.<br><br>echo 1 &gt; /sys/module/rcupdate/parameters/rcu_cpu_stall_suppress<br><br>Best regards,<br>Daniel Kwon<br>Software Maintenance Engineer, GSS, Red Hat Asia Pacific<br><br><publishedDate>2016-05-10T01:05:18Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H3ugRIAR"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-03T09:08:50Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-03T09:08:50Z</b><br><br>안녕하세요<br>Red Hat 한진구 입니다.<br><br>보내주신 vmcore는 확인하였으며, vmcore를 분석하여 다시 안내드릴 수 있도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-03T09:08:50Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H3d2fIAB"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-05-03T01:32:43Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-05-03T01:32:43Z</b><br><br>안녕하세요. <br><br>dropbox.redhat.com/incoming 에 QBISAL01SL_vmcore 파일명으로 업로드 되었습니다.<br><br>확인 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2016-05-03T01:32:43Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000H3QA9IAN"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-02T06:10:27Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-02T06:10:27Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>vmcore 업로드가 되시면 다시 한번 업데이트 바랍니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-02T06:10:27Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GywluIAB"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-04-29T04:39:35Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-04-29T04:39:35Z</b><br><br>안녕하세요.<br><br>dropbox.redhat.com 에 아래와 같은 파일명으로 sosreport 와 log 를 업로드 하였습니다.<br><br>QBISAL01SL_var_log.tar.gz<br>sosreport-QBISAL01SL-20160428155650.tar.xz<br><br>vmcore 파일은 사이즈가 다소 커서 별도로 다운받아 업로드 후 코멘트를 다시 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-29T04:39:35Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GyuPRIAZ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-04-29T00:40:53Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-04-29T00:40:53Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>sosreport와 vmcore 업로드가 완료되면 업데이트 바랍니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-04-29T00:40:53Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GyXvFIAV"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-04-28T07:33:37Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-04-28T07:33:37Z</b><br><br>안녕하세요.<br><br>VMWare 에서 VM Property 를 다시 확인 해 보니 해당 VM 은 VMCI 가 Enabled 된 것으로 확인 되었습니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-28T07:33:37Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GyXugIAF"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-04-28T07:32:55Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-04-28T07:32:55Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>우선 보내주신 내용을 먼저 검토하도록 하겠습니다.<br>그리고 severity는 현재 3에 해당됨에 따라 2에서 3으로 변경처리할 예정이며, severity가 변경되더라도 케이스는 제가 follow up 하도록 하겠습니다.<br><br><br>감사합니다.<br><br><publishedDate>2016-04-28T07:32:55Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>지난번 문의 드렸던 ksoftirq cpu 100% 점유 이슈 (https://access.redhat.com/support/cases/#/case/01604188) 와 비슷한 문제가 다시 발생하였습니다.<br><br>이번에 발생한 시스템은 예전에 VMCI Disable 을 한 VM 이며, 증상은 기존에 나왔던 문제가 비슷하게 보입니다.</issue><environment>이번에는 다행히 vmcore 생성이 되어 별도로 dropbox 에 업로드를 하겠습니다.<br><br>몇 가지 로그를 수집했는데, 아래와 같습니다.<br><br>Apr 27 11:30:21 QBISAL01SL kernel: BUG: scheduling while atomic: swapper/0/0/0x10000100<br>Apr 27 11:30:21 QBISAL01SL kernel: Modules linked in: RedCastle(POE) iptable_filter vmw_vsock_vmci_transport vsock coretemp crc32_pclmul ghash_clmulni_intel ppdev vmw_balloon aesni_intel lrw gf128mul glue_helper ablk_helper cryptd pcspkr dm_mod sg i2c_pi<br>ix4 vmw_vmci shpchp parport_pc parport nfsd auth_rpcgss nfs_acl lockd grace sunrpc binfmt_misc ip_tables xfs libcrc32c sd_mod sr_mod crc_t10dif cdrom crct10dif_generic ata_generic pata_acpi crct10dif_pclmul crct10dif_common crc32c_intel vmwgfx serio_raw<br>drm_kms_helper vmxnet3 vmw_pvscsi ttm drm ata_piix libata i2c_core [last unloaded: RedCastle]<br>Apr 27 11:30:21 QBISAL01SL kernel: CPU: 0 PID: 0 Comm: swapper/0 Tainted: P           OE  ------------   3.10.0-327.el7.x86_64 #1<br>Apr 27 11:30:21 QBISAL01SL kernel: Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 09/21/2015<br>Apr 27 11:30:21 QBISAL01SL kernel: ffffffff8193c000 177c7a6c76706e53 ffff88081e603bb8 ffffffff816351f1<br>Apr 27 11:30:21 QBISAL01SL kernel: ffff88081e603bc8 ffffffff8162f322 ffff88081e603c28 ffffffff8163a7ad<br>Apr 27 11:30:21 QBISAL01SL kernel: ffffffff81951440 ffffffff8193ffd8 ffffffff8193ffd8 ffffffff8193ffd8<br>Apr 27 11:30:21 QBISAL01SL kernel: Call Trace:<br>Apr 27 11:30:21 QBISAL01SL kernel: &lt;IRQ&gt;  [&lt;ffffffff816351f1&gt;] dump_stack+0x19/0x1b<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8162f322&gt;] __schedule_bug+0x4d/0x5b<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8163a7ad&gt;] __schedule+0x7cd/0x900<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810b5ea6&gt;] __cond_resched+0x26/0x30<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8163abaa&gt;] _cond_resched+0x3a/0x50<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8163abef&gt;] wait_for_completion+0x2f/0x170<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81124820&gt;] ? __call_rcu+0x2c0/0x2c0<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810a26ab&gt;] wait_rcu_gp+0x5b/0x80<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810a2630&gt;] ? ftrace_raw_output_rcu_utilization+0x50/0x50<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810b8bd3&gt;] ? wake_up_process+0x23/0x40<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff811240cb&gt;] synchronize_sched+0x3b/0x50<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa03969d0&gt;] vmci_event_unsubscribe+0x70/0xb0 [vmw_vmci]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa041f611&gt;] vmci_transport_destruct+0x21/0xe0 [vmw_vsock_vmci_transport]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa0404867&gt;] vsock_sk_destruct+0x17/0x60 [vsock]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81514bdf&gt;] __sk_free+0x1f/0x170<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81514d51&gt;] sk_free+0x21/0x30<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa04202bb&gt;] vmci_transport_recv_stream_cb+0x1fb/0x2e0 [vmw_vsock_vmci_transport]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa0395f1c&gt;] vmci_datagram_invoke_guest_handler+0xbc/0xf0 [vmw_vmci]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffffa0396e6f&gt;] vmci_dispatch_dgs+0xcf/0x230 [vmw_vmci]<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8108495d&gt;] tasklet_action+0x7d/0x140<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81084b0f&gt;] __do_softirq+0xef/0x280<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8164721c&gt;] call_softirq+0x1c/0x30<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81016fc5&gt;] do_softirq+0x65/0xa0<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81084ea5&gt;] irq_exit+0x115/0x120<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81647db8&gt;] do_IRQ+0x58/0xf0<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8163d0ed&gt;] common_interrupt+0x6d/0x6d<br>Apr 27 11:30:21 QBISAL01SL kernel: &lt;EOI&gt;  [&lt;ffffffff81058e96&gt;] ? native_safe_halt+0x6/0x10<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8101dbcf&gt;] default_idle+0x1f/0xc0<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff8101e4d6&gt;] arch_cpu_idle+0x26/0x30<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff810d6305&gt;] cpu_startup_entry+0x245/0x290<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81624e07&gt;] rest_init+0x77/0x80<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8d057&gt;] start_kernel+0x429/0x44a<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8ca37&gt;] ? repair_env_string+0x5c/0x5c<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8c120&gt;] ? early_idt_handlers+0x120/0x120<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8c5ee&gt;] x86_64_start_reservations+0x2a/0x2c<br>Apr 27 11:30:21 QBISAL01SL kernel: [&lt;ffffffff81a8c742&gt;] x86_64_start_kernel+0x152/0x175<br><br>==================================================================================================<br><br>Apr 28 10:25:24 QBISAL01SL kernel: INFO: rcu_sched detected stalls on CPUs/tasks: { 0} (detected by 1, t=82502754 jiffies, g=127003306, c=127003305, q=0)<br>Apr 28 10:25:24 QBISAL01SL kernel: sending NMI to all CPUs:<br>Apr 28 10:25:24 QBISAL01SL kernel: NMI backtrace for cpu 1<br>Apr 28 10:25:24 QBISAL01SL kernel: CPU: 1 PID: 0 Comm: swapper/1 Tainted: P        W  OE  ------------   3.10.0-327.el7.x86_64 #1<br>Apr 28 10:25:24 QBISAL01SL kernel: Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 09/21/2015<br>Apr 28 10:25:24 QBISAL01SL kernel: task: ffff8808124c8b80 ti: ffff8808124d0000 task.ti: ffff8808124d0000<br>Apr 28 10:25:24 QBISAL01SL kernel: RIP: 0010:[&lt;ffffffff81058d5a&gt;]  [&lt;ffffffff81058d5a&gt;] native_write_msr_safe+0xa/0x10<br>Apr 28 10:25:24 QBISAL01SL kernel: RSP: 0018:ffff88081e623d78  EFLAGS: 00000046<br>Apr 28 10:25:24 QBISAL01SL kernel: RAX: 0000000000000400 RBX: 0000000000000001 RCX: 0000000000000830<br>Apr 28 10:25:24 QBISAL01SL kernel: RDX: 0000000000000001 RSI: 0000000000000400 RDI: 0000000000000830<br>Apr 28 10:25:24 QBISAL01SL kernel: RBP: ffff88081e623d78 R08: ffffffff81a658e0 R09: 000000000002d5cf<br>Apr 28 10:25:24 QBISAL01SL kernel: R10: 61206f7420494d4e R11: 3a73555043206c6c R12: ffffffff81a658e0<br>Apr 28 10:25:24 QBISAL01SL kernel: R13: 0000000000000001 R14: 000000000000a022 R15: 0000000000000002<br>Apr 28 10:25:24 QBISAL01SL kernel: FS:  0000000000000000(0000) GS:ffff88081e620000(0000) knlGS:0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b<br>Apr 28 10:25:24 QBISAL01SL kernel: CR2: 00007f46383012f8 CR3: 0000000806b6a000 CR4: 00000000001407e0<br>Apr 28 10:25:24 QBISAL01SL kernel: DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400<br>Apr 28 10:25:24 QBISAL01SL kernel: Stack:<br>Apr 28 10:25:24 QBISAL01SL kernel: ffff88081e623dc8 ffffffff8104fa22 0000000000000096 0000000000000002<br>Apr 28 10:25:24 QBISAL01SL kernel: 000800001e623da8 0000000000000001 0000000000000001 0000000000000080<br>Apr 28 10:25:24 QBISAL01SL kernel: ffff88081e62df80 ffffffff819a6880 ffff88081e623dd8 ffffffff8104fac3<br>Apr 28 10:25:24 QBISAL01SL kernel: Call Trace:<br>Apr 28 10:25:24 QBISAL01SL kernel: &lt;IRQ&gt;<br>Apr 28 10:25:24 QBISAL01SL kernel:<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8104fa22&gt;] __x2apic_send_IPI_mask+0xb2/0xe0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8104fac3&gt;] x2apic_send_IPI_mask+0x13/0x20<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8104b2ad&gt;] arch_trigger_all_cpu_backtrace+0x11d/0x130<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8112695d&gt;] rcu_check_callbacks+0x5bd/0x610<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810e0620&gt;] ? tick_sched_handle.isra.14+0x60/0x60<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8108e8c7&gt;] update_process_times+0x47/0x80<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810e05e5&gt;] tick_sched_handle.isra.14+0x25/0x60<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810e0661&gt;] tick_sched_timer+0x41/0x70<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810a9d42&gt;] __hrtimer_run_queues+0xd2/0x260<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810aa2e0&gt;] hrtimer_interrupt+0xb0/0x1e0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81049537&gt;] local_apic_timer_interrupt+0x37/0x60<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81647e8f&gt;] smp_apic_timer_interrupt+0x3f/0x60<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8164655d&gt;] apic_timer_interrupt+0x6d/0x80<br>Apr 28 10:25:24 QBISAL01SL kernel: &lt;EOI&gt;<br>Apr 28 10:25:24 QBISAL01SL kernel:<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81058e96&gt;] ? native_safe_halt+0x6/0x10<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8101dbcf&gt;] default_idle+0x1f/0xc0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8101e4d6&gt;] arch_cpu_idle+0x26/0x30<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810d6305&gt;] cpu_startup_entry+0x245/0x290<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810475fa&gt;] start_secondary+0x1ba/0x230<br>Apr 28 10:25:24 QBISAL01SL kernel: Code: 00 55 89 f9 48 89 e5 0f 32 31 c9 89 c0 48 c1 e2 20 89 0e 48 09 c2 48 89 d0 5d c3 66 0f 1f 44 00 00 55 89 f0 89 f9 48 89 e5 0f 30 &lt;31&gt; c0 5d c3 66 90 55 89 f9 48 89 e5 0f 33 89 c0 48 c1 e2 20 48<br>Apr 28 10:25:24 QBISAL01SL kernel: NMI backtrace for cpu 0<br>Apr 28 10:25:24 QBISAL01SL kernel: CPU: 0 PID: 3 Comm: ksoftirqd/0 Tainted: P        W  OE  ------------   3.10.0-327.el7.x86_64 #1<br>Apr 28 10:25:24 QBISAL01SL kernel: Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 09/21/2015<br>Apr 28 10:25:24 QBISAL01SL kernel: task: ffff880812e21700 ti: ffff880812ea8000 task.ti: ffff880812ea8000<br>Apr 28 10:25:24 QBISAL01SL kernel: RIP: 0010:[&lt;ffffffff8108497d&gt;]  [&lt;ffffffff8108497d&gt;] tasklet_action+0x9d/0x140<br>Apr 28 10:25:24 QBISAL01SL kernel: RSP: 0018:ffff880812eabdd8  EFLAGS: 00000283<br>Apr 28 10:25:24 QBISAL01SL kernel: RAX: ffff88081e60d900 RBX: ffff880810409f08 RCX: 0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: RDX: 00000001c6442b22 RSI: 0000000000000246 RDI: ffffffff819430b0<br>Apr 28 10:25:24 QBISAL01SL kernel: RBP: ffff880812eabdf0 R08: 0000000000000246 R09: 0000000180240010<br>Apr 28 10:25:24 QBISAL01SL kernel: R10: ffffffff81416b77 R11: ffffea001459c200 R12: ffff880810409f10<br>Apr 28 10:25:24 QBISAL01SL kernel: R13: 0000000000000000 R14: ffffffff819430b0 R15: 0000000000000001<br>Apr 28 10:25:24 QBISAL01SL kernel: FS:  0000000000000000(0000) GS:ffff88081e600000(0000) knlGS:0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b<br>Apr 28 10:25:24 QBISAL01SL kernel: CR2: 00007ffc254a1000 CR3: 000000040f054000 CR4: 00000000001407f0<br>Apr 28 10:25:24 QBISAL01SL kernel: DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400<br>Apr 28 10:25:24 QBISAL01SL kernel: Stack:<br>Apr 28 10:25:24 QBISAL01SL kernel: 0000000000000006 0000000000000006 ffffffff81979800 ffff880812eabe60<br>Apr 28 10:25:24 QBISAL01SL kernel: ffffffff81084b0f ffff880812eabfd8 0000000a04208040 00000001c6442b24<br>Apr 28 10:25:24 QBISAL01SL kernel: 0000000000000006 ffff880812eabfd8 ffff880812eabfd8 0000010000000000<br>Apr 28 10:25:24 QBISAL01SL kernel: Call Trace:<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81084b0f&gt;] __do_softirq+0xef/0x280<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81084cd0&gt;] run_ksoftirqd+0x30/0x50<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810ae52f&gt;] smpboot_thread_fn+0xff/0x1a0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff8163a909&gt;] ? schedule+0x29/0x70<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810ae430&gt;] ? lg_double_unlock+0x90/0x90<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810a5aef&gt;] kthread+0xcf/0xe0<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810a5a20&gt;] ? kthread_create_on_node+0x140/0x140<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff81645858&gt;] ret_from_fork+0x58/0x90<br>Apr 28 10:25:24 QBISAL01SL kernel: [&lt;ffffffff810a5a20&gt;] ? kthread_create_on_node+0x140/0x140<br>Apr 28 10:25:24 QBISAL01SL kernel: Code: bf 00 00 00 48 8b 7b 20 ff 53 18 e8 fe a3 02 00 f0 41 80 24 24 fd 4d 85 ed 74 53 4c 89 eb 4c 8b 2b 4c 8d 63 08 f0 0f ba 6b 08 01 &lt;19&gt; c0 85 c0 74 b5 fa 66 0f 1f 44 00 00 48 c7 03 00 00 00 00 65<br><br>==================================================================================================<br><br>Linux 3.10.0-327.el7.x86_64 (QBISAL01SL)        04/27/16        _x86_64_        (2 CPU)<br><br>14:00:01        CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>14:01:01        all      3.08      0.00      2.09      0.00      0.00      0.00      0.00      0.00      0.00     94.83<br>14:02:01        all      3.50      0.00      2.36      0.00      0.00      0.00      0.02      0.00      0.00     94.13<br>14:03:01        all      3.15      0.00      2.04      0.02      0.00      0.00      0.02      0.00      0.00     94.78<br>14:04:02        all      3.25      0.00      2.19      0.00      0.00      0.00      0.00      0.00      0.00     94.56<br>14:05:01        all      3.25      0.00      2.25      0.00      0.00      0.00      0.00      0.00      0.00     94.50<br>14:06:01        all      3.25      0.00      1.94      0.00      0.00      0.00      0.02      0.00      0.00     94.79<br>14:07:01        all      6.35      0.00      2.23      0.00      0.00      0.00      0.02      0.00      0.00     91.41<br>14:08:01        all      3.53      0.00      2.31      0.02      0.00      0.00      0.02      0.00      0.00     94.12<br>14:09:01        all      3.17      0.00      2.19      0.00      0.00      0.00      0.00      0.00      0.00     94.64<br>14:10:01        all      3.12      0.00      2.01      0.00      0.00      0.00      0.02      0.00      0.00     94.86<br>14:11:01        all      5.14      0.00      4.17      0.00      0.00      0.00      0.02      0.00      0.00     90.67<br>14:12:01        all      3.22      0.00      2.12      0.02      0.00      0.00      0.00      0.00      0.00     94.64<br>14:13:01        all      3.10      0.00      2.23      0.00      0.00      0.00      0.00      0.00      0.00     94.68<br>14:14:01        all      4.75      0.00      2.13      0.00      0.00      0.00      0.02      0.00      0.00     93.10<br>14:15:01        all      3.40      0.00      2.19      0.00      0.00      0.00      0.02      0.00      0.00     94.39<br>14:16:01        all      3.62      0.00      2.74      0.02      0.00      0.00      0.00      0.00      0.00     93.62<br>14:17:01        all      3.63      0.00      3.10     70.98      0.00      0.00      0.02      0.00      0.00     22.27<br>14:18:01        all      3.17      0.00      2.25     94.59      0.00      0.00      0.00      0.00      0.00      0.00<br>14:19:01        all      3.35      0.00      2.23     94.41      0.00      0.00      0.02      0.00      0.00      0.00<br>14:20:01        all      3.55      0.00      2.46     93.97      0.00      0.00      0.02      0.00      0.00      0.00<br>14:21:01        all      3.03      0.00      2.16     94.81      0.00      0.00      0.00      0.00      0.00      0.00<br>14:22:01        all      3.16      0.00      2.21     94.63      0.00      0.00      0.00      0.00      0.00      0.00<br>14:23:01        all      3.38      0.00      2.26     94.35      0.00      0.00      0.00      0.00      0.00      0.00<br>14:24:01        all      3.18      0.00      2.21     94.59      0.00      0.00      0.02      0.00      0.00      0.00<br>14:25:01        all      3.06      0.00      2.24     94.69      0.00      0.00      0.00      0.00      0.00      0.00<br>14:26:01        all      3.41      0.00      2.56     94.03      0.00      0.00      0.00      0.00      0.00      0.00<br>14:27:01        all      3.12      0.00      2.26     94.62      0.00      0.00      0.00      0.00      0.00      0.00<br>14:28:01        all      3.15      0.00      2.23     94.61      0.00      0.00      0.02      0.00      0.00      0.00<br>14:29:01        all      3.62      0.00      2.73     93.63      0.00      0.00      0.02      0.00      0.00      0.00<br>14:30:01        all      3.25      0.00      2.19     94.56      0.00      0.00      0.00      0.00      0.00      0.00<br>14:31:01        all      3.11      0.00      2.21     94.68      0.00      0.00      0.00      0.00      0.00      0.00<br>14:32:01        all      3.38      0.00      2.39     94.21      0.00      0.00      0.02      0.00      0.00      0.00<br>14:33:01        all      3.03      0.00      2.31     94.64      0.00      0.00      0.02      0.00      0.00      0.00<br>14:34:01        all      3.27      0.00      2.21     94.52      0.00      0.00      0.00      0.00      0.00      0.00<br>14:35:01        all      3.48      0.00      2.35     94.15      0.00      0.00      0.02      0.00      0.00      0.00<br>14:36:01        all      3.15      0.00      2.13     94.73      0.00      0.00      0.00      0.00      0.00      0.00<br>14:37:01        all      3.03      0.00      2.08     94.87      0.00      0.00      0.02      0.00      0.00      0.00<br>14:38:02        all      3.45      0.00      2.24     94.29      0.00      0.00      0.02      0.00      0.00      0.00<br>14:39:01        all      6.44      0.00      2.20     91.36      0.00      0.00      0.00      0.00      0.00      0.00<br>14:40:01        all      3.21      0.00      2.21     94.56      0.00      0.00      0.02      0.00      0.00      0.00<br>14:41:01        all      3.38      0.00      2.34     94.28      0.00      0.00      0.00      0.00      0.00      0.00<br>14:42:01        all      3.13      0.00      2.26     94.59      0.00      0.00      0.02      0.00      0.00      0.00<br>14:43:01        all      3.02      0.00      2.21     94.76      0.00      0.00      0.02      0.00      0.00      0.00<br>14:44:01        all      3.35      0.00      2.29     94.34      0.00      0.00      0.02      0.00      0.00      0.00<br>14:45:01        all      3.13      0.00      2.21     94.66      0.00      0.00      0.00      0.00      0.00      0.00<br>14:46:01        all      3.08      0.00      2.11     94.81      0.00      0.00      0.00      0.00      0.00      0.00<br>14:47:01        all      3.57      0.00      2.23     94.17      0.00      0.00      0.03      0.00      0.00      0.00<br>14:48:01        all      3.05      0.00      2.26     94.70      0.00      0.00      0.00      0.00      0.00      0.00<br>14:49:01        all      3.08      0.00      2.24     94.67      0.00      0.00      0.00      0.00      0.00      0.00<br>14:50:01        all      3.45      0.00      2.38     94.14      0.00      0.00      0.03      0.00      0.00      0.00<br>14:51:01        all      3.69      0.00      2.11     94.20      0.00      0.00      0.00      0.00      0.00      0.00<br>14:52:01        all      3.18      0.00      2.16     94.66      0.00      0.00      0.00      0.00      0.00      0.00<br>14:53:01        all      3.62      0.00      2.28     94.09      0.00      0.00      0.02      0.00      0.00      0.00<br>14:54:01        all      3.35      0.00      2.18     94.46      0.00      0.00      0.02      0.00      0.00      0.00<br>14:55:01        all      3.08      0.00      2.19     94.72      0.00      0.00      0.00      0.00      0.00      0.00<br>14:56:01        all      3.63      0.00      2.71     93.64      0.00      0.00      0.02      0.00      0.00      0.00<br>14:57:01        all      3.00      0.00      2.26     94.74      0.00      0.00      0.00      0.00      0.00      0.00<br>14:58:01        all      3.06      0.00      2.14     94.80      0.00      0.00      0.00      0.00      0.00      0.00<br>14:59:01        all      3.62      0.00      2.64     93.73      0.00      0.00      0.02      0.00      0.00      0.00<br>Average:        all      3.44      0.00      2.30     68.39      0.00      0.00      0.01      0.00      0.00     25.86<br><br>==================================================================================================<br><br>Linux 3.10.0-327.el7.x86_64 (QBISAL01SL)        04/27/16        _x86_64_        (2 CPU)<br><br>14:00:01    kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty<br>14:01:01      1065916  31342868     96.71         0  14995212  17823764     17.91  13910988  10296680      4544<br>14:02:01      1061364  31347420     96.73         0  14967052  17818752     17.91  13909668  10268672      4596<br>14:03:01      1035816  31372968     96.80         0  14967072  17818700     17.91  13909176  10268676      4616<br>14:04:02      1009584  31399200     96.88         0  14967096  17818704     17.91  13909436  10268684      4640<br>14:05:01       978440  31430344     96.98         0  14967148  17819344     17.91  13910064  10268688      4692<br>14:06:01       952432  31456352     97.06         0  14967164  17819360     17.91  13909720  10268692      4708<br>14:07:01       931084  31477700     97.13         0  14960740  17819684     17.91  13910188  10262248      4740<br>14:08:01       894200  31514584     97.24         0  14960848  17827944     17.91  13912912  10262272      4812<br>14:09:01       859968  31548816     97.35         0  14960868  17835124     17.92  13918752  10262276      4832<br>14:10:01       832736  31576048     97.43         0  14960912  17835124     17.92  13918568  10262276      4876<br>14:11:01       800340  31608444     97.53         0  14960964  17835172     17.92  13918960  10262288      5148<br>14:12:01       774752  31634032     97.61         0  14960988  17835120     17.92  13918732  10262288      5180<br>14:13:01       748532  31660252     97.69         0  14961220  17834528     17.92  13918416  10262288      5196<br>14:14:01       718560  31690224     97.78         0  14960472  17834776     17.92  13919056  10261568      5240<br>14:15:01       691120  31717664     97.87         0  14959816  17834728     17.92  13918676  10261036      5276<br>14:16:01       644128  31764656     98.01         0  14959892  17866600     17.95  13926592  10261028      5308<br>14:17:01       613236  31795548     98.11        24  14940880  17888300     17.98  13934204  10240700      5380<br>14:18:01       658352  31750432     97.97        24  14868032  17888248     17.98  13933840  10167932      5408<br>14:19:01       686396  31722388     97.88        24  14812292  17888252     17.98  13933720  10112172      5436<br>14:20:01       691772  31717012     97.87        24  14772332  17873320     17.96  13932712  10072156      5488<br>14:21:01       668684  31740100     97.94        24  14770248  17871008     17.96  13932296  10070060      5504<br>14:22:01       735400  31673384     97.73        24  14684712  17862316     17.95  13924920   9984464      5524<br>14:23:01       805956  31602828     97.51        24  14583556  17862364     17.95  13925072   9883260      5564<br>14:24:01       810560  31598224     97.50        24  14552660  17862292     17.95  13924940   9852364      5576<br>14:25:01       857024  31551760     97.36        24  14477284  17865664     17.95  13926196   9777028      5584<br>14:26:01       941976  31466808     97.09        24  14356740  17862956     17.95  13925524   9656172      5636<br>14:27:01       921824  31486960     97.16        24  14348608  17862908     17.95  13925368   9648084      5640<br>14:28:01       919912  31488872     97.16        24  14322924  17865952     17.95  13926340   9622252      5652<br>14:29:01       983216  31425568     96.97        24  14216000  17862360     17.95  13925360   9515244      5688<br>14:30:01      1019396  31389388     96.85        24  14153240  17862316     17.95  13925388   9452616      5716<br>14:31:01      1048128  31360656     96.77        24  14097020  17862316     17.95  13925292   9396240      5720<br>14:32:01      1059260  31349524     96.73        24  14052632  17862364     17.95  13925684   9351812      5764<br>14:33:01      1032552  31376232     96.81        24  14052632  17862316     17.95  13925508   9351812      5764<br>14:34:01      1005916  31402868     96.90        24  14052640  17862316     17.95  13925308   9351812      5776<br>14:35:01      1020268  31388516     96.85        24  14052684  17814752     17.90  13879312   9351816      5820<br>14:36:01       995976  31412808     96.93        24  14050772  17814704     17.90  13879304   9349896      5832<br>14:37:01       969940  31438844     97.01        24  14050780  17814704     17.90  13879016   9349892      5840<br>14:38:02       937436  31471348     97.11        24  14050820  17814752     17.90  13879312   9349896      5880<br>14:39:01       909760  31499024     97.19        24  14050976  17815560     17.90  13880248   9349964      6080<br>14:40:01       884708  31524076     97.27        24  14049076  17815560     17.90  13880044   9348040      6104<br>14:41:01       850880  31557904     97.37        24  14049112  17815604     17.90  13880480   9348032      6140<br>14:42:01       821788  31586996     97.46        24  14049440  17819212     17.91  13882800   9348032      6148<br>14:43:01       797976  31610808     97.54        24  14047532  17819212     17.91  13882720   9345960      6164<br>14:44:01       765808  31642976     97.64        24  14047564  17819256     17.91  13883124   9345960      6196<br>14:45:01       737920  31670864     97.72        24  14047572  17819212     17.91  13882780   9345956      6208<br>14:46:01       710520  31698264     97.81        24  14047588  17819276     17.91  13882780   9345956      6224<br>14:47:01       676020  31732764     97.91        24  14047624  17816408     17.90  13881604   9345956      6272<br>14:48:01       653540  31755244     97.98        24  14047636  17811580     17.90  13877972   9345984      6284<br>14:49:01       626400  31782384     98.07        24  14047648  17811580     17.90  13878076   9345984      6296<br>14:50:01       594488  31814296     98.17        24  14045776  17811628     17.90  13878244   9344060      6348<br>14:51:01       566872  31841912     98.25        24  14045788  17811580     17.90  13878652   9344060      6360<br>14:52:01       542960  31865824     98.32        24  14045812  17803400     17.89  13876132   9344064      6388<br>14:53:01       515912  31892872     98.41        24  14045836  17793668     17.88  13872628   9344048      6444<br>14:54:01       490252  31918532     98.49        24  14045876  17793656     17.88  13872456   9344060      6484<br>14:55:01       466360  31942424     98.56        24  14042036  17797432     17.88  13872752   9340216      6488<br>14:56:01       425504  31983280     98.69        24  14042080  17793112     17.88  13872540   9340084      6536<br>14:57:01       417076  31991708     98.71        24  14024824  17793016     17.88  13872116   9322708      6556<br>14:58:01       485080  31923704     98.50        24  13927752  17796220     17.88  13873336   9225800      6564<br>14:59:01       506772  31902012     98.44        24  13861572  17793700     17.88  13872676   9159716      6608<br>Average:       793708  31615076     97.55        17  14413832  17832776     17.92  13903198   9713423      5686</environment><periodicityOfIssue>일단 2016-04-27 11:30 경 최초 Call Trace 로그가 발생했으며, 이후 2016-04-27 14:17 경부터 CPU 에 여유가 없는 것으로 판단됩니다.<br><br>오늘 아예 시스템 접근이 불가 하여 NMI 로 Crash 하여 Reboot/Core 생성 하였습니다.<br><br>최대한 빨리 로그를 업로드 하도록 하겠습니다.<br><br>감사합니다.</periodicityOfIssue><cep>false</cep></case>