======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-08-14T03:50:03Z</b><br><b>마지막 답변자 : Ying Huang</b><br><b>마지막 수정 일자 : 2016-08-26T08:03:08Z</b><br><b>id : 500A000000V2ZjfIAF</b><br>======================<br><br><b><font size=15>
제목  : ntpdate 서비스 설정 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>시스템 Reboot 후 처음 ntp 데몬 start 후 확인하게 되면 물리 시스템의 경우 동기화 격차가 통상 500 ~ 1000 ms 가량 벌어져 있는데요,<br><br>이와 관련해서 ntpdate 서비스에 대해 문의 드리려고 합니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>현재 안정화 작업 등 Reboot 이 필요할 때 Reboot 후 시스템에서 아래와 같이 시간 동기화를 수동으로 하고 있습니다.<br><br>1. Reboot 후 ntpq -p 시간차 확인<br>2. systemctl stop ntpd.service<br>3. ntpdate 111.111.111.111<br>4. hwclock -w<br>5. systemctl start ntpd.service<br>6. ntpq -p<br><br>위 작업을 하지 않더라도 ntpd 데몬이 서서히 시간 동기화는 하지만, <br><br>위 일련의 작업을 Reboot 시 자동으로 하기 위해 ntpdate 라는 서비스를 Enable 고려 중입니다.<br>(systemctl enable ntpdate.service)<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>ntpdate 서비스를 테스트 해 보니 부팅 시 /etc/ntp/step-tickers 에 명시 된 ntp 서버의 Sync 를 1회 진행 하는 것으로  판단됩니다.<br><br>또한 주요 설정 파일이 <br><br>/etc/ntp/keys<br>/etc/ntp/step-tickers<br>/etc/sysconfig/ntpdate<br>/usr/lib/systemd/system/ntpdate.service<br><br>4가지를 주로 사용하는 것으로 생각하고 있습니다.<br><br>질문 1 : /etc/ntp/step-tickers 파일에 ntp 서버 주소만 명시해서 enable 만 하면 바로 사용 가능 여부<br>질문 2 : /etc/sysconfig/ntpdate 파일 내 SYNC_HWCLOCK=yes 옵션을 통해 hwclock 도 자동으로 sync 가능한지 여부<br>질문 3 : 위에서 말씀드린 현재 사용되고 있는 부팅 후 최초 수동으로 하고 있는 sync 작업을 ntpdate 로 대체 가능한지 여부<br><br>위 사항에 대해 확인 부탁드립니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 4 (Low)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000HknsjIAB"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-08-26T08:03:08Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-08-26T08:03:08Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>먼저, 문제가 잘 해결된것으로 보여 참 다행입니다.<br><br>본 케이스를 처리완료하도록 하겠습니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.<br><br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발송됩니다. 고객님께서 남기 신 의견은<br>보다 나은 서비스를 위해 지속적으로 반영될 것입니다. 향후 기술 지원 서비스의 품질 향상을 위해,<br>소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-08-26T08:03:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000G6K3rIAF"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-08-17T04:06:25Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-08-17T04:06:25Z</b><br><br>도움 주셔서 감사합니다.<br><br>Close 하도록 하겠습니다.<br><br><publishedDate>2016-08-17T04:06:25Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HfN7OIAV"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-08-16T03:11:03Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-08-16T03:11:03Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>질문 1 : /etc/ntp/step-tickers 파일에 ntp 서버 주소만 명시해서 enable 만 하면 바로 사용 가능 여부<br>네, 이와 같이 설정하시면 다음 부팅시 ntpdate 를 기동하게 됩니다.<br><br>질문 2 : /etc/sysconfig/ntpdate 파일 내 SYNC_HWCLOCK=yes 옵션을 통해 hwclock 도 자동으로 sync 가능한지 여부<br>네, 맞습니다.<br><br>질문 3 : 위에서 말씀드린 현재 사용되고 있는 부팅 후 최초 수동으로 하고 있는 sync 작업을 ntpdate 로 대체 가능한지 여부<br>네, 가능하십니다.<br><br>즉 아래와 같이 설정해 주시면 됩니다.<br><br>- /etc/ntp/step-tickers 파일에 ntp 서버 추가<br>- 하드웨서 clock으로의 동기화를 위하여 SYNC_HWCLOCK=yes 옵션 설정<br>- ntpdate 서비스 부팅시 활성화<br># systemctl enable ntpdate.service<br><br>감사합니다.<br><br><publishedDate>2016-08-16T03:11:03Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000HfAgAIAV"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2016-08-15T02:01:53Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2016-08-15T02:01:52Z</b><br><br>Dear Customer, <br><br>As today is public holiday in South Korea, you will get support from next business day.<br>Thank you for you understanding! <br><br><br>Best Regards,<br>Meiyan Zheng <br>Global Support Services<br>Red Hat, Inc<br><br><publishedDate>2016-08-15T02:01:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>시스템 Reboot 후 처음 ntp 데몬 start 후 확인하게 되면 물리 시스템의 경우 동기화 격차가 통상 500 ~ 1000 ms 가량 벌어져 있는데요,<br><br>이와 관련해서 ntpdate 서비스에 대해 문의 드리려고 합니다.</issue><environment>현재 안정화 작업 등 Reboot 이 필요할 때 Reboot 후 시스템에서 아래와 같이 시간 동기화를 수동으로 하고 있습니다.<br><br>1. Reboot 후 ntpq -p 시간차 확인<br>2. systemctl stop ntpd.service<br>3. ntpdate 111.111.111.111<br>4. hwclock -w<br>5. systemctl start ntpd.service<br>6. ntpq -p<br><br>위 작업을 하지 않더라도 ntpd 데몬이 서서히 시간 동기화는 하지만, <br><br>위 일련의 작업을 Reboot 시 자동으로 하기 위해 ntpdate 라는 서비스를 Enable 고려 중입니다.<br>(systemctl enable ntpdate.service)</environment><periodicityOfIssue>ntpdate 서비스를 테스트 해 보니 부팅 시 /etc/ntp/step-tickers 에 명시 된 ntp 서버의 Sync 를 1회 진행 하는 것으로  판단됩니다.<br><br>또한 주요 설정 파일이 <br><br>/etc/ntp/keys<br>/etc/ntp/step-tickers<br>/etc/sysconfig/ntpdate<br>/usr/lib/systemd/system/ntpdate.service<br><br>4가지를 주로 사용하는 것으로 생각하고 있습니다.<br><br>질문 1 : /etc/ntp/step-tickers 파일에 ntp 서버 주소만 명시해서 enable 만 하면 바로 사용 가능 여부<br>질문 2 : /etc/sysconfig/ntpdate 파일 내 SYNC_HWCLOCK=yes 옵션을 통해 hwclock 도 자동으로 sync 가능한지 여부<br>질문 3 : 위에서 말씀드린 현재 사용되고 있는 부팅 후 최초 수동으로 하고 있는 sync 작업을 ntpdate 로 대체 가능한지 여부<br><br>위 사항에 대해 확인 부탁드립니다.<br><br>감사합니다.</periodicityOfIssue><cep>false</cep></case>