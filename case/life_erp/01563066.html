======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-01-07T06:56:52Z</b><br><b>마지막 답변자 : 우택 심</b><br><b>마지막 수정 일자 : 2016-01-19T14:35:44Z</b><br><b>id : 500A000000T43X2IAJ</b><br>======================<br><br><b><font size=15>
제목  : dmesg 에 기록되는 firmware bug 관련 메세지 문의드립니다.
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>시스템 구축 후 재부팅 시 아래와 같은 메세지가 항상 나오고 있는데요, 정확한 의미를 알고 싶습니다.<br><br>그리고 이 메세지가 시스템의 안정성에 영향도가 있는지 알고 싶습니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>[가상화 서버 dmesg]<br>[    0.091940] [Firmware Bug]: ACPI: BIOS _OSI(Linux) query ignored<br><br> [물리 서버 dmesg]<br>[    0.459752] [Firmware Bug]: the BIOS has corrupted hw-PMU resources (MSR 38d is 330)<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>시스템 부팅시 발생되며, <br><br>가상머신은  VMWare 환경이고, 물리시스템은 HP DL380Gen9 / DL580Gen9 입니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000G78hQIAR"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-01-19T14:35:32Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-01-19T14:35:32Z</b><br><br>안녕하세요.<br><br>해당 메세지는 가상화 또는 물리머신 환경에 따른 메세지로 이해하고 장애 영향도는 없다고 판단하여 Closed  하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-01-19T14:35:32Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000FnmLgIAJ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-08T02:23:54Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-08T02:23:54Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>저희 엔지니어의 업데이트가 전달된 것으로 알고 있습니다.<br><br>해당 comment에도 있고, 이미 아시리라 보지만. 해당 메시지들은 장애의 원인으로 발생하는 것은 아니기 때문에 무시하셔도 될 메시지들로 확인됩니다.<br><br>답변에 대해서 다시 원문으로 아래 첨부하여 드립니다.<br><br><br>&gt; [    0.091940] [Firmware Bug]: ACPI: BIOS _OSI(Linux) query ignored<br><br>This message is printed when the ACPI interpreter runs into a _OSI(Linux) query in ACPI DSDT table. That is a table implemented/provided by BIOS/Hardware manufacturer providing routines for many features. For example, on laptops, you will have control methods for brightness control etc.<br><br>The fact is, ACPI provides an way for the BIOS/DSDT to detect or branch depending on the operating system which is running on the machine. So for example, in a specific version of Windows, if it expected brightness control to be exposed/provided in some specific manner, the BIOS writer would call _OSI() method in an if() condition and take action depending on the operating system being executed, so when the operating system running the ACPI interpreter branches to the expected way to do brightness control for example.<br><br>However, the Linux kernel tries to follow ACPI spec and common behaviour always as latest Windows version, so it ignores any specific check for Linux. The reason is that in the past, some hardware/bios manufacturers were disabling features when they detected Linux through _OSI(Linux) query, or not testing enough their code under Linux, causing bugs, problems and disabled ACPI functionality. Also, there are many Linux/kernel versions and there is no specific or manageable versioning possible in this type of operating system query. So Linux community/kernel members decided to prevent BIOSes to identify Linux running, and instead just stick to ACPI spec and latest Windows behaviour. If the BIOS queries if some Windows version is being run, then Linux just answers as yes. Latest kernel versions will always report being the latest Windows version system. In practice this avoids bugs and problems. Thus you should not worry. The kernel message is purely informational and means BIOS/DSDT tried to query to see if the system is running Linux.<br><br>In a virtual machine, this message means that for some reason the Host/emulated virtual system provides a DSDT querying for Linux, that doesn't make sense and can be ignored as well. The Host/emulated bios should not be doing such query, but shouldn't cause issues either.<br><br>&gt; [    0.459752] [Firmware Bug]: the BIOS has corrupted hw-PMU resources (MSR 38d is 330)<br><br>This message is related to a conflict with BIOS usage of hw-PMU performance counters of the processor, there is no full dmesg here but likely you run into this:<br><br>The boot message &quot;Performance Events: PEBS fmt1+, Westmere events, Broken BIOS detected&quot; is seen in Red Hat Enterprise Linux 6 <br>https://access.redhat.com/solutions/55862<br><br>What the &quot;BIOS has corrupted hw-PMU resources&quot; means is that BIOS is probably using some of the processor PMU counter for some purpose, through SMIs, and that can conflict with the Linux kernel usage of same PMU counter for other purposes (eg. for use with the perf utility). So if you are going to profile some software using perf utility, you could get bad/corrupted performance data/results.<br><br>Some BIOSes uses performance counters from the processor for some functionality, like the &quot;Processor Power and Utilization Monitoring&quot; option as found in some HP servers BIOS for example. The problem is that there is no interface or sharing infrastructure in place, so if the BIOS blatantly uses the counters, that will conflict with the operating system usage of the counters.<br><br>That kernel message then means just it is a warning that the BIOS is writing/using performance counters, and that may conflict if you are doing performance profiling under linux (eg. using perf). If you are not doing performance profiling, you should not care. If you eventually will do performance profiling (run perf, etc.), you need to contact the hardware manufacturer: possibly do a BIOS update and disable bios option which uses hw-PMU counter for some functionality.<br>======================<br>감사합니다.<br><br><publishedDate>2016-01-08T02:23:54Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Fnj7IIAR"><br>======================<br><b>생성계정 : Krzesinski, Herton</b><br><b>생성날짜 : 2016-01-07T19:00:38Z</b><br><b>마지막 답변자 : Krzesinski, Herton</b><br><b>마지막 수정 일자 : 2016-01-07T19:00:38Z</b><br><br>Hello,<br><br>both messages below are harmless. They should not cause any performance problem or have any bad side effects. Now explaining each one:<br><br>&gt; [    0.091940] [Firmware Bug]: ACPI: BIOS _OSI(Linux) query ignored<br><br>This message is printed when the ACPI interpreter runs into a _OSI(Linux) query in ACPI DSDT table. That is a table implemented/provided by BIOS/Hardware manufacturer providing routines for many features. For example, on laptops, you will have control methods for brightness control etc.<br><br>The fact is, ACPI provides an way for the BIOS/DSDT to detect or branch depending on the operating system which is running on the machine. So for example, in a specific version of Windows, if it expected brightness control to be exposed/provided in some specific manner, the BIOS writer would call _OSI() method in an if() condition and take action depending on the operating system being executed, so when the operating system running the ACPI interpreter branches to the expected way to do brightness control for example.<br><br>However, the Linux kernel tries to follow ACPI spec and common behaviour always as latest Windows version, so it ignores any specific check for Linux. The reason is that in the past, some hardware/bios manufacturers were disabling features when they detected Linux through _OSI(Linux) query, or not testing enough their code under Linux, causing bugs, problems and disabled ACPI functionality. Also, there are many Linux/kernel versions and there is no specific or manageable versioning possible in this type of operating system query. So Linux community/kernel members decided to prevent BIOSes to identify Linux running, and instead just stick to ACPI spec and latest Windows behaviour. If the BIOS queries if some Windows version is being run, then Linux just answers as yes. Latest kernel versions will always report being the latest Windows version system. In practice this avoids bugs and problems. Thus you should not worry. The kernel message is purely informational and means BIOS/DSDT tried to query to see if the system is running Linux.<br><br>In a virtual machine, this message means that for some reason the Host/emulated virtual system provides a DSDT querying for Linux, that doesn't make sense and can be ignored as well. The Host/emulated bios should not be doing such query, but shouldn't cause issues either.<br><br>&gt; [    0.459752] [Firmware Bug]: the BIOS has corrupted hw-PMU resources (MSR 38d is 330)<br><br>This message is related to a conflict with BIOS usage of hw-PMU performance counters of the processor, there is no full dmesg here but likely you run into this:<br><br>The boot message &quot;Performance Events: PEBS fmt1+, Westmere events, Broken BIOS detected&quot; is seen in Red Hat Enterprise Linux 6 <br>https://access.redhat.com/solutions/55862<br><br>What the &quot;BIOS has corrupted hw-PMU resources&quot; means is that BIOS is probably using some of the processor PMU counter for some purpose, through SMIs, and that can conflict with the Linux kernel usage of same PMU counter for other purposes (eg. for use with the perf utility). So if you are going to profile some software using perf utility, you could get bad/corrupted performance data/results.<br><br>Some BIOSes uses performance counters from the processor for some functionality, like the &quot;Processor Power and Utilization Monitoring&quot; option as found in some HP servers BIOS for example. The problem is that there is no interface or sharing infrastructure in place, so if the BIOS blatantly uses the counters, that will conflict with the operating system usage of the counters.<br><br>That kernel message then means just it is a warning that the BIOS is writing/using performance counters, and that may conflict if you are doing performance profiling under linux (eg. using perf). If you are not doing performance profiling, you should not care. If you eventually will do performance profiling (run perf, etc.), you need to contact the hardware manufacturer: possibly do a BIOS update and disable bios option which uses hw-PMU counter for some functionality.<br><br>Regards,<br>Herton Krzesinski<br>Software Maintenance Engineer<br>Support Engineering Group - Red Hat<br><br><publishedDate>2016-01-07T19:00:38Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000FncuwIAB"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-07T09:03:29Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-07T09:03:29Z</b><br><br>안녕하세요, <br>Red Hat 한진구 입니다.<br><br>문의 주신 로그들은 기본적으로 보시다시피 하드웨어 펌웨어와 관련된 메시지로 확인됩니다.<br><br>우선 내부적으로 관련된 정보가 있는지 확인은 해보고 답변을 다시 드릴 수 있도록 하겠습니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-01-07T09:03:29Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000FncsqIAB"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-01-07T09:00:33Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-01-07T09:00:32Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>현재 케이스의 Severity를 2로 설정해주셨습니다. Severity는 케이스 처리의 우선순위가 아닙니다.<br>본 케이스의 Severity를 Red Hat Severity Policy에 따라 2에서 3으로 조절토록 하겠습니다. <br>하지만 본 케이스를 제가 담당하여 처리할 예정입니다. 업무에 참고하여 주시기 바랍니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-01-07T09:00:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>