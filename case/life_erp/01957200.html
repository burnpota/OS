======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2017-10-21T16:00:34Z</b><br><b>마지막 답변자 : Workflow Integration</b><br><b>마지막 수정 일자 : 2017-10-24T00:19:55Z</b><br><b>id : 500A000000Yp8dFIAR</b><br>======================<br><br><b><font size=15>
제목  : HBA port error
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 서버에서 특정 HBA port에 대해서 message가 발생하여서 문의드립니다.<br><br>해당 서버 sosreport는 dropbox에 업로드 하겠습니다.<br><br>파일명은 sosreport-DPMSCL01SL-20171021222100.tar.xz / sosreport-DPMSCL01SL-20171021222100.tar.xz.md5 입니다.<br><br>감사합니다.<br><br> - message 파일 중 error 발생한 부분<br>Oct 20 20:14:01 DPMSCL01SL CROND[83790]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Oct 20 20:14:10 DPMSCL01SL kernel: qla2xxx [0000:81:00.0]-801c:3: Abort command issued nexus=3:0:3 --  1 2002.<br>Oct 20 20:15:01 DPMSCL01SL CROND[85049]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>--------------------------------- 생략 ---------------------------------<br>Oct 20 21:28:01 DPMSCL01SL CROND[60202]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Oct 20 21:28:01 DPMSCL01SL CROND[60203]: (pcp) CMD ( /usr/libexec/pcp/bin/pmie_check -C)<br>Oct 20 21:28:06 DPMSCL01SL kernel: qla2xxx [0000:81:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 20 21:28:07 DPMSCL01SL kernel: qla2xxx [0000:81:00.0]-8009:3: DEVICE RESET ISSUED nexus=3:0:0 cmd=ffff881d5d01e140.<br>Oct 20 21:28:07 DPMSCL01SL kernel: qla2xxx [0000:81:00.0]-800e:3: DEVICE RESET SUCCEEDED nexus:3:0:0 cmd=ffff881d5d01e140.<br>Oct 20 21:29:01 DPMSCL01SL CROND[62008]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>--------------------------------- 생략 ---------------------------------<br>Oct 21 21:02:01 DPMSCL01SL CROND[113191]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Oct 21 21:02:25 DPMSCL01SL kernel: qla2xxx [0000:81:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 21 21:02:57 DPMSCL01SL kernel: qla2xxx [0000:81:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 21 21:03:01 DPMSCL01SL CROND[114378]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Oct 21 21:03:15 DPMSCL01SL kernel: sd 3:0:0:0: [sdg] tag#0 FAILED Result: hostbyte=DID_TRANSPORT_DISRUPTED driverbyte=DRIVER_OK<br>Oct 21 21:03:15 DPMSCL01SL kernel: sd 3:0:0:0: [sdg] tag#0 CDB: Write(10) 2a 00 00 50 d1 a8 00 04 00 00<br>Oct 21 21:03:15 DPMSCL01SL kernel: blk_update_request: I/O error, dev sdg, sector 5296552<br>Oct 21 21:03:15 DPMSCL01SL kernel: device-mapper: multipath: Failing path 8:96.<br>Oct 21 21:03:15 DPMSCL01SL multipathd: 8:96: mark as failed<br>Oct 21 21:03:15 DPMSCL01SL multipathd: PSAP100G001: remaining active paths: 1<br>Oct 21 21:03:15 DPMSCL01SL systemd: Device dev-disk-by\x2did-lvm\x2dpv\x2duuid\x2d2CXUAd\x2dyPAR\x2dVZUN\x2doL5t\x2doPMe\x2dTeRr\x2dW1cgxg.device appeared twice with different sysfs paths /sys/devices/pci0000:00/0000:00:03.2/0000:0b:00.1/host2/rport-2:0-0/target2:0:0/2:0:0:0/block/sdb and /sys/devices/virtual/block/dm-0<br>Oct 21 21:03:16 DPMSCL01SL multipathd: PSAP100G001: sdg - tur checker reports path is up<br>Oct 21 21:03:16 DPMSCL01SL multipathd: 8:96: reinstated<br>Oct 21 21:03:16 DPMSCL01SL multipathd: PSAP100G001: remaining active paths: 2<br>Oct 21 21:03:16 DPMSCL01SL systemd: Device dev-disk-by\x2did-lvm\x2dpv\x2duuid\x2d2CXUAd\x2dyPAR\x2dVZUN\x2doL5t\x2doPMe\x2dTeRr\x2dW1cgxg.device appeared twice with different sysfs paths /sys/devices/pci0000:00/0000:00:03.2/0000:0b:00.1/host2/rport-2:0-0/target2:0:0/2:0:0:0/block/sdb and /sys/devices/virtual/block/dm-0<br>Oct 21 21:04:01 DPMSCL01SL CROND[115638]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>--------------------------------- 생략 ---------------------------------<br>Oct 21 21:13:01 DPMSCL01SL CROND[7720]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Oct 21 21:13:08 DPMSCL01SL kernel: qla2xxx [0000:81:00.0]-801c:3: Abort command issued nexus=3:0:0 --  1 2002.<br>Oct 21 21:13:58 DPMSCL01SL kernel: sd 3:0:0:0: [sdg] tag#0 FAILED Result: hostbyte=DID_TRANSPORT_DISRUPTED driverbyte=DRIVER_OK<br>Oct 21 21:13:58 DPMSCL01SL kernel: sd 3:0:0:0: [sdg] tag#0 CDB: Write(10) 2a 00 00 52 77 d0 00 01 68 00<br>Oct 21 21:13:58 DPMSCL01SL kernel: blk_update_request: I/O error, dev sdg, sector 5404624<br>Oct 21 21:13:58 DPMSCL01SL kernel: device-mapper: multipath: Failing path 8:96.<br>Oct 21 21:13:58 DPMSCL01SL multipathd: 8:96: mark as failed<br>Oct 21 21:13:58 DPMSCL01SL multipathd: PSAP100G001: remaining active paths: 1<br>Oct 21 21:13:58 DPMSCL01SL systemd: Device dev-disk-by\x2did-lvm\x2dpv\x2duuid\x2d2CXUAd\x2dyPAR\x2dVZUN\x2doL5t\x2doPMe\x2dTeRr\x2dW1cgxg.device appeared twice with different sysfs paths /sys/devices/pci0000:00/0000:00:03.2/0000:0b:00.1/host2/rport-2:0-0/target2:0:0/2:0:0:0/block/sdb and /sys/devices/virtual/block/dm-0<br>Oct 21 21:14:01 DPMSCL01SL CROND[9007]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Oct 21 21:14:18 DPMSCL01SL multipathd: PSAP100G001: sdg - tur checker reports path is up<br>Oct 21 21:14:18 DPMSCL01SL multipathd: 8:96: reinstated<br>Oct 21 21:14:18 DPMSCL01SL multipathd: PSAP100G001: remaining active paths: 2<br>Oct 21 21:14:18 DPMSCL01SL systemd: Device dev-disk-by\x2did-lvm\x2dpv\x2duuid\x2d2CXUAd\x2dyPAR\x2dVZUN\x2doL5t\x2doPMe\x2dTeRr\x2dW1cgxg.device appeared twice with different sysfs paths /sys/devices/pci0000:00/0000:00:03.2/0000:0b:00.1/host2/rport-2:0-0/target2:0:0/2:0:0:0/block/sdb and /sys/devices/virtual/block/dm-0<br>Oct 21 21:15:01 DPMSCL01SL CROND[10267]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>--------------------------------- 생략 ---------------------------------<br><br> - 해당 fc port<br>root@DPMSCL01SL /var/log # lspci | grep -i fibre<br>0b:00.0 Fibre Channel: QLogic Corp. ISP8324-based 16Gb Fibre Channel to PCI Express Adapter (rev 02)<br>0b:00.1 Fibre Channel: QLogic Corp. ISP8324-based 16Gb Fibre Channel to PCI Express Adapter (rev 02)<br>81:00.0 Fibre Channel: QLogic Corp. ISP8324-based 16Gb Fibre Channel to PCI Express Adapter (rev 02)<br>81:00.1 Fibre Channel: QLogic Corp. ISP8324-based 16Gb Fibre Channel to PCI Express Adapter (rev 02)<br>84:00.0 Fibre Channel: QLogic Corp. ISP8324-based 16Gb Fibre Channel to PCI Express Adapter (rev 02)<br>84:00.1 Fibre Channel: QLogic Corp. ISP8324-based 16Gb Fibre Channel to PCI Express Adapter (rev 02)<br><br> Class Device = &quot;host3&quot;<br>  Class Device path = &quot;/sys/devices/pci0000:80/0000:80:01.0/0000:81:00.0/host3/fc_host/host3&quot;<br>    dev_loss_tmo        = &quot;30&quot;<br>    fabric_name         = &quot;0x1000c4f57c294958&quot;<br>    issue_lip           = &lt;store method only&gt;<br>    max_npiv_vports     = &quot;254&quot;<br>    node_name           = &quot;0x51402ec000f126c1&quot;<br>    npiv_vports_inuse   = &quot;0&quot;<br>    port_id             = &quot;0x510d00&quot;<br>    port_name           = &quot;0x51402ec000f126c0&quot;<br>    port_state          = &quot;Online&quot;<br>    port_type           = &quot;NPort (fabric via point-to-point)&quot;<br>    speed               = &quot;16 Gbit&quot;<br>    supported_classes   = &quot;Class 3&quot;<br>    supported_speeds    = &quot;4 Gbit, 8 Gbit, 16 Gbit&quot;<br>    symbolic_name       = &quot;SN1000Q FW:v8.02.51 DVR:v8.07.00.34.07.0-k1&quot;<br>    system_hostname     = &quot;&quot;<br>    tgtid_bind_type     = &quot;wwpn (World Wide Port Name)&quot;<br>    uevent              =<br>    vport_create        = &lt;store method only&gt;<br>    vport_delete        = &lt;store method only&gt;<br><br>    Device = &quot;host3&quot;<br>    Device path = &quot;/sys/devices/pci0000:80/0000:80:01.0/0000:81:00.0/host3&quot;<br>      fw_dump             =<br>      nvram               = &quot;ISP &quot;<br>      optrom_ctl          = &lt;store method only&gt;<br>      optrom              =<br>      reset               = &lt;store method only&gt;<br>      sfp                 = &quot;&quot;<br>      uevent              = &quot;DEVTYPE=scsi_host&quot;<br>      vpd                 = &quot;&quot;<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 4 (Low)</b><br><hostname>DPMSCL01SL</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000JH0KBIA1"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-10-24T00:19:55Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-10-24T00:19:55Z</b><br><br>안녕하세요.<br><br>Red Hat Global Support Service를 이용해주셔서 감사합니다.<br><br>먼저, 케이스를 직접 종료해주셔서 감사드리며 요청하신것과 같이 본 케이스는 처리완료하도록 하겠습니다.<br>만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재 오픈 하실 수 있습니다.<br><br>케이스가 처리 완료되면 고객 설문조사 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-10-24T00:19:55Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JH00GIAT"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2017-10-23T23:26:20Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2017-10-23T23:26:20Z</b><br><br>안녕하세요.<br><br>하드웨어적으로 교체를 진행하여 정상 작동하여 케이스는 Closed 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-10-23T23:26:20Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KmsZvIAJ"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-10-23T00:48:14Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-10-23T00:48:13Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>올려주신 로그 메시지들 중에서 Result: hostbyte=DID_OK driverbyte=DRIVER_OK 를 확인하였는데, 이 로그는 드라이버가 스토리지로부터 fibre channel 응답 프레임 내부에<br>기대하지 않거나, 유효하지 않는 정보를 받아서 나타나는것으로 알려져 있습니다. 이 의미는 RHEL  이나 드라이버 측면보다는 SAN/stroage 의 이슈를 나타냅니다.<br><br>시스템 하드웨어, 스위치 에러 횟수 등을 살펴볼 필요가 있으며, 좀 더 자세한 원인분석을 위해서는 스토리지 벤더로 지원요청 하실것을 권장드리며 이후에도 저희 Red Hat 의 지원<br>이 필요하시다면 다시 연락주십시오. - 참고문서[1]<br><br>[ 참고문서 ]<br><br>[1]  Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK <br>- https://access.redhat.com/solutions/438403<br><br>감사합니다.<br><br><publishedDate>2017-10-23T00:48:13Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>