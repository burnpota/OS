======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-05-21T07:54:22Z</b><br><b>마지막 답변자 : Kyung Huh</b><br><b>마지막 수정 일자 : 2018-05-30T00:54:34Z</b><br><b>id : 500A000000asMGaIAM</b><br>======================<br><br><b><font size=15>
제목  : pam option 설정 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>journalctl -xe에 아래와 같은 error가 발생하는데요.<br>해당 내역 관련해서 /usr/lib64/security/pam_fprintd.so 모듈이 없어서 발생하는 것 같은데<br><br>/etc/pam.d/system-auth에는 pam_fprintd.so 모듈이 설정되어있어서 그런 것인지 문의드리려고 합니다.<br><br>추가로 fprint 인증 관련해서는 사용하지 않으면 해당 내역을 삭제하면 되는지 문의드리려고 합니다.<br><br> - journalctl -xe error 부분<br>May 21 16:46:08 SLPCISWL0A ptymonitor[6738]: PAM unable to dlopen(/usr/lib64/security/pam_fprintd.so): /usr/lib64/security/pam_fprintd.so: cannot open shared object file: No such file or directory<br>May 21 16:46:08 SLPCISWL0A ptymonitor[6738]: PAM adding faulty module: /usr/lib64/security/pam_fprintd.so<br><br>[root@SLPCISWL0A:/etc/pam.d] cat system-auth<br>#%PAM-1.0<br># This file is auto-generated.<br># User changes will be destroyed the next time authconfig is run.<br>auth        required      pam_env.so<br>auth        sufficient    pam_fprintd.so<br>auth        required      pam_tally2.so deny=4 unlock_time=1800<br>auth        sufficient    pam_unix.so nullok try_first_pass<br>auth        requisite     pam_succeed_if.so uid &gt;= 1000 quiet_success<br>auth        required      pam_deny.so<br><br>account     required      pam_unix.so<br>account     required      pam_tally2.so<br>#account     sufficient    pam_localuser.so<br>#account     sufficient    pam_succeed_if.so uid &lt; 1000 quiet<br>account     required      pam_permit.so<br><br>password    requisite     pam_pwquality.so try_first_pass local_users_only retry=3 authtok_type=<br>password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok<br>password    required      pam_deny.so<br><br>session     optional      pam_keyinit.so revoke<br>session     required      pam_limits.so<br>-session     optional      pam_systemd.so<br>session     [success=1 default=ignore] pam_succeed_if.so service in crond quiet use_uid<br>session     required      pam_unix.so<br>[root@SLPCISWL0A:/etc/pam.d] cat password-auth<br>#%PAM-1.0<br># This file is auto-generated.<br># User changes will be destroyed the next time authconfig is run.<br>auth        required      pam_env.so<br>auth        required      pam_tally2.so deny=4 unlock_time=1800<br>auth        sufficient    pam_unix.so nullok try_first_pass<br>auth        requisite     pam_succeed_if.so uid &gt;= 1000 quiet_success<br>auth        required      pam_deny.so<br><br>account     required      pam_unix.so<br>account     required      pam_tally2.so<br>#account     sufficient    pam_localuser.so<br>#account     sufficient    pam_succeed_if.so uid &lt; 1000 quiet<br>account     required      pam_permit.so<br><br>password    requisite     pam_pwquality.so try_first_pass local_users_only retry=3 authtok_type=<br>password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok<br>password    required      pam_deny.so<br><br>session     optional      pam_keyinit.so revoke<br>session     required      pam_limits.so<br>-session     optional      pam_systemd.so<br>session     [success=1 default=ignore] pam_succeed_if.so service in crond quiet use_uid<br>session     required      pam_unix.so<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPCISWL0A</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000MgJa8IAF"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-30T00:54:31Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-30T00:54:31Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>확인 감사합니다. 문제가 해결되셨으면 케이스를 종료하겠습니다.<br>문제가 발생하시면 다시 케이스를 오픈하실 수 있습니다.<br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-05-30T00:54:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Mg1N6IAJ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-05-29T04:24:43Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-05-29T04:24:43Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>fprintd-pam 모듈 관련 문제는 system-auth 파일에서 해당 내역 삭제 후 <br>완료되었습니다.<br><br>root@SLPCISWL0A /etc/pam.d # cat system-auth<br>#%PAM-1.0<br># This file is auto-generated.<br># User changes will be destroyed the next time authconfig is run.<br>auth        required      pam_env.so<br>auth        required      pam_tally2.so deny=4 unlock_time=1800<br>auth        sufficient    pam_unix.so nullok try_first_pass<br>auth        requisite     pam_succeed_if.so uid &gt;= 1000 quiet_success<br>auth        required      pam_deny.so<br><br>account     required      pam_unix.so<br>account     required      pam_tally2.so<br>#account     sufficient    pam_localuser.so<br>#account     sufficient    pam_succeed_if.so uid &lt; 1000 quiet<br>account     required      pam_permit.so<br><br>password    requisite     pam_pwquality.so try_first_pass local_users_only retry=3 authtok_type=<br>password    sufficient    pam_unix.so sha512 shadow nullok try_first_pass use_authtok<br>password    required      pam_deny.so<br><br>session     optional      pam_keyinit.so revoke<br>session     required      pam_limits.so<br>-session     optional      pam_systemd.so<br>session     [success=1 default=ignore] pam_succeed_if.so service in crond quiet use_uid<br>session     required      pam_unix.so<br><br>감사합니다.<br><br><publishedDate>2018-05-29T04:24:43Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Meq82IAB"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-23T01:08:02Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-23T01:08:02Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>말씀하신 pam 모듈은 fprintd-pam 패키지로 제공되는 것이고 이 패키지가 없어서 나오는 메시지로 보입니다.<br>$ rpm -qf /usr/lib64/security/pam_fprintd.so<br>fprintd-pam-0.5.0-4.0.el7_0.x86_64<br><br>관련 설정 파일에서 아래와 같이 되어 있는 것을 확인하실 수 있습니다.<br>[root@khuh ~]# grep FPRINTD /etc/sysconfig/authconfig<br>USEFPRINTD=yes<br><br>[root@khuh ~]# grep fprint /etc/pam.d/system-auth<br>auth        sufficient    pam_fprintd.so<br><br># grep fprint /etc/pam.d/*<br>/etc/pam.d/fingerprint-auth:auth        sufficient    pam_fprintd.so<br>/etc/pam.d/fingerprint-auth-ac:auth        sufficient    pam_fprintd.so<br>/etc/pam.d/system-auth:auth        sufficient    pam_fprintd.so<br>/etc/pam.d/system-auth-ac:auth        sufficient    pam_fprintd.so<br><br>authconfig 명령으로 fingerprint 기능을 사용하지 않도록 재설정하실 수 있습니다. 단, 주의하실 점은 system-auth pam 설정이 다시 설정되기 때문에 기존에 수동으로 추가하신 내용을 무시하고 덮어쓰기가 됩니다.<br> <br>[root@khuh ~]# authconfig --disablefingerprint --update<br><br>위 명령으로 변경된 후 설정 파일들의 변화입니다.<br><br>[root@khuh ~]# grep FPRINTD /etc/sysconfig/authconfig<br>USEFPRINTD=no<br>[root@khuh ~]# grep fprint /etc/pam.d/*<br>/etc/pam.d/fingerprint-auth:auth        sufficient    pam_fprintd.so<br>/etc/pam.d/fingerprint-auth-ac:auth        sufficient    pam_fprintd.so<br><br>RHEL7 에서 관련 서비스 데몬이 시작하는 것을 아래와 같이 막을 수 있습니다.<br>[root@khuh ~]# systemctl mask fprintd.service<br>Created symlink from /etc/systemd/system/fprintd.service to /dev/null.<br><br>현 상황에서는 authconfig 명령을 수행하는 것보다는 /etc/pam.d/system-auth 파일에 있는 pam_fprintd 관련 내용을 수동으로 제거하시는 것이 좋을 것 같습니다.<br><br>auth        sufficient    pam_fprintd.so<br><br>이 내용과 관련한 상세한 내용은 How to disable the fprintd?[1] 문서를 참고하시기 바랍니다.<br><br>[1] https://access.redhat.com/solutions/313463<br><br>고맙습니다.<br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-23T01:08:02Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MeK8qIAF"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-21T08:58:07Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-21T08:58:07Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>문의하신 내용을 확인 후 업데이트 드리겠습니다.<br>내일이 공휴일이어서 수요일에 답변이 가능할 것 같습니다.<br><br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-21T08:58:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>