======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-01-11T00:27:08Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2018-01-15T06:36:08Z</b><br><b>id : 500A000000ZQNssIAH</b><br>======================<br><br><b><font size=15>
제목  : OS default setuid 변경 시 문제 사례 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 상암센터 김지민 선임입니다. <br><br>이전에 했었던 기술 문의 01991629 관련해서 추가 문의를 드리려고 하는데요. <br><br>아래와 같이 문의를 했었었는데<br><br>답변으로 아래와 같이 두가지를 확인해주셨는데요.<br>혹시라도 추가적인 문제가 있는지 문의를 드리려고 합니다.<br><br>1. newgrp에 대한 setuid 제거 : 유저가 보조그룹으로 스위칭할 때 실패 사례<br>2. unix_chkpwd에 대한 setuid 제거 : gnome-screensaver 의 락이 정상적으로 해제되지 않는 사례<br><br> - 01991629 내용<br>=========================================================================================================================<br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>OS에서 확인해봤을 때 기본적으로 아래와 같이 setuid가 설정되어 있는 파일이 있습니다.<br><br>root@DECCAL01SL' /root # ll /usr/bin/newgrp<br>-rwsr-xr-x. 1 root root 41752 Nov 25  2014 /usr/bin/newgrp<br>root@DECCAL01SL' /root # ll /sbin/unix_chkpwd<br>-rwsr-xr-x. 1 root root 36264 Aug  4  2015 /sbin/unix_chkpwd<br><br>아래의 기능을 하는 것 같은데 해당 파일에 setuid 설정이 되어있는 이유와 혹시 setuid 설정을 제거할 경우 문제가 되는 점이 있는지 문의드리려고 합니다.<br><br>newgrp - log in to a new group<br><br>unix_chkpwd - Helper binary that verifies the password of the current user<br><br>문의드리는 이유는 삼성생명 ERP 서버에 대한 보안 조치 항목이어서 문의드립니다.<br><br>감사합니다.<br>=========================================================================================================================<br><br>답변<br>=========================================================================================================================<br>안녕하세요, 김지민 선임님<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>결론적으로 말씀드리자면 setuid 는 RHEL에 대하여 적절하거나 기대되는 동작을 위해 설정되어 있으므로<br>이를 제거하는 것으로 인해 예상치 못한 처리 결과가 발생할 수 있습니다.<br>따라서, 제거하는 것은 권장되지 않습니다.<br><br>저희 공식 관련 문서는 다음과 같습니다.<br><br>Can I strip setuid permissions from Red Hat provided binaries safely?<br>- https://access.redhat.com/solutions/440313'<br><br>예를들면,newgrp 에서 suid 를 제거하면 다음과 같이 특정유저에 대해 보조그룹으로<br>스위칭할 때 조작에 실패하게 됩니다.unix_chkpwd 의 setuid 제거로 인해<br>gnome-screensaver 락이 정상적으로 해제되지 않았던 사례도 보고되어 있습니다.<br><br>gnome-screensaver will not unlock with correct password while removed setuid bit of /sbin/unix_chkpwd file <br>- https://access.redhat.com/solutions/1287613'<br><br>상기 이외에도 서비스에 따라서 일반유저 인증과 관련해서 문제가 발생할 가능성이 있습니다.<br><br>따라서, 저희가 말씀드릴 수 있는 것은 setuid 관련 권한 설정을 변경하시는 것은<br>예상치 못한 에러가 발생할 수 있으므로 권장되지 않습니다.<br><br>newgrp,unix_chkpwd 파일은 setuid를 디폴트 설정으로 하고있으며 ,해당 설정 기반으로 저희 제품 QA 도 진행되었으므로 <br>해당 퍼미션이 제거됐을 경우의 여러 서비스에 대한 영향도에 대해서는 저희도 말씀드리기 어려우며<br>기술 지원 범위에 해당되지 않아 내부 인력의 협력을 받아 추가 진행하기도 어렵습니다.<br><br>만약 내부 보안 폴리시에 따라 변경을 하신다면 변경 후에 사용하시는 서비스에 문제가 없는지 테스트 하실 필요가 있을 것이며,<br>문제가 생겼을 경우, 해당 권한의 원복이 필요할 수 있습니다.<br><br><br>감사합니다.<br><br>=========================================================================================================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>DECCAL01SL</hostname><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000LMZrkIAH"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2018-01-15T06:36:05Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2018-01-15T06:36:05Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 기술 문의의 상태를 처리완료 상태로 변경하고자 합니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 *재개*하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2018-01-15T06:36:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LMAloIAH"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-12T01:39:47Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-12T01:39:47Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 추가적으로 문의하실 사항이 있으신가요?<br><br>본 안내 후 일정기간 답변이 없다면 본 케이스는 자동으로 종료 상태가 됨을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하시다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-12T01:39:47Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LMAGBIA5"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-01-12T00:35:01Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-01-12T00:35:01Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>답변 감사드립니다.<br><br><publishedDate>2018-01-12T00:35:01Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LLuohIAD"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-11T06:13:45Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-11T06:13:45Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해주셔서 감사합니다.<br><br>newgrp 및 unix_chkpwd 의 setuid 를 변경하면 발생될수 있는 문제는 <br>기술문의 01991629 에서 안내해드린 것 이외에는 찾을수 없었습니다.<br><br>앞서 안내해드린 것처럼 setuid 가 default 로 설정되어 있는 파일의<br>권한을 변경하면 예기치 않은 에러가 발생할수 있으므로 권장드리지 않는 바입니다.<br><br>본케이스에 관련하여 추가 문의 사항이 있으시다면 연락주시기 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-11T06:13:45Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LLsCkIAL"><br>======================<br><b>생성계정 : Li, Xingbin</b><br><b>생성날짜 : 2018-01-11T01:42:32Z</b><br><b>마지막 답변자 : Li, Xingbin</b><br><b>마지막 수정 일자 : 2018-01-11T01:42:32Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용해주셔서 감사합니다.<br><br>문의 주신 내용에 관해 추가적으로 조사를 진행한후 코멘트를 업데이트 <br>드리도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-01-11T01:42:32Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>