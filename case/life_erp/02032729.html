======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-02-11T07:06:01Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-02-28T11:04:12Z</b><br><b>id : 500A000000Zh8LIIAZ</b><br>======================<br><br><b><font size=15>
제목  : RHEL 7.2 OS 외장 disk 영역의 I/O 상태 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>RHEL 7.2 버전에서 외장 스토리지를 할당받아서<br>linux lvm과 Veritas volume manager를 동시에 사용하고 있는 상황인데요.<br><br>Veritas volume manager를 사용하게 되면서 os multipath를 중지 시킨 것 같고<br>현재 OS의 상태는 아래와 같습니다.<br><br>문의드릴 점은 각 서버 SLPAFIAL01 / SLPAFIAL02 서버의 vg1 영역의 상태가 단일 path로만 I/O가 일어나고 있는 상황인지 문의드리려고 합니다.<br><br>root@SLPAFIAL01 /backup # ls /dev/sd* | inqraid -CLI -fcx<br>DEVICE_FILE     PORT    SERIAL  LDEV CTG  H/M/12  SSID R:Group PRODUCT_ID<br>sda             -            -     -   -       -     -       - PERC H730 Mini<br>sdaa            CL3-A    54758  2A0D   -  s/s/ss  0005 A:00000 OPEN-V<br>sdab            CL3-A    54758  2A0E   -  s/s/ss  0005 A:00000 OPEN-V<br>sdac            CL3-A    54758  2A0F   -  s/s/ss  0005 A:00000 OPEN-V<br>sdad            CL3-A    54758  2A10   -  s/s/ss  0005 A:00000 OPEN-V<br>sdae            CL3-A    54758  2A11   -  s/s/ss  0005 A:00000 OPEN-V<br>sdaf            CL3-A    54758  1E0D   -  s/s/ss  4776 A:00000 OPEN-V<br>sdag            CL3-A    54758  1E2C   -  s/s/ss  4776 A:00000 OPEN-V<br>sdah            CL3-A    54758  1E2D   -  s/s/ss  4776 A:00000 OPEN-V<br>sdb             -            -     -   -       -     -       - PERC H730 Mini<br>sdc             CL4-A    54758  2A00   -  s/s/ss  0005 A:00000 OPEN-V<br>sdd             CL4-A    54758  2A01   -  s/s/ss  0005 A:00000 OPEN-V<br>sde             CL4-A    54758  2A02   -  s/s/ss  0005 A:00000 OPEN-V<br>sdf             CL4-A    54758  2A03   -  s/s/ss  0005 A:00000 OPEN-V<br>sdg             CL4-A    54758  2A04   -  s/s/ss  0005 A:00000 OPEN-V<br>sdh             CL4-A    54758  2A0A   -  s/s/ss  0005 A:00000 OPEN-V<br>sdi             CL4-A    54758  2A0B   -  s/s/ss  0005 A:00000 OPEN-V<br>sdj             CL4-A    54758  2A0C   -  s/s/ss  0005 A:00000 OPEN-V<br>sdk             CL4-A    54758  2A0D   -  s/s/ss  0005 A:00000 OPEN-V<br>sdl             CL4-A    54758  2A0E   -  s/s/ss  0005 A:00000 OPEN-V<br>sdm             CL4-A    54758  2A0F   -  s/s/ss  0005 A:00000 OPEN-V<br>sdn             CL4-A    54758  2A10   -  s/s/ss  0005 A:00000 OPEN-V<br>sdo             CL4-A    54758  2A11   -  s/s/ss  0005 A:00000 OPEN-V<br>sdp             CL4-A    54758  1E0D   -  s/s/ss  4776 A:00000 OPEN-V<br>sdq             CL4-A    54758  1E2C   -  s/s/ss  4776 A:00000 OPEN-V<br>sdr             CL4-A    54758  1E2D   -  s/s/ss  4776 A:00000 OPEN-V<br>sds             CL3-A    54758  2A00   -  s/s/ss  0005 A:00000 OPEN-V<br>sdt             CL3-A    54758  2A01   -  s/s/ss  0005 A:00000 OPEN-V<br>sdu             CL3-A    54758  2A02   -  s/s/ss  0005 A:00000 OPEN-V<br>sdv             CL3-A    54758  2A03   -  s/s/ss  0005 A:00000 OPEN-V<br>sdw             CL3-A    54758  2A04   -  s/s/ss  0005 A:00000 OPEN-V<br>sdx             CL3-A    54758  2A0A   -  s/s/ss  0005 A:00000 OPEN-V<br>sdy             CL3-A    54758  2A0B   -  s/s/ss  0005 A:00000 OPEN-V<br>sdz             CL3-A    54758  2A0C   -  s/s/ss  0005 A:00000 OPEN-V<br>root@SLPAFIAL01 /backup # pvs<br>  Found duplicate PV M6ZFu9dparm5nS9jz53uPLWeifOCiHUK: using /dev/sdu not /dev/sde<br>  Using duplicate PV /dev/sdu without holders, replacing /dev/sde<br>  PV         VG   Fmt  Attr PSize   PFree<br>  /dev/sda6  vg0  lvm2 a--  211.87g 191.87g<br>  /dev/sdb1  vg9  lvm2 a--  557.75g 227.75g<br>  /dev/sdd   vg1  lvm2 a--  100.00g      0 → 2A01 /dev/sdt<br>  /dev/sdf   vg1  lvm2 a--  100.00g      0 → 2A03 /dev/sdf<br>  /dev/sds   vg1  lvm2 a--  100.00g  49.98g → 2A00 / dev/sds<br>  /dev/sdu   vg1  lvm2 a--  100.00g      0 → 2A02 /dev/sdu<br>  /dev/sdw   vg1  lvm2 a--  100.00g      0 → 2A04 / dev/sdw<br><br>root@SLPAFIAL01 /backup # vgs<br>  VG   #PV #LV #SN Attr   VSize   VFree<br>  vg0    1   2   0 wz--n- 211.87g 191.87g<br><br>  vg1    5   3   0 wz--n- 499.98g  49.98g<br><br>  vg9    1   2   0 wz--n- 557.75g 227.75g<br><br>root@SLPAFIAL01 /backup # systemctl status multipathd.service<br>* multipathd.service - Device-Mapper Multipath Device Controller<br>   Loaded: loaded (/usr/lib/systemd/system/multipathd.service; disabled; vendor preset: enabled)<br>   Active: inactive (dead)<br><br>=====================================================================================================================<br><br>root@SLPAFIAL02 /sysadmin # ls /dev/sd* | inqraid -CLI -fcx<br>DEVICE_FILE     PORT    SERIAL  LDEV CTG  H/M/12  SSID R:Group PRODUCT_ID<br>sda             -            -     -   -       -     -       - PERC H730 Mini<br>sdaa            CL5-Q    54758  2A0D   -  s/s/ss  0005 A:00000 OPEN-V<br>sdab            CL5-Q    54758  2A0E   -  s/s/ss  0005 A:00000 OPEN-V<br>sdac            CL5-Q    54758  2A0F   -  s/s/ss  0005 A:00000 OPEN-V<br>sdad            CL5-Q    54758  2A10   -  s/s/ss  0005 A:00000 OPEN-V<br>sdae            CL5-Q    54758  2A11   -  s/s/ss  0005 A:00000 OPEN-V<br>sdaf            CL5-Q    54758  1E0D   -  s/s/ss  4776 A:00000 OPEN-V<br>sdag            CL5-Q    54758  1E2C   -  s/s/ss  4776 A:00000 OPEN-V<br>sdah            CL5-Q    54758  1E2D   -  s/s/ss  4776 A:00000 OPEN-V<br>sdb             -            -     -   -       -     -       - PERC H730 Mini<br>sdc             CL6-Q    54758  2A05   -  s/s/ss  0005 A:00000 OPEN-V<br>sdd             CL6-Q    54758  2A06   -  s/s/ss  0005 A:00000 OPEN-V<br>sde             CL6-Q    54758  2A07   -  s/s/ss  0005 A:00000 OPEN-V<br>sdf             CL6-Q    54758  2A08   -  s/s/ss  0005 A:00000 OPEN-V<br>sdg             CL6-Q    54758  2A09   -  s/s/ss  0005 A:00000 OPEN-V<br>sdh             CL6-Q    54758  2A0A   -  s/s/ss  0005 A:00000 OPEN-V<br>sdi             CL6-Q    54758  2A0B   -  s/s/ss  0005 A:00000 OPEN-V<br>sdj             CL6-Q    54758  2A0C   -  s/s/ss  0005 A:00000 OPEN-V<br>sdk             CL6-Q    54758  2A0D   -  s/s/ss  0005 A:00000 OPEN-V<br>sdl             CL6-Q    54758  2A0E   -  s/s/ss  0005 A:00000 OPEN-V<br>sdm             CL6-Q    54758  2A0F   -  s/s/ss  0005 A:00000 OPEN-V<br>sdn             CL6-Q    54758  2A10   -  s/s/ss  0005 A:00000 OPEN-V<br>sdo             CL6-Q    54758  2A11   -  s/s/ss  0005 A:00000 OPEN-V<br>sdp             CL6-Q    54758  1E0D   -  s/s/ss  4776 A:00000 OPEN-V<br>sdq             CL6-Q    54758  1E2C   -  s/s/ss  4776 A:00000 OPEN-V<br>sdr             CL6-Q    54758  1E2D   -  s/s/ss  4776 A:00000 OPEN-V<br>sds             CL5-Q    54758  2A05   -  s/s/ss  0005 A:00000 OPEN-V<br>sdt             CL5-Q    54758  2A06   -  s/s/ss  0005 A:00000 OPEN-V<br>sdu             CL5-Q    54758  2A07   -  s/s/ss  0005 A:00000 OPEN-V<br>sdv             CL5-Q    54758  2A08   -  s/s/ss  0005 A:00000 OPEN-V<br>sdw             CL5-Q    54758  2A09   -  s/s/ss  0005 A:00000 OPEN-V<br>sdx             CL5-Q    54758  2A0A   -  s/s/ss  0005 A:00000 OPEN-V<br>sdy             CL5-Q    54758  2A0B   -  s/s/ss  0005 A:00000 OPEN-V<br>sdz             CL5-Q    54758  2A0C   -  s/s/ss  0005 A:00000 OPEN-V<br><br>root@SLPAFIAL02 /sysadmin # pvs<br>  Found duplicate PV rltFulwLqFtGP1078CZpgzigTJAgS6tF: using /dev/sdt not /dev/sdd<br>  Using duplicate PV /dev/sdt without holders, replacing /dev/sdd<br>  PV         VG   Fmt  Attr PSize   PFree<br>  /dev/sda6  vg0  lvm2 a--  211.87g 191.87g<br>  /dev/sdb1  vg9  lvm2 a--  557.75g 227.75g<br>  /dev/sdg   vg1  lvm2 a--  100.00g      0  → 2A09 /dev/sdw<br>  /dev/sds   vg1  lvm2 a--  100.00g  49.98g → 2A05 /dev/sdc<br>  /dev/sdt   vg1  lvm2 a--  100.00g      0  → 2A06 /dev/sdd<br>  /dev/sdu   vg1  lvm2 a--  100.00g      0  → 2A07 /dev/sde<br>  /dev/sdv   vg1  lvm2 a--  100.00g      0  → 2A08 /dev/sdf<br><br>root@SLPAFIAL02 /sysadmin # vgs<br>  Found duplicate PV GTops3RxUvU8XueGdxm2QRkltRz5Oa2W: using /dev/sdc not /dev/sds<br>  Using duplicate PV /dev/sdc without holders, replacing /dev/sds<br>  VG   #PV #LV #SN Attr   VSize   VFree<br>  vg0    1   2   0 wz--n- 211.87g 191.87g<br><br>  vg1    5   3   0 wz--n- 499.98g  49.98g<br><br>  vg9    1   2   0 wz--n- 557.75g 227.75g<br><br>root@SLPAFIAL02 /var/log # systemctl status multipathd.service<br>* multipathd.service - Device-Mapper Multipath Device Controller<br>   Loaded: loaded (/usr/lib/systemd/system/multipathd.service; disabled; vendor preset: enabled)<br>   Active: inactive (dead)<br><br>감사합니다.<br><br>추가로 필요하신 내역이 있으시면 요청 주시면 업로드하겠습니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPAFIAL01 / SLPAFIAL02</hostname><br><br><br><comment id="a0aA000000LoC0dIAF"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-13T01:54:49Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-13T01:54:48Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>이미 확인하신데로 multipathd 서비스는 내려가 있는 상태이기 때문에 multipath 명령을 통해서 확인이 어렵습니다.<br>dmsetup ls --tree 명령의 결과가 아래와 같이 되어 있습니다. 일부는 여러개의 패스로 되어 있고 일부는 하나의 패스로만 연결되어 있는 것으로 보입니다.<br><br>SLPAFIAL01 $ dmsetup_ls_--tree<br>vg9-DUMP (253:4)<br> `- (8:17)<br>vg1-LOG (253:1)<br> |- (8:32)<br> |- (8:64)<br> `- (8:48)<br>vg9-CRASH (253:3)<br> `- (8:17)<br>vg1-backup (253:2)<br> |- (8:32)<br> |- (65:96)<br> `- (8:80)<br>vg0-home (253:5)<br> `- (8:6)<br>vg1-APP (253:0)<br> `- (8:32)<br>vg0-sysadmin (253:6)<br> `- (8:6)<br><br>SLPAFIAL02 $ dmsetup_ls_--tree<br>vg9-DUMP (253:6)<br> `- (8:17)<br>vg1-LOG (253:1)<br> |- (65:32)<br> |- (65:64)<br> `- (8:48)<br>vg9-CRASH (253:5)<br> `- (8:17)<br>vg1-backup (253:2)<br> |- (65:32)<br> |- (8:96)<br> `- (65:80)<br>vg0-home (253:3)<br> `- (8:6)<br>vg1-APP (253:0)<br> `- (65:32)<br>vg0-sysadmin (253:4)<br> `- (8:6)<br><br>/etc/multipath.conf 파일 내용을 보면 blacklist 설정에 새로 할당하신 veritas용 볼륨이 포함되어 있지 않은 것 같습니다.<br>veritas volume manager와 dm-multipath를 동시에 사용은 가능하나 상대방이 사용하는 장치를 확실하게 배제하셔야 안전하게 동작할 것으로 보입니다.<br>좀 더 상세한 구성 방법을 veritas volume manager를 제공하는 벤더로 부터 확인하시는 것도 필요한 것 같습니다.<br><br>... 중략 ...<br>blacklist {<br><br>devnode &quot;^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*&quot;<br><br>wwid 614187703270ae00<br>}<br>blacklist_exceptions {<br><br>wwid 360060e8006d5e6000000d5e600002a00<br><br>wwid 360060e8006d5e6000000d5e600002a01<br><br>wwid 360060e8006d5e6000000d5e600002a02<br><br>wwid 360060e8006d5e6000000d5e600002a03<br><br>wwid 360060e8006d5e6000000d5e600002a04<br><br>wwid 360060e8006d5e6000000d5e600002a0a<br><br>wwid 360060e8006d5e6000000d5e600002a0b<br><br>wwid 360060e8006d5e6000000d5e600002a0c<br><br>wwid 360060e8006d5e6000000d5e600002a0d<br><br>wwid 360060e8006d5e6000000d5e600002a0e<br><br>wwid 360060e8006d5e6000000d5e600002a0f<br><br>wwid 360060e8006d5e6000000d5e600002a10<br><br>wwid 360060e8006d5e6000000d5e600002a11<br>}<br>... 후략 ...<br><br>고맙습니다.<br>허 경 드림.<br><br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-02-13T01:54:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LnuG8IAJ"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-02-12T03:49:56Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-02-12T03:49:55Z</b><br><br>안녕하세요. 레드햇 허경입니다. <br><br>문의하신 내용 확인 후 업데이트 드리겠습니다. <br><br>허 경 드림.<br><br><publishedDate>2018-02-12T03:49:55Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LnrToIAJ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-02-11T07:47:56Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-02-11T07:47:56Z</b><br><br>안녕하세요 <br><br>SDS 김지민 선임입니다.<br><br>아래 case number로 sosreport를<br>dropbox.redhat.com  /incoming에 업로드 완료하였습니다.<br><br>02032749-sosreport-SLPAFIAL01-20180211160718.tar.xz<br>02032749-sosreport-SLPAFIAL02-20180211160713.tar.xz<br><br><publishedDate>2018-02-11T07:47:56Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LnrO1IAJ"><br>======================<br><b>생성계정 : Abbott, Edmund</b><br><b>생성날짜 : 2018-02-11T07:06:20Z</b><br><b>마지막 답변자 : Abbott, Edmund</b><br><b>마지막 수정 일자 : 2018-02-11T07:06:20Z</b><br><br>This comment has been generated via an automated case assistant and is based upon the information provided at case create time.<br><br>If you have already uploaded or are in the process of creating and uploading a sosreport to this case, please ignore this request.<br><br>A sosreport is being pro-actively requested.  If you cannot provide a sosreport for reasons such as its a secure site or other<br>such restrictions, please let us know if not already noted within the case. However, the lack of a sosreport often impedes our<br>ability to make progress in fully understanding and resolving the reported issue.<br><br>If the system can be booted: <br>======================================================================================<br><br>* Create sosreport: ~]# sosreport<br>  Please see the following documentation for more information on the sosreport and how to gather one from the system.<br><br>       What is sosreport and how do I create one in Red Hat Enterprise Linux 4.6 and later?<br>       https://access.redhat.com/knowledge/solutions/3592<br><br>* Attach to case  : ~]# redhat-support-tool addattachment -c CASE_NUMBER /path/to/sosreport<br>  If needed, an example on attaching a file to a case via the portal UI is available within the following document in <br>  the section entitled &quot;Attaching the file(s) to the ticket and case management through the Customer Portal&quot; <br><br>       How do I open and manage a support case on the Customer Portal?<br>       https://access.redhat.com/articles/38363#attach<br><br>* If the sosreport is large in size such that you are not able to upload it into the case, then you can upload it<br>  into the dropbox. For more information on dropbox, please refer the following document.<br><br>       How can I provide large files (such as a vmcore, big log files, or a large sosreport) to Red Hat Support?<br>       https://access.redhat.com/knowledge/solutions/2112<br><br>Please see the following documentation on how to proceed if the system cannot be booted, fails to boot, hangs on boot,<br>crashed during boot, sosreport hangs or otherwise does not complete: <br>====================================================================================== <br><br>* Additional and alternative steps for gathering a sosreport for Red Hat Enterprise Linux<br>  https://access.redhat.com/articles/2760521<br><br><br>auto-assistant rule reference #:KSOS0130 https://access.redhat.com/articles/2908901<br><br><publishedDate>2018-02-11T07:06:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>