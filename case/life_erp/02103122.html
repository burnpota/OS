======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-05-21T07:57:41Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-06-14T10:03:39Z</b><br><b>id : 500A000000asMGzIAM</b><br>======================<br><br><b><font size=15>
제목  : rc.local.service error 발생 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 서버에서 rc.local 서비스가 fail이 발생한 상태인데요.<br><br>혹시 어떤 부분을 확인하고 조치하여야하는지 문의드리려고 합니다.<br><br>[root@SLPCISWL0A:/etc/pam.d] systemctl status<br>* SLPCISWL0A<br>    State: degraded<br>     Jobs: 0 queued<br>   Failed: 1 units<br>    Since: Sun 2017-05-14 10:00:44 KST; 1 years 0 months ago<br>   CGroup: /<br>           |-1 /usr/lib/systemd/systemd --switched-root --system --deserialize 21<br>           |-user.slice<br>           | |-user-30966.slice<br>           | | `-session-529646.scope<br>           | |   `-25190 ../java/bin/EagleyeLauncher -jar -Xmx64M -XX:NewRatio=3 MPluginLauncher.jar<br>           | |-user-1021.slice<br>           | | `-session-146190.scope<br>           | |   |-17757 /usr/local/redcastle/sbin/sosd<br>           | |   |-17778 /usr/local/redcastle/sbin/rc_perf<br>           | |   |-17785 /usr/local/redcastle/sbin/rc_schd<br>           | |   |-17792 /usr/local/redcastle/sbin/rc_orac<br>           | |   |-17814 /usr/local/redcastle/sbin/rclogd<br>           | |   |-17818 /usr/local/redcastle/sbin/seslogd<br>           | |   |-17821 /usr/local/redcastle/sbin/ttylogd<br>           | |   `-17826 /usr/local/redcastle/sbin/mod_sched<br>           | |-user-0.slice<br>           | | |-session-555471.scope<br>           | | | |-6738 ptymonitor --oob-fd 17 --stderr-mode MUX --pty --term xterm --rows 40 --cols 100 --termios 38400:38400:3.1C.7F.15.4.0.0.11.13.1A.100.12.17.16.100.100.100.F:140:E3B:544505:8 --ttlg --gid 0 -<br>           | | | |-6741 -bash<br>           | | | |-7274 systemctl status<br>           | | | `-7275 less<br>           | | `-session-84636.scope<br>           | |   |- 7231 sleep 60<br>           | |   |-14567 /sysadmin/work/170704/ShellMonitorAgent/jre6/bin/java -Xmx512m -Djava.library.path=./lib -jar ShellMonitorAgent.jar<br>           | |   |-14571 sh ./ShellMonitorService<br>           | |   |-14603 /sysadmin/work/170704/ShellMonitorAgent/climit 14567 10<br>           | |   `-14614 /sysadmin/work/170704/ShellMonitorAgent/climit 14567 10<br>           | `-user-31920.slice<br>           |   |-session-368474.scope<br>           |   | |-30393 /usr/sbin/httpd -f /APP/fts/apache/conf/httpd.conf -k start<br>           |   | |-30396 /usr/sbin/rotatelogs /LOG/fts/apache/error/ssl_error_fts01_log_%Y_%m_%d 86400<br>           |   | |-30397 /usr/sbin/rotatelogs /LOG/fts/apache/access/ssl_access_fts01_log_%Y_%m_%d 86400<br>           |   | `-30427 /usr/sbin/httpd -f /APP/fts/apache/conf/httpd.conf -k start<br>           |   `-session-557.scope<br>           |     `-27983 java -DXmlRpc -cp xmlrpc.jar:qprm_xmlrpc.jar:.: qprm.components.cmsframe.xmlrpc.QprmXmlRpcServer 8531 -current /home/ftsadm/xmlrpc -out /home/ftsadm/xmlrpc/logs/stdout.log -err /home/ftsad<br>           `-system.slice<br>             |-sshd.service<br>             | `-11217 /usr/sbin/sshd -D<br>             |-rsyslog.service<br>             | `-17047 /usr/sbin/rsyslogd -n<br>             |-rpc-statd.service<br>             | `-24593 /usr/sbin/rpc.statd --no-notify<br>             |-rpcbind.service<br>             | `-24402 /sbin/rpcbind -w<br>             |-polkit.service<br>             | `-24393 /usr/lib/polkit-1/polkitd --no-debug<br>             |-crond.service<br>             | `-5621 /usr/sbin/crond -n<br>             |-ntpd.service<br>             | `-5623 /usr/sbin/ntpd -u ntp:ntp -g<br>             |-netbackup.service<br>             | |-4992 /usr/openv/netbackup/bin/vnetd -standalone<br>             | `-5057 /usr/openv/netbackup/bin/bpcd -standalone<br>             |-vxpbx_exchanged.service<br>[root@SLPCISWL0A:/etc/pam.d] systemctl --failed<br>  UNIT             LOAD   ACTIVE SUB    DESCRIPTION<br>* rc-local.service loaded failed failed /etc/rc.d/rc.local Compatibility<br><br>LOAD   = Reflects whether the unit definition was properly loaded.<br>ACTIVE = The high-level unit activation state, i.e. generalization of SUB.<br>SUB    = The low-level unit activation state, values depend on unit type.<br><br>1 loaded units listed. Pass --all to see loaded but inactive units, too.<br>To show all installed unit files use 'systemctl list-unit-files'.<br>[root@SLPCISWL0A:/etc/pam.d] systemctl status rc-local.service<br>* rc-local.service - /etc/rc.d/rc.local Compatibility<br>   Loaded: loaded (/usr/lib/systemd/system/rc-local.service; static; vendor preset: disabled)<br>   Active: failed (Result: exit-code) since Sun 2017-05-14 10:00:51 KST; 1 years 0 months ago<br><br>Warning: Journal has been rotated since unit was started. Log output is incomplete or unavailable.<br><br>[root@SLPCISWL0A:/etc/pam.d] cat /etc/rc.local<br>#!/bin/bash<br># THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES<br>#<br># It is highly advisable to create own systemd services or udev rules<br># to run scripts during boot instead of using this file.<br>#<br># In contrast to previous versions due to parallel execution during boot<br># this script will NOT be run after all other services.<br>#<br># Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure<br># that this script will be executed during boot.<br><br>touch /var/lock/subsys/local<br>for localdisk in /sys/block/dm-0<br>/sys/block/dm-1<br>/sys/block/sda; do echo 8192 &gt; /queue/read_ahead_kb; done<br>echo 1 &gt; /sys/module/rcupdate/parameters/rcu_cpu_stall_suppress<br>chmod 600 /var/log/wtmp<br>&quot;/sysadmin/work/170704/ShellMonitorAgent/bin/autoRun&quot; start<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>SLPCISWL0A</hostname><br><br><br><comment id="a0aA000000Mg0jaIAB"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-29T02:35:24Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-29T02:35:24Z</b><br><br>안녕하세요? 허경입니다.<br><br>/etc/rc.d/rc.local 파일이 이미 root에 대한 실행 권한이 있기 때문에 추가로 부여하지 않으셔도 될 것 같습니다.<br>나머지 내용은 그대로 진행하셔도 괜찮을 것 같습니다.<br><br><br>(In reply to kim, jimin)<br>&gt; 안녕하세요<br>&gt; <br>&gt; SDS 김지민 선임입니다.<br>&gt; <br>&gt; 아래와 같이 서버에서 tuned 서비스 관련해서는 확인을 하였습니다.<br>&gt; tuned는 사용하지 않는 것 같고 <br>&gt; <br>&gt; 알려주신 절차로 수행 예정입니다.<br>&gt; <br>&gt; 1. /etc/rc.d/rc.local 파일 수정 → 2. chmod +x /etc/rc.d/rc.local (아래 권한을 확인하였을 때 실행 권한이 있는 것 같아서 필요한 지 문의드립니다.)<br>&gt; → 3.  systemctl start rc-local.service → 4. cat /sys/block/sdb/queue/read_ahead_kb 확인<br>&gt; <br>&gt;  - /etc/rc.d/rc.local 권한 확인<br>&gt; root@SLPCISWL0A /root # ll /etc/rc.d/rc.local<br>&gt; -rwxr-x---. 1 root root 740 May 27 11:09 /etc/rc.d/rc.local<br>&gt; <br>&gt;  - tuned 확인 내역<br>&gt; root@SLPCISWL0A /root # tuned-adm list<br>&gt; Cannot talk to Tuned daemon via DBus. Is Tuned daemon running?<br>&gt; Available profiles:<br>&gt; - balanced<br>&gt; - desktop<br>&gt; - latency-performance<br>&gt; - network-latency<br>&gt; - network-throughput<br>&gt; - powersave<br>&gt; - throughput-performance<br>&gt; - virtual-guest<br>&gt; - virtual-host<br>&gt; Cannot talk to Tuned daemon via DBus. Is Tuned daemon running?<br>&gt; It seems that tuned daemon is not running, preset profile is not activated.<br>&gt; Preset profile: virtual-guest<br>&gt; <br>&gt; root@SLPCISWL0A /root # systemctl status tuned.service<br>&gt; * tuned.service<br>&gt;    Loaded: masked (/dev/null; bad)<br>&gt;<br><br><publishedDate>2018-05-29T02:35:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Mg0N5IAJ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-05-29T01:35:24Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-05-29T01:35:24Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 서버에서 tuned 서비스 관련해서는 확인을 하였습니다.<br>tuned는 사용하지 않는 것 같고 <br><br>알려주신 절차로 수행 예정입니다.<br><br>1. /etc/rc.d/rc.local 파일 수정 → 2. chmod +x /etc/rc.d/rc.local (아래 권한을 확인하였을 때 실행 권한이 있는 것 같아서 필요한 지 문의드립니다.)<br>→ 3.  systemctl start rc-local.service → 4. cat /sys/block/sdb/queue/read_ahead_kb 확인<br><br> - /etc/rc.d/rc.local 권한 확인<br>root@SLPCISWL0A /root # ll /etc/rc.d/rc.local<br>-rwxr-x---. 1 root root 740 May 27 11:09 /etc/rc.d/rc.local<br><br> - tuned 확인 내역<br>root@SLPCISWL0A /root # tuned-adm list<br>Cannot talk to Tuned daemon via DBus. Is Tuned daemon running?<br>Available profiles:<br>- balanced<br>- desktop<br>- latency-performance<br>- network-latency<br>- network-throughput<br>- powersave<br>- throughput-performance<br>- virtual-guest<br>- virtual-host<br>Cannot talk to Tuned daemon via DBus. Is Tuned daemon running?<br>It seems that tuned daemon is not running, preset profile is not activated.<br>Preset profile: virtual-guest<br><br>root@SLPCISWL0A /root # systemctl status tuned.service<br>* tuned.service<br>   Loaded: masked (/dev/null; bad)<br>   Active: inactive (dead)<br><br>감사합니다.<br><br><publishedDate>2018-05-29T01:35:24Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Mg0IZIAZ"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-29T01:27:11Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-29T01:27:11Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>문의하신 내용을 테스트 해보던중 tuned가 작동하는 경우에 제대로 설정이 적용되지 않을 수 있는 것을 확인하였습니다.<br><br>tuned를 사용하는 경우 관련 설정 사항을 먼저 확인하시기 바랍니다.<br><br>tuned-adm list 명령으로 tuned profile이 적용되어 있는지 여부를 확인하시고, tuned를 사용하고 있는 경우에는 virtual-guest 또는 throughput-performance 프로파일로 적용하면 자동으로 read-ahaed 값이 4096으로 설정됩니다.<br><br>tuned를 사용하지 않는 경우에는 다음 시스템 부팅시에 적용됩니다. rc-local.service 는 static 형식이기 때문에 reload 가 되지 않습니다. 또한, /etc/rc.d/rc.local이 실행할 수 있는 조건이 갖추어져 있어야 작동합니다.<br><br>재부팅 하지 않고 적용하시려면 아래와 같이 rc.local 파일에 실행권한을 부여하고 rc-local.service를 시작하시면 됩니다.<br><br># chmod +x /etc/rc.d/rc.local<br># systemctl start rc-local.service <br><br>고맙습니다.<br>허 경 드림.<br><br><publishedDate>2018-05-29T01:27:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MfqVQIAZ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-05-28T07:18:29Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-05-28T07:18:28Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래 내용관련해서 조치를 수행하려면 아래와 같이 수정한 후 <br>rc-local.service를 reload하면 되는지 문의드리려고 합니다.<br><br>8192에서 4096으로 변경된 이유는 이전에 ERP 시스템 구축 시 가상화 서버에 대해서는 4096으로 가이드를 받아서 수정하였습니다.<br><br>root@SLPCISWL0A /root # dmidecode | grep -i vm<br>        Manufacturer: VMware, Inc.<br>        Product Name: VMware Virtual Platform<br>        Serial Number: VMware-42 2d 03 d8 6c 63 c2 c7-52 56 9f 30 4f fa 17 3b<br>        Description: VMware SVGA II<br>        String 1: [MS_VM_CERT/SHA1/27d66596a61c48dd3dc7216fd715126e33f59ae7]<br><br>/etc/rc.local 부분 수정<br><br> - 현재<br>/sys/block/sda; do echo 8192 &gt; ${localdisk}/queue/read_ahead_kb; done<br> - 수정<br>############################################################<br># Change SCSI block device read_ahead<br>############################################################<br>for localdisk in $(ls -d1 /sys/block/{sd,dm-}*); do echo 4096 &gt; ${localdisk}/queue/read_ahead_kb; done<br><br>감사합니다.<br><br><publishedDate>2018-05-28T07:18:28Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000MeqFXIAZ"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-23T01:28:01Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-23T01:28:00Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>/etc/rc.local 내용중에 오류로 의심되는 부분이 있습니다.<br><br>; do echo 8192 &gt; /queue/read_ahead_kb; done<br>for loop 구문에 지정한 변수를 부르는 부분이 추가되어야 할 것으로 보입니다.<br><br>아래와 같이 변경하여야 적절히 변경될 것으로 보입니다.<br>; do echo 8192 &gt; ${localdisk}/queue/read_ahead_kb; done<br><br>내용을 수정하셔서 /etc/rc.local 파일을 수동으로 실행했을 때 문제가 없어야 합니다.<br><br># /etc/rc.local<br>정상적으로 종료하면 아래와 같이 0의 결과가 나와야 합니다.<br><br># echo $?<br>0<br><br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-23T01:28:00Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000MeK90IAF"><br>======================<br><b>생성계정 : Huh, Kyung</b><br><b>생성날짜 : 2018-05-21T08:58:22Z</b><br><b>마지막 답변자 : Huh, Kyung</b><br><b>마지막 수정 일자 : 2018-05-21T08:58:22Z</b><br><br>안녕하세요? 레드햇 허경입니다.<br><br>문의하신 내용을 확인 후 업데이트 드리겠습니다.<br>내일이 공휴일이어서 수요일에 답변이 가능할 것 같습니다.<br><br>허 경 드림.<br><br>Regards,<br>Kyung Huh<br>Sr. Technical Account Manager<br>Customer Experience &amp; Engagement<br><br><publishedDate>2018-05-21T08:58:22Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>