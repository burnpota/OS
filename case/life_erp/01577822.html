======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-02-03T15:04:59Z</b><br><b>마지막 답변자 : JINKOO HAN</b><br><b>마지막 수정 일자 : 2016-02-16T01:33:08Z</b><br><b>id : 500A000000TSmDMIA1</b><br>======================<br><br><b><font size=15>
제목  : Multipath no_path_retry 및 기타 Failover 와 관련 된 권고값 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요. <br><br>SAN 스토리지 환경 물리시스템에서는 현재 아래와 같은 multipath 설정을 사용하고 있습니다.<br><br># cat /etc/multipath.conf<br><br>defaults {<br>        # polling_interval        60<br>        polling_interval        5<br>        user_friendly_names     yes<br>}<br><br>blacklist {<br>        wwid 3600508b1001cb2dadb5d8cb4cf57ddbb<br>        wwid HP_iLO_LUN_00_Media_0_000002660A01-0:0<br>        devnode &quot;^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*&quot;<br>        devnode &quot;^hda[1-9]&quot;<br>}<br><br>devices {<br>        device {<br>                vendor                  &quot;HITACHI&quot;<br>                product                 &quot;OPEN.*&quot;<br>                path_grouping_policy    multibus<br>                path_checker            tur<br>                failback                immediate<br>                # features                &quot;1 queue_if_no_path&quot;<br>                # no_path_retry        3<br>                features                &quot;0&quot;<br>                no_path_retry        fail<br>        }<br>}<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>설정 내용 중 주석 처리 된<br><br># polling_interval        60<br># features                &quot;1 queue_if_no_path&quot;<br># no_path_retry        3<br><br>값은 Hitachi 에서 권고 한 설정이었으나, 빠른 장애 감지 및 전환을 위해 변경하여 설정을 했습니다.<br><br>가용성 절체 테스트에서는 전혀 문제 없이 Path 장애 감지가 되어 I/O 전환에 문제가 없었으나,<br><br>부하가 많은 실 AP 운영 환경에서는 너무 민감한 설정이라는 스토리지 벤더의 의견이 있었습니다.<br><br>이와 관련하여 위 설정 값에 대한 문제점 검토를 부탁 드립니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000GY3NkIAL"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-02-16T01:33:07Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-02-16T01:33:07Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 추가 업데이트 사항이 없어서 본 케이스를 Close하도록 하겠습니다.<br><br>본 케이스와 관련되어 추가 문의 사항이 있으시면 본 케이스를 &quot;Re-open&quot;하셔도 되며, 새로운 문의사항이 있으시면 새로운 케이스를 오픈하시면 해당 케이스를 통해서 지원하도록 하겠습니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-02-16T01:33:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GX6ygIAD"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-02-11T02:25:23Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-02-11T02:25:23Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 추가 업데이트가 있으시면 케이스에 업데이트 바랍니다.<br>또한, 문제가 해결된 경우에는 해당 케이스를 'Close'해주시면 됩니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-02-11T02:25:23Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GA9kEIAT"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-02-04T02:12:44Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-02-04T02:12:44Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>문의주신 내용에 대해서 검토하였으며, 아래와 같이 답변 드립니다.<br><br><br>Red Hat은 기본적인 설정은 Default 값들로 제공은 하고 있으나, 스토리지와 관련 된 내용들은 사실상 스토리지의 권고사항을 따르는 것을 권고하고 있습니다.<br><br>현재 스토리지에서 &quot;부하가 많은 실 AP 운영 환경에서는 너무 민감한 설정이라는 스토리지 벤더의 의견이 있었습니다.&quot;라는 의견을 주셨으며,<br>해당 스토리지의 권고를 따르는 것을 권고드립니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-02-04T02:12:44Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GA9EtIAL"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-02-04T00:35:47Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-02-04T00:35:47Z</b><br><br>안녕하세요,<br>Red Hat Technical Acccount Manager 한진구 입니다.<br><br>문의주신 내용을 검토한 후, 업데이트 드리도록 하겠습니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-02-04T00:35:47Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>SAN 스토리지 환경 물리시스템에서는 현재 아래와 같은 multipath 설정을 사용하고 있습니다.<br><br># cat /etc/multipath.conf<br><br>defaults {<br>        # polling_interval        60<br>        polling_interval        5<br>        user_friendly_names     yes<br>}<br><br>blacklist {<br>        wwid 3600508b1001cb2dadb5d8cb4cf57ddbb<br>        wwid HP_iLO_LUN_00_Media_0_000002660A01-0:0<br>        devnode &quot;^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*&quot;<br>        devnode &quot;^hda[1-9]&quot;<br>}<br><br>devices {<br>        device {<br>                vendor                  &quot;HITACHI&quot;<br>                product                 &quot;OPEN.*&quot;<br>                path_grouping_policy    multibus<br>                path_checker            tur<br>                failback                immediate<br>                # features                &quot;1 queue_if_no_path&quot;<br>                # no_path_retry        3<br>                features                &quot;0&quot;<br>                no_path_retry        fail<br>        }<br>}</issue><environment>설정 내용 중 주석 처리 된<br><br># polling_interval        60<br># features                &quot;1 queue_if_no_path&quot;<br># no_path_retry        3<br><br>값은 Hitachi 에서 권고 한 설정이었으나, 빠른 장애 감지 및 전환을 위해 변경하여 설정을 했습니다.<br><br>가용성 절체 테스트에서는 전혀 문제 없이 Path 장애 감지가 되어 I/O 전환에 문제가 없었으나,<br><br>부하가 많은 실 AP 운영 환경에서는 너무 민감한 설정이라는 스토리지 벤더의 의견이 있었습니다.<br><br>이와 관련하여 위 설정 값에 대한 문제점 검토를 부탁 드립니다.<br><br>감사합니다.</environment><cep>false</cep></case>