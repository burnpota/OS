======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-05-04T06:44:57Z</b><br><b>마지막 답변자 : 우택 심</b><br><b>마지막 수정 일자 : 2016-05-23T06:02:57Z</b><br><b>id : 500A000000U4jRzIAJ</b><br>======================<br><br><b><font size=15>
제목  : QLogic HBA (qla2xxx) Abort command issued nexus 로그의 건
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요. <br><br>예전에도 비슷한 이슈로 케이스를 오픈 했었습니다. (https://access.redhat.com/support/cases/#/case/01601599)<br><br>지난 주 안정화 작업 때 QLogic HBA Firmware/Driver 를 모두 업데이트를 진행하였습니다.<br><br>로그를 분석 중 아래와 같은 내용을 발견 하였습니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>May  3 11:38:25 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:1 --  1 2002.<br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-8009:3: DEVICE RESET ISSUED nexus=3:0:1 cmd=ffff887e56f25500.<br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-800e:3: DEVICE RESET SUCCEEDED nexus:3:0:1 cmd=ffff887e56f25500.<br><br>========================================================================<br><br>May  3 09:02:34 PPMSAL03SL kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:1 --  1 2002.<br><br>========================================================================<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>물리 시스템에서만 발생되며, <br><br>예전에는 발견 안되던 아래와 같은 로그도 추가로 검출 되었습니다.<br><br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-8009:3: DEVICE RESET ISSUED nexus=3:0:1 cmd=ffff887e56f25500.<br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-800e:3: DEVICE RESET SUCCEEDED nexus:3:0:1 cmd=ffff887e56f25500.<br><br>(Storage I/O 에는 문제가 발생하지는 않았습니다.)<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>위와 같은 로그가 의미하는 내용과 발생할 수 있는 경우의 수를 알고 싶습니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 4 (Low)</b><br>======================<br><comment id="a0aA000000H8mehIAB"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-20T05:03:57Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-20T05:03:56Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 혹시 추가 문의사항이 잇으시면 케이스에 업데이트 바라며, 없으시면 케이스를 close하도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-20T05:03:56Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H5NruIAF"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-09T05:24:40Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-09T05:24:40Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>기본적으로 &quot;Abort&quot; command는 &quot;qla2xxx&quot; driver에서 출력은 하게 됩니다. 하지만 해당 메시지가 출력되는 경우는 SCSI command timeout이 발생했을 때이며 이러한 문제는 일반적으로 host adapter와 storage device 사이 어디선가의 문제가 발생할 때 생기게 됩니다. 이렇게 문제의 timeout이 발생하게 되면 디바이스는 기존의 SCSI 명령어를 중지하기 위한 메시지를 보내게 되고 해당 메시지는 아래와 같습니다.<br><br><br>May  3 09:02:34 PPMSAL03SL kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:1 --  1 2002.<br><br>[...]<br><br><br>이후에 해당 &quot;Abort&quot; 명령어가 정상적으로 도달되어 스토리지에서 처리가 완료되면 아래와 같이 그 결과를 리턴받아서 출력하게 된 것입니다.<br><br><br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-8009:3: DEVICE RESET ISSUED nexus=3:0:1 cmd=ffff887e56f25500.<br><br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-800e:3: DEVICE RESET SUCCEEDED nexus:3:0:1 cmd=ffff887e56f25500.<br><br>[...]<br><br><br>해당 이슈가 발생하게 될 경우, OS측면에서는 분석 할 수 잇는 자료는 없습니다. 하드웨어와 스토리지 벤더로 연락하시어 해당 메시지로 인한 하드웨어 부분을 점검하시는 것을 권고 드립니다.<br><br><br>* 참고로 아래는 저희 전문엔지니어가 점검이 필요한 부분들에 대해서 나여할 것입니다. <br><br>FC switch, FC cabling, HBA, zoning, or some issue from SAN/Storage side due to which the IO commands issued to SAN devices are unable to complete within timeout period and driver had to abort the timed out commands.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-05-09T05:24:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H4LzDIAV"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-04T08:28:15Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-04T08:28:15Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>문의주신 내용에 대해서 확인 후, 업데이트 드리겠습니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-05-04T08:28:15Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>예전에도 비슷한 이슈로 케이스를 오픈 했었습니다. (https://access.redhat.com/support/cases/#/case/01601599)<br><br>지난 주 안정화 작업 때 QLogic HBA Firmware/Driver 를 모두 업데이트를 진행하였습니다.<br><br>로그를 분석 중 아래와 같은 내용을 발견 하였습니다.</issue><environment>May  3 11:38:25 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:1 --  1 2002.<br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-8009:3: DEVICE RESET ISSUED nexus=3:0:1 cmd=ffff887e56f25500.<br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-800e:3: DEVICE RESET SUCCEEDED nexus:3:0:1 cmd=ffff887e56f25500.<br><br>========================================================================<br><br>May  3 09:02:34 PPMSAL03SL kernel: qla2xxx [0000:84:00.0]-801c:3: Abort command issued nexus=3:0:1 --  1 2002.<br><br>========================================================================</environment><periodicityOfIssue>물리 시스템에서만 발생되며, <br><br>예전에는 발견 안되던 아래와 같은 로그도 추가로 검출 되었습니다.<br><br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-8009:3: DEVICE RESET ISSUED nexus=3:0:1 cmd=ffff887e56f25500.<br>May  3 11:38:26 PECCAL03SL kernel: qla2xxx [0000:84:00.0]-800e:3: DEVICE RESET SUCCEEDED nexus:3:0:1 cmd=ffff887e56f25500.<br><br>(Storage I/O 에는 문제가 발생하지는 않았습니다.)</periodicityOfIssue><timeFramesAndUrgency>위와 같은 로그가 의미하는 내용과 발생할 수 있는 경우의 수를 알고 싶습니다.<br><br>감사합니다.</timeFramesAndUrgency><cep>false</cep></case>