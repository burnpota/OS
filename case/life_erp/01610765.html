======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2016-04-03T07:17:35Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2016-04-19T10:05:00Z</b><br><b>id : 500A000000U6yTPIAZ</b><br>======================<br><br><b><font size=15>
제목  : Linux 6.6 서버에서 Oracle data 파일이 사용하게 되는 파일시스템의 block size 설정에 대한 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>Linux 6.6 서버에서 Oracle data 파일이 사용하게 되는 파일시스템의 block size 설정에 대한 문의입니다.<br>ext4 파일시스템에서 block size 설정 값에 대한 문의 입니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>아래는 ERP 운영계 mig에서 사용될 서버의 DB 파일시스템 구조 입니다.<br>1TB의 크기 90개의 파일시스템으로 이루어져 있습니다.<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata1   1007G   11G  946G   2% /oracle/MZ0/sapdata1<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata2   1007G  200M  956G   1% /oracle/MZ0/sapdata2<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata3   1007G  200M  956G   1% /oracle/MZ0/sapdata3<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata4   1007G  200M  956G   1% /oracle/MZ0/sapdata4<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata5   1007G  200M  956G   1% /oracle/MZ0/sapdata5<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata6   1007G  200M  956G   1% /oracle/MZ0/sapdata6<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata7   1007G  200M  956G   1% /oracle/MZ0/sapdata7<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata8   1007G  200M  956G   1% /oracle/MZ0/sapdata8<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata9   1007G  200M  956G   1% /oracle/MZ0/sapdata9<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata10  1007G  200M  956G   1% /oracle/MZ0/sapdata10<br>=== 생략 ===<br>/dev/mapper/LLIDSDATVG16-oracle_MZ0_sapdata80 1007G  200M  956G   1% /oracle/MZ0/sapdata80<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata81 1007G  200M  956G   1% /oracle/MZ0/sapdata81<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata82 1007G  200M  956G   1% /oracle/MZ0/sapdata82<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata83 1007G  200M  956G   1% /oracle/MZ0/sapdata83<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata84 1007G  200M  956G   1% /oracle/MZ0/sapdata84<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata85 1007G  200M  956G   1% /oracle/MZ0/sapdata85<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata86 1007G  200M  956G   1% /oracle/MZ0/sapdata86<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata87 1007G  200M  956G   1% /oracle/MZ0/sapdata87<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata88 1007G  200M  956G   1% /oracle/MZ0/sapdata88<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata89 1007G  200M  956G   1% /oracle/MZ0/sapdata89<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata90 1007G  200M  956G   1% /oracle/MZ0/sapdata90<br><br>90개중 한개의 파일시스템을 보면 파일시스템의 block size는 4096으로 되어있습니다.<br>아래 현재 해당 서버에 설치된 DB 서버에서 I/O block사이즈는 8096으로 설정이 되어있는 상태입니다.<br>Oracle에서는 해당 db block size 값과 OS의 block size 값을 맞춰주는 것을 권고하는 것으로 알고있어서 <br>해당 파일시스템의 block size 값 조정에 관해서 문의를 드립니다.<br>[root@PIDSEL01SL:/root] tune2fs -l /dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata90<br>tune2fs 1.41.12 (17-May-2010)<br>Filesystem volume name:   &lt;none&gt;<br>Last mounted on:          &lt;not available&gt;<br>Filesystem UUID:          65099594-2bd5-4382-be65-c1069742955d<br>Filesystem magic number:  0xEF53<br>Filesystem revision #:    1 (dynamic)<br>Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize<br>Filesystem flags:         signed_directory_hash<br>Default mount options:    (none)<br>Filesystem state:         clean<br>Errors behavior:          Continue<br>Filesystem OS type:       Linux<br>Inode count:              67043328<br>Block count:              268173312<br>Reserved block count:     13408665<br>Free blocks:              263914487<br>Free inodes:              67043317<br>First block:              0<br>Block size:               4096<br>Fragment size:            4096<br>Reserved GDT blocks:      960<br>Blocks per group:         32768<br>Fragments per group:      32768<br>Inodes per group:         8192<br>Inode blocks per group:   512<br>Flex block group size:    16<br>Filesystem created:       Mon Mar  7 16:51:54 2016<br>Last mount time:          Fri Apr  1 19:11:32 2016<br>Last write time:          Fri Apr  1 19:11:32 2016<br>Mount count:              2<br>Maximum mount count:      29<br>Last checked:             Mon Mar  7 16:51:54 2016<br>Check interval:           15552000 (6 months)<br>Next check after:         Sat Sep  3 16:51:54 2016<br>Lifetime writes:          16 GB<br>Reserved blocks uid:      0 (user root)<br>Reserved blocks gid:      0 (group root)<br>First inode:              11<br>Inode size:               256<br>Required extra isize:     28<br>Desired extra isize:      28<br>Journal inode:            8<br>Default directory hash:   half_md4<br>Directory Hash Seed:      986e503b-e934-44f1-a4c1-cece2dfbb33a<br>Journal backup:           inode blocks<br><br>SQL&gt; show parameter block<br><br>NAME                                 TYPE                              VALUE<br>------------------------------------ --------------------------------- ------------------------------<br>db_block_buffers                     integer                           0<br>db_block_checking                    string                            FALSE<br>db_block_checksum                    string                            TYPICAL<br>db_block_size                        integer                           8192<br>db_file_multiblock_read_count        integer                           128<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 6.6</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 4 (Low)</b><br>======================<br><comment id="a0aA000000GnnFWIAZ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-04-04T02:11:47Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-04-04T02:11:47Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>말씀하신 것 처럼, EXT4 파일시스템 Block Size의 최대설정 가능한 값은 4096 입니다.<br><br>8192는 구성이 불가능한 상태입니다.<br>======================<br><br>조금 다른 이야기일 수는 있으나, Oracle DB의 경우 아시다시피 Hugepage를 설정하시는 것을 확인해주시기 바랍니다.<br>관련 문서는 아래 첨부드립니다.<br><br>https://access.redhat.com/articles/395013<br>======================<br>감사합니다.<br><br><publishedDate>2016-04-04T02:11:47Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GnhTbIAJ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2016-04-04T00:56:43Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2016-04-04T00:56:43Z</b><br><br>삼성생명 ERP 구축 담당하고 있는 SDS 김지민 선임입니다.<br>죄송합니다. 제가 이름을 누락하였었습니다.<br><br>Block size에 대해서 vendor의 권고를 따른다고하면 해당 파일시스템에 대해서 blocksize를 8192로 조정하는 방법에 대해서 문의드립니다.<br><br>man mkfs.ext4에서 확인해보니 block size 설정 시 -b option으로 설정하는 것 처럼 보이는데 해당 값에는 1024와 2048, 4096만 있어서<br>혹시 8192도 가능한지에 대해서 문의드립니다.<br><br><publishedDate>2016-04-04T00:56:43Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GnhPxIAJ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-04-04T00:42:24Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-04-04T00:42:24Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>1. 문의주신 분의 성함을 기재하여 주시기 바랍니다.<br><br><br>2. Block Size 설정 문의?<br><br>문의하신 내용에 대해서 다시 한 번 기재 바랍니다. 또한 저희는 Application 운영과 관련되어 해당 vendor(Oracle DB)의 권고사항을 따르시는 것을 역시 권장 드립니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-04-04T00:42:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>ext4 파일시스템에서 block size 설정 값에 대한 문의 입니다.</issue><environment>아래는 ERP 운영계 mig에서 사용될 서버의 DB 파일시스템 구조 입니다.<br>1TB의 크기 90개의 파일시스템으로 이루어져 있습니다.<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata1   1007G   11G  946G   2% /oracle/MZ0/sapdata1<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata2   1007G  200M  956G   1% /oracle/MZ0/sapdata2<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata3   1007G  200M  956G   1% /oracle/MZ0/sapdata3<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata4   1007G  200M  956G   1% /oracle/MZ0/sapdata4<br>/dev/mapper/LLIDSDATVG1-oracle_MZ0_sapdata5   1007G  200M  956G   1% /oracle/MZ0/sapdata5<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata6   1007G  200M  956G   1% /oracle/MZ0/sapdata6<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata7   1007G  200M  956G   1% /oracle/MZ0/sapdata7<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata8   1007G  200M  956G   1% /oracle/MZ0/sapdata8<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata9   1007G  200M  956G   1% /oracle/MZ0/sapdata9<br>/dev/mapper/LLIDSDATVG2-oracle_MZ0_sapdata10  1007G  200M  956G   1% /oracle/MZ0/sapdata10<br>=== 생략 ===<br>/dev/mapper/LLIDSDATVG16-oracle_MZ0_sapdata80 1007G  200M  956G   1% /oracle/MZ0/sapdata80<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata81 1007G  200M  956G   1% /oracle/MZ0/sapdata81<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata82 1007G  200M  956G   1% /oracle/MZ0/sapdata82<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata83 1007G  200M  956G   1% /oracle/MZ0/sapdata83<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata84 1007G  200M  956G   1% /oracle/MZ0/sapdata84<br>/dev/mapper/LLIDSDATVG17-oracle_MZ0_sapdata85 1007G  200M  956G   1% /oracle/MZ0/sapdata85<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata86 1007G  200M  956G   1% /oracle/MZ0/sapdata86<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata87 1007G  200M  956G   1% /oracle/MZ0/sapdata87<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata88 1007G  200M  956G   1% /oracle/MZ0/sapdata88<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata89 1007G  200M  956G   1% /oracle/MZ0/sapdata89<br>/dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata90 1007G  200M  956G   1% /oracle/MZ0/sapdata90<br><br>90개중 한개의 파일시스템을 보면 파일시스템의 block size는 4096으로 되어있습니다.<br>아래 현재 해당 서버에 설치된 DB 서버에서 I/O block사이즈는 8096으로 설정이 되어있는 상태입니다.<br>Oracle에서는 해당 db block size 값과 OS의 block size 값을 맞춰주는 것을 권고하는 것으로 알고있어서 <br>해당 파일시스템의 block size 값 조정에 관해서 문의를 드립니다.<br>[root@PIDSEL01SL:/root] tune2fs -l /dev/mapper/LLIDSDATVG18-oracle_MZ0_sapdata90<br>tune2fs 1.41.12 (17-May-2010)<br>Filesystem volume name:   &lt;none&gt;<br>Last mounted on:          &lt;not available&gt;<br>Filesystem UUID:          65099594-2bd5-4382-be65-c1069742955d<br>Filesystem magic number:  0xEF53<br>Filesystem revision #:    1 (dynamic)<br>Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize<br>Filesystem flags:         signed_directory_hash<br>Default mount options:    (none)<br>Filesystem state:         clean<br>Errors behavior:          Continue<br>Filesystem OS type:       Linux<br>Inode count:              67043328<br>Block count:              268173312<br>Reserved block count:     13408665<br>Free blocks:              263914487<br>Free inodes:              67043317<br>First block:              0<br>Block size:               4096<br>Fragment size:            4096<br>Reserved GDT blocks:      960<br>Blocks per group:         32768<br>Fragments per group:      32768<br>Inodes per group:         8192<br>Inode blocks per group:   512<br>Flex block group size:    16<br>Filesystem created:       Mon Mar  7 16:51:54 2016<br>Last mount time:          Fri Apr  1 19:11:32 2016<br>Last write time:          Fri Apr  1 19:11:32 2016<br>Mount count:              2<br>Maximum mount count:      29<br>Last checked:             Mon Mar  7 16:51:54 2016<br>Check interval:           15552000 (6 months)<br>Next check after:         Sat Sep  3 16:51:54 2016<br>Lifetime writes:          16 GB<br>Reserved blocks uid:      0 (user root)<br>Reserved blocks gid:      0 (group root)<br>First inode:              11<br>Inode size:               256<br>Required extra isize:     28<br>Desired extra isize:      28<br>Journal inode:            8<br>Default directory hash:   half_md4<br>Directory Hash Seed:      986e503b-e934-44f1-a4c1-cece2dfbb33a<br>Journal backup:           inode blocks<br><br>SQL&gt; show parameter block<br><br>NAME                                 TYPE                              VALUE<br>------------------------------------ --------------------------------- ------------------------------<br>db_block_buffers                     integer                           0<br>db_block_checking                    string                            FALSE<br>db_block_checksum                    string                            TYPICAL<br>db_block_size                        integer                           8192<br>db_file_multiblock_read_count        integer                           128</environment><cep>false</cep></case>