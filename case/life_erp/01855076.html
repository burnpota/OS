======================<br><b>생성계정 : 삼성생명 타임게이트</b><br><b>생성날짜 : 2017-05-23T08:32:09Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2017-06-18T10:02:48Z</b><br><b>id : 500A000000XLN8CIAX</b><br>======================<br><br><b><font size=15>
제목  : Need to analyze tcpdump why connection reset by peer [ 네트워크 이상증상에 따른 시스템과 tcpdump 분석 요청 ]
</font></b><br><br>======================<br><b>사전문의<br></b><br>어제 22일 3시 6분경에 네트워크에  connection reset 에러가 발생하면서  거의 전서버에서 이상 증상이 있는데요<br>OS단에서 특별히 이슈될만한  부분이 있는지 sosreport와 tcpdump파일 dropbox에  해당 이름으로 PPOSAL01SL-CASE.tar 파일 업로드합니다.<br>분석요청드립니다 감사합니다<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>PPOSAL01SL</hostname><br><br><br><comment id="a0aA000000Je0xTIAR"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-06-02T05:37:28Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-06-02T05:37:28Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>이전 코멘트에서 보셨겠지만, 저희 네트워크 전문그룹으로 connection reset by peer 와 관련되어 다시 tcpdump 분석요청하여 아래와 같은 답변을 받았습니다.<br>요약하자면, tcpdump 내에서는 peer 로부터 reset 을 받아 TCP connection 들이 종료처리 되어진 그 어떤 근거도 보지 못했다고 합니다.<br><br>- 아  래<br><br>There are 6 capture files, each 50MB.<br><br>Looking in one, 20170522_result08, there are 431 TCP streams.  Most or all appear to involve 100.254.143.141 with an ephemeral port, and some other IP with port 8080.<br>There are no RSTs. There is one case of a re-used IP ID.<br><br>20170522_result09:   361 TCP streams.  There is one that terminates with RST-bearing segments after a FIN; this is normal.<br>20170522_result10:   325 TCP streams.  All normal.<br>20170522_result11:   278 TCP streams.  There is one that terminates with RST-bearing segments after a FIN; this is normal.<br>20170522_result12:   347 TCP streams.  There is one that terminates with RST-bearing segments after a FIN; this is normal.<br>20170522_result13:   262 TCP streams.  All normal.<br><br>I do not see any evidence that a large number of TCP connections terminated with a reset from the peer.<br><br>감사합니다.<br><br><publishedDate>2017-06-02T05:37:28Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JdmhnIAB"><br>======================<br><b>생성계정 : Harris, Jeremy</b><br><b>생성날짜 : 2017-06-01T09:20:26Z</b><br><b>마지막 답변자 : Harris, Jeremy</b><br><b>마지막 수정 일자 : 2017-06-01T09:20:38Z</b><br><br>There are 6 capture files, each 50MB.<br><br>Looking in one, 20170522_result08, there are 431 TCP streams.  Most or all appear to involve 100.254.143.141 with an ephemeral port, and some other IP with port 8080.<br>There are no RSTs. There is one case of a re-used IP ID.<br><br>20170522_result09:   361 TCP streams.  There is one that terminates with RST-bearing segments after a FIN; this is normal.<br>20170522_result10:   325 TCP streams.  All normal.<br>20170522_result11:   278 TCP streams.  There is one that terminates with RST-bearing segments after a FIN; this is normal.<br>20170522_result12:   347 TCP streams.  There is one that terminates with RST-bearing segments after a FIN; this is normal.<br>20170522_result13:   262 TCP streams.  All normal.<br><br>I do not see any evidence that a large number of TCP connections terminated with a reset from the peer.<br><br><publishedDate>2017-06-01T09:20:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JdljdIAB"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-01T07:51:39Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-01T07:51:38Z</b><br><br>답변 감사합니다.<br>TCPDUMP 내용을 토대로  순차적 진행에 대한 설명 부탁드립니다.<br>(어떠한 근거에 의한 것인지 자세한 설명 부탁드립니다.)<br><br><publishedDate>2017-06-01T07:51:38Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JdkMyIAJ"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-06-01T05:14:48Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-06-01T05:14:48Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>어제 유선상으로 요청주신 tcpdump 분석요청을 저희 네트워크 전문으로 요청하여 아래와 같은 답변을 받았습니다.<br><br>요약하자면, RHEL 이 RST 패킷들을 보낸것이 아니고 받았다면 ( 또는 특정  TCP 커넥션상에, RHEL 시스템에 의해서 첫번째 RST 가 받았다면 ) 원격 시스템이 왜 RST 를<br>보냈는지는 저희가 알수가 없다는것입니다.<br><br>만약, RST 들이 많은 connection 때문에 동시에 받았다면 이는 통상적인 원인은 application closedown 또는 remote network device close down 인것을 의미합니다.<br><br>그래서, 원격지 시스템의 애플리케이션이 왜 RST 를 보냈는지 분석요청을 하시길 권장드리며, 그 이후에도 Red Hat 의 지원이 필요하시다면 다시 연락주십시오.<br><br><br>- 원 문<br><br>If the RSTs were received by the RHEL system, not sent by it  (or, if on a particular TCP connection, the _first_ RST was being received by the RHEL system) :-<br>we cannot tell why the remote system sent the RST.<br><br>If RSTs were received simultaneously for many connections, this implies a common cause - such as an application closedown or a remote network device closedown.<br><br>You are correct that there would be no useful information in the sosreport from the RHEL system if one were taken following such an occurrence.  There might be some reports<br>from applications referring to the abruptly terminated connections, but any such would not tell us why.<br><br>Your description &quot;slamming the phone down&quot; in #6 is correct.<br><br><br>[ Note ]<br><br>저희는 Subscription Account 에 등록되지 않은 이메일로는 서비스를 제공하지 않으므로, 석윤식 수석님의 이메일이 추가될 수 있도록 관리자 계정인 jimin kim 님에게<br>석윤식 수석님의 아이디 생성 요청을 하시길 바랍니다.<br><br>감사합니다.<br><br><publishedDate>2017-06-01T05:14:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JdVqsIAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-05-31T09:18:14Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-05-31T09:18:14Z</b><br><br>안녕하십니까 ?<br><br>현 케이스의  tcp덤프분석을 보다 자세하게  분석된 내용을 받고자 합니다.<br><br>해당 건은 현재 지속적으로 발생하고 있으며 운영하는데 있어 부하테스트에 차질이 있습니다. <br><br>긴급한 케이스로 모든 레드햇의 자원을 통한 자세한 분석 부탁드립니다<br><br>감사합니다<br><br>해당케이스에 대한 사항을 메일(younsik.suk@samsung.com)로 받아볼수 있도록 추가 부탁드립니다.<br> <br>######### 고객 담당자 ##########<br>삼성SDS : 석윤식 수석보 (010-9017-1274)<br>email : younsik.suk@samsung.com<br>###########################<br><br><publishedDate>2017-05-31T09:18:14Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JXs6uIAD"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-05-24T08:03:24Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-05-24T08:03:24Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>Connection reset by peer 는 연결된 상대편쪽에서 RST 패킷을 보낼 경우에 출력되는 메시지입니다. 상대방쪽에서 프로그램이 연결을 먼저 끊은것이 문제의 원인일것입니다.<br>그래서, 네트워크 측면 ( 스위치 및 라우터 ) 의 일시적인 오류 및 단절 현상이 없었는지를 확인해보시고, 문제를 직면한 시스템들과 통신하는 상대방 ( 서버 혹은 클라이언트 )<br>시스템들에서 이슈발생시 어떠한 상황이었는지 확인해볼 필요가 있습니다.<br><br>The remote server has sent you a RST packet, which indicates an immediate dropping of the connection, rather than the usual handshake. This bypasses the<br>normal half-closed state transition.<br><br>&quot;Connection reset by peer&quot; is the TCP/IP equivalent of slamming the phone back on the hook. It's more polite than merely not replying, leaving one hanging.<br>But it's not the FIN-ACK expected of the truly polite TCP/IP converseur.<br><br>감사합니다.<br><br><publishedDate>2017-05-24T08:03:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JXn3YIAT"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2017-05-24T04:02:56Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2017-05-24T04:02:56Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>현재 올려주신 문의내용을 자세히 살펴보고 있는중이며 확인이 되는대로 업데이트를 남기도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-05-24T04:02:56Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>