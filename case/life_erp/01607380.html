======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-03-28T07:22:19Z</b><br><b>마지막 답변자 : 우택 심</b><br><b>마지막 수정 일자 : 2016-04-01T00:57:58Z</b><br><b>id : 500A000000TvIkGIAV</b><br>======================<br><br><b><font size=15>
제목  : RHEL7.2 CPU Core 최대 성능 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>현재 SAP Migration 성능 테스트를 진행 중인데요,<br><br>처리하려는 프로세스를 늘려도 CPU 에서 발휘할 수 있는 성능이 한계가 있는 것처럼 보여 문의 드립니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>수집한 데이터를 간략히 보면 아래와 같습니다.<br><br>root@PPMSAL01SL /root # dmidecode --type 1<br># dmidecode 2.12-dmifs<br>SMBIOS 2.8 present.<br><br>Handle 0x0011, DMI type 1, 27 bytes<br>System Information<br>        Manufacturer: HP<br>        Product Name: ProLiant DL580 Gen9<br>        Version: Not Specified<br>        Serial Number: SGH547XCJ1<br>        UUID: 31333937-3136-4753-4835-343758434A31<br>        Wake-up Type: Power Switch<br>        SKU Number: 793161-B21<br>        Family: ProLiant<br><br> <br><br><br>root@PPMSAL01SL /root # lscpu<br>Architecture:          x86_64<br>CPU op-mode(s):        32-bit, 64-bit<br>Byte Order:            Little Endian<br>CPU(s):                28<br>On-line CPU(s) list:   0-27<br>Thread(s) per core:    1<br>Core(s) per socket:    7<br>Socket(s):             4<br>NUMA node(s):          4<br>Vendor ID:             GenuineIntel<br>CPU family:            6<br>Model:                 63<br>Model name:            Intel(R) Xeon(R) CPU E7-8891 v3 @ 2.80GHz<br>Stepping:              4<br>CPU MHz:               2793.232<br>BogoMIPS:              5611.35<br>Virtualization:        VT-x<br>L1d cache:             32K<br>L1i cache:             32K<br>L2 cache:              256K<br>L3 cache:              46080K<br>NUMA node0 CPU(s):     0-3,14-16<br>NUMA node1 CPU(s):     4-6,17-20<br>NUMA node2 CPU(s):     7-10,21-23<br>NUMA node3 CPU(s):     11-13,24-27<br><br> <br><br><br>root@PPMSAL01SL /root # numastat<br>                           node0           node1           node2           node3<br>numa_hit              2627744256      3746558115      5099431064      3404136875<br>numa_miss                8963059               0               0               0<br>numa_foreign                   0               0               0         8963059<br>interleave_hit            104668          104665          104662          104667<br>local_node            2627613653      3746327161      5099155507      3403965948<br>other_node               9093662          230954          275557          170927<br><br> <br><br><br>root@PPMSAL01SL /root # mpstat -P ALL<br>Linux 3.10.0-327.el7.x86_64 (PPMSAL01SL)        03/28/16        _x86_64_        (28 CPU)<br><br>Average:     CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle<br>Average:     all   51.87    0.00   10.24    0.37    0.00    0.28    0.00    0.00    0.00   37.24<br>Average:       0   51.71    0.00   10.52    0.38    0.00    0.00    0.00    0.00    0.00   37.39<br>Average:       1   52.97    0.00   10.37    0.38    0.00    0.13    0.00    0.00    0.00   36.16<br>Average:       2   51.90    0.00   10.15    0.38    0.00    0.00    0.00    0.00    0.00   37.56<br>Average:       3   51.46    0.00    9.76    0.51    0.00    0.00    0.00    0.00    0.00   38.28<br>Average:       4   48.16    0.00    9.63    0.38    0.00    0.00    0.00    0.00    0.00   41.83<br>Average:       5   48.49    0.00   10.33    0.25    0.00    0.00    0.00    0.00    0.00   40.93<br>Average:       6   48.80    0.00   10.27    0.25    0.00    0.00    0.00    0.00    0.00   40.68<br>Average:       7   50.57    0.00    9.84    0.38    0.00    0.00    0.00    0.00    0.00   39.22<br>Average:       8   48.61    0.00    9.34    0.51    0.00    0.13    0.00    0.00    0.00   41.41<br>Average:       9   48.92    0.00    9.63    0.38    0.00    0.00    0.00    0.00    0.00   41.06<br>Average:      10   48.67    0.00    9.48    0.38    0.00    0.13    0.00    0.00    0.00   41.34<br>Average:      11   55.82    0.00   10.76    0.38    0.00    0.00    0.00    0.00    0.00   33.04<br>Average:      12   52.02    0.00   10.61    0.51    0.00    0.00    0.00    0.00    0.00   36.87<br>Average:      13   54.84    0.00    9.94    0.38    0.00    0.00    0.00    0.00    0.00   34.84<br>Average:      14   50.76    0.00   11.93    0.25    0.00    0.13    0.00    0.00    0.00   36.93<br>Average:      15   51.27    0.00   10.63    0.25    0.00    0.13    0.00    0.00    0.00   37.72<br>Average:      16   50.69    0.00   10.09    0.38    0.00    0.00    0.00    0.00    0.00   38.84<br>Average:      17   47.77    0.00   10.06    0.51    0.00    0.00    0.00    0.00    0.00   41.66<br>Average:      18   48.04    0.00    9.86    0.38    0.00    0.00    0.00    0.00    0.00   41.72<br>Average:      19   47.92    0.00   10.06    0.38    0.00    0.00    0.00    0.00    0.00   41.64<br>Average:      20   47.36    0.00   10.05    0.38    0.00    0.00    0.00    0.00    0.00   42.21<br>Average:      21   50.25    0.00   10.53    0.25    0.00    0.00    0.00    0.00    0.00   38.96<br>Average:      22   50.13    0.00    9.52    0.38    0.00    0.00    0.00    0.00    0.00   39.97<br>Average:      23   50.31    0.00    9.56    0.50    0.00    0.13    0.00    0.00    0.00   39.50<br>Average:      24   67.69    0.00   11.49    0.13    0.00    6.90    0.00    0.00    0.00   13.79<br>Average:      25   60.33    0.00   10.96    0.25    0.00    0.00    0.00    0.00    0.00   28.46<br>Average:      26   58.72    0.00   10.79    0.25    0.00    0.00    0.00    0.00    0.00   30.24<br>Average:      27   58.22    0.00   10.79    0.38    0.00    0.00    0.00    0.00    0.00   30.61<br><br> <br><br><br>root@PPMSAL01SL /root # sar -q 1<br>Linux 3.10.0-327.el7.x86_64 (PPMSAL01SL)        03/28/16        _x86_64_        (28 CPU)<br><br>14:55:01      runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>14:55:02           19      1345     20.70     20.33     20.04         0<br>14:55:03           25      1345     19.69     20.13     19.98         0<br>14:55:04           10      1345     19.69     20.13     19.98         0<br>14:55:05           19      1345     19.69     20.13     19.98         0<br>14:55:06           14      1345     19.69     20.13     19.98         0<br>14:55:07           18      1345     19.69     20.13     19.98         0<br>14:55:08           13      1345     19.55     20.09     19.97         0<br>14:55:09           16      1345     19.55     20.09     19.97         0<br>14:55:10           24      1345     19.55     20.09     19.97         0<br>14:55:11           32      1345     19.55     20.09     19.97         4<br>14:55:12           22      1345     19.55     20.09     19.97         7<br>14:55:13           11      1345     18.87     19.94     19.92         0<br>14:55:14           22      1345     18.87     19.94     19.92         0<br>14:55:15           20      1345     18.87     19.94     19.92         0<br>14:55:16           14      1350     18.87     19.94     19.92         0<br>14:55:17           10      1345     18.87     19.94     19.92         0<br>14:55:18           20      1345     18.40     19.82     19.88         0<br>14:55:19           12      1345     18.40     19.82     19.88         0<br>14:55:20           26      1345     18.40     19.82     19.88         0<br>14:55:21           21      1345     18.40     19.82     19.88         0<br>14:55:22           12      1345     18.40     19.82     19.88         0<br>14:55:23           18      1343     18.85     19.89     19.90         0<br>14:55:24           22      1343     18.85     19.89     19.90         1<br>14:55:25           20      1342     18.85     19.89     19.90         1<br>14:55:26           23      1342     18.85     19.89     19.90         0<br>14:55:27           23      1342     18.85     19.89     19.90         0<br>14:55:28           19      1342     18.70     19.85     19.89         0<br>14:55:29           19      1344     18.70     19.85     19.89         0<br>14:55:30           15      1340     18.70     19.85     19.89         0<br>14:55:31           30      1344     18.70     19.85     19.89         0<br>14:55:32           26      1340     18.70     19.85     19.89         0<br>14:55:33           20      1340     17.60     19.60     19.81         0<br>14:55:34           25      1340     17.60     19.60     19.81         4<br>14:55:35           16      1340     17.60     19.60     19.81         0<br>14:55:36           22      1340     17.60     19.60     19.81         0<br>14:55:37           18      1341     17.60     19.60     19.81         0<br>14:55:38           13      1341     18.75     19.81     19.87         0<br>14:55:39           12      1343     18.75     19.81     19.87         0<br>14:55:40           23      1343     18.75     19.81     19.87         0<br>14:55:41           16      1343     18.75     19.81     19.87         0<br>14:55:42           20      1344     18.75     19.81     19.87         1<br>14:55:43           15      1344     18.37     19.71     19.84         0<br>14:55:44           13      1344     18.37     19.71     19.84         0<br>14:55:45           15      1344     18.37     19.71     19.84         0<br>14:55:46           17      1341     18.37     19.71     19.84         0<br>14:55:47           33      1345     18.37     19.71     19.84         0<br>14:55:48           14      1341     17.62     19.53     19.78         0<br>14:55:49           26      1341     17.62     19.53     19.78         0<br>14:55:50           19      1341     17.62     19.53     19.78         0<br>14:55:51           13      1342     17.62     19.53     19.78         0<br>14:55:52           18      1342     17.62     19.53     19.78         0<br>14:55:53           21      1342     17.49     19.47     19.76         0<br>14:55:54           14      1342     17.49     19.47     19.76         0<br>14:55:55           25      1342     17.49     19.47     19.76         0<br>14:55:56           17      1342     17.49     19.47     19.76         0<br><br> <br><br><br>root@PPMSAL01SL /root # dstat --time --cpu --mem --net --disk --sys --load --proc 1<br>----system---- ----total-cpu-usage---- ------memory-usage----- -net/total- -dsk/total- ---system-- ---load-avg--- ---procs---<br>     time     |usr sys idl wai hiq siq| used  buff  cach  free| recv  send| read  writ| int   csw | 1m   5m  15m |run blk new<br>28-03 14:57:00|  2   1  98   0   0   0|65.7G 2332k  137G  458G|   0     0 |4360B   35k|1776  4431 |18.2 19.3 19.7|0.0   0  17<br>28-03 14:57:01| 52  10  37   0   0   0|65.7G 2332k  137G  458G|8718k 5079k|4096B    0 |  54k   90k|18.2 19.3 19.7| 20   0  38<br>28-03 14:57:02| 51  11  37   0   0   0|65.7G 2332k  137G  458G|7209k 4139k|4096B 4096B|  52k   91k|18.2 19.3 19.7| 11   0  21<br>28-03 14:57:03| 51  10  38   1   0   0|65.7G 2332k  137G  458G|8599k 4334k|4096B    0 |  54k   90k|18.8 19.4 19.7| 26   0  18<br>28-03 14:57:04| 52  11  37   0   0   0|65.7G 2332k  137G  458G|8820k 5373k|   0    24k|  56k   90k|18.8 19.4 19.7| 15   0 5.0<br>28-03 14:57:05| 52  10  37   1   0   0|65.7G 2332k  137G  458G|6043k 7201k|4096B    0 |  68k  104k|18.8 19.4 19.7| 24   0  13<br>28-03 14:57:06| 54  11  35   0   0   0|65.7G 2332k  137G  458G|  10M 7734k|4096B    0 |  65k  100k|18.8 19.4 19.7| 17   0  18<br>28-03 14:57:07| 55  10  34   1   0   0|65.7G 2332k  137G  458G|  10M 7376k|4096B    0 |  69k   96k|18.8 19.4 19.7| 11   0  18<br>28-03 14:57:08| 52  11  36   1   0   0|65.7G 2332k  137G  458G|8419k 7098k|4096B    0 |  66k   99k|18.0 19.2 19.6| 23   0  18<br>28-03 14:57:09| 52  11  37   0   0   0|65.7G 2332k  137G  458G|9103k 7095k|4096B   56k|  60k   94k|18.0 19.2 19.6|9.0   0  18<br>28-03 14:57:10| 50  10  39   0   0   0|65.7G 2332k  137G  458G|6409k 5870k|4096B    0 |  58k  100k|18.0 19.2 19.6| 18   0  18<br>28-03 14:57:11| 51  10  38   0   0   0|65.7G 2332k  137G  458G|6614k 4871k|4096B    0 |  55k   93k|18.0 19.2 19.6| 17   0  18<br>28-03 14:57:12| 51  10  38   0   0   0|65.7G 2332k  137G  458G|7345k 5852k|4096B 4096B|  54k   95k|18.0 19.2 19.6| 23   0  18<br>28-03 14:57:13| 52  10  37   0   0   0|65.7G 2332k  137G  458G|  10M 7191k|4096B 8192B|  61k   96k|18.5 19.3 19.7| 20   0  18<br>28-03 14:57:14| 52  10  38   0   0   0|65.7G 2332k  137G  458G|7709k 6119k|4096B   28k|  56k   95k|18.5 19.3 19.7| 11   0  18<br>28-03 14:57:15| 52  10  37   0   0   0|65.8G 2332k  137G  458G|8090k 7278k|4096B    0 |  62k  100k|18.5 19.3 19.7| 18   0  18<br>28-03 14:57:16| 52  10  37   0   0   0|65.8G 2332k  137G  458G|7378k 7876k|4096B    0 |  49k   93k|18.5 19.3 19.7| 19   0  19<br>28-03 14:57:17| 49  10  40   1   0   0|65.8G 2332k  137G  458G|5814k 1257k|4096B    0 |  43k   91k|18.5 19.3 19.7| 17   0  20<br>28-03 14:57:18| 54  11  34   0   0   0|65.8G 2332k  137G  458G|  12M 6097k|4096B   44k|  58k   86k|18.1 19.2 19.6| 22   0  19<br>28-03 14:57:19| 50  11  38   0   0   0|65.8G 2332k  137G  458G|8634k 5575k|4096B   16k|  54k   92k|18.1 19.2 19.6| 21 1.0  25<br>28-03 14:57:20| 50  10  40   0   0   0|65.8G 2332k  137G  458G|5667k 4085k|   0     0 |  48k   91k|18.1 19.2 19.6| 22   0 4.0<br>28-03 14:57:21| 52  10  37   0   0   0|65.8G 2332k  137G  458G|9476k 7276k|4096B    0 |  65k   98k|18.1 19.2 19.6| 25   0  18<br>28-03 14:57:22| 55  10  34   0   0   0|65.8G 2332k  137G  458G|  10M 9902k|4096B  281k|  75k  103k|18.1 19.2 19.6| 11   0  18<br>28-03 14:57:23| 54  10  35   0   0   0|65.8G 2332k  137G  458G|9066k 7780k|4096B  512k|  70k   99k|18.4 19.2 19.6| 31   0  21<br>28-03 14:57:24| 52  10  37   0   0   0|65.8G 2332k  137G  458G|9371k 6474k|4096B  288k|  61k   97k|18.4 19.2 19.6| 21   0  18<br>28-03 14:57:25| 53  10  36   0   0   0|65.8G 2332k  137G  458G|8494k 7189k|4096B    0 |  62k  101k|18.4 19.2 19.6| 13   0  18<br>28-03 14:57:26| 51  11  38   0   0   0|65.8G 2332k  137G  458G|6460k 6194k|4096B    0 |  62k  105k|18.4 19.2 19.6| 19   0  18<br>28-03 14:57:27| 52  11  37   1   0   0|65.8G 2332k  137G  458G|7778k 5570k|4096B    0 |  62k   97k|18.4 19.2 19.6| 22   0  18<br>28-03 14:57:28| 52  10  37   1   0   0|65.8G 2332k  137G  458G|6764k 6486k|4096B  204k|  61k   96k|18.2 19.2 19.6| 15   0  18<br>28-03 14:57:29| 52  11  37   0   0   0|65.8G 2332k  137G  458G|8455k 7766k|4096B   44k|  61k   96k|18.2 19.2 19.6| 19   0  18<br>28-03 14:57:30| 53  10  36   0   0   0|65.8G 2332k  137G  458G|9008k 8741k|4096B    0 |  75k  107k|18.2 19.2 19.6| 11   0  18<br>28-03 14:57:31| 53  10  36   0   0   0|65.8G 2332k  137G  458G|9694k   10M|4096B    0 |  74k  107k|18.2 19.2 19.6| 21   0  18<br>28-03 14:57:32| 51  10  39   0   0   0|65.8G 2332k  137G  458G|7945k 7408k|4096B 4096B|  63k  102k|18.2 19.2 19.6| 13   0  18<br>28-03 14:57:33| 50  10  40   0   0   0|65.8G 2332k  137G  458G|6548k 5363k|4096B   52k|  54k   98k|18.3 19.2 19.6| 25   0  18<br>28-03 14:57:34| 49  11  39   1   0   0|65.8G 2332k  137G  458G|9498k 5761k|4096B   40k|  56k   99k|18.3 19.2 19.6| 24   0  18<br>28-03 14:57:35| 49  10  40   0   0   0|65.8G 2332k  137G  458G|6711k 4886k|4096B    0 |  54k  103k|18.3 19.2 19.6| 26 4.0  17<br>28-03 14:57:36| 50  11  39   0   0   0|65.8G 2332k  137G  458G|7944k 5955k|   0     0 |  58k  102k|18.3 19.2 19.6| 26   0 2.0<br>28-03 14:57:37| 52  11  37   0   0   0|65.8G 2332k  137G  458G|  10M 6884k|4096B    0 |  61k   96k|18.3 19.2 19.6| 28   0  18<br>28-03 14:57:38| 51  10  38   0   0   0|65.8G 2332k  137G  458G|9791k 7044k|4096B    0 |  63k  101k|18.7 19.2 19.6| 15   0  19<br>28-03 14:57:39| 51  11  38   0   0   0|65.8G 2332k  137G  458G|7102k 5168k|4096B   68k|  51k   89k|18.7 19.2 19.6| 25   0  19<br>28-03 14:57:40| 52  11  37   0   0   0|65.8G 2332k  137G  458G|  11M 4556k|4096B    0 |  51k   87k|18.7 19.2 19.6| 20   0  18<br>28-03 14:57:41| 51  10  38   1   0   0|65.8G 2332k  137G  458G|7923k 3581k|4096B    0 |  48k   89k|18.7 19.2 19.6| 20 1.0  18<br>28-03 14:57:42| 51  11  37   1   0   0|65.8G 2332k  137G  458G|9196k 4927k|4096B    0 |  57k   91k|18.7 19.2 19.6| 22   0  18<br>28-03 14:57:43| 51  11  37   1   0   0|65.8G 2332k  137G  458G|8415k 4328k|4096B 8192B|  56k   90k|18.8 19.3 19.6| 17 1.0  18<br><br> <br><br><br>root@PPMSAL01SL /root # iostat<br>Linux 3.10.0-327.el7.x86_64 (PPMSAL01SL)        03/28/16        _x86_64_        (28 CPU)<br><br>avg-cpu:  %user   %nice %system %iowait  %steal   %idle<br>           1.80    0.00    0.58    0.02    0.00   97.60<br><br>Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn<br>sda               0.56         0.91        24.41    2350565   63031929<br>sdb               0.83         3.33         0.00    8598320          0<br>dm-0              0.02         0.10         0.28     268348     714672<br>dm-1              0.01         0.01         1.75      26336    4522645<br>dm-2              0.19         0.08         2.21     219285    5695122<br>dm-3              0.58         0.02         5.13      42666   13254391<br>dm-4              0.59         0.26         5.03     662643   12983630<br>dm-5              0.00         0.00         0.00        504          0<br>dm-6              0.00         0.00         0.00        504          0<br>dm-7              0.00         0.00         0.00        504          0<br>dm-8              0.00         0.00         0.00        504          0<br>dm-9              0.00         0.00         0.00        984          0<br>dm-10             0.00         0.00         0.00        504          0<br>dm-11             0.00         0.00         0.00        504          0<br>dm-12             0.15         0.06         2.20     142567    5689824<br>dm-13             1.14         0.27        10.16     704197   26238021<br>dm-14             0.00         0.03         0.00      71001       2925<br>dm-15             0.00         0.00         0.00       5044       2372<br>dm-16             0.00         0.00         0.00        637       2132<br>dm-17             0.00         0.00         0.00        504          0<br>dm-18             0.00         0.00         0.00        504          0<br>dm-19             0.00         0.00         0.00        504          0<br>dm-20             0.00         0.00         0.00       1315        252<br>dm-21             0.00         0.00         0.00        504          0<br>dm-22             0.00         0.00         0.00        747          0<br>dm-23             0.00         0.00         0.00        596          0<br>dm-24             0.00         0.00         0.00       1072       2384<br>sdal              0.05         0.00         0.56       1297    1448677<br>sdan              0.14         0.00         1.17       1281    3030511<br>sdap              0.15         0.00         1.16       7466    2995944<br>sdak              0.05         0.00         0.56        710    1457721<br>sdam              0.14         0.00         1.17        701    3025882<br>sdao              0.15         0.00         1.15       7260    2975453<br>sdj               0.00         0.00         0.00        399         40<br>sdh               0.00         0.00         0.00        399          0<br>sdd               0.00         0.00         0.00        403          0<br>sdc               0.00         0.00         0.00        403          0<br>sdk               0.00         0.00         0.00        399          0<br>sdl               0.00         0.00         0.00        399          0<br>sde               0.00         0.00         0.00        403          0<br>sdp               0.00         0.00         0.00        403          0<br>sdm               0.00         0.00         0.00        399          0<br>sdi               0.00         0.00         0.00        399          0<br>sdf               0.00         0.00         0.00        403          0<br>sdg               0.00         0.00         0.00        459          0<br>sdo               0.00         0.00         0.00        430          0<br>sdn               0.00         0.00         0.00        434          0<br>sdv               0.00         0.00         0.00        419          0<br>sdx               0.00         0.00         0.00        419         41<br>sdr               0.00         0.00         0.00        415          0<br>sdy               0.00         0.00         0.00        419          0<br>sdad              0.00         0.00         0.00        415          0<br>sds               0.00         0.00         0.00        415          0<br>sdz               0.00         0.00         0.00        419          0<br>sdw               0.00         0.00         0.00        419          0<br>sdq               0.00         0.00         0.00        415          0<br>sdaa              0.00         0.00         0.00        419          0<br>sdu               0.00         0.00         0.00        443          0<br>sdab              0.00         0.00         0.00        394        243<br>sdt               0.00         0.00         0.00        415          0<br>sdac              0.00         0.00         0.00        450          0<br>sdae              0.05         0.00         0.27        377     701701<br>sdaf              0.13         0.00         1.16        362    3005411<br>sdag              0.15         0.00         1.15       7347    2979555<br>sdah              0.05         0.00         0.27        366     696526<br>sdai              0.13         0.00         1.16        365    3006685<br>sdaj              0.15         0.00         1.15       7219    2962024<br><br> <br><br><br>root@PPMSAL01SL /root # ifstat<br>#kernel<br>Interface        RX Pkts/Rate    TX Pkts/Rate    RX Data/Rate    TX Data/Rate<br>                 RX Errs/Drop    TX Errs/Drop    RX Over/Rate    TX Coll/Rate<br>lo                95246K 0        95246K 0         2769M 0         2769M 0<br>                       0 0             0 0             0 0             0 0<br>eno49                  0 0             0 0             0 0             0 0<br>                       0 0             0 0             0 0             0 0<br>eno50                  0 0             0 0             0 0             0 0<br>                       0 0             0 0             0 0             0 0<br>ens8f1              9589 0             0 0        579028 0             0 0<br>                       0 9589          0 0             0 0             0 0<br>ens6f0            112418 0        103454 0        10569K 0         9978K 0<br>                       0 0             0 0             0 0             0 0<br>eno51                  0 0             0 0             0 0             0 0<br>                       0 0             0 0             0 0             0 0<br>eno52                  0 0             0 0             0 0             0 0<br>                       0 0             0 0             0 0             0 0<br>ens5f1             2468K 0        262348 0         1690M 0       379017K 0<br>                       0 2322K         0 0             0 0             0 0<br>ens2f0             2822M 0         3173M 0       389091K 0         2766M 0<br>                       0 1123          0 0             0 0             0 0<br>bond0              2824M 0         3173M 0         2079M 0         3145M 0<br>                       0 2323K         0 0             0 0             0 0<br>bond1             122007 0        103454 0        11148K 0         9978K 0<br>                       0 9589          0 0             0 0             0 0<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>mpstat -P ALL 로 수집한 데이터를 보면 CPU idle 의 값이 100개의 데이터를 넣든, 200개의 데이터를 넣든 동일한 패턴을 보이고 있습니다.<br><br>Migration 시 좀 더 많은 데이터를 유입시켜 동시에 CPU 에 부하를 주고 싶어도 use+sys 합쳐 최대 70% 를 넘지를 못하고 있습니다.<br><br>단 최초 Migration 프로세스를 구동시에는 90% 이상 과부하가 걸리다가 곧바로 50% 성능으로 떨어 집니다.<br><br>이 현상이 정상적인지 아니면 사용자가 생성하는 프로세스에서 한계(Limit) 이 있는지 확인 부탁드립니다.<br><br>문제 해결 기간 및  긴급도와 관련된 정보를 제공해 주시겠습니까?<br><br>현재 문의드리는 시스템은 1대 샘플을 예로 들었지만,<br><br>PMS 업무군 전체 서버가 동일한 현상을 보이고 있습니다.<br><br>관련 sosreport 를 올리겠습니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000GmmZYIAZ"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-04-01T00:57:34Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-04-01T00:57:34Z</b><br><br>감사합니다.<br><br>내부적으로 협의 후 rx Drop 문제는 ethtool -G rx 4096 tx 4096 으로 변경하려고 합니다.<br><br>관련 케이스는 다시 오픈하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-04-01T00:57:34Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GmM6cIAF"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-03-30T08:20:55Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-03-30T08:20:55Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>업데이트 감사합니다.<br><br><br>우선 보내주신 데이터를 확인해 볼때 크게 bottle-neck으로 인한 성능 저하 부분은 파악되지 못하였습니다.<br>======================<br>다만, 참고적으로 현재 해당 시스템의 network packet drop 현상이 자주 발생하고 있는 것으로 보입니다.<br><br>  Interface Errors:<br>    ens2f0  rx_dropped: 1123<br>    - - - - - - - - - - - - - - - - - - -<br>    ens5f1  rx_dropped: 2322362<br>    - - - - - - - - - - - - - - - - - - -<br>    ens8f1  rx_dropped: 9589<br><br><br>해당 현상은 대량의 데이터가 유입되거나 또는 NIC 장치, 케이블 및 기타 network switch로 부터의 이슈가 있을 수 있습니다.<br><br>이러한 부분은 향후를 위해서라도 한 번 검토해보시기 바랍니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-03-30T08:20:55Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GmIDCIA3"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2016-03-30T00:51:35Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2016-03-30T00:51:35Z</b><br><br>SAP쪽도 case open을 통해서 분석을 요청하였었는데 현재 생명쪽 BC분으로 부터 따로 분석은 하지 않아도 될 것 같다고 답변을 받았습니다.<br><br>아래는 제가 확인한 내역입니다.<br>=============================================================================<br><br>Redhat 분석 감사합니다.<br><br>본 사항은 Redhat 보다는 SAP Application 레벨의 내용같고, Redhat OS쪽과는 무관한것같습니다.<br><br><br>Redhat OS, H/W 측면에서는 bottleneck 위주로만 보시면 될듯합니다.<br><br>(waiting 이 걸린다는든지.., swapping이 발생한다는듯, I/O가 몰리는 부분이 있다든지...)<br><br> <br>안녕하십니까? <br><br> <br><br>김지민 선임입니다.<br><br>mig 테스트 도중 FS-PM 업무에서 배치의 양이 늘어나지만 CPU 사용률이 증가하지 않는 문제 관련 redhat 문의 중 <br><br>sap도 같이 문제에 대해서 확인이 필요할 듯하여 sap쪽 case open 요청을 드리려고 합니다.<br><br>아래는 redhat TAM의 답변입니다.<br><br>==============================================================================<br><br>안녕하세요, Red Hat 한진구 입니다. 우선 올려주신 내용을 정리해보면, * 구성환경 정보 DB (UNIX) &gt; SLT(SAP Landscape Transformation) replication &gt; FS-PM (AP-DB) - FS(AP-DB)는 Linux이며 한대의 시스템. DB는 무엇인지 현재 모름. * 이슈 - SLT를 이용한 성능 테스트를 하였으며, - 120개의 배치를 실행하게 되면.. 이때 FS-PM(AP/DB) 시스템의 CPU 사용율이 65-70%를 넘지 않음. (이해해 볼떄 해당 배치 프로세스는 SLT의 설정인 것으로 유추) - 160개의 배치를 실행하게 되더라도 FS-PM(AP/DB) 시스템의 CPU 사용율은 65-70% - 왜 배치가 늘어남에도 불구하고 FS-PM(AP/DB)의 CPU사용율이 늘지 않는가? 내용을 정리할때 위와 같은 내용으로 이해하였습니다. 현재 이 구성에서 퍼포먼스를 확인 및 FS-PM(AP/DB)의 CPU 사용율이 왜 높아지지 않는지를 확인하기 위해서는 Application 즉 SAP에서 먼저 모니터링 및 확인이 1차적으로 필요할 것 같습니다. 물론 그 1차 과정에서 각 시스템별 transaction의 병목이라든지 또는 SAP가 workload 부하를 어떻게 주고 있는지에 대한 확인이 필요해 보입니다. 그래서 저는 현재 SAP 측면에서의 먼저 확인이 필요할 것으로 보입니다. 또한 SAP와 Red Hat의 경우 SAP이슈인지? RHEL이슈인가 명확하지 않은경우 SAP에 케이스를 먼저 올리는 것이 SAP와 Red Hat의 workflow에 해당됩니다. 그래서 SAP쪽으로 케이스를 오픈하시고 해당 케이스 번호를 주시면 SAP 엔지니어가 우선적으로 검토 후, 필요시 SAP ticketing 시스템에 제가 참여하여 해당 이슈를 지원하도록 하겠습니다. SAP케이스를 오픈하신후에 케이스 번호를 공유 바랍니다. 감사합니다.<br><br>==============================================================================<br><br>감사합니다.<br>=============================================================================<br><br><publishedDate>2016-03-30T00:51:35Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Gm1a9IAB"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2016-03-29T07:33:57Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2016-03-29T07:33:57Z</b><br><br>추가 확인결과 120개 배치 수행시와 160개 배치 수행시 처리시간 지연은 없었다고 합니다.<br><br><publishedDate>2016-03-29T07:33:57Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Gm1CWIAZ"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-03-29T06:58:15Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-03-29T06:58:14Z</b><br><br>안녕하세요.<br><br>SAP 케이스 오픈 관련해서 내부적으로 논의중이며,<br><br>일단 누락되었던 분석에 필요한 sosreport 와 sardata 를 dropbox.redhat.com/incoming 에 업로드 하였습니다.<br><br>감사합니다.<br><br>sardata-PPMSAL01SL-20160328.tar.gz<br>sosreport-PPMSAL01SL-20160328151257.tar.xz<br><br><publishedDate>2016-03-29T06:58:14Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Gm0JgIAJ"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-03-29T05:00:05Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-03-29T05:00:04Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>우선 올려주신 내용을 정리해보면,<br><br>* 구성환경 정보<br>DB (UNIX) &gt; SLT(SAP Landscape Transformation) replication &gt; FS-PM (AP-DB)<br><br>- FS(AP-DB)는 Linux이며 한대의 시스템. DB는 무엇인지 현재 모름.<br>======================<br>* 이슈<br>- SLT를 이용한 성능 테스트를 하였으며,<br>- 120개의 배치를 실행하게 되면.. 이때 FS-PM(AP/DB) 시스템의 CPU 사용율이 65-70%를 넘지 않음. (이해해 볼떄 해당 배치 프로세스는 SLT의 설정인 것으로 유추)<br>- 160개의 배치를 실행하게 되더라도 FS-PM(AP/DB) 시스템의 CPU 사용율은 65-70%<br>- 왜 배치가 늘어남에도 불구하고 FS-PM(AP/DB)의 CPU사용율이 늘지 않는가?<br>======================<br>내용을 정리할때 위와 같은 내용으로 이해하였습니다.<br>현재 이 구성에서 퍼포먼스를 확인 및 FS-PM(AP/DB)의 CPU 사용율이 왜 높아지지 않는지를 확인하기 위해서는 Application 즉 SAP에서 먼저 모니터링 및 확인이 1차적으로 필요할 것 같습니다.<br>물론 그 1차 과정에서 각 시스템별 transaction의 병목이라든지 또는 SAP가 workload 부하를 어떻게 주고 있는지에 대한 확인이 필요해 보입니다.<br><br><br>그래서 저는 현재 SAP 측면에서의 먼저 확인이 필요할 것으로 보입니다.<br>또한 SAP와 Red Hat의 경우 SAP이슈인지? RHEL이슈인가 명확하지 않은경우 SAP에 케이스를 먼저 올리는 것이 SAP와 Red Hat의 workflow에 해당됩니다. 그래서 SAP쪽으로 케이스를 오픈하시고 해당 케이스 번호를 주시면 SAP 엔지니어가 우선적으로 검토 후, 필요시 SAP ticketing 시스템에 제가 참여하여 해당 이슈를 지원하도록 하겠습니다.<br>======================<br>SAP케이스를 오픈하신후에 케이스 번호를 공유 바랍니다.<br><br><br>감사합니다.<br><br><publishedDate>2016-03-29T05:00:04Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Glz8VIAR"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2016-03-29T01:23:48Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2016-03-29T01:23:48Z</b><br><br>2. Migration시 데이터를 어떻게 유입시키고 있는지요? 자세한 설명 바랍니다.<br>    -&gt; 1차테스트시 서버당 120개의 배치 프로세스를 수행시켜 데이터를  DB로 적재<br>         2차테스트시 서버당 160개의 배치 프로세스를 수행시켜 데이터를  DB로 적재<br>         1, 2차 성능 비교시 CPU 사용률 차이 없음(65%~70%)<br><br><publishedDate>2016-03-29T01:23:48Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GlpR7IAJ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2016-03-28T09:31:39Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2016-03-28T09:31:39Z</b><br><br>1. &quot;SAP Migration 성능 테스트를 진행 중&quot;, SAP Migration을 어떻게 수행하는지에 대한 자세한 설명 부탁드립니다.<br>    -&gt; SAP의 SLT 마이그레이션 툴을 활요하여 기존 시스템(마이그레이션 대상)의 DB 데이터를 신규 시스템의 AP를 통해 DB로 적재하는 작업입니다.<br>       기존 시스템(DB) -&gt; SLT(SAP 마이그 솔루션) -&gt; FS-PM AP -&gt; FS-PM DB<br><br>2. Migration시 데이터를 어떻게 유입시키고 있는지요? 자세한 설명 바랍니다.<br>    -&gt; 확인 후 답변 드리겠습니다.<br><br>3. &quot;단 최초 Migration 프로세스를 구동시에는 90% 이상 과부하가 걸리다가 곧바로 50% 성능으로 떨어 집니다.&quot; 50%로 떨어져서 문제라고 생각하는 고려사항이 어떤 것인지요? 그리고.. 50%로 떨어지나 Migration이 오랫동안 끝나지 않는 것인지요?<br>    -&gt; 50%로 떨어져서 마이그레이션이 늦어지는 것이 문제가 아니라 마이그레이션 배치 작업 수를 늘려도 자원 활용률이 높아지지 않는 것이 이해되지 않는 상황으로 해당 케이스를 오픈하였습니다.<br><br><publishedDate>2016-03-28T09:31:39Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GloeFIAR"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-03-28T07:37:49Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-03-28T07:37:49Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>본 케이스와 관련되어 몇 가지 문의 드립니다.<br><br>1. &quot;SAP Migration 성능 테스트를 진행 중&quot;, SAP Migration을 어떻게 수행하는지에 대한 자세한 설명 부탁드립니다.<br><br>2. Migration시 데이터를 어떻게 유입시키고 있는지요? 자세한 설명 바랍니다.<br><br>3. &quot;단 최초 Migration 프로세스를 구동시에는 90% 이상 과부하가 걸리다가 곧바로 50% 성능으로 떨어 집니다.&quot;  50%로 떨어져서 문제라고 생각하는 고려사항이 어떤 것인지요? 그리고.. 50%로 떨어지나 Migration이 오랫동안 끝나지 않는 것인지요?<br>======================<br>어떤 데이터를 어떤 절차에 의해서 Migration을 진행하고 있고.. 어떤 expectation을 가지고 있는지 자세한 부연 설명 바랍니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-03-28T07:37:49Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GloZ5IAJ"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-03-28T07:23:50Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-03-28T07:23:50Z</b><br><br>sosreport-PPMSAL01SL-20160328151257.tar.xz 이름으로 dropbox.redhat.com 에 업로드 하였습니다.<br><br>감사합니다.<br><br><publishedDate>2016-03-28T07:23:50Z</publishedDate><createdByType>Customer</createdByType><br>======================<br></comments><br><br>현재 SAP Migration 성능 테스트를 진행 중인데요,<br><br>처리하려는 프로세스를 늘려도 CPU 에서 발휘할 수 있는 성능이 한계가 있는 것처럼 보여 문의 드립니다.</issue><environment>수집한 데이터를 간략히 보면 아래와 같습니다.<br><br>root@PPMSAL01SL /root # dmidecode --type 1<br># dmidecode 2.12-dmifs<br>SMBIOS 2.8 present.<br><br>Handle 0x0011, DMI type 1, 27 bytes<br>System Information<br>        Manufacturer: HP<br>        Product Name: ProLiant DL580 Gen9<br>        Version: Not Specified<br>        Serial Number: SGH547XCJ1<br>        UUID: 31333937-3136-4753-4835-343758434A31<br>        Wake-up Type: Power Switch<br>        SKU Number: 793161-B21<br>        Family: ProLiant<br><br> <br><br><br>root@PPMSAL01SL /root # lscpu<br>Architecture:          x86_64<br>CPU op-mode(s):        32-bit, 64-bit<br>Byte Order:            Little Endian<br>CPU(s):                28<br>On-line CPU(s) list:   0-27<br>Thread(s) per core:    1<br>Core(s) per socket:    7<br>Socket(s):             4<br>NUMA node(s):          4<br>Vendor ID:             GenuineIntel<br>CPU family:            6<br>Model:                 63<br>Model name:            Intel(R) Xeon(R) CPU E7-8891 v3 @ 2.80GHz<br>Stepping:              4<br>CPU MHz:               2793.232<br>BogoMIPS:              5611.35<br>Virtualization:        VT-x<br>L1d cache:             32K<br>L1i cache:             32K<br>L2 cache:              256K<br>L3 cache:              46080K<br>NUMA node0 CPU(s):     0-3,14-16<br>NUMA node1 CPU(s):     4-6,17-20<br>NUMA node2 CPU(s):     7-10,21-23<br>NUMA node3 CPU(s):     11-13,24-27<br><br> <br><br><br>root@PPMSAL01SL /root # numastat<br>                           node0           node1           node2           node3<br>numa_hit              2627744256      3746558115      5099431064      3404136875<br>numa_miss                8963059               0               0               0<br>numa_foreign                   0               0               0         8963059<br>interleave_hit            104668          104665          104662          104667<br>local_node            2627613653      3746327161      5099155507      3403965948<br>other_node               9093662          230954          275557          170927<br><br> <br><br><br>root@PPMSAL01SL /root # mpstat -P ALL<br>Linux 3.10.0-327.el7.x86_64 (PPMSAL01SL)        03/28/16        _x86_64_        (28 CPU)<br><br>Average:     CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle<br>Average:     all   51.87    0.00   10.24    0.37    0.00    0.28    0.00    0.00    0.00   37.24<br>Average:       0   51.71    0.00   10.52    0.38    0.00    0.00    0.00    0.00    0.00   37.39<br>Average:       1   52.97    0.00   10.37    0.38    0.00    0.13    0.00    0.00    0.00   36.16<br>Average:       2   51.90    0.00   10.15    0.38    0.00    0.00    0.00    0.00    0.00   37.56<br>Average:       3   51.46    0.00    9.76    0.51    0.00    0.00    0.00    0.00    0.00   38.28<br>Average:       4   48.16    0.00    9.63    0.38    0.00    0.00    0.00    0.00    0.00   41.83<br>Average:       5   48.49    0.00   10.33    0.25    0.00    0.00    0.00    0.00    0.00   40.93<br>Average:       6   48.80    0.00   10.27    0.25    0.00    0.00    0.00    0.00    0.00   40.68<br>Average:       7   50.57    0.00    9.84    0.38    0.00    0.00    0.00    0.00    0.00   39.22<br>Average:       8   48.61    0.00    9.34    0.51    0.00    0.13    0.00    0.00    0.00   41.41<br>Average:       9   48.92    0.00    9.63    0.38    0.00    0.00    0.00    0.00    0.00   41.06<br>Average:      10   48.67    0.00    9.48    0.38    0.00    0.13    0.00    0.00    0.00   41.34<br>Average:      11   55.82    0.00   10.76    0.38    0.00    0.00    0.00    0.00    0.00   33.04<br>Average:      12   52.02    0.00   10.61    0.51    0.00    0.00    0.00    0.00    0.00   36.87<br>Average:      13   54.84    0.00    9.94    0.38    0.00    0.00    0.00    0.00    0.00   34.84<br>Average:      14   50.76    0.00   11.93    0.25    0.00    0.13    0.00    0.00    0.00   36.93<br>Average:      15   51.27    0.00   10.63    0.25    0.00    0.13    0.00    0.00    0.00   37.72<br>Average:      16   50.69    0.00   10.09    0.38    0.00    0.00    0.00    0.00    0.00   38.84<br>Average:      17   47.77    0.00   10.06    0.51    0.00    0.00    0.00    0.00    0.00   41.66<br>Average:      18   48.04    0.00    9.86    0.38    0.00    0.00    0.00    0.00    0.00   41.72<br>Average:      19   47.92    0.00   10.06    0.38    0.00    0.00    0.00    0.00    0.00   41.64<br>Average:      20   47.36    0.00   10.05    0.38    0.00    0.00    0.00    0.00    0.00   42.21<br>Average:      21   50.25    0.00   10.53    0.25    0.00    0.00    0.00    0.00    0.00   38.96<br>Average:      22   50.13    0.00    9.52    0.38    0.00    0.00    0.00    0.00    0.00   39.97<br>Average:      23   50.31    0.00    9.56    0.50    0.00    0.13    0.00    0.00    0.00   39.50<br>Average:      24   67.69    0.00   11.49    0.13    0.00    6.90    0.00    0.00    0.00   13.79<br>Average:      25   60.33    0.00   10.96    0.25    0.00    0.00    0.00    0.00    0.00   28.46<br>Average:      26   58.72    0.00   10.79    0.25    0.00    0.00    0.00    0.00    0.00   30.24<br>Average:      27   58.22    0.00   10.79    0.38    0.00    0.00    0.00    0.00    0.00   30.61<br><br> <br><br><br>root@PPMSAL01SL /root # sar -q 1<br>Linux 3.10.0-327.el7.x86_64 (PPMSAL01SL)        03/28/16        _x86_64_        (28 CPU)<br><br>14:55:01      runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>14:55:02           19      1345     20.70     20.33     20.04         0<br>14:55:03           25      1345     19.69     20.13     19.98         0<br>14:55:04           10      1345     19.69     20.13     19.98         0<br>14:55:05           19      1345     19.69     20.13     19.98         0<br>14:55:06           14      1345     19.69     20.13     19.98         0<br>14:55:07           18      1345     19.69     20.13     19.98         0<br>14:55:08           13      1345     19.55     20.09     19.97         0<br>14:55:09           16      1345     19.55     20.09     19.97         0<br>14:55:10           24      1345     19.55     20.09     19.97         0<br>14:55:11           32      1345     19.55     20.09     19.97         4<br>14:55:12           22      1345     19.55     20.09     19.97         7<br>14:55:13           11      1345     18.87     19.94     19.92         0<br>14:55:14           22      1345     18.87     19.94     19.92         0<br>14:55:15           20      1345     18.87     19.94     19.92         0<br>14:55:16           14      1350     18.87     19.94     19.92         0<br>14:55:17           10      1345     18.87     19.94     19.92         0<br>14:55:18           20      1345     18.40     19.82     19.88         0<br>14:55:19           12      1345     18.40     19.82     19.88         0<br>14:55:20           26      1345     18.40     19.82     19.88         0<br>14:55:21           21      1345     18.40     19.82     19.88         0<br>14:55:22           12      1345     18.40     19.82     19.88         0<br>14:55:23           18      1343     18.85     19.89     19.90         0<br>14:55:24           22      1343     18.85     19.89     19.90         1<br>14:55:25           20      1342     18.85     19.89     19.90         1<br>14:55:26           23      1342     18.85     19.89     19.90         0<br>14:55:27           23      1342     18.85     19.89     19.90         0<br>14:55:28           19      1342     18.70     19.85     19.89         0<br>14:55:29           19      1344     18.70     19.85     19.89         0<br>14:55:30           15      1340     18.70     19.85     19.89         0<br>14:55:31           30      1344     18.70     19.85     19.89         0<br>14:55:32           26      1340     18.70     19.85     19.89         0<br>14:55:33           20      1340     17.60     19.60     19.81         0<br>14:55:34           25      1340     17.60     19.60     19.81         4<br>14:55:35           16      1340     17.60     19.60     19.81         0<br>14:55:36           22      1340     17.60     19.60     19.81         0<br>14:55:37           18      1341     17.60     19.60     19.81         0<br>14:55:38           13      1341     18.75     19.81     19.87         0<br>14:55:39           12      1343     18.75     19.81     19.87         0<br>14:55:40           23      1343     18.75     19.81     19.87         0<br>14:55:41           16      1343     18.75     19.81     19.87         0<br>14:55:42           20      1344     18.75     19.81     19.87         1<br>14:55:43           15      1344     18.37     19.71     19.84         0<br>14:55:44           13      1344     18.37     19.71     19.84         0<br>14:55:45           15      1344     18.37     19.71     19.84         0<br>14:55:46           17      1341     18.37     19.71     19.84         0<br>14:55:47           33      1345     18.37     19.71     19.84         0<br>14:55:48           14      1341     17.62     19.53     19.78         0<br>14:55:49           26      1341     17.62     19.53     19.78         0<br>14:55:50           19      1341     17.62     19.53     19.78         0<br>14:55:51           13      1342     17.62     19.53     19.78         0<br>14:55:52           18      1342     17.62     19.53     19.78         0<br>14:55:53           21      1342     17.49     19.47     19.76         0<br>14:55:54           14      1342     17.49     19.47     19.76         0<br>14:55:55           25      1342     17.49     19.47     19.76         0<br>14:55:56           17      1342     17.49     19.47     19.76         0<br><br> <br><br><br>root@PPMSAL01SL /root # dstat --time --cpu --mem --net --disk --sys --load --proc 1<br>----system---- ----total-cpu-usage---- ------memory-usage----- -net/total- -dsk/total- ---system-- ---load-avg--- ---procs---<br>     time     |usr sys idl wai hiq siq| used  buff  cach  free| recv  send| read  writ| int   csw | 1m   5m  15m |run blk new<br>28-03 14:57:00|  2   1  98   0   0   0|65.7G 2332k  137G  458G|   0     0 |4360B   35k|1776  4431 |18.2 19.3 19.7|0.0   0  17<br>28-03 14:57:01| 52  10  37   0   0   0|65.7G 2332k  137G  458G|8718k 5079k|4096B    0 |  54k   90k|18.2 19.3 19.7| 20   0  38<br>28-03 14:57:02| 51  11  37   0   0   0|65.7G 2332k  137G  458G|7209k 4139k|4096B 4096B|  52k   91k|18.2 19.3 19.7| 11   0  21<br>28-03 14:57:03| 51  10  38   1   0   0|65.7G 2332k  137G  458G|8599k 4334k|4096B    0 |  54k   90k|18.8 19.4 19.7| 26   0  18<br>28-03 14:57:04| 52  11  37   0   0   0|65.7G 2332k  137G  458G|8820k 5373k|   0    24k|  56k   90k|18.8 19.4 19.7| 15   0 5.0<br>28-03 14:57:05| 52  10  37   1   0   0|65.7G 2332k  137G  458G|6043k 7201k|4096B    0 |  68k  104k|18.8 19.4 19.7| 24   0  13<br>28-03 14:57:06| 54  11  35   0   0   0|65.7G 2332k  137G  458G|  10M 7734k|4096B    0 |  65k  100k|18.8 19.4 19.7| 17   0  18<br>28-03 14:57:07| 55  10  34   1   0   0|65.7G 2332k  137G  458G|  10M 7376k|4096B    0 |  69k   96k|18.8 19.4 19.7| 11   0  18<br>28-03 14:57:08| 52  11  36   1   0   0|65.7G 2332k  137G  458G|8419k 7098k|4096B    0 |  66k   99k|18.0 19.2 19.6| 23   0  18<br>28-03 14:57:09| 52  11  37   0   0   0|65.7G 2332k  137G  458G|9103k 7095k|4096B   56k|  60k   94k|18.0 19.2 19.6|9.0   0  18<br>28-03 14:57:10| 50  10  39   0   0   0|65.7G 2332k  137G  458G|6409k 5870k|4096B    0 |  58k  100k|18.0 19.2 19.6| 18   0  18<br>28-03 14:57:11| 51  10  38   0   0   0|65.7G 2332k  137G  458G|6614k 4871k|4096B    0 |  55k   93k|18.0 19.2 19.6| 17   0  18<br>28-03 14:57:12| 51  10  38   0   0   0|65.7G 2332k  137G  458G|7345k 5852k|4096B 4096B|  54k   95k|18.0 19.2 19.6| 23   0  18<br>28-03 14:57:13| 52  10  37   0   0   0|65.7G 2332k  137G  458G|  10M 7191k|4096B 8192B|  61k   96k|18.5 19.3 19.7| 20   0  18<br>28-03 14:57:14| 52  10  38   0   0   0|65.7G 2332k  137G  458G|7709k 6119k|4096B   28k|  56k   95k|18.5 19.3 19.7| 11   0  18<br>28-03 14:57:15| 52  10  37   0   0   0|65.8G 2332k  137G  458G|8090k 7278k|4096B    0 |  62k  100k|18.5 19.3 19.7| 18   0  18<br>28-03 14:57:16| 52  10  37   0   0   0|65.8G 2332k  137G  458G|7378k 7876k|4096B    0 |  49k   93k|18.5 19.3 19.7| 19   0  19<br>28-03 14:57:17| 49  10  40   1   0   0|65.8G 2332k  137G  458G|5814k 1257k|4096B    0 |  43k   91k|18.5 19.3 19.7| 17   0  20<br>28-03 14:57:18| 54  11  34   0   0   0|65.8G 2332k  137G  458G|  12M 6097k|4096B   44k|  58k   86k|18.1 19.2 19.6| 22   0  19<br>28-03 14:57:19| 50  11  38   0   0   0|65.8G 2332k  137G  458G|8634k 5575k|4096B   16k|  54k   92k|18.1 19.2 19.6| 21 1.0  25<br>28-03 14:57:20| 50  10  40   0   0   0|65.8G 2332k  137G  458G|5667k 4085k|   0     0 |  48k   91k|18.1 19.2 19.6| 22   0 4.0<br>28-03 14:57:21| 52  10  37   0   0   0|65.8G 2332k  137G  458G|9476k 7276k|4096B    0 |  65k   98k|18.1 19.2 19.6| 25   0  18<br>28-03 14:57:22| 55  10  34   0   0   0|65.8G 2332k  137G  458G|  10M 9902k|4096B  281k|  75k  103k|18.1 19.2 19.6| 11   0  18<br>28-03 14:57:23| 54  10  35   0   0   0|65.8G 2332k  137G  458G|9066k 7780k|4096B  512k|  70k   99k|18.4 19.2 19.6| 31   0  21<br>28-03 14:57:24| 52  10  37   0   0   0|65.8G 2332k  137G  458G|9371k 6474k|4096B  288k|  61k   97k|18.4 19.2 19.6| 21   0  18<br>28-03 14:57:25| 53  10  36   0   0   0|65.8G 2332k  137G  458G|8494k 7189k|4096B    0 |  62k  101k|18.4 19.2 19.6| 13   0  18<br>28-03 14:57:26| 51  11  38   0   0   0|65.8G 2332k  137G  458G|6460k 6194k|4096B    0 |  62k  105k|18.4 19.2 19.6| 19   0  18<br>28-03 14:57:27| 52  11  37   1   0   0|65.8G 2332k  137G  458G|7778k 5570k|4096B    0 |  62k   97k|18.4 19.2 19.6| 22   0  18<br>28-03 14:57:28| 52  10  37   1   0   0|65.8G 2332k  137G  458G|6764k 6486k|4096B  204k|  61k   96k|18.2 19.2 19.6| 15   0  18<br>28-03 14:57:29| 52  11  37   0   0   0|65.8G 2332k  137G  458G|8455k 7766k|4096B   44k|  61k   96k|18.2 19.2 19.6| 19   0  18<br>28-03 14:57:30| 53  10  36   0   0   0|65.8G 2332k  137G  458G|9008k 8741k|4096B    0 |  75k  107k|18.2 19.2 19.6| 11   0  18<br>28-03 14:57:31| 53  10  36   0   0   0|65.8G 2332k  137G  458G|9694k   10M|4096B    0 |  74k  107k|18.2 19.2 19.6| 21   0  18<br>28-03 14:57:32| 51  10  39   0   0   0|65.8G 2332k  137G  458G|7945k 7408k|4096B 4096B|  63k  102k|18.2 19.2 19.6| 13   0  18<br>28-03 14:57:33| 50  10  40   0   0   0|65.8G 2332k  137G  458G|6548k 5363k|4096B   52k|  54k   98k|18.3 19.2 19.6| 25   0  18<br>28-03 14:57:34| 49  11  39   1   0   0|65.8G 2332k  137G  458G|9498k 5761k|4096B   40k|  56k   99k|18.3 19.2 19.6| 24   0  18<br>28-03 14:57:35| 49  10  40   0   0   0|65.8G 2332k  137G  458G|6711k 4886k|4096B    0 |  54k  103k|18.3 19.2 19.6| 26 4.0  17<br>28-03 14:57:36| 50  11  39   0   0   0|65.8G 2332k  137G  458G|7944k 5955k|   0     0 |  58k  102k|18.3 19.2 19.6| 26   0 2.0<br>28-03 14:57:37| 52  11  37   0   0   0|65.8G 2332k  137G  458G|  10M 6884k|4096B    0 |  61k   96k|18.3 19.2 19.6| 28   0  18<br>28-03 14:57:38| 51  10  38   0   0   0|65.8G 2332k  137G  458G|9791k 7044k|4096B    0 |  63k  101k|18.7 19.2 19.6| 15   0  19<br>28-03 14:57:39| 51  11  38   0   0   0|65.8G 2332k  137G  458G|7102k 5168k|4096B   68k|  51k   89k|18.7 19.2 19.6| 25   0  19<br>28-03 14:57:40| 52  11  37   0   0   0|65.8G 2332k  137G  458G|  11M 4556k|4096B    0 |  51k   87k|18.7 19.2 19.6| 20   0  18<br>28-03 14:57:41| 51  10  38   1   0   0|65.8G 2332k  137G  458G|7923k 3581k|4096B    0 |  48k   89k|18.7 19.2 19.6| 20 1.0  18<br>28-03 14:57:42| 51  11  37   1   0   0|65.8G 2332k  137G  458G|9196k 4927k|4096B    0 |  57k   91k|18.7 19.2 19.6| 22   0  18<br>28-03 14:57:43| 51  11  37   1   0   0|65.8G 2332k  137G  458G|8415k 4328k|4096B 8192B|  56k   90k|18.8 19.3 19.6| 17 1.0  18<br><br> <br><br><br>root@PPMSAL01SL /root # iostat<br>Linux 3.10.0-327.el7.x86_64 (PPMSAL01SL)        03/28/16        _x86_64_        (28 CPU)<br><br>avg-cpu:  %user   %nice %system %iowait  %steal   %idle<br>           1.80    0.00    0.58    0.02    0.00   97.60<br><br>Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn<br>sda               0.56         0.91        24.41    2350565   63031929<br>sdb               0.83         3.33         0.00    8598320          0<br>dm-0              0.02         0.10         0.28     268348     714672<br>dm-1              0.01         0.01         1.75      26336    4522645<br>dm-2              0.19         0.08         2.21     219285    5695122<br>dm-3              0.58         0.02         5.13      42666   13254391<br>dm-4              0.59         0.26         5.03     662643   12983630<br>dm-5              0.00         0.00         0.00        504          0<br>dm-6              0.00         0.00         0.00        504          0<br>dm-7              0.00         0.00         0.00        504          0<br>dm-8              0.00         0.00         0.00        504          0<br>dm-9              0.00         0.00         0.00        984          0<br>dm-10             0.00         0.00         0.00        504          0<br>dm-11             0.00         0.00         0.00        504          0<br>dm-12             0.15         0.06         2.20     142567    5689824<br>dm-13             1.14         0.27        10.16     704197   26238021<br>dm-14             0.00         0.03         0.00      71001       2925<br>dm-15             0.00         0.00         0.00       5044       2372<br>dm-16             0.00         0.00         0.00        637       2132<br>dm-17             0.00         0.00         0.00        504          0<br>dm-18             0.00         0.00         0.00        504          0<br>dm-19             0.00         0.00         0.00        504          0<br>dm-20             0.00         0.00         0.00       1315        252<br>dm-21             0.00         0.00         0.00        504          0<br>dm-22             0.00         0.00         0.00        747          0<br>dm-23             0.00         0.00         0.00        596          0<br>dm-24             0.00         0.00         0.00       1072       2384<br>sdal              0.05         0.00         0.56       1297    1448677<br>sdan              0.14         0.00         1.17       1281    3030511<br>sdap              0.15         0.00         1.16       7466    2995944<br>sdak              0.05         0.00         0.56        710    1457721<br>sdam              0.14         0.00         1.17        701    3025882<br>sdao              0.15         0.00         1.15       7260    2975453<br>sdj               0.00         0.00         0.00        399         40<br>sdh               0.00         0.00         0.00        399          0<br>sdd               0.00         0.00         0.00        403          0<br>sdc               0.00         0.00         0.00        403          0<br>sdk               0.00         0.00         0.00        399          0<br>sdl               0.00         0.00         0.00        399          0<br>sde               0.00         0.00         0.00        403          0<br>sdp               0.00         0.00         0.00        403          0<br>sdm               0.00         0.00         0.00        399          0<br>sdi               0.00         0.00         0.00        399          0<br>sdf               0.00         0.00         0.00        403          0<br>sdg               0.00         0.00         0.00        459          0<br>sdo               0.00         0.00         0.00        430          0<br>sdn               0.00         0.00         0.00        434          0<br>sdv               0.00         0.00         0.00        419          0<br>sdx               0.00         0.00         0.00        419         41<br>sdr               0.00         0.00         0.00        415          0<br>sdy               0.00         0.00         0.00        419          0<br>sdad              0.00         0.00         0.00        415          0<br>sds               0.00         0.00         0.00        415          0<br>sdz               0.00         0.00         0.00        419          0<br>sdw               0.00         0.00         0.00        419          0<br>sdq               0.00         0.00         0.00        415          0<br>sdaa              0.00         0.00         0.00        419          0<br>sdu               0.00         0.00         0.00        443          0<br>sdab              0.00         0.00         0.00        394        243<br>sdt               0.00         0.00         0.00        415          0<br>sdac              0.00         0.00         0.00        450          0<br>sdae              0.05         0.00         0.27        377     701701<br>sdaf              0.13         0.00         1.16        362    3005411<br>sdag              0.15         0.00         1.15       7347    2979555<br>sdah              0.05         0.00         0.27        366     696526<br>sdai              0.13         0.00         1.16        365    3006685<br>sdaj              0.15         0.00         1.15       7219    2962024<br><br> <br><br><br>root@PPMSAL01SL /root # ifstat<br>#kernel<br>Interface        RX Pkts/Rate    TX Pkts/Rate    RX Data/Rate    TX Data/Rate<br>                 RX Errs/Drop    TX Errs/Drop    RX Over/Rate    TX Coll/Rate<br>lo                95246K 0        95246K 0         2769M 0         2769M 0<br>                       0 0             0 0             0 0             0 0<br>eno49                  0 0             0 0             0 0             0 0<br>                       0 0             0 0             0 0             0 0<br>eno50                  0 0             0 0             0 0             0 0<br>                       0 0             0 0             0 0             0 0<br>ens8f1              9589 0             0 0        579028 0             0 0<br>                       0 9589          0 0             0 0             0 0<br>ens6f0            112418 0        103454 0        10569K 0         9978K 0<br>                       0 0             0 0             0 0             0 0<br>eno51                  0 0             0 0             0 0             0 0<br>                       0 0             0 0             0 0             0 0<br>eno52                  0 0             0 0             0 0             0 0<br>                       0 0             0 0             0 0             0 0<br>ens5f1             2468K 0        262348 0         1690M 0       379017K 0<br>                       0 2322K         0 0             0 0             0 0<br>ens2f0             2822M 0         3173M 0       389091K 0         2766M 0<br>                       0 1123          0 0             0 0             0 0<br>bond0              2824M 0         3173M 0         2079M 0         3145M 0<br>                       0 2323K         0 0             0 0             0 0<br>bond1             122007 0        103454 0        11148K 0         9978K 0<br>                       0 9589          0 0             0 0             0 0</environment><periodicityOfIssue>mpstat -P ALL 로 수집한 데이터를 보면 CPU idle 의 값이 100개의 데이터를 넣든, 200개의 데이터를 넣든 동일한 패턴을 보이고 있습니다.<br><br>Migration 시 좀 더 많은 데이터를 유입시켜 동시에 CPU 에 부하를 주고 싶어도 use+sys 합쳐 최대 70% 를 넘지를 못하고 있습니다.<br><br>단 최초 Migration 프로세스를 구동시에는 90% 이상 과부하가 걸리다가 곧바로 50% 성능으로 떨어 집니다.<br><br>이 현상이 정상적인지 아니면 사용자가 생성하는 프로세스에서 한계(Limit) 이 있는지 확인 부탁드립니다.</periodicityOfIssue><timeFramesAndUrgency>현재 문의드리는 시스템은 1대 샘플을 예로 들었지만,<br><br>PMS 업무군 전체 서버가 동일한 현상을 보이고 있습니다.<br><br>관련 sosreport 를 올리겠습니다.<br><br>감사합니다.</timeFramesAndUrgency><cep>false</cep></case>