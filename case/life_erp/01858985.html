======================<br><b>생성계정 : 삼성생명 타임게이트</b><br><b>생성날짜 : 2017-05-29T13:09:39Z</b><br><b>마지막 답변자 : Jay Shin</b><br><b>마지막 수정 일자 : 2017-07-27T05:41:14Z</b><br><b>id : 500A000000XLybUIAT</b><br>======================<br><br><b><font size=15>
제목  : Only node #4 has nfs hang on connection (NFS HANG으로 인한 마운트 불가)
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요?<br><br>NAS 스토리지내 같은 볼륨을 마운트 하는 클라이언트가 총 4개있는데 그중 1대의 클라이언트에서 <br>NFS HANG이 발생하였습니다.<br>물리적으로 링크가 끊기는 현상은 없었고 어떠한 문제가 발생하는지 원인 파악중입니다.<br>26일 15시 50분 22초에 아래와 같은 메시지가 발생되었습니다<br>(이후 다른 NAS 노드로 변경하고 정상으로 되었다 합니다.)<br>kernel: nfs: server 100.253.144.202 not responding, still trying<br><br>이 메시지가 발생할 사항이 어떠한 것이 있는지,<br>또, 기타 다른 체크 사항이 있는지 확인 부탁드립니다.<br><br>감사합니다.<br><br>============================================<br>삼성SDS 담당자 : 최민규 선임 (010-4028-7336)<br>============================================<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><hostname>DECCAL04SL</hostname><br><br><br><comment id="a0aA000000JxSgtIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-27T05:41:09Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-27T05:41:08Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>먼저, 본 기술 문의가 해결되어 다행입니다.<br><br>현재까지 변경된 부분 이후에 문제가 발생하지 않는다는 답변 잘 들었습니다.<br>해당 내용 정리하고 본 기술 문의는 종료하도록 하겠습니다.<br><br>변경점:<br>  - kernel-3.10.0-327.53.1<br>  - sunrpc.tcp_max_slot_table_entries = 128 (히타치 NAS 업체에서 권고한 값)<br>  - NAS firmware update<br><br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 재개하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-27T05:41:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JxAaVIAV"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-26T00:32:26Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-26T00:32:25Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>더 이상 추가적으로 분석할 부분이 없다면, 본 기술 문의를 종료해도 괜찮을지요?<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-26T00:32:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jwe8XIAR"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-24T00:56:53Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-24T00:56:53Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin<br>Technical Support Engineer<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-07-24T00:56:53Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jw8T8IAJ"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-20T06:57:25Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-20T06:57:25Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>운영중인 상태에서 수집하는 것은 불가하다고 말씀하였으며, 로그 수집에 대한 부분을 두 가지로 나눠야겠습니다.<br><br>* 점검기간에 상황재연을 시도하여 vmcore 수집<br>1. 4번 노드에서 dd 수행 <br>2. 나머지 1,2,3번 노드에 행 발생 여부 확인<br>3. 발생한다면, hung_task_warnings 값 확인 후 만일 0 이라면, 값 증가<br>4. 이후 hung_task_panic = 1 설정 이후에 vmcore 수집<br><br>* 운영중 비정상 상황 발생시<br>1. nfs 로그 수집<br>2. NAS 노드 변경<br><br>hung_task_warnings 를 1 이상으로 설정시에<br>hung_task_timeout_secs 가 발생하면 아래과 같이 로그를 출력합니다.<br>다시 말씀드리면, hung_task_warnings 값의 기본 설정값은 10이며, 행 발생시마다 1씩 감소하여 0이 되면<br>더 이상 아래 행 로그가 콘솔 및 로그파일에 저장되지 않아 행이 발생했는지 조차도 로그상으로 확인할 수 없습니다.<br>따라서, 해당 값을 100으로 여유있게 설정하는 것을 안내해드린 것입니다.<br><br>Jul 12 02:03:09 DECCAL04SL kernel: INFO: task REC_10_DIA_W5:48046 blocked for more than 120 seconds.<br>Jul 12 02:03:09 DECCAL04SL kernel: &quot;echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs&quot; disables this message.<br>Jul 12 02:03:09 DECCAL04SL kernel: REC_10_DIA_W5   D ffff88eee162edc0     0 48046  99969 0x00000000<br>Jul 12 02:03:09 DECCAL04SL kernel: ffff887965f93ad0 0000000000000086 ffff88bf24b3f300 ffff887965f93fd8<br>Jul 12 02:03:09 DECCAL04SL kernel: ffff887965f93fd8 ffff887965f93fd8 ffff88bf24b3f300 ffff88eee162edb8<br>Jul 12 02:03:09 DECCAL04SL kernel: ffff88eee162edbc ffff88bf24b3f300 00000000ffffffff ffff88eee162edc0<br>Jul 12 02:03:09 DECCAL04SL kernel: Call Trace:<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163d1b9&gt;] schedule_preempt_disabled+0x29/0x70<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163aeb5&gt;] __mutex_lock_slowpath+0xc5/0x1c0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811e9487&gt;] ? unlazy_walk+0x87/0x140<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163a31f&gt;] mutex_lock+0x1f/0x2f<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff81633cf9&gt;] lookup_slow+0x33/0xa7<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811ee913&gt;] path_lookupat+0x773/0x7a0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811721d6&gt;] ? free_hot_cold_page_list+0x46/0xa0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811ee96b&gt;] filename_lookup+0x2b/0xc0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811f04f5&gt;] kern_path+0x55/0xb0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811ef684&gt;] ? getname_flags+0xc4/0x1a0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8116922e&gt;] ? __find_get_page+0x1e/0xa0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0909846&gt;] wr_lookupname+0x56/0xe0 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa039af9c&gt;] ? xfs_iunlock+0x11c/0x130 [xfs]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0916558&gt;] ips_open_pre+0x88/0x2e0 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff81193541&gt;] ? __do_fault+0x401/0x510<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0909793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa091400e&gt;] ? inherit_procattr_from_parent+0x2de/0x350 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0909793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa090ab7d&gt;] ? get_sbj_attr_from_proc+0x6d/0xa0 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa090b8b8&gt;] ? prst_preproc+0x38/0x690 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0916a47&gt;] prst_open+0x1d7/0x340 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0916bf0&gt;] rg_open+0x40/0x60 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff816470c9&gt;] system_call_fastpath+0x16/0x1b<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-20T06:57:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jw88jIAB"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-07-20T06:26:53Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-07-20T06:26:53Z</b><br><br>파라메터값을 아래와 같이 변경하여 운영중이고 <br>sunrpc.tcp_max_slot_table_entries = 128<br><br>아직까지는 특별히 문제되는 사항은 없습니다만 문제가 발생할시 아래와 같은 액션을 취해서 말씀드리면 될까요?<br><br>[action plan]<br>1. RedCastle 모듈을 4개 노드에서 모두 제거 <br>2. 4번 노드에서 dd 수행 <br>3. 나머지 1,2,3번 노드에 행 발생 여부 확인<br>4. 발생한다면, hung_task_warnings 값 확인 후 만일 0 이라면, 값 증가<br>5. 이후 hung_task_panic = 1 설정 이후에 vmcore 수집<br>6.  3가지 스크립트 실행 <br>======================<br>1번은 불가하며 <br>2번과 3번은 테스트 가능하면 수집 가능합니다.<br>4번은 100으로 설정 하겠습니다. hung_task_warning를 설정하면 메시지에서 나오는 로그는 어떤내용인지 예를 부탁드립니다.<br>5번은 현실적으로  설정이 불가함을 말씀드립니다. <br>6번은 일전에 말씀주셨던대로 아래 내용에 따라 수집하겠습니다.<br><br><br>==========6. 스크립트 수행 ============<br>1. 평상시에 로그를 수집해주시기 바랍니다.<br> mkdir normal<br> cd normal<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> 적절한 시점 10-30초 정도 이후에 종료<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> 적절한 시점 10-30초 정도 이후에 종료<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br> cp /proc/self/mountstats  mountstats_raw_after_$(date +%s).txt<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>2. 문제가 발생한 시점에 로그를 수집해주시기 바랍니다.<br> mkdir issue<br> cd issue<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br> cp /proc/self/mountstats  mountstats_raw_after_$(date +%s).txt<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>3. 문제 해결을 위해 다른 NAS 노드로 이관된 연결을 <br>   다시 문제가 발생한 NAS 노드로 연결한 이후에 로그를 수집해주시기 바랍니다.<br><br> mkdir after<br> cd after<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br> cp /proc/self/mountstats  mountstats_raw_after_$(date +%s).txt<br> <br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>저희가 요청하는 사항은 아래와 같습니다.:<br><br>3부분에 걸친 데이터 수집<br>- mounstats_raw_before.txt<br>- nfsiostat.txt<br>- nfs_meminfo.txt<br>- nfs_util.txt<br>- tcpdump<br>- mounstats_raw_after.txt<br>- mountstats 결과<br><br><publishedDate>2017-07-20T06:26:53Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jw69VIAR"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-20T01:36:53Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-20T01:36:52Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>현재 진행 상황 및 추후 계획 공유 부탁드립니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-20T01:36:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JvK8aIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-17T00:45:52Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-17T00:45:52Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>7월 14일 17시 50분 4번 노드에서 NAS 202번 아이피로 연결된 디렉토리에서 dd 수행하였으나,<br>3번 노드에서 nfs 연결 중지 메시지와 함께 연결이 중단되는 현상이 발생하였으며,<br>120초 이상 응답이 없어 hung 이 발생한 것으로 확인됩니다.<br><br>아래는 3번 노드의 로그입니다.<br><br>$ cat uptime <br> 20:18:28 up 2 days,  9:33,  2 users,  load average: 42.51, 42.51, 53.25<br><br>$ cat proc/sys/kernel/hung_task_panic<br>0<br>$ cat proc/sys/kernel/hung_task_warnings<br>0<br><br>Jul 14 17:50:18 DECCAL03SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>Jul 14 17:50:18 DECCAL03SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>Jul 14 17:50:18 DECCAL03SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>Jul 14 17:50:18 DECCAL03SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>...<br>Jul 14 17:50:41 DECCAL03SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>...<br>Jul 14 17:51:18 DECCAL03SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>Jul 14 17:51:23 DECCAL03SL kernel: INFO: task REC_00_DIA_W63:21845 blocked for more than 120 seconds.<br>Jul 14 17:51:23 DECCAL03SL kernel: &quot;echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs&quot; disables this message.<br>Jul 14 17:51:23 DECCAL03SL kernel: REC_00_DIA_W63  D ffff88f7f768b820     0 21845  21630 0x00000000<br>Jul 14 17:51:23 DECCAL03SL kernel: ffff88fce1183ad0 0000000000000086 ffff88ff1b7f2280 ffff88fce1183fd8<br>Jul 14 17:51:23 DECCAL03SL kernel: ffff88fce1183fd8 ffff88fce1183fd8 ffff88ff1b7f2280 ffff88f7f768b818<br>Jul 14 17:51:23 DECCAL03SL kernel: ffff88f7f768b81c ffff88ff1b7f2280 00000000ffffffff ffff88f7f768b820<br>Jul 14 17:51:23 DECCAL03SL kernel: Call Trace:<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff8163d1b9&gt;] schedule_preempt_disabled+0x29/0x70<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff8163aeb5&gt;] __mutex_lock_slowpath+0xc5/0x1c0<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff811e9487&gt;] ? unlazy_walk+0x87/0x140<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff8163a31f&gt;] mutex_lock+0x1f/0x2f<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff81633cf9&gt;] lookup_slow+0x33/0xa7<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff811ee913&gt;] path_lookupat+0x773/0x7a0<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff815185c7&gt;] ? kfree_skbmem+0x37/0x90<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff8151ac8f&gt;] ? kfree_skb_partial+0x1f/0x40<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff81580da3&gt;] ? tcp_rcv_established+0x433/0x750<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff811ee96b&gt;] filename_lookup+0x2b/0xc0<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff811f04f5&gt;] kern_path+0x55/0xb0<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff811ef684&gt;] ? getname_flags+0xc4/0x1a0<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffffa09f2846&gt;] wr_lookupname+0x56/0xe0 [RedCastle]<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffffa09ff558&gt;] ips_open_pre+0x88/0x2e0 [RedCastle]<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffffa09f2793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffffa09fd00e&gt;] ? inherit_procattr_from_parent+0x2de/0x350 [RedCastle]<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffffa09f2793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffffa09f3b7d&gt;] ? get_sbj_attr_from_proc+0x6d/0xa0 [RedCastle]<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffffa09f48b8&gt;] ? prst_preproc+0x38/0x690 [RedCastle]<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffffa09ffa47&gt;] prst_open+0x1d7/0x340 [RedCastle]<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffffa09ffbf0&gt;] rg_open+0x40/0x60 [RedCastle]<br>Jul 14 17:51:23 DECCAL03SL kernel: [&lt;ffffffff816470c9&gt;] system_call_fastpath+0x16/0x1b<br><br>Linux 3.10.0-327.44.2.el7.x86_64 (DECCAL03SL)   07/14/17        _x86_64_        (80 CPU)<br>00:00:01        CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>17:49:01        all      0.59      0.00      0.15      4.15      0.00      0.00      0.00      0.00      0.00     95.11<br>17:50:01        all      0.46      0.00      0.52     18.40      0.00      0.00      0.00      0.00      0.00     80.62<br>17:51:01        all      0.50      0.00      0.48     18.30      0.00      0.00      0.00      0.00      0.00     80.72<br>17:52:01        all      0.41      0.00      0.21     18.38      0.00      0.00      0.00      0.00      0.00     80.99<br>17:53:01        all      0.43      0.00      0.51     18.44      0.00      0.00      0.00      0.00      0.00     80.61<br>17:54:01        all      0.45      0.00      0.52     18.39      0.00      0.00      0.00      0.00      0.00     80.64<br>...<br>18:18:01        all     21.27      0.00      0.79      6.13      0.00      0.00      0.18      0.00      0.00     71.63<br><br>00:00:01    kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty<br>17:50:01    914793732 141435736     13.39     19004  94355224 550244756     43.76  45638376  76686948      1996<br>17:51:01    914778668 141450800     13.39     19004  94363892 550253484     43.76  45641684  76693732       544<br>17:52:01    914774756 141454712     13.39     19004  94370348 550243244     43.75  45641236  76700020      2964<br>17:53:01    914764796 141464672     13.39     19004  94377184 550242676     43.75  45642472  76706776      1980<br>17:54:01    914754164 141475304     13.39     19004  94383596 550243336     43.75  45643232  76713052      1524<br><br>00:00:01      runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>17:49:01            1      2561      8.06      1.97      0.91        41<br>17:50:01            2      2562     36.30     11.19      4.15        39<br>17:51:01            2      2563     46.80     18.76      7.19        39<br>17:52:01            0      2562     50.58     25.37     10.26        38<br>17:53:01            0      2562     52.15     30.45     12.96        38<br>17:54:01            1      2561     52.79     34.57     15.47        38<br><br>00:00:01       call/s retrans/s    read/s   write/s  access/s  getatt/s<br>17:49:01        48.20      0.00     40.10      1.10      1.39      3.88<br>17:50:01         1.15     16.81      0.00      0.08      0.20      0.58<br>17:51:01         1.47     33.34      0.00      0.15      0.23      0.90<br>17:52:01         1.10     16.44      0.00      0.03      0.13      0.80<br>17:53:01         1.03     16.48      0.00      0.13      0.22      0.35<br>17:54:01         0.75     32.82      0.00      0.10      0.20      0.25<br><br>4번 노드에서 기존에 발생하였던 동일한 문제가 발생되었으며, 따라서, 4번 노드만의 문제는 아닌 것으로 생각하고 있습니다.<br><br>4번 로그를 살펴보았습니다만, sar14 데이터는 수집되지 않은 것으로 확인되며, 4번 노드에서는 행발생이 없었습니다.<br><br>$ cat proc/sys/kernel/hung_task_warnings <br>100<br>[jaeshin@fubar sosreport-DECCAL04SL-20170714201941]$ cat proc/sys/kernel/hung_task_panic<br>0<br><br>위 현상에 대해 아래 두 가지 가능성이 존재할 수 있습니다.<br>1. 4번 노드가 NAS 서버에서 사용 가능한 대역폭(스토리지/네트워크)을 모두 소진하면서,<br>   3번 노드가 자원을 획득하지 못하여 행이 발생하였을 가능성.<br>2. hung_task_timeouot_secs 로그를 바탕으로, RedCastle 모듈에 의한 시스템 콜 후킹(hooking) 기능에 의해<br>   NAS와 연결된 특정 파일 혹은 디렉토리의 뮤텍스 락을 점유하면서 로드 증가 및 iowait 증가의 가능성.<br><br>따라서, 해당 현상의 재연이 가능하시다면, RedCastle 모듈을 4개의 노드에서 모두 제거한 상태에서<br>재연을 해보시고 동일한 증상이 발생하면 vmcore를 수집해주시기 바랍니다.<br><br>3번 노드에서 이미 hung_task_warnings 가 0로 줄어들었으며, 다시 아래 명령으로 100으로 변경해주시기 바랍니다.<br># echo 100 &gt; /proc/sys/kernel/hung_task_warnings<br><br>[action plan]<br>1. RedCastle 모듈을 4개 노드에서 모두 제거<br>2. 4번 노드에서 dd 수행<br>3. 나머지 1,2,3번 노드에 행 발생 여부 확인<br>4. 발생한다면, hung_task_warnings 값 확인 후 만일 0 이라면, 값 증가<br>5. 이후 hung_task_panic = 1 설정 이후에 vmcore 수집<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-17T00:45:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JvEogIAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-07-15T00:38:07Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-07-15T00:38:07Z</b><br><br>답변 감사합니다.<br>이 이슈에 대해서 vmcore를 수집하기 위하여 17시 50분 경부터 시작하였습니다.<br>DECCAL04SL에서 dd of=/dev/zero if=/batch_sam/SAM/backup/test.dat oflag=direct bs=1024000k count=10 <br>위 명령어로 부하를 발생시켜 이슈상황을 재현하고자 하였으나<br>다른 서버(DECCAL03SL)에서 NFS공유하여 사용하는 디렉토리인 /batch_sam/SAM/backup/이  HANG이 걸리는 상태가<br>발생하였습니다. <br>DECCAL03SL의 상태는 /batch_sam/SAM/backup/를 사용하는 프로세스들이 모두 S상태로 진입하여 있었고<br>해당 디렉토리를 접근 할수 없는 상태였습니다. <br><br>이로 인해 DECCAL04SL에서 주던 부하를 중지시켰으나 <br>프로세스 상태는 SLEEP상태였고 해당 디렉토리도 접근이 불가 하였습니다.<br> DECCAL04SL에서 DD를 중지시켰음에도 접근이 불가한 이유는 무엇인가요?<br><br>그리고 NAS측에서는 /batch_sam/SAM/backup/에 해당하는 볼륨을 다른 노드로 이동시켰고<br>바로 SLEEP 상태였던 프로세스들이 RUNNING상태로 변경되었고 /batch_sam/SAM/backup/ 디렉토리에 접속이 가능했습니다.<br><br>이렇게 진행되는 원인에 대해서 확인 부탁드립니다. 감사합니다.<br><br>해당 SAR와 MESSAGES 와 SOSREPORT를 드롭박스에 업로드 하였으니 확인 바라고 링크 부탁드립니다.<br>DECCAL03SL_sosreport.tar.gz<br>DECCAL04SL_sosreport.tar.gz<br>이상 2개이고 그 안에 sar와 messages 화일이있습니다. 감사합니다.<br><br><publishedDate>2017-07-15T00:38:07Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jv37pIAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-14T07:16:49Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-14T07:16:48Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>해당 경로 혹은 파일을 찾지 못했을 때 발생하는 에러입니다.<br><br>   NFS3ERR_NOENT<br>       No such file or directory. The file or directory name<br>       specified does not exist.<br><br>Arrival Time: Jul 12, 2017 09:15:00.034607000 AEST<br>Source: 100.253.144.201 (100.253.144.201)<br>Destination: 100.253.142.24 (100.253.142.24)<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-14T07:16:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jv23KIAR"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-07-14T05:23:32Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-07-14T05:23:32Z</b><br><br>말씀주신 NFS3ERR_NOENT 에러는 무엇을 말하는것인지 궁금합니다.<br><br><publishedDate>2017-07-14T05:23:32Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jv11nIAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-14T02:30:20Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-14T02:30:20Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>* normal<br>        backlog wait: 0.000000  RTT: 0.250000   total execute time: 0.250000 (milliseconds)<br><br>* issue<br>        backlog wait: 66678.388889      RTT: 0.000000   total execute time: 71818.388889 (milliseconds)<br><br>tcpdump 분석 결과 패킷 덤프의 데이터가 201 서버와의 통신 결과입니다. 문제가 있다고 말씀하신 202 서버와의 패킷 덤프가 없습니다.<br><br>Jul 12 08:15:33 DECCAL04SL kernel: device bond0 left promiscuous mode<br>Jul 12 08:15:33 DECCAL04SL kernel: device ens2f0 left promiscuous mode<br>Jul 12 08:15:47 DECCAL04SL kernel: device bond0 entered promiscuous mode<br>Jul 12 08:15:47 DECCAL04SL kernel: device ens2f0 entered promiscuous mode<br>Jul 12 08:16:01 DECCAL04SL CROND[27950]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Jul 12 08:16:30 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br><br>tshark -r DECCAL04SL-2017-07-12-08-14-33_issue1 | more<br>  1   0.000000 100.253.142.24 -&gt; 100.253.144.201 NFS 178 V3 GETATTR Call, FH:0x88fde6c1<br>  2   0.000110 100.253.144.201 -&gt; 100.253.142.24 NFS 182 V3 GETATTR Reply (Call In 1)  Directory mode:0777 uid:0 gid:0<br>  3   0.000135 100.253.142.24 -&gt; 100.253.144.201 TCP 66 rfile &gt; nfs [ACK] Seq=113 Ack=117 Win=24565 Len=0 TSval=3810732638 TSecr=435728253<br>  4   0.000171 100.253.142.24 -&gt; 100.253.144.201 NFS 178 V3 FSSTAT Call, FH:0x88fde6c1<br>  5   0.000772 100.253.144.201 -&gt; 100.253.142.24 NFS 238 V3 FSSTAT Reply (Call In 4)<br>  6   0.001382 100.253.142.24 -&gt; 100.253.144.201 NFS 178 V3 FSSTAT Call, FH:0x88fde6c1<br><br><br>vmcore는 수집이 가능한 상황(예, 점검기간)에서 문제를 인위적으로 발생하여 수집해주시는 것을 고려해주시기 바랍니다.<br>그와는 별도로 행로그 저장을 위한 설정을 해주십시요. 아래는 운영에 전혀 영향이 없습니다. 100번 행 로그를 저장할 것입니다.<br><br># echo 100 &gt; /proc/sys/kernel/hung_task_warnings<br><br>** action plan **<br> - 문제가 발생한 시점에 정확히 문제가 되는 NAS ip 에서 tcpdump 수집<br> - 추가적으로 타 벤더(하드웨어/NAS/switch)에서는 별다른 점검 결과가 없는지요?<br> - 서버의 네트워크 디바이스를 변경해서 운영해보는것은 어떨지요?<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-14T02:30:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jv0qkIAB"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-07-14T01:58:08Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-07-14T01:58:08Z</b><br><br>현재 운영이 되고 있는 서버로 vmcore는 부담스러운 상황입니다 우선 sar데이타 dropbox에 업로드 하였습니다<br>파일명<br>sa_data_DECCAL04SL.tar.gz<br><br>분석 부탁드립니다<br>지속적으로 해당 증상이 발생하고 있는 상황이여서 빠른 조치가 필요한 상황입니다<br><br><publishedDate>2017-07-14T01:58:08Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jv0bQIAR"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-14T01:18:55Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-14T01:18:55Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>tcpdump 에서 확인한 결과, NFS3ERR_NOENT 에러가 확인되는 것 이외에는 네트워크 문제가 확인되지는 않는 다는 엔지니어 답변이 있었습니다.<br>아직 분석중이며, 추가로 문제의 날짜의 sar 데이터와 아래 설정을 통해 vmcore 수집을 요청드립니다.<br><br># echo 100 &gt; /proc/sys/kernel/hung_task_warnings<br># echo 1 &gt; /proc/sys/kernel/hung_task_panic<br><br>아래는 엔지니어의 답변입니다.<br><br>The pcap in nfs-issue/issue in the nfs_issue.tar file has some NFS3ERR_NOENT errors for example a LOOKUP_REPLY in frame 25. But other than I can't see any obvious network problem etc.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-14T01:18:55Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jv0XYIAZ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-07-14T01:07:17Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-07-14T01:07:17Z</b><br><br>답변을 언제쯤 받을수 있을까요 확인 부탁드립니다<br><br><publishedDate>2017-07-14T01:07:17Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JuYKYIA3"><br>======================<br><b>생성계정 : Harris, Jeremy</b><br><b>생성날짜 : 2017-07-12T09:15:39Z</b><br><b>마지막 답변자 : Harris, Jeremy</b><br><b>마지막 수정 일자 : 2017-07-12T09:15:39Z</b><br><br>Additionally, I'd suggest that the customer engage whatever support they can obtain for the NAS system.<br><br><publishedDate>2017-07-12T09:15:39Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JuVTMIA3"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-12T04:09:47Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-12T04:09:47Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>sosreport 를 확인해보니 말씀하신대로, 7월 12일 02시경부터 행 증상이 발생된 것으로 확인됩니다.<br>REC_10_DIA_W5 프로세스가 (PID 48046) 120초 동안 응답이 없었어 행 로그와 함께 시스템이 응답없음 상태로 접어들었습니다.<br>콜트레이스에서 확인된 정보는 타사 모듈인 RedCastle 에 의해 시스템 콜이 후킹(함수 가로챔)되어 해당 파일 액세스시에<br>뮤텍스락이 풀리지 않아 시스템 행증상이 발현된 것으로 추정하고 있습니다.<br><br>Jul 12 02:03:09 DECCAL04SL kernel: INFO: task REC_10_DIA_W5:48046 blocked for more than 120 seconds.<br>Jul 12 02:03:09 DECCAL04SL kernel: &quot;echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs&quot; disables this message.<br>Jul 12 02:03:09 DECCAL04SL kernel: REC_10_DIA_W5   D ffff88eee162edc0     0 48046  99969 0x00000000<br>Jul 12 02:03:09 DECCAL04SL kernel: ffff887965f93ad0 0000000000000086 ffff88bf24b3f300 ffff887965f93fd8<br>Jul 12 02:03:09 DECCAL04SL kernel: ffff887965f93fd8 ffff887965f93fd8 ffff88bf24b3f300 ffff88eee162edb8<br>Jul 12 02:03:09 DECCAL04SL kernel: ffff88eee162edbc ffff88bf24b3f300 00000000ffffffff ffff88eee162edc0<br>Jul 12 02:03:09 DECCAL04SL kernel: Call Trace:<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163d1b9&gt;] schedule_preempt_disabled+0x29/0x70<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163aeb5&gt;] __mutex_lock_slowpath+0xc5/0x1c0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811e9487&gt;] ? unlazy_walk+0x87/0x140<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163a31f&gt;] mutex_lock+0x1f/0x2f<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff81633cf9&gt;] lookup_slow+0x33/0xa7<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811ee913&gt;] path_lookupat+0x773/0x7a0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811721d6&gt;] ? free_hot_cold_page_list+0x46/0xa0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811ee96b&gt;] filename_lookup+0x2b/0xc0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811f04f5&gt;] kern_path+0x55/0xb0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff811ef684&gt;] ? getname_flags+0xc4/0x1a0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8116922e&gt;] ? __find_get_page+0x1e/0xa0<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0909846&gt;] wr_lookupname+0x56/0xe0 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa039af9c&gt;] ? xfs_iunlock+0x11c/0x130 [xfs]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0916558&gt;] ips_open_pre+0x88/0x2e0 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff81193541&gt;] ? __do_fault+0x401/0x510<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0909793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa091400e&gt;] ? inherit_procattr_from_parent+0x2de/0x350 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0909793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa090ab7d&gt;] ? get_sbj_attr_from_proc+0x6d/0xa0 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa090b8b8&gt;] ? prst_preproc+0x38/0x690 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0916a47&gt;] prst_open+0x1d7/0x340 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffffa0916bf0&gt;] rg_open+0x40/0x60 [RedCastle]<br>Jul 12 02:03:09 DECCAL04SL kernel: [&lt;ffffffff816470c9&gt;] system_call_fastpath+0x16/0x1b<br><br>또한, 4번 노드에서 cron 동작이 추가된 것으로 확인됩니다.<br><br>[sosreport-DECCAL04SL-20170712083028]$ cat var/spool/cron/root<br>### ERP Redhat Daily Check ###<br>5 6 * * * /bin/sh /sysadmin/syscheck/daily_check_rhel7.sh &gt; /dev/null 2&gt;&amp;1<br><br># Oasis fix<br>50 23 * * * /sysadmin/SYSJOB/SECURITY/oasis_fix.sh<br><br>############### hsrm diskinfo ##################<br>30 0 * * * /sysadmin/work/hsrm/fletaAgent/fletaDaemon.sh  &gt; /dev/null 2&gt;&amp;1<br>1 * * * * /var/log/ipf_rotate<br><br>### ERP RHEL monthly onlinePM gather ###<br>12 20 15 * * /bin/sh /sysadmin/onlinePM/RHEL/tgsysadm.sh &gt; /dev/null 2&gt;&amp;1<br><br>### Regular OS Backup ###<br>00 00 1-7 * * (test `date +\%a` = Sat &amp;&amp; /sysadmin/rear/osback.sh)<br><br>추가적인 원인 파악을 위해 vmcore 를 수집해주시기 바랍니다.<br><br># echo 10 &gt; /proc/sys/kernel/hung_task_warnings<br># echo 1 &gt; /proc/sys/kernel/hung_task_panic<br><br>아울러, nfs 엔지니어에 올려주신 덤프를 의뢰한 상태이며, 분석 결과가 도착하는대로 안내해드리도록 하겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-12T04:09:47Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JuUeOIAV"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-07-12T01:33:50Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-07-12T01:33:50Z</b><br><br>참고사항<br>--------------------------------------------------- <br> 금일 새벽에도 DECCAL04SL nfs not responding이 발생하여 조치하였습니다.<br> <br>  *.*.*.202 로 연결된 NFS 파일시스템이 문제였으며<br> <br> 해당시간 sar 결과 보면 load-avg가 문제 후로 증가합니다.<br> <br>01:52:01      runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>01:53:01            0      2559      0.04      0.03      0.05         0<br>01:54:01            0      2559      0.02      0.02      0.05         0<br>01:55:01            1      2562      0.01      0.02      0.05         0<br>01:56:01            0      2559      0.03      0.03      0.05         0<br>01:57:01            0      2559      0.01      0.02      0.05         0<br>01:58:01            1      2561      0.04      0.03      0.05         0<br>01:59:01            0      2559      0.06      0.04      0.05         0<br>02:00:01            0      2560      0.02      0.04      0.05         0<br>02:01:01            2      2574     25.03      6.47      2.21        22<br>02:02:01            1      2566     43.54     15.54      5.64        15<br>02:03:01            0      2565     49.00     22.22      8.55        11<br>02:04:01            0      2564     51.25     27.77     11.32         9<br>02:05:01            0      2564     52.17     32.30     13.91         9<br>02:06:01            2      2565     52.50     35.99     16.32         9<br>02:07:01            0      2563     52.25     38.93     18.57         9<br>02:08:01            0      2563     52.55     41.47     20.72         0<br>02:09:01            0      2563     52.63     43.49     22.71         0<br>02:10:01            1      2563     52.46     45.09     24.56         0<br>02:11:01            0      2562     52.38     46.43     26.31         0<br>02:12:01            0      2562     52.51     47.56     27.96         0<br>02:13:01            0      2564     52.64     48.48     29.50         0<br>02:14:01            1      2565     52.31     49.14     30.91         0<br>02:15:01            0      2564     52.37     49.76     32.27         0<br>02:16:02            0      2565     53.15     50.46     33.60         0<br>02:17:01            2      2566     53.50     50.98     34.75         0<br>02:18:01            0      2564     53.32     51.40     35.91         0<br>02:19:01            0      2563     53.46     51.81     37.02         0<br>02:20:01            0      2564     53.65     52.15     38.07         0<br>02:21:01            1      2565     53.55     52.37     39.02         0<br> <br> 수집된 파일은 dropbox nfs_issue.zip에 업로드 하였습니다.<br><br><publishedDate>2017-07-12T01:33:50Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JuUd6IAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-07-12T01:31:16Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-07-12T01:31:16Z</b><br><br>안녕하십니까 동일한 증상이 발생한 시점에서 알려주신 정보 수집하여 dropbox에 파일 업로드하였습니다<br>파일명 :  dropbox nfs_issue.zip<br>분석 요청드립니다<br>감사합니다<br><br><publishedDate>2017-07-12T01:31:16Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JuCmPIAV"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-07-11T00:27:25Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-07-11T00:27:24Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>문제가 재발하였다면, 문제가 발생하는 동안 sosreport 를 올려주시고,<br>앞서 안내해드린 nfs 관련 덤프도 수집해주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-07-11T00:27:24Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JuCh6IAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-07-11T00:13:56Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-07-11T00:13:56Z</b><br><br>안녕하십니까 타임게이트 오선우입니다<br>해당 문제가 다시 발생하여 해당케이스 다시오픈합니다<br>분석에 필요한 정보 알려주시면 수집하도록 하겠습니다<br><br><publishedDate>2017-07-11T00:13:56Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JmaQNIAZ"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-23T01:49:01Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-23T01:49:01Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>본 기술 문의의 상태를 처리완료 상태로 변경하고자 합니다.<br><br>만약 본 기술 문의와 관련하여 추가 질문이 있으시다면 언제든지 본 기술 문의를 *재개*하실 수 있습니다.<br><br>기술 문의가 처리 완료되면 *고객 설문조사* 메일이 발송됩니다. 고객님께서 남기신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다.<br>향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>만약 본 이슈와 관련하여 추가적인 문의 사항이 있으실 경우 연락 주시기 바랍니다.<br><br>감사합니다.<br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-06-23T01:49:01Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JmaI4IAJ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-23T01:27:27Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-23T01:27:26Z</b><br><br>네 문제 발생시 오픈하도록 하겠습니다. 감사합니다.<br><br><publishedDate>2017-06-23T01:27:26Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JmZqtIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-23T00:12:23Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-23T00:12:23Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>6월 7일 이후에 아직 별다른 에러가 발생하고 있지 않는 것이 맞는지 확인해주시기 바랍니다.<br>또한, 2주 이상 아무런 문제가 없는 것으로 보이며, 본 기술문의를 일시적으로 종료하고<br>문제 재발시에 본 기술문의를 다시 재개하는 것은 어떨지 고려해주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-23T00:12:23Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JlohFIAR"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-20T11:15:07Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-20T11:15:07Z</b><br><br>확인 감사합니다<br><br><publishedDate>2017-06-20T11:15:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JlmOSIAZ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-20T07:56:51Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-20T07:56:51Z</b><br><br>아직까지는 없습니다.<br><br><publishedDate>2017-06-20T07:56:51Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JlSUjIAN"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-19T00:15:48Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-19T00:15:48Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>네트워크 구성 혹은 NFS 서버, 애플리케이션 동작에 변경된 부분이 있는지 궁금합니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-19T00:15:48Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JlSUAIA3"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-19T00:12:47Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-19T00:12:47Z</b><br><br>같은 증상 발생시 분석의뢰 예정입니다.<br><br><publishedDate>2017-06-19T00:12:47Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JlSMpIAN"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-18T22:53:25Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-18T22:53:25Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin<br>Technical Support Engineer<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-06-18T22:53:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JgSLdIAN"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2017-06-14T02:54:31Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2017-06-14T02:54:31Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br>알겠습니다. 정보 업로드 되는대로 추가적인 분석하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2017-06-14T02:54:31Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JgAD9IAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-13T04:38:04Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-13T04:38:04Z</b><br><br>이슈 발생시 게더링되는 정보를 첨부하여 드리도록 하겠습니다.<br>감사합니다.<br><br><publishedDate>2017-06-13T04:38:04Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jg94zIAB"><br>======================<br><b>생성계정 : Zheng, Meiyan</b><br><b>생성날짜 : 2017-06-13T01:35:54Z</b><br><b>마지막 답변자 : Zheng, Meiyan</b><br><b>마지막 수정 일자 : 2017-06-13T01:35:54Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services를 이용 해 주셔서 감사합니다. <br><br><br>케이스 담당자 분이 지금 부재중이라 대신 코멘트 남겨 드립니다. <br>앞서 요청 해 드렸던 tcpdump 등 정보를 제공 해 주시면 이슈 발생 원인에 <br>대해 좀더 확인 해 드릴수 있을 것 같습니다. <br><br>감사합니다. 좋은 하루 되십시오.<br><br><publishedDate>2017-06-13T01:35:54Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfZ90IAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-09T05:57:03Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-09T05:57:03Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>tcpdump 는 적정 시간으로 통일하시면 될 것 같습니다.<br>15초~30초 사이면 될 듯합니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-09T05:57:03Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfZ8pIAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-09T05:54:34Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-09T05:54:34Z</b><br><br>꼭 tcpdump를 250메가까지 다 찍어야 하는지 궁금하네요 지금은 사용량이 없네요<br><br><publishedDate>2017-06-09T05:54:34Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfWLcIAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-09T05:44:46Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-09T05:44:46Z</b><br><br>Tcpdump도 10초 있다 끊어줘야하나요??<br><br><publishedDate>2017-06-09T05:44:46Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfW4bIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-09T05:04:07Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-09T05:04:07Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>vmcore 수집이 가능하시면, 아래 명령으로 파라메터를 활성화하시기 바랍니다.<br># echo 1 &gt; /proc/sys/kernel/hung_task_panic<br>======================<br>제 환경에서는 아래 명령으로 정상적으로 수집이 됩니다만 버전에 따라 옵션차이가 있을수도 있을 것 같습니다.<br><br># date &gt; nfsiostat.txt; nfsiostat 5 /mnt &gt;&gt; nfsiostat.txt<br>^C<br><br># tail nfsiostat.txt <br><br>192.168.122.1:/mnt/sda5/ mounted on /mnt:<br><br>   op/s<br><br>rpc bklog<br>   0.00 <br>   0.00<br>read:             ops/s<br><br>   kB/s<br><br>  kB/op<br><br>retrans<br><br>avg RTT (ms)<br>avg exe (ms)<br><br><br>  0.000 <br>  0.000 <br>  0.000        0 (0.0%) <br>  0.000 <br>  0.000<br>write:            ops/s<br><br>   kB/s<br><br>  kB/op<br><br>retrans<br><br>avg RTT (ms)<br>avg exe (ms)<br><br><br>  0.000 <br>  0.000 <br>  0.000        0 (0.0%) <br>  0.000 <br>  0.000<br>Caught ^C... exiting<br><br><br># nfsiostat 5 를 수행한 결과가 위와 같이 나오는지 확인해주시고 정상이라면 옵션 변경을 해서 수행하시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-09T05:04:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfW2LIAV"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-09T04:56:56Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-09T04:56:56Z</b><br><br>vmcore에 대해서 말씀주셨는데 <br>이를 커널값 변경말고 수동으로 해도 되는것인지요?<br>아직 실행여부는 확인하지 못했지만 수동으로 해도 되냐는 질의를 받았습니다.<br><br><br>그리고 NFS-MOUNT-POINT는 아래와 같이 하면 되는거 아닌가요? nfsiostat 5만 해도 되는거 아닌지요?<br>아래와 같이 하면 실행이 되지 않습니다.<br><br>date &gt; nfsiostat.txt; nfsiostat 5 /SAPP &gt;&gt; nfsiostat.txt<br><br><publishedDate>2017-06-09T04:56:56Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfUkFIAV"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-09T01:07:29Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-09T01:07:28Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>NFS-MOUNT-POINT 는 NFS 마운트된 경로를 적어주시면 됩니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-09T01:07:28Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfUhNIAV"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-09T01:00:36Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-09T01:00:36Z</b><br><br>date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br>실행이 안되는데 확인 부탁드립니다<br><br><publishedDate>2017-06-09T01:00:36Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfUG6IAN"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-08T23:40:52Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-08T23:40:52Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>올려주신 로그에서 nfs 연결 중단 및 행타스크 로그, 콜트레이스를 확인하였습니다.<br><br>Dec  2 10:05:58 DECCAL04SL kernel: INFO: task REC_00_DIA_W16:68967 blocked for more than 120 seconds.<br>Dec  2 10:05:58 DECCAL04SL kernel: &quot;echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs&quot; disables this message.<br>Dec  2 10:05:58 DECCAL04SL kernel: REC_00_DIA_W16  D ffff88fa7a873d50     0 68967  68920 0x00000002<br>Dec  2 10:05:58 DECCAL04SL kernel: ffff88fa7a873bf0 0000000000000086 ffff88fb6bf38b80 ffff88fa7a873fd8<br>Dec  2 10:05:58 DECCAL04SL kernel: ffff88fa7a873fd8 ffff88fa7a873fd8 ffff88fb6bf38b80 ffff887f7f814780<br>Dec  2 10:05:58 DECCAL04SL kernel: 0000000000000000 7fffffffffffffff ffffffff811688b0 ffff88fa7a873d50<br>Dec  2 10:05:58 DECCAL04SL kernel: Call Trace:<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811688b0&gt;] ? wait_on_page_read+0x60/0x60<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff8163a909&gt;] schedule+0x29/0x70<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff816385f9&gt;] schedule_timeout+0x209/0x2d0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff8101c829&gt;] ? read_tsc+0x9/0x10<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff810d814c&gt;] ? ktime_get_ts64+0x4c/0xf0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff8101c829&gt;] ? read_tsc+0x9/0x10<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811688b0&gt;] ? wait_on_page_read+0x60/0x60<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81639f3e&gt;] io_schedule_timeout+0xae/0x130<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81639fd8&gt;] io_schedule+0x18/0x20<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811688be&gt;] sleep_on_page+0xe/0x20<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81638780&gt;] __wait_on_bit+0x60/0x90<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81168646&gt;] wait_on_page_bit+0x86/0xb0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff810a6b60&gt;] ? wake_atomic_t_function+0x40/0x40<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81168781&gt;] filemap_fdatawait_range+0x111/0x1b0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff8116a7af&gt;] filemap_write_and_wait_range+0x3f/0x70<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffffa0591c7e&gt;] nfs_file_fsync+0x7e/0x100 [nfs]<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff8120f77b&gt;] vfs_fsync+0x2b/0x40<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffffa0591f0a&gt;] nfs_file_flush+0x7a/0xb0 [nfs]<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811dc254&gt;] filp_close+0x34/0x80<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811fcb98&gt;] __close_fd+0x78/0xa0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811dd963&gt;] SyS_close+0x23/0x50<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81645909&gt;] system_call_fastpath+0x16/0x1b<br><br>Dec  2 10:05:58 DECCAL04SL kernel: INFO: task REC_00_DIA_W30:68981 blocked for more than 120 seconds.<br>Dec  2 10:05:58 DECCAL04SL kernel: &quot;echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs&quot; disables this message.<br>Dec  2 10:05:58 DECCAL04SL kernel: REC_00_DIA_W30  D ffff88fc0185fb10     0 68981  68920 0x00000000<br>Dec  2 10:05:58 DECCAL04SL kernel: ffff88fc0185f9b0 0000000000000082 ffff88fc08088b80 ffff88fc0185ffd8<br>Dec  2 10:05:58 DECCAL04SL kernel: ffff88fc0185ffd8 ffff88fc0185ffd8 ffff88fc08088b80 ffff883f7fbd4780<br>Dec  2 10:05:58 DECCAL04SL kernel: 0000000000000000 7fffffffffffffff ffffffff811688b0 ffff88fc0185fb10<br>Dec  2 10:05:58 DECCAL04SL kernel: Call Trace:<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811688b0&gt;] ? wait_on_page_read+0x60/0x60<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff8163a909&gt;] schedule+0x29/0x70<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff816385f9&gt;] schedule_timeout+0x209/0x2d0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81172ef9&gt;] ? __alloc_pages_nodemask+0x199/0xb90<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff8101c829&gt;] ? read_tsc+0x9/0x10<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811688b0&gt;] ? wait_on_page_read+0x60/0x60<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81639f3e&gt;] io_schedule_timeout+0xae/0x130<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81639fd8&gt;] io_schedule+0x18/0x20<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811688be&gt;] sleep_on_page+0xe/0x20<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81638780&gt;] __wait_on_bit+0x60/0x90<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81168646&gt;] wait_on_page_bit+0x86/0xb0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff810a6b60&gt;] ? wake_atomic_t_function+0x40/0x40<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff810a6aa5&gt;] ? wake_up_bit+0x25/0x30<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffffa05a2de5&gt;] nfs_wb_page+0x85/0x180 [nfs]<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffffa05a2f7e&gt;] nfs_flush_incompatible+0x9e/0x150 [nfs]<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffffa0592ba2&gt;] nfs_write_begin+0x92/0x280 [nfs]<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81169d6d&gt;] generic_file_buffered_write+0x11d/0x290<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff8116b295&gt;] __generic_file_aio_write+0x1d5/0x3e0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff815a10eb&gt;] ? inet_recvmsg+0x7b/0xa0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff8116b4fd&gt;] generic_file_aio_write+0x5d/0xc0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffffa059203b&gt;] nfs_file_write+0xbb/0x1d0 [nfs]<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811dddad&gt;] do_sync_write+0x8d/0xd0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811de5cd&gt;] vfs_write+0xbd/0x1e0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff811df06f&gt;] SyS_write+0x7f/0xe0<br>Dec  2 10:05:58 DECCAL04SL kernel: [&lt;ffffffff81645909&gt;] system_call_fastpath+0x16/0x1b<br>...<br>Dec  2 11:03:31 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>...<br>Dec 20 18:46:30 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>...<br>Dec 20 18:51:12 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>======================<br><br>Boot time: 2017. 04.  09. (일) 03:35:00 UTC  (epoch: 1491708900)<br><br>Apr 17 19:53:02 DECCAL04SL CROND[70567]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Apr 17 19:53:44 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>Apr 17 19:53:44 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>....<br>Apr 17 19:54:30 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br><br>Apr 17 19:55:01 DECCAL04SL kernel: INFO: task REC_00_DIA_W20:22176 blocked for more than 120 seconds.<br>Apr 17 19:55:01 DECCAL04SL kernel: &quot;echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs&quot; disables this message.<br>Apr 17 19:55:01 DECCAL04SL kernel: REC_00_DIA_W20  D ffff88eee162edc0     0 22176  22135 0x00000000<br>Apr 17 19:55:01 DECCAL04SL kernel: ffff88fecc027ad0 0000000000000082 ffff88ff137a4500 ffff88fecc027fd8<br>Apr 17 19:55:01 DECCAL04SL kernel: ffff88fecc027fd8 ffff88fecc027fd8 ffff88ff137a4500 ffff88eee162edb8<br>Apr 17 19:55:01 DECCAL04SL kernel: ffff88eee162edbc ffff88ff137a4500 00000000ffffffff ffff88eee162edc0<br>Apr 17 19:55:01 DECCAL04SL kernel: Call Trace:<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163d1b9&gt;] schedule_preempt_disabled+0x29/0x70<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163aeb5&gt;] __mutex_lock_slowpath+0xc5/0x1c0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811e9487&gt;] ? unlazy_walk+0x87/0x140<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163a31f&gt;] mutex_lock+0x1f/0x2f<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff81633cf9&gt;] lookup_slow+0x33/0xa7<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811ee913&gt;] path_lookupat+0x773/0x7a0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811a218a&gt;] ? do_page_add_anon_rmap+0x9a/0xc0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811a21c0&gt;] ? page_add_anon_rmap+0x10/0x20<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811c60ef&gt;] ? remove_migration_pte+0xbf/0x2e0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811ee96b&gt;] filename_lookup+0x2b/0xc0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811f04f5&gt;] kern_path+0x55/0xb0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811ef684&gt;] ? getname_flags+0xc4/0x1a0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0909846&gt;] wr_lookupname+0x56/0xe0 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0916558&gt;] ips_open_pre+0x88/0x2e0 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0909793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa091400e&gt;] ? inherit_procattr_from_parent+0x2de/0x350 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0909793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa090ab7d&gt;] ? get_sbj_attr_from_proc+0x6d/0xa0 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa090b8b8&gt;] ? prst_preproc+0x38/0x690 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0916a47&gt;] prst_open+0x1d7/0x340 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0916bf0&gt;] rg_open+0x40/0x60 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff816470c9&gt;] system_call_fastpath+0x16/0x1b<br>Apr 17 19:55:01 DECCAL04SL kernel: INFO: task REC_00_DIA_W22:22178 blocked for more than 120 seconds.<br>Apr 17 19:55:01 DECCAL04SL kernel: &quot;echo 0 &gt; /proc/sys/kernel/hung_task_timeout_secs&quot; disables this message.<br>Apr 17 19:55:01 DECCAL04SL kernel: REC_00_DIA_W22  D ffff88eee162edc0     0 22178  22135 0x00000000<br>Apr 17 19:55:01 DECCAL04SL kernel: ffff88fecc123ad0 0000000000000086 ffff88ff137a6780 ffff88fecc123fd8<br>Apr 17 19:55:01 DECCAL04SL kernel: ffff88fecc123fd8 ffff88fecc123fd8 ffff88ff137a6780 ffff88eee162edb8<br>Apr 17 19:55:01 DECCAL04SL kernel: ffff88eee162edbc ffff88ff137a6780 00000000ffffffff ffff88eee162edc0<br>Apr 17 19:55:01 DECCAL04SL kernel: Call Trace:<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163d1b9&gt;] schedule_preempt_disabled+0x29/0x70<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163aeb5&gt;] __mutex_lock_slowpath+0xc5/0x1c0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811e9487&gt;] ? unlazy_walk+0x87/0x140<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163a31f&gt;] mutex_lock+0x1f/0x2f<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff81633cf9&gt;] lookup_slow+0x33/0xa7<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811ee913&gt;] path_lookupat+0x773/0x7a0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811a218a&gt;] ? do_page_add_anon_rmap+0x9a/0xc0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811a21c0&gt;] ? page_add_anon_rmap+0x10/0x20<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811c60ef&gt;] ? remove_migration_pte+0xbf/0x2e0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811ee96b&gt;] filename_lookup+0x2b/0xc0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811f04f5&gt;] kern_path+0x55/0xb0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff811ef684&gt;] ? getname_flags+0xc4/0x1a0<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0909846&gt;] wr_lookupname+0x56/0xe0 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0916558&gt;] ips_open_pre+0x88/0x2e0 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0909793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa091400e&gt;] ? inherit_procattr_from_parent+0x2de/0x350 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0909793&gt;] ? RC_RWLOCK_DONE+0x13/0x30 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa090ab7d&gt;] ? get_sbj_attr_from_proc+0x6d/0xa0 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa090b8b8&gt;] ? prst_preproc+0x38/0x690 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff8163b2e2&gt;] ? down_read+0x12/0x30<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0916a47&gt;] prst_open+0x1d7/0x340 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffffa0916bf0&gt;] rg_open+0x40/0x60 [RedCastle]<br>Apr 17 19:55:01 DECCAL04SL kernel: [&lt;ffffffff816470c9&gt;] system_call_fastpath+0x16/0x1b<br><br>..<br>Apr 17 19:55:29 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>Apr 17 19:55:34 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>Apr 17 19:56:01 DECCAL04SL CROND[71211]: (root) CMD (/usr/lib64/sa/sa1 1 1)<br>Apr 17 19:56:04 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>Apr 17 19:56:08 DECCAL04SL SAPREC_00[22230]: Q0I Basis System: Operating system call getaddrinfo failed (error no. 0 )<br>Apr 17 19:56:08 DECCAL04SL SAPREC_00[22230]: Q0I Basis System: Operating system call getaddrinfo failed (error no. 0 )<br>Apr 17 19:56:19 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>Apr 17 19:56:19 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>Apr 17 19:56:19 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>Apr 17 19:56:19 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>Apr 17 19:56:19 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>Apr 17 19:56:19 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>Apr 17 19:56:19 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>Apr 17 19:56:19 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>Apr 17 19:56:19 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>...<br>Apr 17 20:47:47 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>...<br>Apr 17 20:55:21 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br><br>로그를 확인해보니, 작년 12월에는 nfs 파일시스템 관련 행이 발생하였으며,<br>올해 4월부터는 파일오픈 작업에 RedCastle 모듈의 함수가 수행되면서 mutex_lock에 의한 파일시스템 행이<br>콜트레이스에서 확인됩니다.<br>이밖에도 nfs 서버와 지속적으로 연결에 문제가 발생하고 있는 것으로 확인됩니다.<br><br>NFS 관련 엔지니어에게도 이 부분을 확인할 예정이며, 해당 부분에 대해 의견을 수집한 이후에<br>내용 공유하도록 하겠습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-08T23:40:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfU79IAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-08T23:13:05Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-08T23:13:05Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>죄송합니다. 미팅전 급하게 답변을 준비하느라 오타가 있었습니다. 아래 명령이 맞습니다.<br># echo 10 &gt;/proc/sys/kernel/hung_task_warnings<br><br>after 파일 생성이 누락되었었네요.<br><br>1. 평상시에 로그를 수집해주시기 바랍니다.<br> mkdir normal<br> cd normal<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> 적절한 시점 10-30초 정도 이후에 종료<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> 적절한 시점 10-30초 정도 이후에 종료<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br> cp /proc/self/mountstats  mountstats_raw_after_$(date +%s).txt<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>2. 문제가 발생한 시점에 로그를 수집해주시기 바랍니다.<br> mkdir issue<br> cd issue<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br> cp /proc/self/mountstats  mountstats_raw_after_$(date +%s).txt<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>3. 문제 해결을 위해 다른 NAS 노드로 이관된 연결을 <br>   다시 문제가 발생한 NAS 노드로 연결한 이후에 로그를 수집해주시기 바랍니다.<br><br> mkdir after<br> cd after<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br> cp /proc/self/mountstats  mountstats_raw_after_$(date +%s).txt<br> <br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>저희가 요청하는 사항은 아래와 같습니다.:<br><br>3부분에 걸친 데이터 수집<br>- mounstats_raw_before.txt<br>- nfsiostat.txt<br>- nfs_meminfo.txt<br>- nfs_util.txt<br>- tcpdump<br>- mounstats_raw_after.txt<br>- mountstats 결과<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-08T23:13:05Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfLGcIAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-08T13:22:14Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-08T13:22:13Z</b><br><br>mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br>위 명령어는 무엇을 의미하는것인지요?<br>명령어 실행이 되지 않습니다.<br><br>echo 10 &gt;/proc/kernel/hung_task_warnings<br>위의 명령어는 <br>echo 10 &gt;/proc/sys/kernel/hung_task_warnings<br>아닌가요?<br><br><br>말씀주셨던 명령어들이 어떠한 데이터를 수집하는지 모두 자세하게 설명 부탁드립니다.<br><br><publishedDate>2017-06-08T13:22:13Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfHJEIA3"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-08T07:57:10Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-08T07:57:10Z</b><br><br>안녕하세요?<br>요청하신  messages  화일 드롭박스에 업로드 하였으며 그 화일명은 all_messages.tar.gz 입니다.<br>또한 스토리지는 히다찌 HNAS 4080 입니다.<br>확인 부탁드립니다.<br><br><publishedDate>2017-06-08T07:57:10Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfGnVIAV"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-08T07:08:28Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-08T07:08:28Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>echo 10 &gt;/proc/kernel/hung_task_warnings<br>여기서 10이 의미하는 것 부탁드리구요...<br>---- 10번 행 태스크 로그 찍게 됩니다.<br>---- 한번 출력시마다 1씩 감소하여 0이 되면 더 이상 로그 출력도 하지 않고 콘솔에 출력도 하지 않게됩니다.<br>---- 현재 문제의 시간에 행이 발생하고 있는 것으로 예상하고 있으며, 추후 동일 증상 발현시에 로그를 출력하게 될 것입니다.<br><br>문제 발생시<br><br>일전에 말씀주신 스크립트 결과 와 위 설정으로 통한 call trace  로그 보내드리면 되는거죠?<br>--- 네 두 가지 보내주시면 됩니다.<br>--- 추가로 요청드린 4번 노드에서 이전 로그들을 올려주시면 이전 행에 대한 콜트레이스를 확인할 수 있을 것 같습니다.<br>--- NAS 장비 모델명도 알려주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-08T07:08:28Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfGjTIAV"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-08T07:02:36Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-08T07:02:36Z</b><br><br>echo 10 &gt;/proc/kernel/hung_task_warnings<br>여기서 10이 의미하는 것 부탁드리구요...<br><br>문제 발생시<br><br>일전에 말씀주신 스크립트 결과 와 위 설정으로 통한 call trace  로그 보내드리면 되는거죠?<br><br>감사합니다.<br>======================<br><br><br>&lt;&lt;&lt;&lt;&lt;&lt; 일전에 말씀주신 스크립트 &gt;&gt;&gt;&gt;&gt;&gt;<br>1. 평상시에 로그를 수집해주시기 바랍니다.<br> mkdir normal<br> cd normal<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> 적절한 시점 10-30초 정도 이후에 종료<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> 적절한 시점 10-30초 정도 이후에 종료<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>2. 문제가 발생한 시점에 로그를 수집해주시기 바랍니다.<br> mkdir issue<br> cd issue<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>3. 문제 해결을 위해 다른 NAS 노드로 이관된 연결을 <br>   다시 문제가 발생한 NAS 노드로 연결한 이후에 로그를 수집해주시기 바랍니다.<br><br> mkdir after<br> cd after<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>저희가 요청하는 사항은 아래와 같습니다.:<br><br>3부분에 걸친 데이터 수집<br>- NFS 서버, NAS 의 브랜드와 모델명<br>- mounstats_raw_before.txt<br>- nfsiostat.txt<br>- nfs_meminfo.txt<br>- nfs_util.txt<br>- tcpdump<br>- mounstats_raw_after.txt<br><br><publishedDate>2017-06-08T07:02:36Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfFzCIAV"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-08T05:41:21Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-08T05:41:21Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>7일 13:49:31 초~14:13:52 초<br><br><br>[DECCAL01SL]<br>Linux 3.10.0-327.44.2.el7.x86_64 (DECCAL01SL)   06/07/2017      _x86_64_        (80 CPU)<br><br>12:00:01 AM     CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>08:36:01 AM     all      0.83      0.00      0.23      0.05      0.00      0.00      0.00      0.00      0.00     98.90<br>08:37:01 AM     all     25.09      0.00      0.38      0.05      0.00      0.00      0.19      0.00      0.00     74.30<br>08:38:01 AM     all     28.15      0.00      0.42      0.08      0.00      0.00      0.20      0.00      0.00     71.15<br>...<br>01:40:01 PM     all     20.42      0.00      0.54      0.00      0.00      0.00      0.08      0.00      0.00     78.96<br>01:41:01 PM     all     21.56      0.00      0.53      0.00      0.00      0.00      0.10      0.00      0.00     77.81<br>01:42:01 PM     all     22.41      0.00      0.56      0.00      0.00      0.00      0.10      0.00      0.00     76.93<br>01:43:01 PM     all     22.81      0.00      0.54      0.01      0.00      0.00      0.09      0.00      0.00     76.55<br>01:44:01 PM     all     19.45      0.00      0.53      0.00      0.00      0.00      0.08      0.00      0.00     79.94<br>01:45:01 PM     all     17.00      0.00      0.42      0.00      0.00      0.00      0.07      0.00      0.00     82.52<br>01:46:01 PM     all     17.99      0.00      0.39      0.00      0.00      0.00      0.08      0.00      0.00     81.53<br>01:47:01 PM     all     19.09      0.00      0.43      0.00      0.00      0.00      0.08      0.00      0.00     80.40<br>01:48:01 PM     all     24.70      0.00      0.58      0.02      0.00      0.00      0.11      0.00      0.00     74.60<br>01:49:01 PM     all     17.00      0.00      0.40      0.00      0.00      0.00      0.08      0.00      0.00     82.52<br>01:50:01 PM     all      7.10      0.00      0.19      0.00      0.00      0.00      0.02      0.00      0.00     92.69<br>01:51:01 PM     all      6.73      0.00      0.17      0.00      0.00      0.00      0.02      0.00      0.00     93.07<br><br>[DECCAL02SL]<br>Linux 3.10.0-327.44.2.el7.x86_64 (DECCAL02SL) <br>06/07/2017 <br>_x86_64_<br>(80 CPU)<br><br>12:00:01 AM     CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>08:36:01 AM     all      0.82      0.00      0.09      0.00      0.00      0.00      0.00      0.00      0.00     99.09<br>08:37:01 AM     all     25.15      0.00      0.21      0.01      0.00      0.00      0.08      0.00      0.00     74.54<br>08:38:01 AM     all     27.83      0.00      0.21      0.03      0.00      0.00      0.09      0.00      0.00     71.84<br>08:39:01 AM     all     27.75      0.00      0.30      0.04      0.00      0.00      0.08      0.00      0.00     71.82<br>08:40:01 AM     all     24.93      0.00      0.41      0.01      0.00      0.00      0.11      0.00      0.00     74.55<br>08:41:01 AM     all     25.72      0.00      0.43      0.01      0.00      0.00      0.11      0.00      0.00     73.74<br>...<br>01:40:01 PM     all     20.54      0.00      0.84      0.01      0.00      0.00      0.11      0.00      0.00     78.50<br>01:41:01 PM     all     22.67      0.00      0.77      0.01      0.00      0.00      0.11      0.00      0.00     76.44<br>01:42:01 PM     all     20.26      0.00      0.74      0.01      0.00      0.00      0.10      0.00      0.00     78.90<br>01:43:01 PM     all     18.70      0.00      0.72      0.00      0.00      0.00      0.09      0.00      0.00     80.48<br>01:44:01 PM     all     21.73      0.00      0.78      0.01      0.00      0.00      0.11      0.00      0.00     77.37<br>01:45:01 PM     all     18.56      0.00      0.63      0.01      0.00      0.00      0.08      0.00      0.00     80.73<br>01:46:01 PM     all     17.81      0.00      0.52      0.00      0.00      0.00      0.07      0.00      0.00     81.60<br>01:47:01 PM     all     19.64      0.00      0.55      0.00      0.00      0.00      0.08      0.00      0.00     79.73<br>01:48:01 PM     all     21.53      0.00      0.63      0.01      0.00      0.00      0.10      0.00      0.00     77.73<br>01:49:01 PM     all     17.00      0.00      0.45      0.00      0.00      0.00      0.06      0.00      0.00     82.50<br>01:50:01 PM     all      7.79      0.00      0.26      0.00      0.00      0.00      0.02      0.00      0.00     91.94<br>01:51:01 PM     all      5.25      0.00      0.18      0.00      0.00      0.00      0.01      0.00      0.00     94.56<br><br>[DECCAL03SL]<br>Linux 3.10.0-327.44.2.el7.x86_64 (DECCAL03SL) <br>06/07/2017 <br>_x86_64_<br>(80 CPU)<br>12:00:01 AM     CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>10:19:01 AM     all      1.87      0.00      0.10      0.00      0.00      0.00      0.00      0.00      0.00     98.02<br>10:20:01 AM     all      8.28      0.00      0.27      0.00      0.00      0.00      0.02      0.00      0.00     91.43<br>10:21:01 AM     all     11.43      0.00      0.34      0.00      0.00      0.00      0.03      0.00      0.00     88.19<br>10:22:01 AM     all     10.88      0.00      0.31      0.00      0.00      0.00      0.03      0.00      0.00     88.78<br>10:23:01 AM     all      9.13      0.00      0.26      0.00      0.00      0.00      0.02      0.00      0.00     90.58<br>10:24:01 AM     all     12.25      0.00      0.31      0.00      0.00      0.00      0.03      0.00      0.00     87.41<br>...<br>01:40:01 PM     all     18.63      0.00      0.54      0.00      0.00      0.00      0.07      0.00      0.00     80.76<br>01:41:01 PM     all     15.67      0.00      0.49      0.00      0.00      0.00      0.05      0.00      0.00     83.78<br>01:42:01 PM     all     18.35      0.00      0.55      0.00      0.00      0.00      0.07      0.00      0.00     81.03<br>01:43:01 PM     all     15.46      0.00      0.45      0.00      0.00      0.00      0.05      0.00      0.00     84.04<br>01:44:01 PM     all     18.34      0.00      0.52      0.00      0.00      0.00      0.07      0.00      0.00     81.07<br>01:45:01 PM     all     22.75      0.00      0.48      0.01      0.00      0.00      0.09      0.00      0.00     76.68<br>01:46:01 PM     all     21.15      0.00      0.47      0.01      0.00      0.00      0.08      0.00      0.00     78.30<br>01:47:01 PM     all     19.70      0.00      0.45      0.00      0.00      0.00      0.07      0.00      0.00     79.77<br>01:48:01 PM     all     18.09      0.00      0.43      0.00      0.00      0.00      0.06      0.00      0.00     81.42<br>01:49:01 PM     all     21.47      0.00      0.56      0.00      0.00      0.00      0.08      0.00      0.00     77.88<br>01:50:01 PM     all     15.50      0.00      0.41      0.00      0.00      0.00      0.06      0.00      0.00     84.03<br>01:51:01 PM     all      8.77      0.00      0.23      0.00      0.00      0.00      0.02      0.00      0.00     90.98<br><br>[DECCAL04SL]<br>Jun  7 13:49:31 DECCAL04SL kernel: nfs: server 100.253.144.201 not responding, still trying<br>Jun  7 14:13:50 DECCAL04SL kernel: nfs: server 100.253.144.201 not responding, still trying<br><br>Linux 3.10.0-327.44.2.el7.x86_64 (DECCAL04SL) <br>06/07/2017 <br>_x86_64_<br>(80 CPU)<br>12:00:01 AM     CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>10:19:01 AM     all      0.82      0.00      0.06      0.00      0.00      0.00      0.00      0.00      0.00     99.12<br>10:20:01 AM     all      6.56      0.00      0.21      0.00      0.00      0.00      0.01      0.00      0.00     93.22<br>10:21:01 AM     all     10.84      0.00      0.31      0.00      0.00      0.00      0.03      0.00      0.00     88.82<br>10:22:01 AM     all     13.37      0.00      0.32      0.00      0.00      0.00      0.03      0.00      0.00     86.27<br>10:23:01 AM     all     15.23      0.00      0.36      0.00      0.00      0.00      0.04      0.00      0.00     84.37<br>10:24:01 AM     all     16.61      0.00      0.37      0.00      0.00      0.00      0.04      0.00      0.00     82.98<br>...<br>01:40:01 PM     all     48.74      0.00      3.69      0.70      0.00      0.00      0.51      0.00      0.00     46.35<br>01:41:01 PM     all     50.14      0.00      4.04      0.77      0.00      0.00      0.53      0.00      0.00     44.51<br>01:42:01 PM     all     48.26      0.00      3.62      0.46      0.00      0.00      0.53      0.00      0.00     47.13<br>01:43:01 PM     all     45.67      0.00      3.49      0.50      0.00      0.00      0.53      0.00      0.00     49.81<br>01:44:01 PM     all     44.11      0.00      3.37      0.45      0.00      0.00      0.53      0.00      0.00     51.54<br>01:45:01 PM     all     44.97      0.00      3.41      0.50      0.00      0.00      0.53      0.00      0.00     50.58<br>01:46:01 PM     all     44.97      0.00      3.23      0.49      0.00      0.00      0.54      0.00      0.00     50.76<br>01:47:01 PM     all     44.07      0.00      3.48      0.54      0.00      0.00      0.52      0.00      0.00     51.39<br>01:48:01 PM     all     41.97      0.00      3.05      0.47      0.00      0.00      0.50      0.00      0.00     54.01<br>01:49:01 PM     all     10.81      0.00      1.25     12.58      0.00      0.00      0.07      0.00      0.00     75.29<br>01:49:01 PM     all     10.81      0.00      1.25     12.58      0.00      0.00      0.07      0.00      0.00     75.29<br>01:50:01 PM     all      0.46      0.00      0.14     12.50      0.00      0.00      0.00      0.00      0.00     86.90<br>01:51:01 PM     all      0.15      0.00      0.79     12.50      0.00      0.00      0.00      0.00      0.00     86.55<br>01:52:01 PM     all      0.05      0.00      0.21     12.35      0.00      0.00      0.00      0.00      0.00     87.39<br>01:53:01 PM     all      0.13      0.00      0.60     12.49      0.00      0.00      0.00      0.00      0.00     86.78<br>01:54:01 PM     all      0.09      0.00      0.49     12.25      0.00      0.00      0.00      0.00      0.00     87.16<br>01:55:01 PM     all      0.07      0.00      0.34     12.36      0.00      0.00      0.00      0.00      0.00     87.22<br>01:56:01 PM     all      0.16      0.00      0.79     11.25      0.00      0.00      0.00      0.00      0.00     87.81<br>01:57:01 PM     all      0.02      0.00      0.06     11.25      0.00      0.00      0.00      0.00      0.00     88.68<br>01:58:01 PM     all      0.16      0.00      0.80     11.25      0.00      0.00      0.00      0.00      0.00     87.80<br>01:59:01 PM     all      0.07      0.00      0.29     11.25      0.00      0.00      0.00      0.00      0.00     88.40<br>02:00:01 PM     all      0.11      0.00      0.53     11.25      0.00      0.00      0.00      0.00      0.00     88.11<br>02:01:01 PM     all      0.15      0.00      0.57     11.17      0.00      0.00      0.00      0.00      0.00     88.11<br>02:02:01 PM     all      0.06      0.00      0.26     11.20      0.00      0.00      0.00      0.00      0.00     88.48<br>02:03:01 PM     all      0.16      0.00      0.79     11.04      0.00      0.00      0.00      0.00      0.00     88.01<br>02:04:02 PM     all      0.02      0.00      0.08     11.25      0.00      0.00      0.00      0.00      0.00     88.65<br>02:05:01 PM     all      0.15      0.00      0.77     11.08      0.00      0.00      0.00      0.00      0.00     88.01<br>02:06:01 PM     all      0.08      0.00      0.36     11.25      0.00      0.00      0.00      0.00      0.00     88.31<br>02:07:01 PM     all      0.13      0.00      0.48     11.25      0.00      0.00      0.00      0.00      0.00     88.14<br>02:08:01 PM     all      0.13      0.00      0.62     10.86      0.00      0.00      0.00      0.00      0.00     88.39<br>02:09:01 PM     all      0.04      0.00      0.20     11.25      0.00      0.00      0.00      0.00      0.00     88.51<br>02:10:01 PM     all      0.17      0.00      0.81     11.25      0.00      0.00      0.00      0.00      0.00     87.77<br>02:11:01 PM     all      0.05      0.00      0.18     11.25      0.00      0.00      0.00      0.00      0.00     88.53<br>02:12:01 PM     all      0.52      0.00      0.97     11.15      0.00      0.00      0.00      0.00      0.00     87.36<br>02:13:01 PM     all      0.38      0.00      0.47      1.11      0.00      0.00      0.00      0.00      0.00     98.04<br>                                                      ^^^^^--- 해당 시각에만 iowait 수치가 높게 나타남<br><br>5 18 19 21 25 29 52 54 64<br><br>01:50:01 PM       1      0.00      0.00      0.00    100.00      0.00      0.00      0.00      0.00      0.00      0.00<br>01:50:01 PM       5      0.00      0.00      0.00    100.00      0.00      0.00      0.00      0.00      0.00      0.00<br>01:50:01 PM      18      0.00      0.00      0.00    100.00      0.00      0.00      0.00      0.00      0.00      0.00<br>01:50:01 PM      19      0.00      0.00      0.02     99.98      0.00      0.00      0.00      0.00      0.00      0.00<br>01:50:01 PM      21      0.03      0.00      0.02     99.95      0.00      0.00      0.00      0.00      0.00      0.00<br>01:50:01 PM      25      0.00      0.00      0.00    100.00      0.00      0.00      0.00      0.00      0.00      0.00<br>01:50:01 PM      29      0.02      0.00      0.02     99.97      0.00      0.00      0.00      0.00      0.00      0.00<br>01:50:01 PM      52      0.02      0.00      0.00     99.98      0.00      0.00      0.00      0.00      0.00      0.00<br>01:50:01 PM      54      0.00      0.00      0.02     99.98      0.00      0.00      0.00      0.00      0.00      0.00<br>01:50:01 PM      64      0.00      0.00      0.00    100.00      0.00      0.00      0.00      0.00      0.00      0.00<br><br>       0        10        20        30        40        50        60        70<br>       01234567890123456789012345678901234567890123456789012345678901234567890123456789<br>            *            *  *       *                      *           *<br>   82: .....▊.......................................................................... IR-PCI-MSI-edge hpsa0<br>  101: .....▊.......................................................................... IR-PCI-MSI-edge hpsa0<br>  125: .....▊.......................................................................... IR-PCI-MSI-edge hpsa0<br>  228: ..................▊............................................................. IR-PCI-MSI-edge ens8f1-TxRx-11<br>  232: ....................................................▊........................... IR-PCI-MSI-edge ens8f1-TxRx-15<br>  248: ..................▊............................................................. IR-PCI-MSI-edge ens8f1-TxRx-31<br>  252: ....................................................▊........................... IR-PCI-MSI-edge ens8f1-TxRx-35<br>  272: ....................................................▊........................... IR-PCI-MSI-edge ens8f1-TxRx-55<br>  284: ..................▊............................................................. IR-PCI-MSI-edge ens6f0-TxRx-3<br>  288: ....................................................▊........................... IR-PCI-MSI-edge ens6f0-TxRx-7<br>  304: ..................▊............................................................. IR-PCI-MSI-edge ens6f0-TxRx-23<br>  308: ....................................................▊........................... IR-PCI-MSI-edge ens6f0-TxRx-27<br>  324: ..................▊............................................................. IR-PCI-MSI-edge ens6f0-TxRx-43<br>  328: ....................................................▊........................... IR-PCI-MSI-edge ens6f0-TxRx-47<br>  477: .....................▊.......................................................... IR-PCI-MSI-edge ens5f1-TxRx-4<br>  485: .............................▊.................................................. IR-PCI-MSI-edge ens5f1-TxRx-12<br>       0        10        20        30        40        50        60        70<br>       01234567890123456789012345678901234567890123456789012345678901234567890123456789<br>            *            *  *       *                      *           *<br>  490: ................................................................▊............... IR-PCI-MSI-edge ens5f1-TxRx-17<br>  497: .....................▊.......................................................... IR-PCI-MSI-edge ens5f1-TxRx-24<br>  505: .............................▊.................................................. IR-PCI-MSI-edge ens5f1-TxRx-32<br>  510: ................................................................▊............... IR-PCI-MSI-edge ens5f1-TxRx-37<br>  517: .....................▊.......................................................... IR-PCI-MSI-edge ens5f1-TxRx-44<br>  525: .............................▊.................................................. IR-PCI-MSI-edge ens5f1-TxRx-52<br>  530: ................................................................▊............... IR-PCI-MSI-edge ens5f1-TxRx-57<br>  666: .....▊.......................................................................... IR-PCI-MSI-edge ioat-msix<br><br>-bond0-<br>    ens5f1  0000:87:00.1                        link=up 10000Mb/s full (autoneg=N)  rx ring 4096/4096          drv ixgbe v4.3.13 / fw 0x80000897, 1.1375.0<br><br>-bond1-<br>    ens8f1  0000:47:00.1                        link=up 10000Mb/s full (autoneg=N)  rx ring 4096/4096          drv ixgbe v4.3.13 / fw 0x80000897, 1.1375.0<br>    ens6f0  0000:41:00.0                        link=up 10000Mb/s full (autoneg=N)  rx ring 4096/4096          drv ixgbe v4.3.13 / fw 0x80000897, 1.1375.0<br><br>filename:       /lib/modules/3.10.0-327.44.2.el7.x86_64/weak-updates/tg3/tg3.ko<br>version:        3.137o<br><br>filename:       /lib/modules/3.10.0-327.44.2.el7.x86_64/weak-updates/hpsa/hpsa.ko<br>version:        3.4.16-148<br><br>filename:       /lib/modules/3.10.0-327.44.2.el7.x86_64/weak-updates/qlgc-qla2xxx/qla2xxx.ko<br>version:        8.07.00.34.07.0-k1<br><br>filename:       /lib/modules/3.10.0-327.44.2.el7.x86_64/weak-updates/hp-ixgbe/ixgbe.ko<br>version:        4.3.13<br><br>12:00:02 AM  pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff<br>01:49:01 PM      0.00    112.39 156281.34      0.00  14224.77      0.00      0.00      0.00      0.00<br>01:50:01 PM      0.00     27.51   8584.13      0.00   2591.14      0.00      0.00      0.00      0.00<br>01:51:01 PM      0.00     26.84   1704.51      0.00   2200.28      0.00      0.00      0.00      0.00<br>01:52:01 PM      0.00      6.28   1619.56      0.00   2079.09      0.00      0.00      0.00      0.00<br>01:53:01 PM      0.00      6.36   1601.52      0.00   2132.28      0.00      0.00      0.00      0.00<br>01:54:01 PM      0.00      4.78   1597.32      0.00   2082.68      0.00      0.00      0.00      0.00<br>01:55:01 PM      0.00      9.29   3423.15      0.00   2128.51      0.00      0.00      0.00      0.00<br>01:56:01 PM      0.00     18.58   5217.13      0.00   2889.34      0.00      0.00      0.00      0.00<br>01:57:01 PM      0.00     16.39   1616.56      0.00   2132.53      0.00      0.00      0.00      0.00<br>01:58:01 PM      0.00     13.74   2036.64      0.00   2268.70      0.00      0.00      0.00      0.00<br>01:59:01 PM      0.00     25.17   4124.31      0.00   2989.61      0.00      0.00      0.00      0.00<br>02:00:01 PM      0.00     12.97   1673.53      0.00   2172.17      0.00      0.00      0.00      0.00<br>02:01:01 PM      0.00     14.68   3424.95      0.00   2840.31      0.00      0.00      0.00      0.00<br>02:02:01 PM      0.00     58.17   1981.36      0.00   2300.92      0.00      0.00      0.00      0.00<br>02:03:01 PM      0.00      8.86   1755.91      0.00   2238.69      0.00      0.00      0.00      0.00<br>02:04:02 PM      0.00    603.12   1653.26      0.00   2285.47      0.00      0.00      0.00      0.00<br>02:05:01 PM      2.30      5.45   3348.35      0.02   2271.57      0.00      0.00      0.00      0.00<br>02:06:01 PM      0.00     14.99   4027.02      0.00   2540.95      0.00      0.00      0.00      0.00<br>02:07:01 PM      0.00     17.11   2715.56      0.00   2762.04      0.00      0.00      0.00      0.00<br>02:08:01 PM      0.00     35.08   1872.05      0.00   2220.04      0.00      0.00      0.00      0.00<br>02:09:01 PM      0.00      6.01   1665.60      0.00   2065.67      0.00      0.00      0.00      0.00<br>02:10:01 PM     24.54     14.46   4612.79      0.00   4253.81      0.00      0.00      0.00      0.00<br>02:11:01 PM    122.69      5.53   6011.61      0.00   3955.16      0.00      0.00      0.00      0.00<br>02:12:01 PM    993.67   1548.03  43975.50      0.00  28620.97      0.00      0.00      0.00      0.00<br>02:13:01 PM      1.33   9015.01   8119.89      0.02   3246.23      0.00      0.00      0.00      0.00<br><br>12:00:02 AM       tps      rtps      wtps   bread/s   bwrtn/s<br>01:49:01 PM      1.50      0.00      1.50      0.00    224.77<br>01:50:01 PM      1.67      0.00      1.67      0.00     55.03<br>01:51:01 PM      1.37      0.00      1.37      0.00     53.69<br>01:52:01 PM      1.18      0.00      1.18      0.00     12.56<br>01:53:01 PM      1.37      0.00      1.37      0.00     12.72<br>01:54:01 PM      0.92      0.00      0.92      0.00      9.55<br>01:55:01 PM      1.48      0.00      1.48      0.00     18.60<br>01:56:01 PM      2.73      0.00      2.73      0.00     37.15<br>01:57:01 PM      2.71      0.00      2.71      0.00     32.78<br>01:58:01 PM      1.13      0.00      1.13      0.00     27.48<br>01:59:01 PM      2.94      0.00      2.94      0.00     50.33<br>02:00:01 PM      2.70      0.00      2.70      0.00     25.93<br>02:01:01 PM      1.47      0.00      1.47      0.00     29.35<br>02:02:01 PM      3.66      0.00      3.66      0.00    116.35<br>02:03:01 PM      1.55      0.00      1.55      0.00     17.72<br>02:04:02 PM      2.43      0.00      2.43      0.00   1206.23<br>02:05:01 PM      1.20      0.14      1.07      4.61     10.89<br>02:06:01 PM      1.58      0.00      1.58      0.00     30.00<br>02:07:01 PM      2.42      0.00      2.42      0.00     34.19<br>02:08:01 PM      2.57      0.00      2.57      0.00     70.16<br>02:09:01 PM      1.23      0.00      1.23      0.00     12.03<br>02:10:01 PM      8.95      6.40      2.55     49.08     28.94<br>02:11:01 PM      5.90      4.63      1.27    245.38     11.04<br>02:12:01 PM    127.40     69.98     57.42   1987.34   3096.07<br><br>12:00:02 AM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty<br>01:49:01 PM 490264764 565964704     53.58     55812 493558356 571649612     45.46 313939564 229856864      1044<br>01:50:01 PM 490283232 565946236     53.58     55812 493559728 571642276     45.46 313941668 229856868      1236<br>01:51:01 PM 490288576 565940892     53.58     55812 493559860 571641920     45.46 313941808 229856876        84<br>01:52:01 PM 490284864 565944604     53.58     55812 493559908 571652720     45.46 313942992 229856884        68<br>01:53:01 PM 490286840 565942628     53.58     55812 493559968 571644012     45.46 313941584 229856892        24<br>01:54:01 PM 490287140 565942328     53.58     55812 493560028 571652760     45.46 313943200 229856904        44<br>01:55:01 PM 490277008 565952460     53.58     55812 493560480 571644976     45.46 313944500 229856916       432<br>01:56:01 PM 490274152 565955316     53.58     55812 493560876 571653024     45.46 313950804 229856916       460<br>01:57:01 PM 490277316 565952152     53.58     55812 493561412 571644044     45.46 313949904 229857404       552<br>01:58:01 PM 490267540 565961928     53.58     55812 493561460 571667980     45.46 313955740 229857384       108<br>01:59:01 PM 490267484 565961984     53.58     55812 493561512 571674900     45.46 313956096 229857392        44<br>02:00:01 PM 490272412 565957056     53.58     55812 493561560 571664484     45.46 313954448 229857400        64<br>02:01:01 PM 490219180 566010288     53.59     55812 493556268 571716952     45.46 313998920 229855992      1652<br>02:02:01 PM 490225648 566003820     53.59     55812 493556332 571742492     45.46 314001324 229856004       100<br>02:03:01 PM 490191080 566038388     53.59     55812 493592268 571742888     45.46 314008700 229884716     35920<br>02:04:02 PM 490190828 566038640     53.59     55812 493592312 571736272     45.46 314001252 229891880        64<br>02:05:01 PM 490189880 566039588     53.59     55812 493592840 571726128     45.46 313999416 229892012       496<br>02:06:01 PM 490167072 566062396     53.59     55812 493593264 571801056     45.47 314019864 229891992       468<br>02:07:01 PM 490162688 566066780     53.59     55812 493593308 571811152     45.47 314021032 229892000      1556<br>02:08:01 PM 490162108 566067360     53.59     55812 493593364 571856336     45.47 314025012 229892004        80<br>02:09:01 PM 490167680 566061788     53.59     55812 493593408 571848360     45.47 314031492 229884684        44<br>02:10:01 PM 490161172 566068296     53.59     55812 493593456 571829960     45.47 314028960 229884688        32<br>02:11:01 PM 490132888 566096580     53.60     59252 493596476 571871308     45.47 314039308 229886936      3052<br>02:12:01 PM 489492964 566736504     53.66     59192 494213564 571862092     45.47 314092316 230452540    533628<br><br>12:00:02 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>01:49:01 PM         7      2572     72.48     52.31     35.55        10<br>01:50:01 PM         0      2570    101.78     64.30     40.72        10<br>01:51:01 PM         0      2570    114.71     74.85     45.82        10<br>01:52:01 PM         1      2571    119.00     83.31     50.55        10<br>01:53:01 PM         0      2570    120.74     90.34     55.02        10<br>01:54:01 PM         1      2571    121.62     96.10     59.21        10<br>01:55:01 PM         1      2573    121.44    100.71     63.10         9<br>01:56:01 PM         1      2571    122.83    104.85     66.88         9<br>01:57:01 PM         0      2571    123.33    108.25     70.42         9<br>01:58:01 PM         1      2582    124.65    111.39     73.87         9<br>01:59:01 PM         1      2581    126.19    114.18     77.17         9<br>02:00:01 PM         0      2580    126.50    116.49     80.29         9<br>02:01:01 PM         4      2593    130.77    119.51     83.59         9<br>02:02:01 PM         0      2591    132.91    122.19     86.76         9<br>02:03:01 PM         0      2591    134.45    124.58     89.80         9<br>02:04:02 PM         1      2589    134.32    126.33     92.58         9<br>02:05:01 PM         0      2587    134.77    127.94     95.25         9<br>02:06:01 PM         1      2600    135.14    129.24     97.74         9<br>02:07:01 PM         0      2606    137.18    130.92    100.29         9<br>02:08:01 PM         1      2612    139.15    132.58    102.77         9<br>02:09:01 PM         1      2611    139.20    133.81    105.06         9<br>02:10:01 PM         0      2617    139.30    134.82    107.20         9<br>02:11:01 PM         2      2638    139.69    135.71    109.24         9<br>02:12:01 PM         1      2664    141.98    137.11    111.37         7<br>02:13:01 PM         1      2669    142.90    138.23    113.37         0<br><br>12:00:02 AM       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util<br>01:49:01 PM   dev8-32      0.47      0.00    116.82    250.46      0.00      0.32      0.18      0.01<br>01:49:01 PM  dev65-32      0.42      0.00    101.65    244.08      0.00      0.32      0.16      0.01<br>01:49:01 PM  dev253-3      0.85      0.00    218.47    257.16      0.00      0.33      0.14      0.01<br>01:49:01 PM dev253-21      0.85      0.00    218.47    257.16      0.00      0.33      0.14      0.01<br>02:12:01 PM    dev8-0     63.30    493.82   3091.92     56.65      0.16      2.48      0.08      0.51<br><br>01:49:01 PM     bond0  15014.24   7956.27  16472.67   5057.15      0.00      0.00      0.00<br>01:49:01 PM    ens2f0  15005.45   7956.27  16472.02   5057.15      0.00      0.00      0.00<br>01:50:01 PM     bond0    540.82    374.23    517.60    293.88      0.00      0.00      0.00<br>01:50:01 PM    ens2f0    534.96    374.23    517.26    293.88      0.00      0.00      0.00<br><br>12:00:02 AM    call/s retrans/s    read/s   write/s  access/s  getatt/s<br>01:48:01 PM     31.70      0.00     18.57      1.82      1.98      2.63<br>01:49:01 PM     18.22     12.51     16.53      0.00      0.75      0.78<br>01:50:01 PM      0.33     12.99      0.00      0.00      0.32      0.02<br>01:51:01 PM      0.25     13.18      0.00      0.00      0.02      0.17<br>01:52:01 PM      0.07     24.57      0.00      0.00      0.00      0.03<br>01:53:01 PM      0.17     14.24      0.00      0.00      0.00      0.13<br>01:54:01 PM      0.18     13.63      0.00      0.00      0.00      0.12<br>01:55:01 PM      0.08     21.49      0.00      0.00      0.03      0.05<br>01:56:01 PM      0.24     12.51      0.00      0.00      0.02      0.15<br>01:57:01 PM      0.03     12.66      0.00      0.00      0.02      0.02<br>01:58:01 PM      0.25     23.03      0.00      0.00      0.02      0.17<br>01:59:01 PM      0.20     14.53      0.00      0.00      0.03      0.10<br>02:00:01 PM      0.12     12.41      0.00      0.00      0.02      0.10<br>02:01:01 PM      0.32     20.31      0.00      0.00      0.10      0.15<br>02:02:01 PM      0.07     14.37      0.00      0.00      0.02      0.05<br>02:03:01 PM      0.23     12.72      0.00      0.00      0.00      0.17<br>02:04:02 PM      0.07     19.74      0.00      0.00      0.00      0.03<br>02:05:01 PM      0.17      8.42      0.00      0.00      0.00      0.14<br>02:06:01 PM      0.22      0.00      0.00      0.00      0.03      0.12<br>02:07:01 PM      0.77      0.00      0.00      0.00      0.03      0.70<br><br>말씀하신대로 동일 증상이 발생한 것을 확인하였습니다.<br><br>hpsa ixgbe tg3 드라이버가 레드햇에서 제공한 드라이버가 아닌 것으로 확인되며,<br>레드햇 드라이버로 운용이 가능한지 확인해주시기 바랍니다.<br><br>앞서 안내해드린 조치 중에, 다음 항목이 아직 적용되지 않은 것을 확인하였습니다.<br>아래 설정을 통해서 /var/log/messages 및 콘솔에 증상 재발시에 <br>hung_task_timeout_secs 메시지와 함께 Call Trace 가 발생하게 됩니다.<br>해당 메시지가 출력되는 결과를 알려주시기 바랍니다.<br><br># echo 10 &gt;/proc/kernel/hung_task_warnings<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-08T05:41:21Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfEY9IAN"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-06-08T01:49:34Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-06-08T01:49:34Z</b><br><br>아울러 업로드한 파일 링크 부탁드립니다<br><br><publishedDate>2017-06-08T01:49:34Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfEWYIA3"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-06-08T01:46:25Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-06-08T01:46:25Z</b><br><br>DECCAL01SL_case_170608.tar.gz<br>DECCAL02SL_case_170608.tar.gz<br>DECCAL03SL_case_170608.tar.gz<br>DECCAL04SL_case_170608.tar.gz<br>Drop box에 첨부하였습니다<br><br><publishedDate>2017-06-08T01:46:25Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfEBnIAN"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-08T01:03:10Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-08T01:03:10Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>추가로 문제가 발생하지 않는 나머지 3개의 시스템의 sosreport 를 수집해서 올려주시면 <br>본 시스템과의 차이 및 해당 시각의 자원 사용량등을 점검해보록 하겠습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-08T01:03:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfE9rIAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-08T01:00:21Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-08T01:00:21Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>문서 자체의 의미를 모두 설명드리기는 곤란하며, 종합적으로 해결책 부분만 설명드리겠습니다.<br><br>The resolution for this issue will vary depending on whether the root cause is:<br>본 문제에 대한 해결책은 원인에 따라 다양할 수 있습니다.<br><br>    Problem between the NFS Client and Server<br>    NFS 클라이언트와 서버간의 문제: 중간 네트워크의 스위치, 라우터, 케이블등<br>    Problem on the NFS Server<br>    NFS 서버의 문제: NFS 서버의 과부하, 이더넷장치, 케이블 혹은 펌웨어 문제<br>    Problem on the NFS Client<br>    NFS 클라이언트의 문제 NFS 클라이언트의 과부하, 이더넷장치, 케이블 혹은 펌웨어 문제<br><br>Investigation will be required on both NFS Client and NFS Server.<br>NFS 클라이언트와 NFS 서버 들을 조사할 필요가 있습니다.<br><br>For non-Red Hat NFS Clients or Servers, engage the vendor of the non-Red Hat system. Investigate connectivity issues such as network link down, network packet loss, system hang, NFS client/server hang or slowness, storage hang or slowness.<br>Red Hat NFS 클라이언트 혹은 서버가 아닌 경우, 제조회사의 지원을 받아야합니다. 네트워크 링크 다운, 패킷 로스, 시스템 행, NFS 클라이언트/서버의 행 혹은 지연현상, 스토리지 행 및 지연현상등과 같은 연결 문제를 조사하시기 바랍니다.<br><br>The team responsible for the network between NFS Client and NFS Server should be engaged to investigate connectivity and capacity issues.<br>NFS 클라이언트와 NFS 서버간의 네트워크를 주관하는 팀은 네트워크 연결과 성능 문제에 대한 조사를 진행해야합니다.<br><br>결과적으로 앞서 말씀드린대로, 저희 레드햇에서 지원가능한 부분은 OS 측에서 바라본 NFS 서버와의 성능 측정이 전부입니다.<br> - 수집절차는 OS 측면에서 바라본 NFS 서버와의 NFS 성능 측정 절차입니다.<br><br>나머지 OS 와 NFS 서버간의 네트워크 및 NFS 서버의 성능 측정 및 문제들은 업체와 같이 진행하시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-08T01:00:21Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfE3oIAF"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-06-08T00:46:50Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-06-08T00:46:50Z</b><br><br>제가 링크걸은 이슈 문서에 대해서 설명 부탁드립니다. 무슨 이야기인지 이해가 잘 되지 않습니다<br><br><publishedDate>2017-06-08T00:46:50Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfDz8IAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-08T00:34:25Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-08T00:34:25Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>수집절차는 OS 측면에서 바라본 NFS 서버와의 NFS 성능 측정 절차입니다.<br>중간 네트워크와 NFS 서버측 성능은 별도로 네트워크 및 NAS 서버 업체와 측정해보실 필요가 있습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-08T00:34:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfDwxIAF"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-06-08T00:29:56Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-06-08T00:29:56Z</b><br><br>수집 요청해주셨던 것이 이슈문서에 의한 데이터 수집절차입니까??<br><br><publishedDate>2017-06-08T00:29:56Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JfDnJIAV"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-08T00:06:18Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-08T00:06:17Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>네, 관련이 있습니다. <br>문서에서도 세 부분의 문제 가능성을 언급하고 있으며, 각 부분의 점검이 필요합니다.<br><br>    Problem between the NFS Client and Server<br>    Problem on the NFS Server<br>    Problem on the NFS Client<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-08T00:06:17Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JfDlXIAV"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-06-08T00:00:31Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-06-08T00:00:31Z</b><br><br>https://access.redhat.com/solutions/28211<br>위 링크의 내용과 관련이 있지는 않을까요??<br><br><publishedDate>2017-06-08T00:00:31Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jf0loIAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-07T09:23:27Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-07T09:23:27Z</b><br><br># tcpdump -n -C 250M -s 300 -i enp2s0f0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 10.1.0.200<br><br>입니다<br><br><publishedDate>2017-06-07T09:23:27Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Jezq7IAB"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-07T08:03:49Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-07T08:03:48Z</b><br><br>아래 명령어를 테스트로 실행해 본결과 에러가 발생했는데 명령어 확인 부탁드립니다.<br>감사합니다.<br><br>root@node2 normal]# tcpdump -n -C 250M -s 300 -i enp2s0f0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) 10.1.0.200<br>tcpdump: syntax error<br><br><publishedDate>2017-06-07T08:03:48Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JezPaIAJ"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-07T07:37:29Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-07T07:37:29Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>문제가 발생하고 있는 시점에 아래 성능 측정 데이터를 수집해주시기 바랍니다.<br><br>데이터는 평상시와 문제가 발생한 시점, 문제가 해결된 시점 3 부분으로 나눌 수 있습니다.<br><br>1. 평상시에 로그를 수집해주시기 바랍니다.<br> mkdir normal<br> cd normal<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> 적절한 시점 10-30초 정도 이후에 종료<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> 적절한 시점 10-30초 정도 이후에 종료<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>2. 문제가 발생한 시점에 로그를 수집해주시기 바랍니다.<br> mkdir issue<br> cd issue<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>3. 문제 해결을 위해 다른 NAS 노드로 이관된 연결을 <br>   다시 문제가 발생한 NAS 노드로 연결한 이후에 로그를 수집해주시기 바랍니다.<br><br> mkdir after<br> cd after<br> cp /proc/self/mountstats  mountstats_raw_before_$(date +%s).txt<br><br> date &gt; nfsiostat.txt; nfsiostat 5 NFS-MOUNT-POINT &gt;&gt; nfsiostat.txt<br> while true; do date &gt;&gt; nfs_meminfo.txt; cat /proc/meminfo | egrep &quot;(Dirty|Writeback|NFS_Unstable):&quot; &gt;&gt; nfs_meminfo.txt; sleep 5; done<br> iostat -cxt 5 &gt;&gt; nfs_util.txt<br> tcpdump -n -C 250M -s 300 -i bond0 -w $(hostname)-$(date +&quot;%Y-%m-%d-%H-%M-%S&quot;) host 문제가되는NFS서버IP<br><br> 모든 캡쳐를 종료하고 마무리 합니다.:<br> mountstats -f mountstats_raw_after_* -S mountstats_raw_before_*<br><br>저희가 요청하는 사항은 아래와 같습니다.:<br><br>3부분에 걸친 데이터 수집<br>- NFS 서버, NAS 의 브랜드와 모델명<br>- mounstats_raw_before.txt<br>- nfsiostat.txt<br>- nfs_meminfo.txt<br>- nfs_util.txt<br>- tcpdump<br>- mounstats_raw_after.txt<br><br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-07T07:37:29Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JexMkIAJ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-07T07:06:39Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-07T07:06:39Z</b><br><br>이와 같은 이슈가 재 발생되어 다시 문의 드리고자 합니다.<br><br><publishedDate>2017-06-07T07:06:39Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JexB6IAJ"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-07T06:59:54Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-07T06:59:54Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 입니다.<br><br>본 케이스와 연관되어 더 궁금한 사항이 있거나 추가적인 지원이 필요하신가요?<br><br>본 안내 후 일주일 이내에 별다른 답변이 없다면 자동으로 종료 상태가 된다는 것을 알려 드립니다.<br><br>만약 추가적인 지원이 필요하다면, 연락 부탁드립니다.<br><br>감사합니다.<br><br>Jay Shin<br>Technical Support Engineer<br>GSS, Asia Pacific, Red Hat Inc<br><br><publishedDate>2017-06-07T06:59:54Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JeKdEIAV"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-05T07:12:56Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-05T07:12:56Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>이해하신대로 네트워크 에러는 없었으며, nfs retrans 가 증가한 것을 확인하였습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-05T07:12:56Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JeKc1IAF"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-05T07:09:45Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-05T07:09:45Z</b><br><br>지금까지의 내용을 확인해 본 결과 아래와 같이 이해하면 되는지요?<br>확인 부탁드립니다.<br><br>====================================================<br><br>nfs의 재전송 이슈시간인 15시 50분 22초 경에  retrans(재전송)이 지속적으로 있었으나(아래 데이터 참조)<br>네트워크의 bond0의 rx error, tx erro,r rx drop, tx drop 을 확인한 결과 문제가  없었던것으로 파악됩니다.<br><br><br>&lt;&lt; nfs retrans 확인 &gt;&gt;<br>sar -f sa26 -n NFS &gt; io.txt<br>Linux 3.10.0-327.44.2.el7.x86_64 (DECCAL04SL) <br>05/26/2017 <br>_x86_64_<br>(80 CPU)<br><br>12:00:01 AM    call/s retrans/s    read/s   write/s  access/s  getatt/s<br>03:49:01 PM    111.26      0.00     92.39      1.28      2.42     10.71<br>03:50:01 PM      9.19      9.01      1.18      1.20      1.02      3.11<br>03:51:01 PM      1.57     13.01      0.00      0.20      0.20      0.80<br>03:52:01 PM      0.50      7.41      0.00      0.03      0.13      0.17<br>03:53:01 PM      0.60      8.21      0.00      0.03      0.13      0.27<br>03:54:01 PM      5.66     10.13      0.00      0.87      0.88      2.12<br>03:55:01 PM      7.30      6.08      0.05      1.05      0.92      2.56<br>03:56:01 PM      1.90      7.18      0.00      0.39      0.25      0.94<br>03:57:01 PM      0.80      9.63      0.00      0.20      0.15      0.18<br>03:58:01 PM      1.13      5.06      0.00      0.03      0.38      0.52<br>03:59:01 PM      0.97      5.78      0.00      0.13      0.20      0.31<br>04:00:01 PM      1.55      6.86      0.00      0.32      0.30      0.47<br>04:01:01 PM      2.02      4.56      0.00      0.33      0.38      0.98<br>04:02:01 PM      0.87      5.72      0.00      0.10      0.30      0.30<br>04:03:02 PM      8.78      6.48      0.00      1.45      1.00      3.10<br>04:04:01 PM      5.03      3.68      0.02      0.66      0.61      2.10<br>04:05:01 PM     14.71      4.98      0.08      2.22      1.62      5.51<br>04:06:01 PM      5.98      4.66      0.00      1.07      0.82      2.28<br>04:07:01 PM      7.75      3.51      0.03      1.30      0.88      2.62<br><br>---&lt;snip&gt;---<br><br>05:46:01 PM     10.88      1.02      0.12      1.33      1.32      4.81<br>05:47:01 PM      7.96      0.80      0.03      1.33      0.90      2.86<br>05:48:01 PM      1.27      1.18      0.00      0.27      0.20      0.35<br>05:49:01 PM      0.78      1.02      0.00      0.13      0.15      0.27<br>05:50:01 PM      1.27      0.82      0.00      0.10      0.35      0.65<br>05:51:01 PM      1.73      1.18      0.00      0.20      0.37      0.80<br>05:52:01 PM      0.78      1.00      0.00      0.03      0.22      0.37<br>05:53:02 PM     11.14      0.82      0.02      1.57      1.35      4.36<br>05:54:01 PM      3.37      1.19      0.00      0.64      0.44      1.34<br>05:55:01 PM      1.07      1.00      0.00      0.17      0.18      0.48<br>05:56:01 PM      1.94      0.79      0.00      0.38      0.36      0.88<br>05:57:01 PM      1.52      1.18      0.00      0.20      0.18      0.90<br>05:58:01 PM     10.96      1.02      0.00      1.57      1.23      4.25<br>05:59:01 PM      3.18      0.81      0.02      0.55      0.72      1.23<br>06:00:01 PM     24.02      1.18      0.07      3.81      2.18      9.40<br>06:01:01 PM     14.89      1.02      0.03      2.25      1.68      5.96<br>06:02:01 PM      4.73      0.80      0.07      0.63      0.75      2.46<br>06:03:01 PM     16.18      1.22      0.03      2.72      1.55      6.33<br>06:04:01 PM      1.75      1.15      0.00      0.13      0.25      1.12<br>06:05:01 PM     15.46      0.78      0.02      2.53      1.68      5.83<br>06:06:01 PM      4.90      1.22      0.02      0.70      0.65      1.93<br>06:07:01 PM     14.64      1.12      0.03      2.85      1.45      5.56<br>06:08:01 PM      0.38      0.78      0.00      0.03      0.17      0.15<br>06:09:01 PM      1.40      1.22      0.00      0.30      0.25      0.32<br>06:10:01 PM      1.30      1.13      0.00      0.10      0.30      0.70<br>06:11:01 PM      1.32      0.78      0.00      0.10      0.17      0.83<br>06:12:01 PM      7.06      1.22      0.22      0.93      1.02      2.57<br>06:13:01 PM     10.04      1.12      0.32      1.25      0.95      2.73<br>06:14:01 PM     12.69      1.40      0.47      0.68      1.27      3.55<br>06:15:01 PM     12.52      0.00      0.00      0.27      0.23     10.64<br>06:16:01 PM      2.30      0.00      0.00      0.62      0.18      0.53<br>06:17:01 PM      2.20      0.00      0.00      0.23      0.22      0.82<br>06:18:01 PM      1.87      0.00      0.00      0.35      0.23      0.28<br>======================<br>&lt;&lt;error 및 drop에 대한 확인&gt;&gt;<br># sar -f sa26 -n ALL | grep -e &quot;12:00:01 AM&quot; -e bond0 -e drop<br>12:00:01 AM     IFACE   rxerr/s   txerr/s    coll/s  rxdrop/s  txdrop/s  txcarr/s  rxfram/s  rxfifo/s  txfifo/s<br>03:49:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:50:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:51:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:52:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:53:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:54:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:55:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:56:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:57:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:58:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:59:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:00:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:01:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:02:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:03:02 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:04:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:05:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:06:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:07:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br><br>---&lt;snip&gt;----<br><br>05:45:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:46:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:47:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:48:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:49:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:50:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:51:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:52:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:53:02 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:54:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:55:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:56:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:57:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:58:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:59:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:00:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:01:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:02:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:03:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:04:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:05:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:06:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:07:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:08:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:09:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:10:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:11:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:12:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:13:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:14:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:15:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:16:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:17:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:18:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br><br><publishedDate>2017-06-05T07:09:45Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JeKaGIAV"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-05T07:09:28Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-05T07:09:28Z</b><br><br>지금까지의 내용을 확인해 본 결과 아래와 같이 이해하면 되는지요?<br>확인 부탁드립니다.<br><br>====================================================<br><br>nfs의 재전송 이슈시간인 15시 50분 22초 경에  retrans(재전송)이 지속적으로 있었으나(아래 데이터 참조)<br>네트워크의 bond0의 rx error, tx erro,r rx drop, tx drop 을 확인한 결과 문제가  없었던것으로 파악됩니다.<br><br><br>&lt;&lt; nfs retrans 확인 &gt;&gt;<br>sar -f sa26 -n NFS &gt; io.txt<br>Linux 3.10.0-327.44.2.el7.x86_64 (DECCAL04SL) <br>05/26/2017 <br>_x86_64_<br>(80 CPU)<br><br>12:00:01 AM    call/s retrans/s    read/s   write/s  access/s  getatt/s<br>03:49:01 PM    111.26      0.00     92.39      1.28      2.42     10.71<br>03:50:01 PM      9.19      9.01      1.18      1.20      1.02      3.11<br>03:51:01 PM      1.57     13.01      0.00      0.20      0.20      0.80<br>03:52:01 PM      0.50      7.41      0.00      0.03      0.13      0.17<br>03:53:01 PM      0.60      8.21      0.00      0.03      0.13      0.27<br>03:54:01 PM      5.66     10.13      0.00      0.87      0.88      2.12<br>03:55:01 PM      7.30      6.08      0.05      1.05      0.92      2.56<br>03:56:01 PM      1.90      7.18      0.00      0.39      0.25      0.94<br>03:57:01 PM      0.80      9.63      0.00      0.20      0.15      0.18<br>03:58:01 PM      1.13      5.06      0.00      0.03      0.38      0.52<br>03:59:01 PM      0.97      5.78      0.00      0.13      0.20      0.31<br>04:00:01 PM      1.55      6.86      0.00      0.32      0.30      0.47<br>04:01:01 PM      2.02      4.56      0.00      0.33      0.38      0.98<br>04:02:01 PM      0.87      5.72      0.00      0.10      0.30      0.30<br>04:03:02 PM      8.78      6.48      0.00      1.45      1.00      3.10<br>04:04:01 PM      5.03      3.68      0.02      0.66      0.61      2.10<br>04:05:01 PM     14.71      4.98      0.08      2.22      1.62      5.51<br>04:06:01 PM      5.98      4.66      0.00      1.07      0.82      2.28<br>04:07:01 PM      7.75      3.51      0.03      1.30      0.88      2.62<br><br>---&lt;snip&gt;---<br><br>05:46:01 PM     10.88      1.02      0.12      1.33      1.32      4.81<br>05:47:01 PM      7.96      0.80      0.03      1.33      0.90      2.86<br>05:48:01 PM      1.27      1.18      0.00      0.27      0.20      0.35<br>05:49:01 PM      0.78      1.02      0.00      0.13      0.15      0.27<br>05:50:01 PM      1.27      0.82      0.00      0.10      0.35      0.65<br>05:51:01 PM      1.73      1.18      0.00      0.20      0.37      0.80<br>05:52:01 PM      0.78      1.00      0.00      0.03      0.22      0.37<br>05:53:02 PM     11.14      0.82      0.02      1.57      1.35      4.36<br>05:54:01 PM      3.37      1.19      0.00      0.64      0.44      1.34<br>05:55:01 PM      1.07      1.00      0.00      0.17      0.18      0.48<br>05:56:01 PM      1.94      0.79      0.00      0.38      0.36      0.88<br>05:57:01 PM      1.52      1.18      0.00      0.20      0.18      0.90<br>05:58:01 PM     10.96      1.02      0.00      1.57      1.23      4.25<br>05:59:01 PM      3.18      0.81      0.02      0.55      0.72      1.23<br>06:00:01 PM     24.02      1.18      0.07      3.81      2.18      9.40<br>06:01:01 PM     14.89      1.02      0.03      2.25      1.68      5.96<br>06:02:01 PM      4.73      0.80      0.07      0.63      0.75      2.46<br>06:03:01 PM     16.18      1.22      0.03      2.72      1.55      6.33<br>06:04:01 PM      1.75      1.15      0.00      0.13      0.25      1.12<br>06:05:01 PM     15.46      0.78      0.02      2.53      1.68      5.83<br>06:06:01 PM      4.90      1.22      0.02      0.70      0.65      1.93<br>06:07:01 PM     14.64      1.12      0.03      2.85      1.45      5.56<br>06:08:01 PM      0.38      0.78      0.00      0.03      0.17      0.15<br>06:09:01 PM      1.40      1.22      0.00      0.30      0.25      0.32<br>06:10:01 PM      1.30      1.13      0.00      0.10      0.30      0.70<br>06:11:01 PM      1.32      0.78      0.00      0.10      0.17      0.83<br>06:12:01 PM      7.06      1.22      0.22      0.93      1.02      2.57<br>06:13:01 PM     10.04      1.12      0.32      1.25      0.95      2.73<br>06:14:01 PM     12.69      1.40      0.47      0.68      1.27      3.55<br>06:15:01 PM     12.52      0.00      0.00      0.27      0.23     10.64<br>06:16:01 PM      2.30      0.00      0.00      0.62      0.18      0.53<br>06:17:01 PM      2.20      0.00      0.00      0.23      0.22      0.82<br>06:18:01 PM      1.87      0.00      0.00      0.35      0.23      0.28<br>======================<br>&lt;&lt;error 및 drop에 대한 확인&gt;&gt;<br># sar -f sa26 -n ALL | grep -e &quot;12:00:01 AM&quot; -e bond0 -e drop<br>12:00:01 AM     IFACE   rxerr/s   txerr/s    coll/s  rxdrop/s  txdrop/s  txcarr/s  rxfram/s  rxfifo/s  txfifo/s<br>03:49:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:50:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:51:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:52:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:53:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:54:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:55:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:56:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:57:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:58:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>03:59:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:00:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:01:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:02:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:03:02 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:04:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:05:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:06:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>04:07:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br><br>---&lt;snip&gt;----<br><br>05:45:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:46:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:47:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:48:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:49:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:50:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:51:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:52:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:53:02 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:54:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:55:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:56:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:57:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:58:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>05:59:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:00:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:01:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:02:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:03:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:04:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:05:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:06:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:07:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:08:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:09:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:10:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:11:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:12:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:13:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:14:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:15:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:16:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:17:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>06:18:01 PM     bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br><br><publishedDate>2017-06-05T07:09:28Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JeJMMIA3"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-05T04:42:54Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-05T04:42:54Z</b><br><br>아래 안내해드린 오타 수정합니다.<br><br>[이전]<br>3. nfs 연결 오류 시작 이후 retrans(재전송) 추당 재전송횟수 증가<br><br>[변경]<br>3. nfs 연결 오류 시작 이후 retrans(재전송) 초당 재전송횟수 증가<br><br><publishedDate>2017-06-05T04:42:54Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JeJLJIA3"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-05T04:40:18Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-05T04:40:18Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>요청하신 파일 첨부해드렸습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-05T04:40:18Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JeJIyIAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-05T04:32:45Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-05T04:32:45Z</b><br><br>드롭박스에 올렸던<br>DECCAL04SL_sa_data.tar.gz<br>파일 업로드 부탁드려요^^ 감사합니다.<br><br><publishedDate>2017-06-05T04:32:45Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JeJ4MIAV"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-05T03:42:35Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-05T03:42:35Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>참조한 sar26 올려드립니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-05T03:42:35Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JeIkHIAV"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-05T02:33:35Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-05T02:33:34Z</b><br><br>답변 감사합니다.<br>업로드한 sar 데이터 링크 부탁드립니다.<br>감사합니다.<br><br><publishedDate>2017-06-05T02:33:34Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JeIJWIA3"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-05T01:17:49Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-05T01:17:49Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>1. nfs 연결 오류 메시지<br>May 26 15:50:22 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br><br>2. 해당 시각에 CPU iowait 수치 증가<br><br>12:00:01 AM     CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>03:49:01 PM     all      1.00      0.00      0.47     11.55      0.00      0.00      0.01      0.00      0.00     86.97<br>03:50:01 PM     all      0.14      0.00      0.22     31.28      0.00      0.00      0.00      0.00      0.00     68.36<br>03:51:01 PM     all      0.12      0.00      0.26     20.20      0.00      0.00      0.00      0.00      0.00     79.42<br>03:52:01 PM     all      0.14      0.00      0.43     19.96      0.00      0.00      0.00      0.00      0.00     79.47<br>03:53:01 PM     all      0.14      0.00      0.41     18.46      0.00      0.00      0.00      0.00      0.00     80.99<br>03:54:01 PM     all      0.16      0.00      0.11     14.71      0.00      0.00      0.00      0.00      0.00     85.01<br>03:55:01 PM     all      0.13      0.00      0.37     13.73      0.00      0.00      0.00      0.00      0.00     85.77<br>03:56:01 PM     all      0.13      0.00      0.43     13.49      0.00      0.00      0.00      0.00      0.00     85.96<br>03:57:01 PM     all      0.11      0.00      0.37     12.01      0.00      0.00      0.00      0.00      0.00     87.52<br>03:58:01 PM     all      0.06      0.00      0.09      8.67      0.00      0.00      0.00      0.00      0.00     91.18<br>03:59:01 PM     all      0.15      0.00      0.42      5.32      0.00      0.00      0.00      0.00      0.00     94.10<br>04:00:01 PM     all      0.13      0.00      0.43      5.00      0.00      0.00      0.00      0.00      0.00     94.44<br>04:01:01 PM     all      0.10      0.00      0.28      5.00      0.00      0.00      0.00      0.00      0.00     94.62<br>04:02:01 PM     all      0.07      0.00      0.18      4.54      0.00      0.00      0.00      0.00      0.00     95.21<br>04:03:02 PM     all      0.13      0.00      0.42      3.75      0.00      0.00      0.00      0.00      0.00     95.70<br>04:04:01 PM     all      0.17      0.00      0.43      2.86      0.00      0.00      0.00      0.00      0.00     96.54<br>04:05:01 PM     all      0.18      0.00      0.18      1.24      0.00      0.00      0.00      0.00      0.00     98.40<br>04:06:01 PM     all      0.19      0.00      0.30      1.22      0.00      0.00      0.00      0.00      0.00     98.29<br>04:07:01 PM     all      0.26      0.00      0.43      1.20      0.00      0.00      0.00      0.00      0.00     98.11<br>04:08:01 PM     all      0.29      0.00      0.42      1.08      0.00      0.00      0.00      0.00      0.00     98.22<br>04:09:01 PM     all      0.17      0.00      0.06      1.21      0.00      0.00      0.00      0.00      0.00     98.56<br>04:10:01 PM     all      0.12      0.00      0.44      1.25      0.00      0.00      0.00      0.00      0.00     98.19<br>04:11:01 PM     all      0.11      0.00      0.42      1.25      0.00      0.00      0.00      0.00      0.00     98.22<br>04:12:01 PM     all      0.10      0.00      0.35      1.25      0.00      0.00      0.00      0.00      0.00     98.30<br>04:13:01 PM     all      0.04      0.00      0.12      1.24      0.00      0.00      0.00      0.00      0.00     98.59<br><br><br>3. nfs 연결 오류 시작 이후 retrans(재전송) 추당 재전송횟수 증가<br> <br>12:00:01 AM    call/s retrans/s    read/s   write/s  access/s  getatt/s<br>03:49:01 PM    111.26      0.00     92.39      1.28      2.42     10.71<br>03:50:01 PM      9.19      9.01      1.18      1.20      1.02      3.11<br>03:51:01 PM      1.57     13.01      0.00      0.20      0.20      0.80<br>03:52:01 PM      0.50      7.41      0.00      0.03      0.13      0.17<br>03:53:01 PM      0.60      8.21      0.00      0.03      0.13      0.27<br>03:54:01 PM      5.66     10.13      0.00      0.87      0.88      2.12<br>03:55:01 PM      7.30      6.08      0.05      1.05      0.92      2.56<br>03:56:01 PM      1.90      7.18      0.00      0.39      0.25      0.94<br>03:57:01 PM      0.80      9.63      0.00      0.20      0.15      0.18<br>03:58:01 PM      1.13      5.06      0.00      0.03      0.38      0.52<br>03:59:01 PM      0.97      5.78      0.00      0.13      0.20      0.31<br>04:00:01 PM      1.55      6.86      0.00      0.32      0.30      0.47<br>04:01:01 PM      2.02      4.56      0.00      0.33      0.38      0.98<br><br>4. nfs 메시지 이후 로드 감소<br>May 26 18:13:57 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br><br>06:12:01 PM         2      2643     81.58     81.92     83.78         0<br>06:13:01 PM         0      2636     81.12     81.77     83.62         0<br>06:14:01 PM        37      2589     77.12     80.87     83.21         0<br>06:15:01 PM         0      2614     28.66     66.29     78.06         0<br>06:16:01 PM         1      2611     10.53     54.23     73.17         0<br>06:17:01 PM         0      2612      3.97     44.39     68.60         0<br>06:18:01 PM         1      2609      1.94     36.42     64.34         0<br>06:19:01 PM         0      2610      0.78     29.81     60.32         0<br>06:20:01 PM         0      2610      0.37     24.41     56.56         0<br>06:21:01 PM         2      2610      0.20     19.99     53.02         0<br>06:22:01 PM         3      2609      0.18     16.38     49.71         0<br>06:23:01 PM         0      2584      0.07     13.40     46.60         0<br>06:24:01 PM         1      2586      0.21     11.01     43.70         0<br>06:25:02 PM         1      2587      0.15      9.03     40.98         0<br>06:26:01 PM         0      2585      0.18      7.42     38.42         0<br>06:27:01 PM         0      2585      0.06      6.07     36.02         0<br>06:28:01 PM         2      2585      0.18      5.01     33.78         0<br>06:29:01 PM         0      2580      0.20      4.13     31.67         0<br>06:30:02 PM         0      2580      0.12      3.39     29.70         0<br>06:31:01 PM         0      2579      0.12      2.84     27.99         0<br>06:32:01 PM         1      2577      0.10      2.34     26.25         0<br>06:33:01 PM         0      2576      0.14      1.94     24.61         0<br>06:34:01 PM         0      2578      0.16      1.62     23.08         0<br>06:35:01 PM         0      2578      0.06      1.33     21.64         0<br>06:36:01 PM         0      2578      0.21      1.14     20.31         0<br>06:37:01 PM         0      2577      0.20      0.98     19.05         0<br>06:38:01 PM         0      2578      0.12      0.81     17.86         0<br><br>아래 파라메터가 현재 기본값 10에서 0으로 떨어진 상태입니다. 이는 과거 운영중에 이미 hung_task_timeout_secs 메시지가 콜트레이스와 함께 발생했다는 것을 의미하며<br>현재 값이 0인 상태로, 시스템에 행이 발생하고 있더라도, 로그 혹은 콘솔에는 나타나지 않고 있다는 의미입니다.<br><br>$ cat /proc/sys/kernel/hung_task_warnings <br>0<br><br>따라서, echo 10 &gt; /proc/sys/kernel/hung_task_warnings 를 수행하여<br>추후 발생할 수 있는 행에 대하여 로그를 출력/저장할 수 있게 해주시기 바랍니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-05T01:17:49Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JeGP0IAN"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-04T05:31:24Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-04T05:31:24Z</b><br><br>안녕하세요?<br>nas서버와의 연결에 있다는 문제에 대해서 확인하신 항목과 결과를 알고 싶습니다.<br>답변 부탁드립니다.<br>감사합니다.<br><br><publishedDate>2017-06-04T05:31:24Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JdybnIAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-06-01T23:23:40Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-06-01T23:23:39Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>&gt; 저희가 궁금한것은 로드가 급증하게된것이 아니라  nfs hang이 발생한 원인에 대해서 문의드리는 것입니다.<br>&gt; 재확인하여 말씀 부탁드립니다.<br><br>안타깝게도 nfs hang이 발생한 원인은 시스템 분석시에 발견하지 못하였으며, <br>앞서 말씀드린바와 같이 nfs 서버인 100.253.144.202 와의 연결의 문제에 의해<br>발생되었을 것으로 추정하고 있습니다.<br><br>이는 대부분 nfs 서버와의 연결에 관련된 여러 요소에 영향을 받는 것이 일반적입니다.<br>  - 네트워크 과부하 스위치 포트 이상, 케이블 불량, 네트워크 포트 불량<br>  - nfs 서버의 과부하, 방화벽등<br><br>(이후 다른 NAS 노드로 변경하고 정상으로 되었다 합니다.)<br>-&gt; 기존 NAS 노드에 관련된 부분의 점검이 필요할 것으로 생각됩니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-06-01T23:23:39Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JdlcrIAB"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-06-01T07:41:08Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-06-01T07:41:08Z</b><br><br>저희가 궁금한것은 로드가 급증하게된것이 아니라  nfs hang이 발생한 원인에 대해서 문의드리는 것입니다.<br>재확인하여 말씀 부탁드립니다.<br><br><publishedDate>2017-06-01T07:41:08Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JdiO5IAJ"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-05-31T23:56:25Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-05-31T23:56:25Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>[2017-05-29]<br>12:00:01 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>09:22:01 AM         0      2565      0.40      0.51      0.51         0<br>09:23:01 AM        27      2565     12.39      3.51      1.51         0<br>09:24:01 AM        36      2565     20.20      7.54      3.03         0<br>09:25:01 AM        30      2571     21.94     10.47      4.32         0<br>09:26:01 AM         7      2576     16.90     11.64      5.17         0<br>09:27:01 AM         1      2577      7.33      9.89      4.97         0<br><br>12:00:01 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s<br>09:22:01 AM     bond0   1145.77   1665.72    793.46   1768.72      0.00      0.00      0.00<br>09:23:01 AM     bond0  35813.09  65384.36  22480.91  87370.43      0.00      0.00      0.00<br>09:24:01 AM     bond0  51206.43  95954.14  30960.92 128586.10      0.00      0.00      0.00<br>09:25:01 AM     bond0  50517.96  94767.58  30502.04 126917.25      0.00      0.00      0.00<br>09:26:01 AM     bond0  37238.47  71568.58  21956.75  95896.41      0.00      0.00      0.00<br>09:27:01 AM     bond0   8134.13  15988.12   4805.38  21307.75      0.00      0.00      0.00<br><br><br>NFS 사용이 증가하며 read/s(NFS 서버 -&gt; NFS 클라이언트) 수치가 증가함.<br><br>12:00:01 AM    call/s retrans/s    read/s   write/s  access/s  getatt/s<br>09:22:01 AM      9.71      0.00      0.07      1.10      0.98      4.45<br>09:23:01 AM    372.83      0.00    305.76      0.08      2.82     62.79<br>09:24:01 AM    518.59      0.00    424.29      0.30      1.85     91.29<br>09:25:01 AM    509.90      0.00    418.04      0.22      1.08     89.92<br>09:26:01 AM    375.29      0.00    300.17      1.26      1.23     70.22<br>09:27:01 AM     88.17      0.00     65.12      1.15      1.07     17.66<br>09:28:01 AM     14.67      0.00     11.26      0.03      0.17      2.66<br><br><br>[2017-05-26]<br>로드 급증가 및 blocked 증가<br><br>12:00:01 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>03:48:01 PM         0      2578      0.00      0.08      0.53         0<br>03:49:01 PM         0      2584     50.86     13.90      5.20        32<br>03:50:01 PM         1      2584     76.26     27.89     10.55        21<br>03:51:01 PM         0      2584     85.72     39.43     15.61        19<br><br>12:00:01 AM    call/s retrans/s    read/s   write/s  access/s  getatt/s<br>03:48:01 PM      1.50      0.00      0.00      0.25      0.17      0.25<br>03:49:01 PM    111.26      0.00     92.39      1.28      2.42     10.71<br>03:50:01 PM      9.19      9.01      1.18      1.20      1.02      3.11<br>03:51:01 PM      1.57     13.01      0.00      0.20      0.20      0.80<br>03:52:01 PM      0.50      7.41      0.00      0.03      0.13      0.17<br>03:53:01 PM      0.60      8.21      0.00      0.03      0.13      0.27<br>03:54:01 PM      5.66     10.13      0.00      0.87      0.88      2.12<br><br>03:48:01 PM     bond0    128.12    158.09     44.10    102.48      0.00      0.00      0.00<br>03:49:01 PM     bond0   5852.38   1820.90   6627.93    686.42      0.00      0.00      0.00<br>03:50:01 PM     bond0    629.98    236.21    706.08    118.07      0.00      0.00      0.00<br>03:51:01 PM     bond0    353.94    217.16    314.12    114.72      0.00      0.00      0.00<br>03:52:01 PM     bond0    164.25    136.90    125.92     88.84      0.00      0.00      0.00<br>03:53:01 PM     bond0    280.35    161.41    263.70     99.34      0.00      0.00      0.00<br><br>&gt; MCE에러 및 로드  에버리지율이 NFS HANG과 어떠한 연관성이 있는지요?<br>5월 26일 sar 데이터상에서 nfs hang 이 발생한 직후 로드가 급상승하였으며, blocked 된 프로세스의 개수도 증가된 것을 확인할 수 있습니다.<br>(May 26 15:50:22 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying)<br><br>MCE 에러가 nfs hang과 관련이 있는지는 확인되고 있지 않습니다만, 해당 에러가 하드웨어 에러에 기반된 것인지는 벤더와 확인해보시기 바랍니다.<br>하드웨어 오류와 로드 상승이 nfs hang을 유발하였다고 보는 것 보다, nfs hang 으로 인해 로드 상승이 이루어졋다고 추정하고 있습니다.<br><br>만일 MCE 에러가 하드웨어 오류에 의한 것이 아니라고 한다면, 아래 문서를 통해 edac 모듈을 블랙리스팅해보시기 바랍니다.<br><br>Using i7 CPU, EDAC error shows in Red Hat Enterprise Linux <br>https://access.redhat.com/solutions/739063<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-05-31T23:56:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JdbVLIAZ"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-05-31T15:37:20Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-05-31T15:37:20Z</b><br><br>MCE에러 및 로드  에버리지율이 NFS HANG과 어떠한 연관성이 있는지요?<br><br>답변 부탁드립니다. 감사합니다.<br><br><publishedDate>2017-05-31T15:37:20Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JdS7BIAV"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-05-31T02:58:51Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-05-31T02:58:51Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>May 29 07:47:30 DECCAL04SL kernel: EDAC sbridge MC2: HANDLING MCE MEMORY ERROR<br>May 29 07:47:30 DECCAL04SL kernel: EDAC sbridge MC2: CPU 20: Machine Check Event: 0 Bank 12: cc002001000800c3<br>May 29 07:47:30 DECCAL04SL kernel: EDAC sbridge MC2: TSC 0<br>May 29 07:47:30 DECCAL04SL kernel: EDAC sbridge MC2: ADDR 8c7ec66000<br>May 29 07:47:30 DECCAL04SL kernel: EDAC sbridge MC2: MISC 122948000080028c<br>May 29 07:47:30 DECCAL04SL kernel: EDAC sbridge MC2: PROCESSOR 0:306f4 TIME 1496011650 SOCKET 2 APIC 80<br>May 29 07:47:31 DECCAL04SL kernel: EDAC MC2: 128 CE memory scrubbing error on CPU_SrcID#2_Ha#0_Chan#3_DIMM#0 (channel:3 slot:0 page:0x8c7ec66 offset:0x0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0008:00c3 socket:2 ha:0 channel_mask:1 rank:0)<br><br>May 26 18:12:30 DECCAL04SL kernel: EDAC sbridge MC2: HANDLING MCE MEMORY ERROR<br>May 26 18:12:30 DECCAL04SL kernel: EDAC sbridge MC2: CPU 20: Machine Check Event: 0 Bank 12: cc002001000800c3<br>May 26 18:12:30 DECCAL04SL kernel: EDAC sbridge MC2: TSC 0<br>May 26 18:12:30 DECCAL04SL kernel: EDAC sbridge MC2: ADDR 8c7ec66000<br>May 26 18:12:30 DECCAL04SL kernel: EDAC sbridge MC2: MISC 122948000080028c<br>May 26 18:12:30 DECCAL04SL kernel: EDAC sbridge MC2: PROCESSOR 0:306f4 TIME 1495789950 SOCKET 2 APIC 80<br><br>May 26 18:01:50 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br>May 26 18:03:20 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>May 26 18:03:20 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>May 26 18:03:20 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>May 26 18:03:20 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br><br>Linux 3.10.0-327.44.2.el7.x86_64 (DECCAL04SL)   2017-05-26      _x86_64_        (80 CPU)<br><br>12:00:01 AM     CPU      %usr     %nice      %sys   %iowait    %steal      %irq     %soft    %guest    %gnice     %idle<br>06:12:01 PM     all      0.19      0.00      0.11      0.00      0.00      0.00      0.00      0.00      0.00     99.69<br><br>12:00:01 AM  pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff<br>06:01:01 PM      0.00     61.11  28854.18      0.00   2879.16      0.00      0.00      0.00      0.00<br>06:02:01 PM     42.14     74.26  31108.59      0.03   5015.39      0.00      0.00      0.00      0.00<br>06:03:01 PM      0.00     87.91  23679.49      0.00   3939.76      0.00      0.00      0.00      0.00<br>06:04:01 PM      0.00     51.61  20473.53      0.00   2694.92      0.00      0.00      0.00      0.00<br>06:05:01 PM      0.00     35.26  21313.34      0.00   2741.27      0.00      0.00      0.00      0.00<br>06:06:01 PM      1.87     61.05  25090.57      0.02   2850.84      0.00      0.00      0.00      0.00<br>06:07:01 PM      0.00     56.45  25539.87      0.00   3439.94      0.00      0.00      0.00      0.00<br>06:08:01 PM      0.00     44.61  21682.76      0.00   2487.89      0.00      0.00      0.00      0.00<br>06:09:01 PM      0.00     26.12  30347.23      0.00   2122.44      0.00      0.00      0.00      0.00<br>06:10:01 PM      0.00     46.35  22454.61      0.00   2560.11      0.00      0.00      0.00      0.00<br>06:11:01 PM      0.53     43.42  22200.37      0.02   6342.04      0.00      0.00      0.00      0.00<br>06:12:01 PM      0.00     37.21  23120.81      0.00   2577.41      0.00      0.00      0.00      0.00<br><br>12:00:01 AM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty<br>06:04:01 PM 506950520 549278948     52.00      8984 474833456 573086436     45.57 199844944 326001100      1396<br>06:05:01 PM 506919504 549309964     52.01      8984 474836420 573101636     45.57 199860884 326003900      1564<br>06:06:01 PM 506938420 549291048     52.00      8984 474838756 573072280     45.57 199850056 326006020       628<br>06:07:01 PM 507052652 549176816     51.99      8984 474841128 572911120     45.56 199725072 326008108       140<br>06:08:01 PM 507087528 549141940     51.99      8984 474845060 572878540     45.55 199693008 326011904       140<br>06:09:01 PM 507080128 549149340     51.99      8984 474846768 572870232     45.55 199694292 326013436       644<br>06:10:01 PM 507027424 549202044     52.00      8984 474848904 572943032     45.56 199735588 326015376       612<br>06:11:01 PM 507980988 548248480     51.91      8984 473991652 572941308     45.56 199406324 325487268      1068<br>06:12:01 PM 507921596 548307872     51.91      8984 473994760 573013936     45.57 199456772 325489484      1588<br><br>12:00:01 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked<br>06:01:01 PM         2      2624     83.50     83.81     85.85         0<br>06:02:01 PM         0      2619     83.02     83.67     85.68         0<br>06:03:01 PM         0      2642     82.30     83.34     85.44         0<br>06:04:01 PM         1      2645     82.55     83.20     85.25         0<br>06:05:01 PM         1      2644     81.74     82.85     85.01         0<br>06:06:01 PM         1      2643     81.89     82.71     84.83         0<br>06:07:01 PM         0      2639     81.83     82.52     84.63         0<br>06:08:01 PM         1      2634     81.69     82.33     84.43         0<br>06:09:01 PM         0      2631     81.56     82.19     84.25         0<br>06:10:01 PM         0      2644     81.64     82.11     84.09         0<br>06:11:01 PM         1      2641     81.76     82.03     83.94         0<br>06:12:01 PM         2      2643     81.58     81.92     83.78         0<br><br>12:00:01 AM    call/s retrans/s    read/s   write/s  access/s  getatt/s<br>06:02:01 PM      4.73      0.80      0.07      0.63      0.75      2.46<br>06:03:01 PM     16.18      1.22      0.03      2.72      1.55      6.33<br>06:04:01 PM      1.75      1.15      0.00      0.13      0.25      1.12<br>06:05:01 PM     15.46      0.78      0.02      2.53      1.68      5.83<br>06:06:01 PM      4.90      1.22      0.02      0.70      0.65      1.93<br>06:07:01 PM     14.64      1.12      0.03      2.85      1.45      5.56<br>06:08:01 PM      0.38      0.78      0.00      0.03      0.17      0.15<br>06:09:01 PM      1.40      1.22      0.00      0.30      0.25      0.32<br>06:10:01 PM      1.30      1.13      0.00      0.10      0.30      0.70<br>06:11:01 PM      1.32      0.78      0.00      0.10      0.17      0.83<br>06:12:01 PM      7.06      1.22      0.22      0.93      1.02      2.57<br>06:13:01 PM     10.04      1.12      0.32      1.25      0.95      2.73<br><br>올려주신 파일을 확인한 결과, MCE 에러가 발생하고 있으며, CPU 사용율은 높지 않은데 반해<br>load average 율이 높은 것으로 확인됩니다.<br>따라서, 하드웨어적으로 CPU 혹은 메모리 점검을 선행해보시는 것을 권고드립니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-05-31T02:58:51Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JdRJJIA3"><br>======================<br><b>생성계정 : 타임게이트, 삼성생명</b><br><b>생성날짜 : 2017-05-31T01:11:13Z</b><br><b>마지막 답변자 : 타임게이트, 삼성생명</b><br><b>마지막 수정 일자 : 2017-05-31T01:11:13Z</b><br><br>파일 드롭박스에 첨부했습니다<br>DECCAL04SL_sa_data.tar.gz입니다<br><br><publishedDate>2017-05-31T01:11:13Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000JdB19IAF"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-05-30T06:22:53Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-05-30T06:22:53Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>DMIDECODE<br>  BIOS:<br>    Vend: HP    Vers: U17    Date: 09/12/2016    BIOS Rev: 2.30    FW Rev:   2.50<br>  System:<br>    Prod: ProLiant DL580 Gen9<br>  CPU:<br>    4 of 4 CPU sockets populated, 10 cores/20 threads per CPU<br>    40 total cores, 80 total threads<br>    Vers: Intel(R) Xeon(R) CPU E7-8891 v3 @ 2.80GHz<br>  Memory:<br>    Total: 1048576 MiB (1024 GiB)<br><br>OS<br>  Hostname: DECCAL04SL<br>  Distro:   [redhat-release] Red Hat Enterprise Linux Server release 7.2 (Maipo)<br>  Kernel:<br>    Booted kernel:  3.10.0-327.44.2.el7.x86_64<br>    Booted kernel cmdline:<br>      root=UUID=088be209-fa9f-4fd3-aa21-8f53282b3f6d ro crashkernel=512M rhgb quiet<br>      LANG=en_US.UTF-8 nmi_watchdog=0 transparent_hugepage=never elevator=deadline<br>      rdloaddriver=hpsa rdloaddriver=qla2xxx<br>    Taint-check: 12289  (see https://access.redhat.com/solutions/40594)<br>       0  PROPRIETARY_MODULE: Proprietary module has been loaded<br>      12  OOT_MODULE: Out-of-tree module has been loaded<br>      13  UNSIGNED_MODULE: Unsigned module has been loaded<br>    - - - - - - - - - - - - - - - - - - -<br>  Sys time:  Mon May 29 09:59:11 KST 2017<br>  Boot time: Sun Apr  9 03:35:00 UTC 2017  (epoch: 1491708900)<br>  Uptime:    49 days, 21:24,  3 users<br>  LoadAvg:   [80 CPU] 0.30 (0%), 0.72 (1%), 1.24 (2%)<br>  /proc/stat:<br>    procs_running: 1   procs_blocked: 0    processes [Since boot]: 10431236<br>    cpu [Utilization since boot]:<br>      us 3%, ni 0%, sys 0%, idle 97%, iowait 0%, irq 0%, sftirq 0%, steal 0%<br><br>KDUMP CONFIG<br>  kexec-tools rpm version:<br>    kexec-tools-2.0.7-38.el7.x86_64<br>  Service enablement:<br>    UNIT  STATE<br>  kdump initrd/initramfs:<br>    20143415 Feb  5 15:24 initramfs-3.10.0-327.44.2.el7.x86_64kdump.img<br>  Memory reservation config:<br>    /proc/cmdline { crashkernel=512M }<br>  kdump.conf:<br>    raw /dev/vg9/DUMP<br>    core_collector makedumpfile -c -d 31 -F<br>  Panic sysctls:<br>    kernel.sysrq [bitmask] =  &quot;1&quot;  (all SysRqs allowed)<br>    kernel.panic [secs] =  0  (no autoreboot on panic)<br>    kernel.hung_task_panic =  0<br>    kernel.panic_on_oops =  1<br>    kernel.panic_on_io_nmi =  1<br>    kernel.panic_on_unrecovered_nmi =  1<br>    kernel.panic_on_stackoverflow =  0<br>    kernel.softlockup_panic =  0<br>    kernel.unknown_nmi_panic =  1<br>    kernel.nmi_watchdog =  0<br>    vm.panic_on_oom [0-2] =  0  (no panic)<br><br>PS CHECK<br>  Total number of threads/processes:<br>    4076 / 1431<br>  Top users of CPU &amp; MEM:<br>    USER    %CPU   %MEM    RSS<br>    recadm  80.3%  140.9%  1591.11 GiB<br>    root    21.2%  0.0%    0.34 GiB<br>  Uninteruptible sleep threads/processes (0/0):<br>    [None]<br>  Defunct zombie threads/processes (0/0):<br>    [None]<br>  Top CPU-using processes:<br>    USER      PID     %CPU  %MEM  VSZ-MiB  RSS-MiB  TTY    STAT  START  TIME    COMMAND<br>    root      35790   19.0  0.0   290      64       pts/1  S+    09:58  0:06    /usr/bin/python /sbin/sosreport -n<br>    root      72635   1.8   0.0   601      17       ?      Sl    May26  71:14   ./ontuned -c -x<br>    recadm    113388  1.7   1.8   234885   19581    ?      S     May14  367:04  dw.sapREC_D00 pf=/usr/sap/REC/SYS/profile/REC_D00_DECCAL04SL<br>    recadm    113372  1.7   1.3   235060   13623    ?      S     May14  382:43  dw.sapREC_D00 pf=/usr/sap/REC/SYS/profile/REC_D00_DECCAL04SL<br>    recadm    113370  1.5   2.0   235239   21643    ?      S     May14  336:44  dw.sapREC_D00 pf=/usr/sap/REC/SYS/profile/REC_D00_DECCAL04SL<br>    recadm    117408  1.4   1.5   234883   15933    ?      S     May14  309:50  dw.sapREC_D10 pf=/usr/sap/REC/SYS/profile/REC_D10_DECCAL04SL<br>    recadm    113378  1.4   1.6   234888   17498    ?      S     May14  313:35  dw.sapREC_D00 pf=/usr/sap/REC/SYS/profile/REC_D00_DECCAL04SL<br>    recadm    113360  1.4   2.1   234943   22668    ?      S     May14  302:35  dw.sapREC_D00 pf=/usr/sap/REC/SYS/profile/REC_D00_DECCAL04SL<br>    recadm    117416  1.3   1.2   234863   12922    ?      S     May14  286:16  dw.sapREC_D10 pf=/usr/sap/REC/SYS/profile/REC_D10_DECCAL04SL<br>    recadm    117393  1.3   1.2   234855   12773    ?      S     May14  279:49  dw.sapREC_D10 pf=/usr/sap/REC/SYS/profile/REC_D10_DECCAL04SL<br><br>100.253.144.202:/BATCH_bat_sam_SAM_bak_PP on /batch_sam/SAM/backup type nfs (rw,relatime,vers=3,rsize=65536,wsize=65536,namlen=255,hard,proto=tcp,timeo=300,retrans=2,sec=sys,mountaddr=100.253.144.202,mountvers=3,mountport=4048,mountproto=tcp,local_lock=none,addr=100.253.144.202)<br>100.253.144.201:/ECC_MIG_PP on /MIG type nfs (rw,relatime,vers=3,rsize=65536,wsize=65536,namlen=255,hard,proto=tcp,timeo=300,retrans=2,sec=sys,mountaddr=100.253.144.201,mountvers=3,mountport=4048,mountproto=tcp,local_lock=none,addr=100.253.144.201)<br>100.253.144.202:/BATCH_bat_sam_SAM_work_PP on /batch_sam/SAM/work type nfs (rw,relatime,vers=3,rsize=65536,wsize=65536,namlen=255,hard,proto=tcp,timeo=300,retrans=2,sec=sys,mountaddr=100.253.144.202,mountvers=3,mountport=4048,mountproto=tcp,local_lock=none,addr=100.253.144.202)<br>100.253.144.201:/ECC_sapmnt_PEC_PP on /sapmnt/REC type nfs (rw,relatime,vers=3,rsize=65536,wsize=65536,namlen=255,hard,proto=tcp,timeo=300,retrans=2,sec=sys,mountaddr=100.253.144.201,mountvers=3,mountport=4048,mountproto=tcp,local_lock=none,addr=100.253.144.201)<br>100.253.144.201:/ECC_SAPP_PP on /SAPP type nfs (rw,relatime,vers=3,rsize=65536,wsize=65536,namlen=255,hard,proto=tcp,timeo=300,retrans=2,sec=sys,mountaddr=100.253.144.201,mountvers=3,mountport=4048,mountproto=tcp,local_lock=none,addr=100.253.144.201)<br>tmpfs on /run/user/30311 type tmpfs (rw,nosuid,nodev,relatime,size=105622948k,mode=700,uid=30311,gid=30003)<br>tmpfs on /run/user/32312 type tmpfs (rw,nosuid,nodev,relatime,size=105622948k,mode=700,uid=32312,gid=30003)<br>100.253.144.201:/ECC_usr_sap_trans_PP on /usr/sap/trans type nfs (rw,relatime,vers=3,rsize=65536,wsize=65536,namlen=255,hard,proto=tcp,timeo=300,retrans=2,sec=sys,mountaddr=100.253.144.201,mountvers=3,mountport=4048,mountproto=tcp,local_lock=none,addr=100.253.144.201,_netdev)<br><br>May 26 15:50:22 DECCAL04SL kernel: nfs: server 100.253.144.202 not responding, still trying<br>...<br>May 26 15:52:12 DECCAL04SL kernel: nfs: server 100.253.144.202 OK<br><br>sosreport상에 나타난 바로는, nfs 서버인 100.253.144.202 와의 연결에 문제가 발생하여 지속적으로 메시지가 출력된 것을 확인하였습니다.<br><br>이는 대부분 nfs 서버와의 연결에 관련된 여러 요소에 영향을 받는 것이 일반적입니다.<br>  - 네트워크 과부하 스위치 포트 이상, 케이블 불량, 네트워크 포트 불량<br>  - nfs 서버의 과부하, 방화벽등<br><br>따라서 위에 열거한 부분에 구간별 이상이 없는지 확인이 필요합니다.<br>추가로 아래 파일들을 올려주시면 해당 시각에 시스템 자원 사용량을 점검해보도록 하겠습니다.<br><br>/var/log/sa/sa*<br>/var/log/sa/sar*<br><br>[관련 문서]<br>RHEL mount hangs: nfs: server [...] not responding, still trying <br>https://access.redhat.com/solutions/28211<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-05-30T06:22:53Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000JdAbaIAF"><br>======================<br><b>생성계정 : 게이트, 타임</b><br><b>생성날짜 : 2017-05-30T05:30:23Z</b><br><b>마지막 답변자 : 게이트, 타임</b><br><b>마지막 수정 일자 : 2017-05-30T05:30:23Z</b><br><br>재 첨부합니다. 확인 부탁드릴게요..<br><br><publishedDate>2017-05-30T05:30:23Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Jd8hpIAB"><br>======================<br><b>생성계정 : Shin, Jay</b><br><b>생성날짜 : 2017-05-30T00:02:07Z</b><br><b>마지막 답변자 : Shin, Jay</b><br><b>마지막 수정 일자 : 2017-05-30T00:02:07Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>올려주신 sosreport 가 손상되어 압축해제가 되지 않습니다. 다시 올려주시면 추가 분석하도록 하겠습니다.<br><br>감사합니다.<br><br><br>Jay Shin, Technical Support Engineer<br><br>Office: +82 2 3490 5200 - ext 3 (기술문의)<br>Email: jaeshin@redhat.com <br><br>Red Hat, Asia-Pacific Pty Ltd <br>Website: www.redhat.com<br><br><publishedDate>2017-05-30T00:02:07Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>