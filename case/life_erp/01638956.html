======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-05-23T06:16:21Z</b><br><b>마지막 답변자 : 우택 심</b><br><b>마지막 수정 일자 : 2016-06-08T01:15:34Z</b><br><b>id : 500A000000UCzsZIAT</b><br>======================<br><br><b><font size=15>
제목  : PPMSAL03SL (HP 물리 시스템) SAN Volume rejecting I/O to offline device
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>2016-05-19 Hitachi SAN 볼륨 중 SAP 관련 Device 일부가 rejecting I/O to offline device 되는 문제가 발생하였습니다.<br><br>multipath 로 되어 있어 Mount 되어 있는 볼륨에는 문제가 없었으나, 2개의 SAP multipath 장치에 동일한 증상이 발견 되었습니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>우선 최초 5/19 00:44:06 에 아래와 같이 발생하였습니다.<br><br>May 19 00:44:06 PPMSAL03SL multipathd: 8:64: mark as failed<br>May 19 00:44:06 PPMSAL03SL multipathd: SAP100G002: remaining active paths: 3<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] killing request<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] FAILED Result: hostbyte=DID_NO_CONNECT driverbyte=DRIVER_OK<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] killing request<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] killing request<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] killing request<br><br>이후 1초 뒤에 아래와 같이 복구 된 것을 확인 하였습니다.<br><br>May 19 00:44:07 PPMSAL03SL multipathd: SAP100G002: sde - tur checker reports path is up<br>May 19 00:44:07 PPMSAL03SL multipathd: 8:64: reinstated<br>May 19 00:44:07 PPMSAL03SL multipathd: SAP100G002: remaining active paths: 4<br><br>여기 까지 첫번 째로 발견 된 사항이며, <br><br>두번 째는 5/19 02:11:32 에 아래와 같이 발생하였습니다.<br><br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:0: rejecting I/O to offline device<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:0: [sdc] killing request<br>May 19 02:11:32 PPMSAL03SL kernel: scsi_io_completion: 20 callbacks suppressed<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:0: [sdc] FAILED Result: hostbyte=DID_NO_CONNECT driverbyte=DRIVER_OK<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:0: [sdc] CDB: Write(10) 2a 00 02 d7 6e 08 00 04 00 00<br>May 19 02:11:32 PPMSAL03SL kernel: blk_update_request: 20 callbacks suppressed<br>May 19 02:11:32 PPMSAL03SL kernel: blk_update_request: I/O error, dev sdc, sector 47672840<br>May 19 02:11:32 PPMSAL03SL kernel: device-mapper: multipath: Failing path 8:32.<br>...<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:1: [sde] FAILED Result: hostbyte=DID_NO_CONNECT driverbyte=DRIVER_OK<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:1: [sde] CDB: Write(10) 2a 00 07 4a 20 60 00 04 00 00<br>May 19 02:11:32 PPMSAL03SL kernel: blk_update_request: I/O error, dev sde, sector 122298464<br>May 19 02:11:32 PPMSAL03SL multipathd: 8:64: mark as failed<br>May 19 02:11:32 PPMSAL03SL multipathd: SAP100G002: remaining active paths: 3<br><br>이후 아래와 같이 복구 된 것을 확인 하였습니다.<br><br>May 19 02:12:32 PPMSAL03SL multipathd: SAP100G001: sdc - tur checker reports path is up<br>May 19 02:12:32 PPMSAL03SL multipathd: 8:32: reinstated<br>May 19 02:12:32 PPMSAL03SL multipathd: SAP100G001: remaining active paths: 4<br>May 19 02:12:32 PPMSAL03SL multipathd: SAP100G002: sde - tur checker reports path is up<br>May 19 02:12:32 PPMSAL03SL multipathd: 8:64: reinstated<br>May 19 02:12:32 PPMSAL03SL multipathd: SAP100G002: remaining active paths: 4<br><br>SAN Switch 쪽 로그도 확인 해 보았는데요, 실제로 Error Count 가 올라간 것을 확인 할 수 있었습니다.<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>관련 자료를 dropbox.redhat.com/incoming 에 아래와 같은 파일명으로 업로드 하였습니다.<br><br>sosreport-PPMSAL03SL-20160520131841.tar.xz<br>sosreport-PPMSAL03SL-LOG.tar.gz<br><br>추가 적으로 문제가 될 만한 사항을 확인 부탁드립니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 3 (Normal)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000HHfZLIA1"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-06-08T01:15:24Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-06-08T01:15:24Z</b><br><br>안녕하세요.<br><br>동일문제 발생 시 다시 케이스를 열도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-06-08T01:15:24Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000HHfXUIA1"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-06-08T01:10:11Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-06-08T01:10:11Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>본 케이스와 관련되어 혹시 추가 문의사항이 잇으시면 케이스에 업데이트 바라며, 없으시면 케이스를 close하도록 하겠습니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-06-08T01:10:11Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H9MUMIA3"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-24T08:39:53Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-24T08:39:52Z</b><br><br>안녕하세요,<br>Red Hat 한진구 입니다.<br><br>현재 이슈는 일반적으로 스토리지와의 연결 문제가 발생하고 있는 메시지이며, 일반적으로 아래와 같음 메시지는 다음과 같은 상황에서 발생합니다.<br><br>&gt; May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] FAILED Result: hostbyte=DID_NO_CONNECT driverbyte=DRIVER_OK<br><br>DID_NO_CONNECT는 driver에서 출력되는 것으로 일반적으로 펌웨어로 부터 나온다고 보시면 됩니다. 그리고.. 해당 메시지는 현재 HBA로 부터 IO명령어가 해당 디바이스로 보내질 수 없을 때 발생하게 됩니다.<br>이러한 경우는 일반적으로 HBA/SAN의 이슈로써 하드웨어 및 SAN 스토리지 벤더로 문의하시는 것을 가이드 디리고 있습니다.<br><br><br>업무에 참고하시어 하드웨어 벤더 쪽으로 당시의 어떤 문제에 대해서 기술지원 받으시기 바랍니다.<br>======================<br>감사합니다.<br><br><publishedDate>2016-05-24T08:39:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000H95wjIAB"><br>======================<br><b>생성계정 : HAN, JINKOO</b><br><b>생성날짜 : 2016-05-23T06:30:57Z</b><br><b>마지막 답변자 : HAN, JINKOO</b><br><b>마지막 수정 일자 : 2016-05-23T06:30:56Z</b><br><br>안녕하세요,<br>Red Hat Technical Account Manager 한진구 입니다.<br><br>보내주신 데이터와 문의주신 내용을 확인 후, 답변 드리도록 하겠습니다.<br>======================<br><br>감사합니다.<br><br><publishedDate>2016-05-23T06:30:56Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>2016-05-19 Hitachi SAN 볼륨 중 SAP 관련 Device 일부가 rejecting I/O to offline device 되는 문제가 발생하였습니다.<br><br>multipath 로 되어 있어 Mount 되어 있는 볼륨에는 문제가 없었으나, 2개의 SAP multipath 장치에 동일한 증상이 발견 되었습니다.</issue><environment>우선 최초 5/19 00:44:06 에 아래와 같이 발생하였습니다.<br><br>May 19 00:44:06 PPMSAL03SL multipathd: 8:64: mark as failed<br>May 19 00:44:06 PPMSAL03SL multipathd: SAP100G002: remaining active paths: 3<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] killing request<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] FAILED Result: hostbyte=DID_NO_CONNECT driverbyte=DRIVER_OK<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] killing request<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] killing request<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 00:44:06 PPMSAL03SL kernel: sd 3:0:0:1: [sde] killing request<br><br>이후 1초 뒤에 아래와 같이 복구 된 것을 확인 하였습니다.<br><br>May 19 00:44:07 PPMSAL03SL multipathd: SAP100G002: sde - tur checker reports path is up<br>May 19 00:44:07 PPMSAL03SL multipathd: 8:64: reinstated<br>May 19 00:44:07 PPMSAL03SL multipathd: SAP100G002: remaining active paths: 4<br><br>여기 까지 첫번 째로 발견 된 사항이며, <br><br>두번 째는 5/19 02:11:32 에 아래와 같이 발생하였습니다.<br><br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:0: rejecting I/O to offline device<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:0: [sdc] killing request<br>May 19 02:11:32 PPMSAL03SL kernel: scsi_io_completion: 20 callbacks suppressed<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:1: rejecting I/O to offline device<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:0: [sdc] FAILED Result: hostbyte=DID_NO_CONNECT driverbyte=DRIVER_OK<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:0: [sdc] CDB: Write(10) 2a 00 02 d7 6e 08 00 04 00 00<br>May 19 02:11:32 PPMSAL03SL kernel: blk_update_request: 20 callbacks suppressed<br>May 19 02:11:32 PPMSAL03SL kernel: blk_update_request: I/O error, dev sdc, sector 47672840<br>May 19 02:11:32 PPMSAL03SL kernel: device-mapper: multipath: Failing path 8:32.<br>...<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:1: [sde] FAILED Result: hostbyte=DID_NO_CONNECT driverbyte=DRIVER_OK<br>May 19 02:11:32 PPMSAL03SL kernel: sd 3:0:0:1: [sde] CDB: Write(10) 2a 00 07 4a 20 60 00 04 00 00<br>May 19 02:11:32 PPMSAL03SL kernel: blk_update_request: I/O error, dev sde, sector 122298464<br>May 19 02:11:32 PPMSAL03SL multipathd: 8:64: mark as failed<br>May 19 02:11:32 PPMSAL03SL multipathd: SAP100G002: remaining active paths: 3<br><br>이후 아래와 같이 복구 된 것을 확인 하였습니다.<br><br>May 19 02:12:32 PPMSAL03SL multipathd: SAP100G001: sdc - tur checker reports path is up<br>May 19 02:12:32 PPMSAL03SL multipathd: 8:32: reinstated<br>May 19 02:12:32 PPMSAL03SL multipathd: SAP100G001: remaining active paths: 4<br>May 19 02:12:32 PPMSAL03SL multipathd: SAP100G002: sde - tur checker reports path is up<br>May 19 02:12:32 PPMSAL03SL multipathd: 8:64: reinstated<br>May 19 02:12:32 PPMSAL03SL multipathd: SAP100G002: remaining active paths: 4<br><br>SAN Switch 쪽 로그도 확인 해 보았는데요, 실제로 Error Count 가 올라간 것을 확인 할 수 있었습니다.</environment><periodicityOfIssue>관련 자료를 dropbox.redhat.com/incoming 에 아래와 같은 파일명으로 업로드 하였습니다.<br><br>sosreport-PPMSAL03SL-20160520131841.tar.xz<br>sosreport-PPMSAL03SL-LOG.tar.gz<br><br>추가 적으로 문제가 될 만한 사항을 확인 부탁드립니다.<br><br>감사합니다.</periodicityOfIssue><cep>false</cep></case>