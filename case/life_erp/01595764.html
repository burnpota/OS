======================<br><b>생성계정 : 우택 심</b><br><b>생성날짜 : 2016-03-07T02:56:01Z</b><br><b>마지막 답변자 : Ying Huang</b><br><b>마지막 수정 일자 : 2016-03-16T05:45:41Z</b><br><b>id : 500A000000TeYiGIAV</b><br>======================<br><br><b><font size=15>
제목  : RHCS (Pacemaker) fence_vmware_soap timeout error 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>어떤 문제/오류/결함이 발생했습니까? 기대하시는 결과는 무엇입니까?<br><br>안녕하세요.<br><br>현재 RHEL7.2 / RHEL6.7 환경에서 Pacemaker Cluster 를 구성하였습니다.<br><br>물리시스템의 경우 IPMI fence 를 사용하고 있으며, 가상화의 경우 VMWare SOAP Fence 를 이용하였습니다.<br><br>하지만 가상화 VMWare 환경의 경우 주기적으로 Stonith timeout error 가 발생하여 Stonith 가 Stop 되는 중대한 문제가 발생하고 있습니다.<br><br>어디서 문제가 발생했습니까? 어떤 환경에서 발생했습니까?<br><br>문제가 발생한 클러스터 상태를 보면 아래와 같이 확인이 됩니다.<br><br>[root@PCRMCL02SL:/root] pcs status<br>Cluster name: CRM_CI_cluster<br>Last updated: Mon Mar  7 10:07:28 2016          Last change: Fri Mar  4 17:42:48 2016 by root via cibadmin on PCRMCL01SL-HB<br>Stack: corosync<br>Current DC: PCRMCL02SL-HB (version 1.1.13-10.el7-44eb2dd) - partition with quorum<br>2 nodes and 9 resources configured<br><br>Online: [ PCRMCL01SL-HB PCRMCL02SL-HB ]<br><br>Full list of resources:<br><br> Resource Group: PCRMSCS_group<br>     PCRMSCS    (ocf::heartbeat:IPaddr2):       Started PCRMCL01SL-HB<br>     PCRMSCS_script     (ocf::status:MySAP):    Started PCRMCL01SL-HB<br> Resource Group: PCRMERS_group<br>     PCRMERS    (ocf::heartbeat:IPaddr2):       Started PCRMCL02SL-HB<br>     PCRMERS_script     (ocf::pacemaker:Dummy): Started PCRMCL02SL-HB<br> Clone Set: ping-clone [ping]<br>     Started: [ PCRMCL01SL-HB PCRMCL02SL-HB ]<br> kdump_stonith  (stonith:fence_kdump):  Started PCRMCL02SL-HB<br> vmware_stonith1        (stonith:fence_vmware_soap):    Stopped<br> vmware_stonith2        (stonith:fence_vmware_soap):    Started PCRMCL01SL-HB<br><br>Failed Actions:<br>* vmware_stonith2_monitor_60000 on PCRMCL01SL-HB 'unknown error' (1): call=67, status=Timed Out, exitreason='none',<br>    last-rc-change='Sun Mar  6 02:40:24 2016', queued=0ms, exec=20017ms<br>* vmware_stonith1_monitor_60000 on PCRMCL02SL-HB 'unknown error' (1): call=84, status=Timed Out, exitreason='none',<br>    last-rc-change='Sat Mar  5 21:30:40 2016', queued=0ms, exec=20018ms<br><br>PCSD Status:<br>  PCRMCL01SL-HB: Online<br>  PCRMCL02SL-HB: Online<br><br>Daemon Status:<br>  corosync: active/disabled<br>  pacemaker: active/disabled<br>  pcsd: active/enabled<br><br> Stonith 관련하여 에러가 발생하고 있으며, Stonith cleanup 을 하면 한동안 문제가 없다가 다시 모든 vmware cluster 환경(10세트)에서 동일하게 발생합니다.<br><br>아래는 문제가 발생했던 클러스터 노드의 /var/log/messages 일부를 발췌하였습니다.<br><br>================================================================================<br><br>[root@PCRMCL01SL:/root] cat /var/log/messages<br>...<br>Mar  6 02:40:44 PCRMCL01SL stonith-ng[4003]:  notice: Child process 89443 performing action 'monitor' timed out with signal 15<br>Mar  6 02:40:44 PCRMCL01SL stonith-ng[4003]:  notice: Operation 'monitor' [89443] for device 'vmware_stonith2' returned: -62 (Timer expired)<br>Mar  6 02:40:44 PCRMCL01SL stonith-ng[4003]: warning: vmware_stonith2:89443 [ /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:769: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html ]<br>Mar  6 02:40:44 PCRMCL01SL stonith-ng[4003]: warning: vmware_stonith2:89443 [   InsecureRequestWarning) ]<br>Mar  6 02:40:44 PCRMCL01SL crmd[4007]:   error: Operation vmware_stonith2_monitor_60000: Timed Out (node=PCRMCL01SL-HB, call=67, timeout=20000ms)<br>Mar  6 02:40:44 PCRMCL01SL crmd[4007]:  notice: Operation vmware_stonith2_stop_0: ok (node=PCRMCL01SL-HB, call=69, rc=0, cib-update=60, confirmed=true)<br>Mar  6 02:40:53 PCRMCL01SL crmd[4007]:  notice: Operation vmware_stonith2_start_0: ok (node=PCRMCL01SL-HB, call=70, rc=0, cib-update=61, confirmed=true)<br><br>================================================================================<br><br>[root@PCRMCL02SL:/root] cat /var/log/messages<br>...<br>Mar  5 21:31:00 PCRMCL02SL stonith-ng[42485]:  notice: Child process 28965 performing action 'monitor' timed out with signal 15<br>Mar  5 21:31:00 PCRMCL02SL stonith-ng[42485]:  notice: Operation 'monitor' [28965] for device 'vmware_stonith1' returned: -62 (Timer expired)<br>Mar  5 21:31:00 PCRMCL02SL stonith-ng[42485]: warning: vmware_stonith1:28965 [ /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:769: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html ]<br>Mar  5 21:31:00 PCRMCL02SL stonith-ng[42485]: warning: vmware_stonith1:28965 [   InsecureRequestWarning) ]<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:   error: Operation vmware_stonith1_monitor_60000: Timed Out (node=PCRMCL02SL-HB, call=84, timeout=20000ms)<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: State transition S_IDLE -&gt; S_POLICY_ENGINE [ input=I_PE_CALC cause=C_FSA_INTERNAL origin=abort_transition_graph ]<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]: warning: Processing failed op monitor for vmware_stonith1 on PCRMCL02SL-HB: unknown error (1)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]:  notice: Recover vmware_stonith1#011(Started PCRMCL02SL-HB)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]:  notice: Calculated Transition 240: /var/lib/pacemaker/pengine/pe-input-85.bz2<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]: warning: Processing failed op monitor for vmware_stonith1 on PCRMCL02SL-HB: unknown error (1)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]: warning: Forcing vmware_stonith1 away from PCRMCL02SL-HB after 3 failures (max=3)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]:  notice: Stop    vmware_stonith1#011(PCRMCL02SL-HB)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]:  notice: Calculated Transition 241: /var/lib/pacemaker/pengine/pe-input-86.bz2<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: Initiating action 9: stop vmware_stonith1_stop_0 on PCRMCL02SL-HB (local)<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: Operation vmware_stonith1_stop_0: ok (node=PCRMCL02SL-HB, call=86, rc=0, cib-update=393, confirmed=true)<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: Transition 241 (Complete=2, Pending=0, Fired=0, Skipped=0, Incomplete=0, Source=/var/lib/pacemaker/pengine/pe-input-86.bz2): Complete<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: State transition S_TRANSITION_ENGINE -&gt; S_IDLE [ input=I_TE_SUCCESS cause=C_FSA_INTERNAL origin=notify_crmd ]<br><br>================================================================================<br><br>[root@PIASCL01SL:/root] cat /var/log/messages<br>...<br>Mar  6 00:37:00 PIASCL01SL crmd[14457]:  notice: State transition S_IDLE -&gt; S_POLICY_ENGINE [ input=I_PE_CALC cause=C_FSA_INTERNAL origin=abort_transition_graph ]<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]: warning: Processing failed op monitor for vmware_stonith1 on PIASCL02SL-HB: unknown error (1)<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]:  notice: Recover vmware_stonith1#011(Started PIASCL02SL-HB)<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]:  notice: Calculated Transition 142: /var/lib/pacemaker/pengine/pe-input-136.bz2<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]: warning: Processing failed op monitor for vmware_stonith1 on PIASCL02SL-HB: unknown error (1)<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]:  notice: Recover vmware_stonith1#011(Started PIASCL02SL-HB)<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]:  notice: Calculated Transition 143: /var/lib/pacemaker/pengine/pe-input-137.bz2<br>Mar  6 00:37:00 PIASCL01SL crmd[14457]:  notice: Initiating action 5: stop vmware_stonith1_stop_0 on PIASCL02SL-HB<br>Mar  6 00:37:00 PIASCL01SL crmd[14457]:  notice: Initiating action 40: start vmware_stonith1_start_0 on PIASCL02SL-HB<br><br>================================================================================<br>[root@PBISAL01SL:/root] cat /var/log/messages<br>...<br>Mar  6 07:51:00 PBISAL01SL stonith-ng[4654]:  notice: Child process 108707 performing action 'monitor' timed out with signal 15<br>Mar  6 07:51:00 PBISAL01SL stonith-ng[4654]:  notice: Operation 'monitor' [108707] for device 'vmware_stonith2' returned: -62 (Timer expired)<br>Mar  6 07:51:00 PBISAL01SL stonith-ng[4654]: warning: vmware_stonith2:108707 [ /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:769: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html ]<br>Mar  6 07:51:00 PBISAL01SL stonith-ng[4654]: warning: vmware_stonith2:108707 [   InsecureRequestWarning) ]<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:   error: Operation vmware_stonith2_monitor_60000: Timed Out (node=PBISAL01SL-HB, call=63, timeout=20000ms)<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:  notice: State transition S_IDLE -&gt; S_POLICY_ENGINE [ input=I_PE_CALC cause=C_FSA_INTERNAL origin=abort_transition_graph ]<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]: warning: Processing failed op monitor for vmware_stonith2 on PBISAL01SL-HB: unknown error (1)<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]:  notice: Recover vmware_stonith2#011(Started PBISAL01SL-HB)<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]:  notice: Calculated Transition 171: /var/lib/pacemaker/pengine/pe-input-92.bz2<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]: warning: Processing failed op monitor for vmware_stonith2 on PBISAL01SL-HB: unknown error (1)<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]:  notice: Recover vmware_stonith2#011(Started PBISAL01SL-HB)<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]:  notice: Calculated Transition 172: /var/lib/pacemaker/pengine/pe-input-93.bz2<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:  notice: Initiating action 4: stop vmware_stonith2_stop_0 on PBISAL01SL-HB (local)<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:  notice: Operation vmware_stonith2_stop_0: ok (node=PBISAL01SL-HB, call=65, rc=0, cib-update=274, confirmed=true)<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:  notice: Initiating action 42: start vmware_stonith2_start_0 on PBISAL01SL-HB (local)<br><br>================================================================================<br><br>초기 VMWare Stonith 구성할 때 사용한 명령어는 아래와 같습니다.<br><br># fence_vmware_soap -a 14.XX.YYY.1 -l c6031043@domain.com -p password \<br>   --ssl --ssl-insecure --action list | egrep '(PCRMCL02SL|PCRMCL01SL)'<br>PCRMCL01SL,423ccf9d-9940-ac84-9a2f-403ad8608627<br>PCRMCL02SL,423c3b19-b829-10d9-716f-d12fe99cb5ad<br><br># pcs stonith create vmware_stonith1 fence_vmware_soap params ipaddr=&quot;14.XX.YYY.1&quot;<br>   login=&quot;c6031043@domain.com&quot; passwd='password' ssl=&quot;1&quot; ssl_insecure=&quot;1&quot; <br>   action=&quot;reboot&quot; port=&quot;PCRMCL01SL&quot; pcmk_host_list=&quot;node01-hb&quot; delay=5<br><br># pcs stonith create vmware_stonith2 fence_vmware_soap params ipaddr=&quot;14.XX.YYY.1&quot;<br>   login=&quot;c6031043@domain.com&quot; passwd='password' ssl=&quot;1&quot; ssl_insecure=&quot;1&quot;<br>   action=&quot;reboot&quot; port=&quot;PCRMCL02SL&quot; pcmk_host_list=&quot;node02-hb&quot;<br><br>언제 문제가 발생했습니까? 이러한 문제가 자주 발생합니까? 반복적으로 발생합니까? 특정 시간에 발생합니까?<br><br>VMWare 기반 Pacemaker 를 구성할 때 위에서 사용한 옵션에 대한 검증이 필요할 것 같습니다.<br><br>그리고 이와 같은 환경에서 유사한 에러 해결에 대한 솔루션 확인 부탁 드립니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.2</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 2 (High)</b><br><enhancedSLA>false</enhancedSLA><contactIsPartner>false</contactIsPartner><tags/><br><br><comment id="a0aA000000GjVN9IAN"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-03-16T05:45:41Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-03-16T05:45:41Z</b><br><br>안녕하세요,<br><br>먼저, 문제가 잘 해결된것으로 보여 참 다행입니다.<br><br>본 케이스를 처리완료하도록 하겠습니다. 만약 본 케이스와 관련하여 추가 질문이 있으시다면 언제든지 재오픈하실 수 있습니다.<br><br>케이스가 처리 완료되면 가능하게 고객 설문조사 메일이 발송됩니다. 고객님께서 남기 신 의견은 보다 나은 서비스를 위해 지속적으로 반영될 것입니다. 향후 기술 지원 서비스의 품질 향상을 위해, 소중한 시간을 내어 주시면 대단히 감사드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2016-03-16T05:45:41Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GizkkIAB"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-03-14T04:29:49Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-03-14T04:29:49Z</b><br><br>안녕하세요.<br><br>pcmk_monitor_timoeout 값을 60s 로 설정한 후부터 vcenter 연결이 지연되어 발생하는 stonith error 는 해결 되었습니다.<br><br>감사합니다.<br><br><publishedDate>2016-03-14T04:29:49Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GdXB4IAN"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2016-03-08T08:31:55Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2016-03-08T08:31:55Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>제가 갑자기 이 케이스를 백업을 하게 되어서 문의해주신 내용을 정확히 이해했는지는 모르겠습니다만,<br>저희 내부문서를 확인해보니 pcmk_monitor_timoeout 디폴트값은 60초 입니다.<br><br><br>pcmk_monitor_timeout<br>time<br>60s<br><br>Specify an alternate timeout to use for monitor actions instead of stonith-timeout. Some devices need much more or much less time to complete than normal. Use this to specify an alternate, device-specific, timeout for monitor actions.<br><br><br>[ 참고문서 ]<br><br>[1] 4.9. ADDITIONAL FENCING CONFIGURATION OPTIONS<br>- https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/High_Availability_Add-On_Reference/s1-fencedevicesadditional-HAAR.html<br><br><br>혹시, 질문의 요점사항이 다르게 해석이 되었다고 생각되신다면 다시 코멘트 남겨주시길 바랍니다.<br><br><br>감사합니다.<br><br><publishedDate>2016-03-08T08:31:55Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000GdW5jIAF"><br>======================<br><b>생성계정 : 심, 우택</b><br><b>생성날짜 : 2016-03-08T06:29:19Z</b><br><b>마지막 답변자 : 심, 우택</b><br><b>마지막 수정 일자 : 2016-03-08T06:29:19Z</b><br><br>안녕하세요.<br><br>서브스크립션에 대해서는 현재 알아보고 있으며,<br><br>우선 Cluster Stonith 의 pcmk_monitor_timeout 을 60s 로 변경하여 조치는 하였습니다.<br><br>첨부한 sosreport 의 Log 를 보면 20000ms timeout 으로 기록되어 있습니다.<br><br>클러스터 초기 구성 시 pcmk_monitor_timeout 의 Default 가 20s 인지 확인 부탁드립니다.<br><br>감사합니다.<br><br><publishedDate>2016-03-08T06:29:19Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000GdDr1IAF"><br>======================<br><b>생성계정 : Huang, Ying</b><br><b>생성날짜 : 2016-03-07T03:27:08Z</b><br><b>마지막 답변자 : Huang, Ying</b><br><b>마지막 수정 일자 : 2016-03-07T03:27:08Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Services 를 이용해 주셔서 감사합니다.<br><br>죄송합니다만 현재 케이스를 올려주신 계정번호 5251314에는 RHEL High Availability add on <br>서브스크립션을 보유하고 있지 않으셔서 지원이 어려운 상황입니다.<br>혹시 상기 서브스크립션을 보유하고 계신 기타 계정이 있으신지요?<br>있다면 관련 서브스크립션을 보유하고 계신 계정으로 케이스를 다시 올려주시면 대단히<br>감사 드립니다.<br><br>만일 RHEL High Availability add on 보유하고 있지 않으시다면 <br>관련 서브스크립션에 대한 정보는 저희 영업팀(080-708-0880)으로 연락하실수 있으십니다.<br><br>감사합니다.<br><br><publishedDate>2016-03-07T03:27:08Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br><br>현재 RHEL7.2 / RHEL6.7 환경에서 Pacemaker Cluster 를 구성하였습니다.<br><br>물리시스템의 경우 IPMI fence 를 사용하고 있으며, 가상화의 경우 VMWare SOAP Fence 를 이용하였습니다.<br><br>하지만 가상화 VMWare 환경의 경우 주기적으로 Stonith timeout error 가 발생하여 Stonith 가 Stop 되는 중대한 문제가 발생하고 있습니다.</issue><environment>문제가 발생한 클러스터 상태를 보면 아래와 같이 확인이 됩니다.<br><br>[root@PCRMCL02SL:/root] pcs status<br>Cluster name: CRM_CI_cluster<br>Last updated: Mon Mar  7 10:07:28 2016          Last change: Fri Mar  4 17:42:48 2016 by root via cibadmin on PCRMCL01SL-HB<br>Stack: corosync<br>Current DC: PCRMCL02SL-HB (version 1.1.13-10.el7-44eb2dd) - partition with quorum<br>2 nodes and 9 resources configured<br><br>Online: [ PCRMCL01SL-HB PCRMCL02SL-HB ]<br><br>Full list of resources:<br><br> Resource Group: PCRMSCS_group<br>     PCRMSCS    (ocf::heartbeat:IPaddr2):       Started PCRMCL01SL-HB<br>     PCRMSCS_script     (ocf::status:MySAP):    Started PCRMCL01SL-HB<br> Resource Group: PCRMERS_group<br>     PCRMERS    (ocf::heartbeat:IPaddr2):       Started PCRMCL02SL-HB<br>     PCRMERS_script     (ocf::pacemaker:Dummy): Started PCRMCL02SL-HB<br> Clone Set: ping-clone [ping]<br>     Started: [ PCRMCL01SL-HB PCRMCL02SL-HB ]<br> kdump_stonith  (stonith:fence_kdump):  Started PCRMCL02SL-HB<br> vmware_stonith1        (stonith:fence_vmware_soap):    Stopped<br> vmware_stonith2        (stonith:fence_vmware_soap):    Started PCRMCL01SL-HB<br><br>Failed Actions:<br>* vmware_stonith2_monitor_60000 on PCRMCL01SL-HB 'unknown error' (1): call=67, status=Timed Out, exitreason='none',<br>    last-rc-change='Sun Mar  6 02:40:24 2016', queued=0ms, exec=20017ms<br>* vmware_stonith1_monitor_60000 on PCRMCL02SL-HB 'unknown error' (1): call=84, status=Timed Out, exitreason='none',<br>    last-rc-change='Sat Mar  5 21:30:40 2016', queued=0ms, exec=20018ms<br><br>PCSD Status:<br>  PCRMCL01SL-HB: Online<br>  PCRMCL02SL-HB: Online<br><br>Daemon Status:<br>  corosync: active/disabled<br>  pacemaker: active/disabled<br>  pcsd: active/enabled<br><br> Stonith 관련하여 에러가 발생하고 있으며, Stonith cleanup 을 하면 한동안 문제가 없다가 다시 모든 vmware cluster 환경(10세트)에서 동일하게 발생합니다.<br><br>아래는 문제가 발생했던 클러스터 노드의 /var/log/messages 일부를 발췌하였습니다.<br><br>================================================================================<br><br>[root@PCRMCL01SL:/root] cat /var/log/messages<br>...<br>Mar  6 02:40:44 PCRMCL01SL stonith-ng[4003]:  notice: Child process 89443 performing action 'monitor' timed out with signal 15<br>Mar  6 02:40:44 PCRMCL01SL stonith-ng[4003]:  notice: Operation 'monitor' [89443] for device 'vmware_stonith2' returned: -62 (Timer expired)<br>Mar  6 02:40:44 PCRMCL01SL stonith-ng[4003]: warning: vmware_stonith2:89443 [ /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:769: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html ]<br>Mar  6 02:40:44 PCRMCL01SL stonith-ng[4003]: warning: vmware_stonith2:89443 [   InsecureRequestWarning) ]<br>Mar  6 02:40:44 PCRMCL01SL crmd[4007]:   error: Operation vmware_stonith2_monitor_60000: Timed Out (node=PCRMCL01SL-HB, call=67, timeout=20000ms)<br>Mar  6 02:40:44 PCRMCL01SL crmd[4007]:  notice: Operation vmware_stonith2_stop_0: ok (node=PCRMCL01SL-HB, call=69, rc=0, cib-update=60, confirmed=true)<br>Mar  6 02:40:53 PCRMCL01SL crmd[4007]:  notice: Operation vmware_stonith2_start_0: ok (node=PCRMCL01SL-HB, call=70, rc=0, cib-update=61, confirmed=true)<br><br>================================================================================<br><br>[root@PCRMCL02SL:/root] cat /var/log/messages<br>...<br>Mar  5 21:31:00 PCRMCL02SL stonith-ng[42485]:  notice: Child process 28965 performing action 'monitor' timed out with signal 15<br>Mar  5 21:31:00 PCRMCL02SL stonith-ng[42485]:  notice: Operation 'monitor' [28965] for device 'vmware_stonith1' returned: -62 (Timer expired)<br>Mar  5 21:31:00 PCRMCL02SL stonith-ng[42485]: warning: vmware_stonith1:28965 [ /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:769: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html ]<br>Mar  5 21:31:00 PCRMCL02SL stonith-ng[42485]: warning: vmware_stonith1:28965 [   InsecureRequestWarning) ]<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:   error: Operation vmware_stonith1_monitor_60000: Timed Out (node=PCRMCL02SL-HB, call=84, timeout=20000ms)<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: State transition S_IDLE -&gt; S_POLICY_ENGINE [ input=I_PE_CALC cause=C_FSA_INTERNAL origin=abort_transition_graph ]<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]: warning: Processing failed op monitor for vmware_stonith1 on PCRMCL02SL-HB: unknown error (1)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]:  notice: Recover vmware_stonith1#011(Started PCRMCL02SL-HB)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]:  notice: Calculated Transition 240: /var/lib/pacemaker/pengine/pe-input-85.bz2<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]: warning: Processing failed op monitor for vmware_stonith1 on PCRMCL02SL-HB: unknown error (1)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]: warning: Forcing vmware_stonith1 away from PCRMCL02SL-HB after 3 failures (max=3)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]:  notice: Stop    vmware_stonith1#011(PCRMCL02SL-HB)<br>Mar  5 21:31:00 PCRMCL02SL pengine[42488]:  notice: Calculated Transition 241: /var/lib/pacemaker/pengine/pe-input-86.bz2<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: Initiating action 9: stop vmware_stonith1_stop_0 on PCRMCL02SL-HB (local)<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: Operation vmware_stonith1_stop_0: ok (node=PCRMCL02SL-HB, call=86, rc=0, cib-update=393, confirmed=true)<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: Transition 241 (Complete=2, Pending=0, Fired=0, Skipped=0, Incomplete=0, Source=/var/lib/pacemaker/pengine/pe-input-86.bz2): Complete<br>Mar  5 21:31:00 PCRMCL02SL crmd[42489]:  notice: State transition S_TRANSITION_ENGINE -&gt; S_IDLE [ input=I_TE_SUCCESS cause=C_FSA_INTERNAL origin=notify_crmd ]<br><br>================================================================================<br><br>[root@PIASCL01SL:/root] cat /var/log/messages<br>...<br>Mar  6 00:37:00 PIASCL01SL crmd[14457]:  notice: State transition S_IDLE -&gt; S_POLICY_ENGINE [ input=I_PE_CALC cause=C_FSA_INTERNAL origin=abort_transition_graph ]<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]: warning: Processing failed op monitor for vmware_stonith1 on PIASCL02SL-HB: unknown error (1)<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]:  notice: Recover vmware_stonith1#011(Started PIASCL02SL-HB)<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]:  notice: Calculated Transition 142: /var/lib/pacemaker/pengine/pe-input-136.bz2<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]: warning: Processing failed op monitor for vmware_stonith1 on PIASCL02SL-HB: unknown error (1)<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]:  notice: Recover vmware_stonith1#011(Started PIASCL02SL-HB)<br>Mar  6 00:37:00 PIASCL01SL pengine[14456]:  notice: Calculated Transition 143: /var/lib/pacemaker/pengine/pe-input-137.bz2<br>Mar  6 00:37:00 PIASCL01SL crmd[14457]:  notice: Initiating action 5: stop vmware_stonith1_stop_0 on PIASCL02SL-HB<br>Mar  6 00:37:00 PIASCL01SL crmd[14457]:  notice: Initiating action 40: start vmware_stonith1_start_0 on PIASCL02SL-HB<br><br>================================================================================<br>[root@PBISAL01SL:/root] cat /var/log/messages<br>...<br>Mar  6 07:51:00 PBISAL01SL stonith-ng[4654]:  notice: Child process 108707 performing action 'monitor' timed out with signal 15<br>Mar  6 07:51:00 PBISAL01SL stonith-ng[4654]:  notice: Operation 'monitor' [108707] for device 'vmware_stonith2' returned: -62 (Timer expired)<br>Mar  6 07:51:00 PBISAL01SL stonith-ng[4654]: warning: vmware_stonith2:108707 [ /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:769: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html ]<br>Mar  6 07:51:00 PBISAL01SL stonith-ng[4654]: warning: vmware_stonith2:108707 [   InsecureRequestWarning) ]<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:   error: Operation vmware_stonith2_monitor_60000: Timed Out (node=PBISAL01SL-HB, call=63, timeout=20000ms)<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:  notice: State transition S_IDLE -&gt; S_POLICY_ENGINE [ input=I_PE_CALC cause=C_FSA_INTERNAL origin=abort_transition_graph ]<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]: warning: Processing failed op monitor for vmware_stonith2 on PBISAL01SL-HB: unknown error (1)<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]:  notice: Recover vmware_stonith2#011(Started PBISAL01SL-HB)<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]:  notice: Calculated Transition 171: /var/lib/pacemaker/pengine/pe-input-92.bz2<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]: warning: Processing failed op monitor for vmware_stonith2 on PBISAL01SL-HB: unknown error (1)<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]:  notice: Recover vmware_stonith2#011(Started PBISAL01SL-HB)<br>Mar  6 07:51:00 PBISAL01SL pengine[4657]:  notice: Calculated Transition 172: /var/lib/pacemaker/pengine/pe-input-93.bz2<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:  notice: Initiating action 4: stop vmware_stonith2_stop_0 on PBISAL01SL-HB (local)<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:  notice: Operation vmware_stonith2_stop_0: ok (node=PBISAL01SL-HB, call=65, rc=0, cib-update=274, confirmed=true)<br>Mar  6 07:51:00 PBISAL01SL crmd[4658]:  notice: Initiating action 42: start vmware_stonith2_start_0 on PBISAL01SL-HB (local)<br><br>================================================================================<br><br>초기 VMWare Stonith 구성할 때 사용한 명령어는 아래와 같습니다.<br><br># fence_vmware_soap -a 14.XX.YYY.1 -l c6031043@domain.com -p password \<br>   --ssl --ssl-insecure --action list | egrep '(PCRMCL02SL|PCRMCL01SL)'<br>PCRMCL01SL,423ccf9d-9940-ac84-9a2f-403ad8608627<br>PCRMCL02SL,423c3b19-b829-10d9-716f-d12fe99cb5ad<br><br># pcs stonith create vmware_stonith1 fence_vmware_soap params ipaddr=&quot;14.XX.YYY.1&quot;<br>   login=&quot;c6031043@domain.com&quot; passwd='password' ssl=&quot;1&quot; ssl_insecure=&quot;1&quot; <br>   action=&quot;reboot&quot; port=&quot;PCRMCL01SL&quot; pcmk_host_list=&quot;node01-hb&quot; delay=5<br><br># pcs stonith create vmware_stonith2 fence_vmware_soap params ipaddr=&quot;14.XX.YYY.1&quot;<br>   login=&quot;c6031043@domain.com&quot; passwd='password' ssl=&quot;1&quot; ssl_insecure=&quot;1&quot;<br>   action=&quot;reboot&quot; port=&quot;PCRMCL02SL&quot; pcmk_host_list=&quot;node02-hb&quot;</environment><periodicityOfIssue>VMWare 기반 Pacemaker 를 구성할 때 위에서 사용한 옵션에 대한 검증이 필요할 것 같습니다.<br><br>그리고 이와 같은 환경에서 유사한 에러 해결에 대한 솔루션 확인 부탁 드립니다.<br><br>감사합니다.</periodicityOfIssue><cep>false</cep></case>