======================<br><b>생성계정 : jimin kim</b><br><b>생성날짜 : 2018-03-05T10:05:06Z</b><br><b>마지막 답변자 : GSS Tools</b><br><b>마지막 수정 일자 : 2018-04-01T10:02:10Z</b><br><b>id : 500A000000ZsA24IAF</b><br>======================<br><br><b><font size=15>
제목  : docer image down 관련 문의
</font></b><br><br>======================<br><b>사전문의<br></b><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>docker 기능 관련해서 테스트를 수행 중입니다.<br><br>테스트 수행 중<br><br>docker image down 관련해서 문의를 드리려고 합니다.<br><br>docker를 이용해서 image를 pull 하기 위해서는 docker registry 서버에서 image를 가져와야하는 것 처럼 매뉴얼에 나와있는데<br><br>혹시 외부 network이 안되는 상황에서는 docker image를 어떤 식으로 사용이 가능한지 문의를 드리려고 합니다.<br><br>감사합니다.<br>=======================<br><b>상태 : Closed</b><br><b>제품명  : Red Hat Enterprise Linux</b><br><b>버젼  : 7.4</b><br><b>타입  : Other</b><br><b>계정 번호  : 5251314</b><br><b>심각도  : 4 (Low)</b><br><hostname>DOCKER01SL</hostname><br><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-03-16T04:48:26Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-03-16T04:48:26Z</b><br><br>안녕하세요, 김지민 선임님<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>Q1) 추가 문의드릴 점은 source to image의 package의 역할<br>A1) source to image ( S2I 로 알려짐 ) 는 소스코드로부터 docker 이미지 building 하는 toolkit 이자 workflow 입니다. S2i 는 Docker container<br>        로 소스코드를 주입하고, 실행을 위해 소스코드를 container 에게 준비를 시키므로서 ready to run 이미지들을 제작합니다.<br>        self-assembling builder image 를 생성하므로서, 특정버전의 runtime 환경에서 Docker 이미지를 사용것과 동일하게 build 환경버전을 만들어<br>       서 버전을 제어하도록 할 수 있도록 하는 도구입니다.<br><br>        좀 더 자세한 내용은 아래의 presention [1] 을 활용하시길 바랍니다.<br><br>Q2) docker 기반 container 서비스를 x86 물리 장비에서 구동할 때 H/W의 BIOS 설정(ex. VT 등) 등에서 주의할 점이 있는지 문의드립니다.<br>       (Getting Started with Containers guide 문서에는 H/W 설정에 대한 부분은 따로 없는 것 같아서 문의드립니다.)<br>A2) Container 서비스는 커널내에 namespace 를 통해서 격리된 각각의 container 들이 자원들을 나누어 사용하는 구조라서 가상화에서<br>        필요한 VT 설정이 필요없을것입니다. 그래서, 일반적인 x86_64 컴퓨팅 환경에서 무리없이 사용이 가능할것입니다. 다만, workload 를<br>        고려해서 CPU, Memory, Storage, Network 의 수 또는 양을 고려해서 하드웨어를 선정하는것이 바람직한 방법일것입니다.<br><br><br>[ 참고문서 ]<br><br>[1] OpenShift Commons Briefing #43: Source-to-Image Deep Dive<br>- https://www.youtube.com/watch?v=flI6zx9wH6M<br><br>감사합니다.<br><br><publishedDate>2018-03-16T04:48:26Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000KtSSEIA3"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-03-15T06:54:16Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-03-15T06:54:15Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>빠른 답변 감사드립니다.<br><br>아래와 같이 알려주신 rpm은 모두 설치를 하였습니다.<br>이제 방화벽 심의가 끝나면 방화벽이 오픈되게 되는데요. <br><br>그 전에<br><br>추가 문의드릴 점은 source to image의 package의 역할과<br>docker 기반 container 서비스를 x86 물리 장비에서 구동할 때 <br><br>H/W의 BIOS 설정(ex. VT 등) 등에서 주의할 점이 있는지 문의드립니다.<br>(Getting Started with Containers guide 문서에는 H/W 설정에 대한 부분은 따로 없는 것 같아서 문의드립니다.)<br><br>guide와 검색을 하면서 구성을 하다보니 문의 사항이 많아져서 죄송합니다.<br><br> - package 설치 확인 내역<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i source-to-image<br>source-to-image-1.0.9-1.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep PyYAML<br>PyYAML-3.10-11.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep atomic-registries<br>atomic-registries-1.20.1-9.git436cf5d.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep audit-libs-python<br>audit-libs-python-2.7.6-3.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep checkpolicy<br>checkpolicy-2.5-4.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep container-selinux<br>container-selinux-2.36-1.gitff95335.el7.noarch<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep container-storage-setup<br>container-storage-setup-0.8.0-3.git1d27ecf.el7.noarch<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep docker<br>docker-rhel-push-plugin-1.12.6-71.git3e8e77d.el7.x86_64<br>docker-client-1.12.6-71.git3e8e77d.el7.x86_64<br>docker-distribution-2.6.2-1.git48294d9.el7.x86_64<br>docker-common-1.12.6-71.git3e8e77d.el7.x86_64<br>docker-1.12.6-71.git3e8e77d.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i git<br>=== 생략 ===<br>git-1.8.3.1-11.el7.x86_64<br>=== 생략 ===<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i libgnome-keyring<br>libgnome-keyring-3.12.0-1.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i libseccomp<br>libseccomp-2.3.1-3.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i libsemanage-python<br>libsemanage-python-2.5-8.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i libyaml<br>libyaml-0.1.4-11.el7_0.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i oci-register-machine<br>oci-register-machine-0-3.14.gitcd1e331.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i oci-systemd-hook<br>oci-systemd-hook-0.1.14-2.git9b1e622.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i oci-umount<br>oci-umount-2.3.1-2.gitbf16163.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i perl-Error<br>perl-Error-0.17020-2.el7.noarch<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i perl-Git<br>perl-Git-1.8.3.1-11.el7.noarch<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i perl-TermReadKey<br>perl-TermReadKey-2.30-20.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep policycoreutils-python<br>policycoreutils-python-2.5-17.1.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep python-IPy<br>python-IPy-0.75-6.el7.noarch<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i python-pytom<br>python-pytoml-0.1.14-1.git7dea353.el7.noarch<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i setools-libs<br>setools-libs-3.3.8-1.1.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i skopeo-containers<br>skopeo-containers-0.1.27-3.dev.git14245f2.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i subscription-manager<br>subscription-manager-gui-1.19.21-1.el7.x86_64<br>subscription-manager-1.19.21-1.el7.x86_64<br>subscription-manager-initial-setup-addon-1.19.21-1.el7.x86_64<br>subscription-manager-plugin-container-1.19.21-1.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i audit<br>audit-libs-2.7.6-3.el7.x86_64<br>audit-2.7.6-3.el7.x86_64<br>audit-libs-python-2.7.6-3.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i libsemanage<br>libsemanage-2.5-8.el7.x86_64<br>libsemanage-python-2.5-8.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i policycoreutils<br>policycoreutils-2.5-17.1.el7.x86_64<br>policycoreutils-python-2.5-17.1.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i python-rhsm<br>python-rhsm-certificates-1.19.9-1.el7.x86_64<br>python-rhsm-1.19.9-1.el7.x86_64<br>root@TDKREL01SL /sysadmin/work/180312 # rpm -qa | grep -i subscription-manager<br>subscription-manager-gui-1.19.21-1.el7.x86_64<br>subscription-manager-1.19.21-1.el7.x86_64<br>subscription-manager-initial-setup-addon-1.19.21-1.el7.x86_64<br>subscription-manager-plugin-container-1.19.21-1.el7.x86_64<br><br><publishedDate>2018-03-15T06:54:15Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000KtSMLIA3"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-03-15T06:45:54Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-03-15T06:45:53Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>아래의 절차대로 진행하시면 default docker registry 용 스토리지의 위치를 변경하실 수 있습니다.<br><br>1) 먼저 docker 서비스를 정지합니다.<br>$ systemctl stop docker<br><br>2) 만약, 이미 docker registry 로 사용중인 디렉토리가 마운트중이라면 umount 를 합니다.<br>$ umount /var/lib/docker/volumes<br><br>3) 기존에 존재하는 이미지나 관련된 파일들이 있다면 모두 삭제하거나 다른곳으로 이동합니다.<br>$ rm -rf /var/lib/docker/*<br><br>4) docker storage 를 reset 시킵니다.<br>$ docker-storage-setup --reset<br><br>5) docker storage 의 실제경로를 아래와 같이 변경합니다.<br>$ vi /etc/sysconfig/docker-storage-setup<br>DEVS=/dev/mapper/LLTDKRIMGVG-container_image      # --&gt; 이와 같이 변경합니다.<br>VG=docker-vg<br><br>6) docer storage 를 다시 구성합니다.<br>$ docker-storage-setup<br><br>7) docker storage 의 디렉토리 위치를 -g 옵션을 넣어서 default 값으로 변경시킵니다.<br>$ vi /etc/sysconfig/docker<br><br>From<br>OPTIONS='--selinux-enabled --log-driver=journald --signature-verification=false'<br><br>To<br>OPTIONS='--selinux-enabled --log-driver=journald --signature-verification=false -g /container_image'<br><br>8) docker 서비스를 시작하고, 상태를 확인합니다.<br>$ systemctl start docker<br>$ systemctl status docker<br><br>9) docker info 명령어로 기본 디렉토리가 변경되었는지 확인해봅니다.<br>$ docker info<br>~~ 생략<br>Root Dir: /container_image<br>~~ 생략<br><br>감사합니다.<br><br><publishedDate>2018-03-15T06:45:53Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Kt7PDIAZ"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-03-14T05:04:26Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-03-14T05:04:26Z</b><br><br>안녕하세요<br><br>상암센터 김지민 선임입니다.<br><br>삼성생명 docker private registry 서버 구축 중인데요.<br><br>한가지 문의드릴 점은 /var/lib/docker~에 기본적으로 pull 해온 image가 저장된다고 하는데<br><br>아래와 같이 /container_image 라는 파일시스템에 image를 저장해 놓고 다른 docker 서비스를 하는 서버들에서 pull하도록 구성하려고 하는데요.<br><br>/container_image로 docker private registry 서버의 image 저장 경로를 변경하는 방법에 대해서 문의드리려고 합니다.<br><br>root@TDKREL01SL / # df -Ph<br>Filesystem                               Size  Used Avail Use% Mounted on<br>/dev/sda2                                 30G  3.7G   27G  13% /<br>devtmpfs                                 3.7G     0  3.7G   0% /dev<br>tmpfs                                    3.7G     0  3.7G   0% /dev/shm<br>tmpfs                                    3.7G  8.8M  3.7G   1% /run<br>tmpfs                                    3.7G     0  3.7G   0% /sys/fs/cgroup<br>/dev/sda3                                 20G  215M   20G   2% /var<br>/dev/sda5                                 10G   33M   10G   1% /home<br>/dev/sda1                               1014M  176M  839M  18% /boot<br>/dev/mapper/vg0-sysadmin                  20G  3.9G   17G  20% /sysadmin<br>tmpfs                                    748M     0  748M   0% /run/user/0<br><br>/dev/mapper/LLTDKRIMGVG-container_image   30G   33M   30G   1% /container_image ← image를 저장하고 싶은 파일시스템<br><br><publishedDate>2018-03-14T05:04:26Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LuIxjIAF"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-03-12T08:40:25Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-03-12T08:40:25Z</b><br><br>안녕하세요, 김지민 선임님<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>먼저, 피드백 주셔서 감사드리며 말씀하신대로 Private Docker Registry 를 구축하시는 동안에 본 케이스는 대기상태로 남겨두도록 하겠으며,<br>작업 이후 또는 그동안에 저희 Red Hat 의 지원이 필요하시다면 연락주십시오.<br><br>감사합니다.<br><br><publishedDate>2018-03-12T08:40:25Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LuIZeIAN"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-03-12T08:11:53Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-03-12T08:11:53Z</b><br><br>안녕하세요 <br><br>상세한 답변 감사드립니다.<br><br>private regstry 서버 구축 후 <br>방화벽 결재 후 pull을 시도한 후 답변 드리겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-03-12T08:11:53Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000Lu9H1IAJ"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-03-10T09:01:40Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-03-12T00:33:26Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>지금과 같이 docker-distribution 을 설치하고 시작하셨다면 아래의 절차대로 docker registry 에서 방화벽을 열고,<br>docker  pull 명령어로 container 이미지를 조회해서 가져오고, docker push 명령어로 이미지를 docker registry<br>로 넣은 다음 내부의 다른 시스템 중 container 서비스로 사용할 시스템에서 docker registry 로부터 container <br>이미지를 push 해서 가져오실 수 있습니다.<br><br>1) docker-distribution 서비스 활성화 및 시작 / 방화벽 설정<br>$ sysetmctl enable docker-distribution<br>$ systemctl start docker-distribution<br>$ systemctl status docker-distribution<br>$ firewall-cmd --zone=public --add-port=5000/tcp<br>$ firewall-cmd --zone=public --add-port=5000/tcp --permanent<br>4 firewall-cmd --zone=public --list-ports<br><br><br>2) 가져올 docker 이미지 찾기<br>$ docker search python<br>INDEX        NAME                                                    DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED<br>~~ 생략           <br>redhat.com   registry.access.redhat.com/rhscl/python-34-rhel7        Python 3.4 platform for building and runni...   0                    <br>redhat.com   registry.access.redhat.com/rhscl/python-35-rhel7        Python 3.5 platform for building and runni...   0                    <br>redhat.com   registry.access.redhat.com/rhscl/python-36-rhel7        Python 3.6 available as docker container i...   0                    <br>redhat.com   registry.access.redhat.com/rhscl/s2i-base-rhel7         Base image delivers all the essential libr...   0                    <br><br><br>3) python-36-rhel7 이미지를 외부 registry 로부터 가져오기<br>$ docker pull registry.access.redhat.com/rhscl/python-36-rhel7<br>Using default tag: latest<br>Trying to pull repository registry.access.redhat.com/rhscl/python-36-rhel7<br>latest: Pulling from registry.access.redhat.com/rhscl/python-36-rhel7<br>c181936b24e2: Already exists <br>dab9f87f3be2: Already exists <br>c138a07ca1a0: Already exists <br>f2add50171aa: Already exists <br>03275ed916bb: Pull complete <br>Digest: sha256:d0301db6329a4068ce07031c661b950fe63310555e8baaa9fccd5ee0bac3e698<br>Status: Downloaded newer image for registry.access.redhat.com/rhscl/python-36-rhel7:latest<br><br><br>3) 가져온 이미지 조회하기<br>$ docker images<br>REPOSITORY                                         TAG                 IMAGE ID            CREATED             SIZE<br>python-35-rhel7-app                                latest              35ee325bfdfd        21 hours ago        615 MB<br>&lt;none&gt;                                             &lt;none&gt;              73c182774b69        2 days ago          615 MB<br>registry.access.redhat.com/rhscl/python-36-rhel7   latest              c51072b16b02        8 days ago          620 MB<br>registry.access.redhat.com/rhscl/python-35-rhel7   latest              fcb39c275495        8 days ago          615 MB<br>registry.access.redhat.com/rhel7/rhel              latest              33a3ad89f9ab        9 days ago          196 MB<br>docker.io/registry                                 latest              d1fd7d86a825        8 weeks ago         33.3 MB<br>localhost:5000/hello-world                         latest              f2a91732366c        3 months ago        1.85 kB<br>docker.io/hello-world                              latest              f2a91732366c        3 months ago        1.85 kB<br>docker.io/richxsl/rhel7                            latest              9c7b3825758a        3 years ago         245 MB<br>localhost:5000/my-rhel7                            latest              9c7b3825758a        3 years ago         245 MB<br><br><br>4) Private docker registry 로 push 할 이미지 태그하기<br>$ docker tag &lt; IMAGE ID &gt; localhost:5000/python-36-rhel7<br>--&gt; 위의 IMAGE ID 는 위의 docker images 명령에서 찾으실 수 있습니다.<br><br><br>5) Private docker registry 로 이미지 push 하기<br>$ docker push localhost:5000/python-36-rhel7<br>The push refers to a repository [localhost:5000/python-36-rhel7]<br>ebc95dddd49f: Pushed <br>e94c965fd0a3: Pushed <br>12026208d714: Pushed <br>00e8aa4c7bd6: Pushed <br>0917b91a8a5b: Pushed <br>latest: digest: sha256:cd86cae42bb46feb2b02682d286c1962fc39404273c418e98bd225ad4fc17906 size: 1372<br><br><br>6) 외부 시스템에서 private registry 로부터 이미지 가져오기<br>$ docker pull &lt;private docker registry's ip address&gt;:5000/python-36-rhel7<br><br><br>* 좀 더 자세한 내용은 아래의 참고문서[1]을 활용하십시오.<br><br><br>[ 참고문서 ]<br><br>[1] 1.8.1. Creating a private Docker registry (optional)<br>- https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/getting_started_with_containers/index#creating_a_private_docker_registry_optional<br><br>감사합니다.<br><br><publishedDate>2018-03-10T09:01:40Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LtozzIAB"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-03-09T03:00:20Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-03-09T03:00:20Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다. 가이드 감사드립니다.<br><br>docker-distribution 관련해서 rpm  설치 후 서비스 가동까지 하였는데요.<br>아래와 같이 설치 후 상태를 확인한 상태면 정상으로 확인하면 될까요?<br><br>[root@DOCKER01SL 180305]# rpm -ivh docker-distribution-2.6.2-1.git48294d9.el7.x86_64.rpm<br>warning: docker-distribution-2.6.2-1.git48294d9.el7.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID fd431d51: NOKEY<br>Preparing...                          ################################# [100%]<br>Updating / installing...<br>   1:docker-distribution-2.6.2-1.git48################################# [100%]<br>[root@DOCKER01SL 180305]#<br>[root@DOCKER01SL 180305]#<br>[root@DOCKER01SL 180305]#<br>[root@DOCKER01SL 180305]# rpm -qa | grep -i docker<br>docker-1.12.6-71.git3e8e77d.el7.x86_64<br>docker-rhel-push-plugin-1.12.6-71.git3e8e77d.el7.x86_64<br>docker-client-1.12.6-71.git3e8e77d.el7.x86_64<br>docker-distribution-2.6.2-1.git48294d9.el7.x86_64<br>docker-common-1.12.6-71.git3e8e77d.el7.x86_64<br>[root@DOCKER01SL 180305]# rpm -qi docker-distribution-2.6.2-1.git48294d9.el7.x86_64<br>Name        : docker-distribution<br>Version     : 2.6.2<br>Release     : 1.git48294d9.el7<br>Architecture: x86_64<br>Install Date: Fri 09 Mar 2018 11:58:11 AM KST<br>Group       : Unspecified<br>Size        : 13402194<br>License     : ASL 2.0<br>Signature   : RSA/SHA256, Wed 09 Aug 2017 02:39:30 AM KST, Key ID 199e2f91fd431d51<br>Source RPM  : docker-distribution-2.6.2-1.git48294d9.el7.src.rpm<br>Build Date  : Wed 09 Aug 2017 01:33:30 AM KST<br>Build Host  : x86-020.build.eng.bos.redhat.com<br>Relocations : (not relocatable)<br>Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;<br>Vendor      : Red Hat, Inc.<br>URL         : https://github.com/docker/distribution<br>Summary     : Docker toolset to pack, ship, store, and deliver content<br>Description :<br>Docker toolset to pack, ship, store, and deliver content<br>[root@DOCKER01SL 180305]# systemctl status docker-distribution.service<br>● docker-distribution.service - v2 Registry server for Docker<br>   Loaded: loaded (/usr/lib/systemd/system/docker-distribution.service; disabled; vendor preset: disabled)<br>   Active: inactive (dead)<br><br>Mar 09 11:58:11 DOCKER01SL systemd[1]: [/usr/lib/systemd/system/docker-distribution.service:1...all'<br>Mar 09 11:58:37 DOCKER01SL systemd[1]: [/usr/lib/systemd/system/docker-distribution.service:1...all'<br>Hint: Some lines were ellipsized, use -l to show in full.<br>[root@DOCKER01SL 180305]# systemctl enable docker-distribution.service<br>Created symlink from /etc/systemd/system/multi-user.target.wants/docker-distribution.service to /usr/lib/systemd/system/docker-distribution.service.<br>[root@DOCKER01SL 180305]# systemctl start docker-distribution.service<br>[root@DOCKER01SL 180305]# systemctl status docker-distribution.service<br>● docker-distribution.service - v2 Registry server for Docker<br>   Loaded: loaded (/usr/lib/systemd/system/docker-distribution.service; enabled; vendor preset: disabled)<br>   Active: active (running) since Fri 2018-03-09 11:58:53 KST; 1s ago<br> Main PID: 29246 (registry)<br>   CGroup: /system.slice/docker-distribution.service<br>           mq29246 /usr/bin/registry serve /etc/docker-distribution/registry/config.yml<br><br>Mar 09 11:58:53 DOCKER01SL systemd[1]: Started v2 Registry server for Docker.<br>Mar 09 11:58:53 DOCKER01SL systemd[1]: Starting v2 Registry server for Docker...<br>Mar 09 11:58:53 DOCKER01SL registry[29246]: time=&quot;2018-03-09T11:58:53+09:00&quot; level=warning msg=&quot;N...<br>Mar 09 11:58:53 DOCKER01SL registry[29246]: time=&quot;2018-03-09T11:58:53+09:00&quot; level=info msg=&quot;r...wn&quot;<br>Mar 09 11:58:53 DOCKER01SL registry[29246]: time=&quot;2018-03-09T11:58:53+09:00&quot; level=info msg=&quot;u...wn&quot;<br>Mar 09 11:58:53 DOCKER01SL registry[29246]: time=&quot;2018-03-09T11:58:53+09:00&quot; level=info msg=&quot;l...wn&quot;<br>Mar 09 11:58:53 DOCKER01SL registry[29246]: time=&quot;2018-03-09T11:58:53+09:00&quot; level=info msg=&quot;S...wn&quot;<br>Hint: Some lines were ellipsized, use -l to show in full.<br><br><publishedDate>2018-03-09T03:00:20Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LtVjUIAV"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-03-08T04:11:22Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-03-08T04:31:59Z</b><br><br>안녕하세요, 김지민 선임님<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>올려주신 패키지들은 docker-distribution 을 설치하는데 필요한 요소는 맞습니만, 문서에서 보신것과 같이 source-to-image 패키지도 필요로 할것입니다.<br>또한, 아래의 의존성이 걸린 패키지들은 source-to-image 패키지를 설치할때 repository ( rhel-7-server-rpms, rhel-server-rhscl-7-rpms, rhel-7-server-extras-rpms )<br>들에서 필요로 한 패키지들이오니 반드시 위의 repository 들을 활성화 하셔서 구성시도하시고, 이 동안에 다른 문의사항이 있으시면 저희 Red Hat 으로 다시<br>연락주십시오.<br><br>===================================================================================================================================================================================================================<br> Package                                                         Arch                             Version                                                Repository                                           Size<br>===================================================================================================================================================================================================================<br>Installing:<br> source-to-image                                                 x86_64                           1.0.9-1.el7                                            rhel-server-rhscl-7-rpms                            1.8 M<br>Installing for dependencies:<br> PyYAML                                                          x86_64                           3.10-11.el7                                            rhel-7-server-rpms                                  153 k<br> atomic-registries                                               x86_64                           1:1.22.1-1.gitd36c015.el7                              rhel-7-server-extras-rpms                            35 k<br> audit-libs-python                                               x86_64                           2.7.6-3.el7                                            rhel-7-server-rpms                                   73 k<br> checkpolicy                                                     x86_64                           2.5-4.el7                                              rhel-7-server-rpms                                  290 k<br> container-selinux                                               noarch                           2:2.42-1.gitad8f0f7.el7                                rhel-7-server-extras-rpms                            32 k<br> container-storage-setup                                         noarch                           0.8.0-3.git1d27ecf.el7                                 rhel-7-server-extras-rpms                            33 k<br> docker                                                          x86_64                           2:1.13.1-53.git774336d.el7                             rhel-7-server-extras-rpms                            16 M<br> docker-client                                                   x86_64                           2:1.13.1-53.git774336d.el7                             rhel-7-server-extras-rpms                           3.7 M<br> docker-common                                                   x86_64                           2:1.13.1-53.git774336d.el7                             rhel-7-server-extras-rpms                            86 k<br> docker-rhel-push-plugin                                         x86_64                           2:1.13.1-53.git774336d.el7                             rhel-7-server-extras-rpms                           1.6 M<br> git                                                             x86_64                           1.8.3.1-12.el7_4                                       rhel-7-server-rpms                                  4.4 M<br> libgnome-keyring                                                x86_64                           3.12.0-1.el7                                           rhel-7-server-rpms                                  110 k<br> libseccomp                                                      x86_64                           2.3.1-3.el7                                            rhel-7-server-rpms                                   56 k<br> libsemanage-python                                              x86_64                           2.5-8.el7                                              rhel-7-server-rpms                                  104 k<br> libyaml                                                         x86_64                           0.1.4-11.el7_0                                         rhel-7-server-rpms                                   55 k<br> oci-register-machine                                            x86_64                           1:0-6.git2b44233.el7                                   rhel-7-server-extras-rpms                           1.1 M<br> oci-systemd-hook                                                x86_64                           1:0.1.15-2.gitc04483d.el7                              rhel-7-server-extras-rpms                            33 k<br> oci-umount                                                      x86_64                           2:2.3.3-3.gite3c9055.el7                               rhel-7-server-extras-rpms                            32 k<br> perl-Error                                                      noarch                           1:0.17020-2.el7                                        rhel-7-server-rpms                                   32 k<br> perl-Git                                                        noarch                           1.8.3.1-12.el7_4                                       rhel-7-server-rpms                                   54 k<br> perl-TermReadKey                                                x86_64                           2.30-20.el7                                            rhel-7-server-rpms                                   31 k<br> policycoreutils-python                                          x86_64                           2.5-17.1.el7                                           rhel-7-server-rpms                                  446 k<br> python-IPy                                                      noarch                           0.75-6.el7                                             rhel-7-server-rpms                                   32 k<br> python-pytoml                                                   noarch                           0.1.14-1.git7dea353.el7                                rhel-7-server-extras-rpms                            18 k<br> setools-libs                                                    x86_64                           3.3.8-1.1.el7                                          rhel-7-server-rpms                                  610 k<br> skopeo-containers                                               x86_64                           1:0.1.28-1.git0270e56.el7                              rhel-7-server-extras-rpms                            13 k<br> subscription-manager-plugin-container                           x86_64                           1.19.23-1.el7_4                                        rhel-7-server-rpms                                  197 k<br>Updating for dependencies:<br> audit                                                           x86_64                           2.7.6-3.el7                                            rhel-7-server-rpms                                  242 k<br> audit-libs                                                      x86_64                           2.7.6-3.el7                                            rhel-7-server-rpms                                   96 k<br> libsemanage                                                     x86_64                           2.5-8.el7                                              rhel-7-server-rpms                                  145 k<br> policycoreutils                                                 x86_64                           2.5-17.1.el7                                           rhel-7-server-rpms                                  858 k<br> python-rhsm                                                     x86_64                           1.19.10-1.el7_4                                        rhel-7-server-rpms                                  127 k<br> python-rhsm-certificates                                        x86_64                           1.19.10-1.el7_4                                        rhel-7-server-rpms                                   41 k<br> subscription-manager                                            x86_64                           1.19.23-1.el7_4                                        rhel-7-server-rpms                                  957 k<br><br>Transaction Summary<br>===================================================================================================================================================================================================================<br>Install  1 Package  (+27 Dependent packages)<br>Upgrade             (  7 Dependent packages)<br><br>Total download size: 33 M<br>Is this ok [y/d/N]: <br><br>감사합니다.<br><br><publishedDate>2018-03-08T04:11:22Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LtFAFIA3"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-03-07T09:40:39Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-03-07T09:40:39Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>아래와 같이 설치가 되었으면 서버에서 docker engine 까지는 정상적으로 설치가 된 것으로 보면 될까요?<br><br>redhat의 getting started with dockers 가이드를 활용하였습니다.<br><br>추가로 삼성생명의 경우는 private registry server를 구성예정인데<br>가이드에 보니 docker distribution의 구성이 필요하다고 하여서 아래 패키지를 설치하면 되는지 문의드리려고 합니다.<br><br><br>docker-distribution-2.6.2-1.git48294d9.el7.x86_64.rpm<br><br>[root@DOCKER01SL 180305]# rpm -qa | grep -i docker<br>docker-1.12.6-71.git3e8e77d.el7.x86_64<br>docker-rhel-push-plugin-1.12.6-71.git3e8e77d.el7.x86_64<br>docker-client-1.12.6-71.git3e8e77d.el7.x86_64<br>docker-common-1.12.6-71.git3e8e77d.el7.x86_64<br><br>[root@DOCKER01SL 180305]# docker version<br>Client:<br> Version:         1.12.6<br> API version:     1.24<br> Package version: docker-1.12.6-71.git3e8e77d.el7.x86_64<br> Go version:      go1.8.3<br> Git commit:      3e8e77d/1.12.6<br> Built:           Wed Dec 13 12:18:58 2017<br> OS/Arch:         linux/amd64<br><br>Server:<br> Version:         1.12.6<br> API version:     1.24<br> Package version: docker-1.12.6-71.git3e8e77d.el7.x86_64<br> Go version:      go1.8.3<br> Git commit:      3e8e77d/1.12.6<br> Built:           Wed Dec 13 12:18:58 2017<br> OS/Arch:         linux/amd64<br><br><publishedDate>2018-03-07T09:40:39Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LtAtHIAV"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-03-07T04:31:52Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-03-07T04:31:52Z</b><br><br>안녕하세요<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>Q) 혹시 registry.access.redhat.com  사이트에서 현재 사용하고 있는 local pc로 docker image가 download도 가능한지 문의드립니다.<br>A) 사용하고 계신 PC 에 RHEL 7 이 설치되어 있고, 사용이 가능한 subscription 이 존재한다면 docker login registry.access.redhat.com<br>     이후에 download 가 가능하실 것입니다. 사용방법은 참고문서[2]를 활용하십시오.<br><br>[ 참고문서 ]<br><br>[1]  How is the docker container runtime supported in RHEL 7? <br>- https://access.redhat.com/solutions/1408853<br><br>[2]  Using Red Hat Software Collections Container Images <br>- https://access.redhat.com/articles/1752723<br><br>[3] Using Red Hat Software Collections Container Images<br>- https://access.redhat.com/documentation/en-us/red_hat_software_collections/3/html/using_red_hat_software_collections_container_images/<br><br>감사합니다.<br><br><publishedDate>2018-03-07T04:31:52Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000Lt9qXIAR"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-03-07T01:49:01Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-03-07T01:49:01Z</b><br><br>안녕하세요<br><br>답변 감사드립니다.<br><br>혹시 registry.access.redhat.com  사이트에서 현재 사용하고 있는 local pc로 docker image가 download도 가능한지 문의드립니다.<br><br><publishedDate>2018-03-07T01:49:01Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LsuGZIAZ"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-03-06T08:44:20Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-03-06T08:44:20Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>Q) 알려주신 방법으로 private docker registry를 구성하려면 registry 서버의 경우는 registry.access.redhat.com 과 방화벽만 open 되어 통신이되면 구성이 가능한지 문의드리려고 합니다.<br>A) 네, 그렇습니다. registry.access.redhat.com 으로부터 docker pull 을 하기 위해서는 80,443 port 를 outgoing 할수 있도록 열어야 하지만 registry.access.redhat.com 이 CDN 방식<br>     으로 운영을 하고 있어서 IP 가 바뀌거나 지역마다 다를수가 있습니다. 아직 한국에는 이 서버가 운영되고 있지 않으니 아래의 opendns 에서 registry.access.redhat.com 으로 조회하셔서<br>     APAC 지역의 IP 들을 활용하시길 권장드립니다.<br><br>[ 참고문서 ]<br><br>[1] OpenDNS<br>- https://cachecheck.opendns.com/<br><br>감사합니다.<br><br><publishedDate>2018-03-06T08:44:20Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LssltIAB"><br>======================<br><b>생성계정 : kim, jimin</b><br><b>생성날짜 : 2018-03-06T06:35:58Z</b><br><b>마지막 답변자 : kim, jimin</b><br><b>마지막 수정 일자 : 2018-03-06T06:35:58Z</b><br><br>안녕하세요<br><br>SDS 김지민 선임입니다.<br><br>알려주신 방법으로 private docker registry를 구성하려면<br><br>registry 서버의 경우는 registry.access.redhat.com 과 방화벽만 open 되어 통신이되면 <br><br>구성이 가능한지 문의드리려고 합니다.<br><br>감사합니다.<br><br><publishedDate>2018-03-06T06:35:58Z</publishedDate><createdByType>Customer</createdByType><br>======================<br><comment id="a0aA000000LsqiUIAR"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-03-06T02:33:11Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-03-06T02:33:10Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>아래의 참고문서[1],[2] 에서 설명이 되어 있는것과 같이 docker-distribution 이라는 서비스를 통해서 private docker registry 를 구현하실 수 있습니다.<br>internet 이 연결된 별도의 시스템에서 먼저 docker-distirubtion 를 구성하고 외부의 registry 로부터 container images 들과 동기화 한 뒤에 private<br>네트워크로 이동하여 사용이 가능하실것입니다.<br><br>[ 참고문서 ]<br><br>[1] 1.8.1. Creating a private Docker registry (optional)<br>- https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/getting_started_with_containers/index#creating_a_private_docker_registry_optional<br><br>[2]  How do I setup / install a Docker registry?<br>- https://access.redhat.com/solutions/705273<br><br>감사합니다.<br><br><publishedDate>2018-03-06T02:33:10Z</publishedDate><createdByType>Associate</createdByType><br>======================<br><comment id="a0aA000000LsqROIAZ"><br>======================<br><b>생성계정 : Moon, Jack, Jong Young</b><br><b>생성날짜 : 2018-03-06T02:01:38Z</b><br><b>마지막 답변자 : Moon, Jack, Jong Young</b><br><b>마지막 수정 일자 : 2018-03-06T02:01:38Z</b><br><br>안녕하세요,<br><br>Red Hat Global Support Service 를 이용해주셔서 감사합니다.<br><br>현재 올려주신 문의내용을 자세히 확인하고 있는중이며, 곧 관련된 내용을 업데이트 하도록 하겠습니다.<br><br>감사합니다.<br><br><publishedDate>2018-03-06T02:01:38Z</publishedDate><createdByType>Associate</createdByType><br>======================<br></comments><br>